(function(){const n=document.createElement("link").relList;if(n&&n.supports&&n.supports("modulepreload"))return;for(const o of document.querySelectorAll('link[rel="modulepreload"]'))i(o);new MutationObserver(o=>{for(const l of o)if(l.type==="childList")for(const s of l.addedNodes)s.tagName==="LINK"&&s.rel==="modulepreload"&&i(s)}).observe(document,{childList:!0,subtree:!0});function r(o){const l={};return o.integrity&&(l.integrity=o.integrity),o.referrerPolicy&&(l.referrerPolicy=o.referrerPolicy),o.crossOrigin==="use-credentials"?l.credentials="include":o.crossOrigin==="anonymous"?l.credentials="omit":l.credentials="same-origin",l}function i(o){if(o.ep)return;o.ep=!0;const l=r(o);fetch(o.href,l)}})();function uf(t){return t&&t.__esModule&&Object.prototype.hasOwnProperty.call(t,"default")?t.default:t}var Fu={exports:{}},ys={},Ou={exports:{}},Ot={};/**
 * @license React
 * react.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var nl=Symbol.for("react.element"),pf=Symbol.for("react.portal"),xf=Symbol.for("react.fragment"),ff=Symbol.for("react.strict_mode"),hf=Symbol.for("react.profiler"),gf=Symbol.for("react.provider"),mf=Symbol.for("react.context"),yf=Symbol.for("react.forward_ref"),bf=Symbol.for("react.suspense"),jf=Symbol.for("react.memo"),vf=Symbol.for("react.lazy"),uc=Symbol.iterator;function kf(t){return t===null||typeof t!="object"?null:(t=uc&&t[uc]||t["@@iterator"],typeof t=="function"?t:null)}var Vu={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},Yu=Object.assign,Gu={};function co(t,n,r){this.props=t,this.context=n,this.refs=Gu,this.updater=r||Vu}co.prototype.isReactComponent={};co.prototype.setState=function(t,n){if(typeof t!="object"&&typeof t!="function"&&t!=null)throw Error("setState(...): takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,t,n,"setState")};co.prototype.forceUpdate=function(t){this.updater.enqueueForceUpdate(this,t,"forceUpdate")};function Uu(){}Uu.prototype=co.prototype;function cd(t,n,r){this.props=t,this.context=n,this.refs=Gu,this.updater=r||Vu}var ud=cd.prototype=new Uu;ud.constructor=cd;Yu(ud,co.prototype);ud.isPureReactComponent=!0;var pc=Array.isArray,qu=Object.prototype.hasOwnProperty,pd={current:null},Qu={key:!0,ref:!0,__self:!0,__source:!0};function Zu(t,n,r){var i,o={},l=null,s=null;if(n!=null)for(i in n.ref!==void 0&&(s=n.ref),n.key!==void 0&&(l=""+n.key),n)qu.call(n,i)&&!Qu.hasOwnProperty(i)&&(o[i]=n[i]);var u=arguments.length-2;if(u===1)o.children=r;else if(1<u){for(var d=Array(u),h=0;h<u;h++)d[h]=arguments[h+2];o.children=d}if(t&&t.defaultProps)for(i in u=t.defaultProps,u)o[i]===void 0&&(o[i]=u[i]);return{$$typeof:nl,type:t,key:l,ref:s,props:o,_owner:pd.current}}function wf(t,n){return{$$typeof:nl,type:t.type,key:n,ref:t.ref,props:t.props,_owner:t._owner}}function xd(t){return typeof t=="object"&&t!==null&&t.$$typeof===nl}function Sf(t){var n={"=":"=0",":":"=2"};return"$"+t.replace(/[=:]/g,function(r){return n[r]})}var xc=/\/+/g;function Is(t,n){return typeof t=="object"&&t!==null&&t.key!=null?Sf(""+t.key):n.toString(36)}function Ml(t,n,r,i,o){var l=typeof t;(l==="undefined"||l==="boolean")&&(t=null);var s=!1;if(t===null)s=!0;else switch(l){case"string":case"number":s=!0;break;case"object":switch(t.$$typeof){case nl:case pf:s=!0}}if(s)return s=t,o=o(s),t=i===""?"."+Is(s,0):i,pc(o)?(r="",t!=null&&(r=t.replace(xc,"$&/")+"/"),Ml(o,n,r,"",function(h){return h})):o!=null&&(xd(o)&&(o=wf(o,r+(!o.key||s&&s.key===o.key?"":(""+o.key).replace(xc,"$&/")+"/")+t)),n.push(o)),1;if(s=0,i=i===""?".":i+":",pc(t))for(var u=0;u<t.length;u++){l=t[u];var d=i+Is(l,u);s+=Ml(l,n,r,d,o)}else if(d=kf(t),typeof d=="function")for(t=d.call(t),u=0;!(l=t.next()).done;)l=l.value,d=i+Is(l,u++),s+=Ml(l,n,r,d,o);else if(l==="object")throw n=String(t),Error("Objects are not valid as a React child (found: "+(n==="[object Object]"?"object with keys {"+Object.keys(t).join(", ")+"}":n)+"). If you meant to render a collection of children, use an array instead.");return s}function ul(t,n,r){if(t==null)return t;var i=[],o=0;return Ml(t,i,"","",function(l){return n.call(r,l,o++)}),i}function Cf(t){if(t._status===-1){var n=t._result;n=n(),n.then(function(r){(t._status===0||t._status===-1)&&(t._status=1,t._result=r)},function(r){(t._status===0||t._status===-1)&&(t._status=2,t._result=r)}),t._status===-1&&(t._status=0,t._result=n)}if(t._status===1)return t._result.default;throw t._result}var er={current:null},Il={transition:null},zf={ReactCurrentDispatcher:er,ReactCurrentBatchConfig:Il,ReactCurrentOwner:pd};function Xu(){throw Error("act(...) is not supported in production builds of React.")}Ot.Children={map:ul,forEach:function(t,n,r){ul(t,function(){n.apply(this,arguments)},r)},count:function(t){var n=0;return ul(t,function(){n++}),n},toArray:function(t){return ul(t,function(n){return n})||[]},only:function(t){if(!xd(t))throw Error("React.Children.only expected to receive a single React element child.");return t}};Ot.Component=co;Ot.Fragment=xf;Ot.Profiler=hf;Ot.PureComponent=cd;Ot.StrictMode=ff;Ot.Suspense=bf;Ot.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=zf;Ot.act=Xu;Ot.cloneElement=function(t,n,r){if(t==null)throw Error("React.cloneElement(...): The argument must be a React element, but you passed "+t+".");var i=Yu({},t.props),o=t.key,l=t.ref,s=t._owner;if(n!=null){if(n.ref!==void 0&&(l=n.ref,s=pd.current),n.key!==void 0&&(o=""+n.key),t.type&&t.type.defaultProps)var u=t.type.defaultProps;for(d in n)qu.call(n,d)&&!Qu.hasOwnProperty(d)&&(i[d]=n[d]===void 0&&u!==void 0?u[d]:n[d])}var d=arguments.length-2;if(d===1)i.children=r;else if(1<d){u=Array(d);for(var h=0;h<d;h++)u[h]=arguments[h+2];i.children=u}return{$$typeof:nl,type:t.type,key:o,ref:l,props:i,_owner:s}};Ot.createContext=function(t){return t={$$typeof:mf,_currentValue:t,_currentValue2:t,_threadCount:0,Provider:null,Consumer:null,_defaultValue:null,_globalName:null},t.Provider={$$typeof:gf,_context:t},t.Consumer=t};Ot.createElement=Zu;Ot.createFactory=function(t){var n=Zu.bind(null,t);return n.type=t,n};Ot.createRef=function(){return{current:null}};Ot.forwardRef=function(t){return{$$typeof:yf,render:t}};Ot.isValidElement=xd;Ot.lazy=function(t){return{$$typeof:vf,_payload:{_status:-1,_result:t},_init:Cf}};Ot.memo=function(t,n){return{$$typeof:jf,type:t,compare:n===void 0?null:n}};Ot.startTransition=function(t){var n=Il.transition;Il.transition={};try{t()}finally{Il.transition=n}};Ot.unstable_act=Xu;Ot.useCallback=function(t,n){return er.current.useCallback(t,n)};Ot.useContext=function(t){return er.current.useContext(t)};Ot.useDebugValue=function(){};Ot.useDeferredValue=function(t){return er.current.useDeferredValue(t)};Ot.useEffect=function(t,n){return er.current.useEffect(t,n)};Ot.useId=function(){return er.current.useId()};Ot.useImperativeHandle=function(t,n,r){return er.current.useImperativeHandle(t,n,r)};Ot.useInsertionEffect=function(t,n){return er.current.useInsertionEffect(t,n)};Ot.useLayoutEffect=function(t,n){return er.current.useLayoutEffect(t,n)};Ot.useMemo=function(t,n){return er.current.useMemo(t,n)};Ot.useReducer=function(t,n,r){return er.current.useReducer(t,n,r)};Ot.useRef=function(t){return er.current.useRef(t)};Ot.useState=function(t){return er.current.useState(t)};Ot.useSyncExternalStore=function(t,n,r){return er.current.useSyncExternalStore(t,n,r)};Ot.useTransition=function(){return er.current.useTransition()};Ot.version="18.3.1";Ou.exports=Ot;var a=Ou.exports;const Bf=uf(a);/**
 * @license React
 * react-jsx-runtime.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Tf=a,Lf=Symbol.for("react.element"),Wf=Symbol.for("react.fragment"),Nf=Object.prototype.hasOwnProperty,Rf=Tf.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,Df={key:!0,ref:!0,__self:!0,__source:!0};function Ju(t,n,r){var i,o={},l=null,s=null;r!==void 0&&(l=""+r),n.key!==void 0&&(l=""+n.key),n.ref!==void 0&&(s=n.ref);for(i in n)Nf.call(n,i)&&!Df.hasOwnProperty(i)&&(o[i]=n[i]);if(t&&t.defaultProps)for(i in n=t.defaultProps,n)o[i]===void 0&&(o[i]=n[i]);return{$$typeof:Lf,type:t,key:l,ref:s,props:o,_owner:Rf.current}}ys.Fragment=Wf;ys.jsx=Ju;ys.jsxs=Ju;Fu.exports=ys;var e=Fu.exports,ga={},ep={exports:{}},fr={},tp={exports:{}},np={};/**
 * @license React
 * scheduler.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */(function(t){function n(P,se){var fe=P.length;P.push(se);e:for(;0<fe;){var ve=fe-1>>>1,Pe=P[ve];if(0<o(Pe,se))P[ve]=se,P[fe]=Pe,fe=ve;else break e}}function r(P){return P.length===0?null:P[0]}function i(P){if(P.length===0)return null;var se=P[0],fe=P.pop();if(fe!==se){P[0]=fe;e:for(var ve=0,Pe=P.length,bt=Pe>>>1;ve<bt;){var lt=2*(ve+1)-1,be=P[lt],Me=lt+1,et=P[Me];if(0>o(be,fe))Me<Pe&&0>o(et,be)?(P[ve]=et,P[Me]=fe,ve=Me):(P[ve]=be,P[lt]=fe,ve=lt);else if(Me<Pe&&0>o(et,fe))P[ve]=et,P[Me]=fe,ve=Me;else break e}}return se}function o(P,se){var fe=P.sortIndex-se.sortIndex;return fe!==0?fe:P.id-se.id}if(typeof performance=="object"&&typeof performance.now=="function"){var l=performance;t.unstable_now=function(){return l.now()}}else{var s=Date,u=s.now();t.unstable_now=function(){return s.now()-u}}var d=[],h=[],C=1,k=null,S=3,B=!1,m=!1,I=!1,F=typeof setTimeout=="function"?setTimeout:null,y=typeof clearTimeout=="function"?clearTimeout:null,f=typeof setImmediate<"u"?setImmediate:null;typeof navigator<"u"&&navigator.scheduling!==void 0&&navigator.scheduling.isInputPending!==void 0&&navigator.scheduling.isInputPending.bind(navigator.scheduling);function b(P){for(var se=r(h);se!==null;){if(se.callback===null)i(h);else if(se.startTime<=P)i(h),se.sortIndex=se.expirationTime,n(d,se);else break;se=r(h)}}function D(P){if(I=!1,b(P),!m)if(r(d)!==null)m=!0,ft(q);else{var se=r(h);se!==null&&ze(D,se.startTime-P)}}function q(P,se){m=!1,I&&(I=!1,y(M),M=-1),B=!0;var fe=S;try{for(b(se),k=r(d);k!==null&&(!(k.expirationTime>se)||P&&!Oe());){var ve=k.callback;if(typeof ve=="function"){k.callback=null,S=k.priorityLevel;var Pe=ve(k.expirationTime<=se);se=t.unstable_now(),typeof Pe=="function"?k.callback=Pe:k===r(d)&&i(d),b(se)}else i(d);k=r(d)}if(k!==null)var bt=!0;else{var lt=r(h);lt!==null&&ze(D,lt.startTime-se),bt=!1}return bt}finally{k=null,S=fe,B=!1}}var V=!1,ie=null,M=-1,re=5,ce=-1;function Oe(){return!(t.unstable_now()-ce<re)}function Re(){if(ie!==null){var P=t.unstable_now();ce=P;var se=!0;try{se=ie(!0,P)}finally{se?_e():(V=!1,ie=null)}}else V=!1}var _e;if(typeof f=="function")_e=function(){f(Re)};else if(typeof MessageChannel<"u"){var xt=new MessageChannel,De=xt.port2;xt.port1.onmessage=Re,_e=function(){De.postMessage(null)}}else _e=function(){F(Re,0)};function ft(P){ie=P,V||(V=!0,_e())}function ze(P,se){M=F(function(){P(t.unstable_now())},se)}t.unstable_IdlePriority=5,t.unstable_ImmediatePriority=1,t.unstable_LowPriority=4,t.unstable_NormalPriority=3,t.unstable_Profiling=null,t.unstable_UserBlockingPriority=2,t.unstable_cancelCallback=function(P){P.callback=null},t.unstable_continueExecution=function(){m||B||(m=!0,ft(q))},t.unstable_forceFrameRate=function(P){0>P||125<P?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):re=0<P?Math.floor(1e3/P):5},t.unstable_getCurrentPriorityLevel=function(){return S},t.unstable_getFirstCallbackNode=function(){return r(d)},t.unstable_next=function(P){switch(S){case 1:case 2:case 3:var se=3;break;default:se=S}var fe=S;S=se;try{return P()}finally{S=fe}},t.unstable_pauseExecution=function(){},t.unstable_requestPaint=function(){},t.unstable_runWithPriority=function(P,se){switch(P){case 1:case 2:case 3:case 4:case 5:break;default:P=3}var fe=S;S=P;try{return se()}finally{S=fe}},t.unstable_scheduleCallback=function(P,se,fe){var ve=t.unstable_now();switch(typeof fe=="object"&&fe!==null?(fe=fe.delay,fe=typeof fe=="number"&&0<fe?ve+fe:ve):fe=ve,P){case 1:var Pe=-1;break;case 2:Pe=250;break;case 5:Pe=1073741823;break;case 4:Pe=1e4;break;default:Pe=5e3}return Pe=fe+Pe,P={id:C++,callback:se,priorityLevel:P,startTime:fe,expirationTime:Pe,sortIndex:-1},fe>ve?(P.sortIndex=fe,n(h,P),r(d)===null&&P===r(h)&&(I?(y(M),M=-1):I=!0,ze(D,fe-ve))):(P.sortIndex=Pe,n(d,P),m||B||(m=!0,ft(q))),P},t.unstable_shouldYield=Oe,t.unstable_wrapCallback=function(P){var se=S;return function(){var fe=S;S=se;try{return P.apply(this,arguments)}finally{S=fe}}}})(np);tp.exports=np;var Mf=tp.exports;/**
 * @license React
 * react-dom.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var If=a,xr=Mf;function Ie(t){for(var n="https://reactjs.org/docs/error-decoder.html?invariant="+t,r=1;r<arguments.length;r++)n+="&args[]="+encodeURIComponent(arguments[r]);return"Minified React error #"+t+"; visit "+n+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}var rp=new Set,Po={};function Bi(t,n){eo(t,n),eo(t+"Capture",n)}function eo(t,n){for(Po[t]=n,t=0;t<n.length;t++)rp.add(n[t])}var _r=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),ma=Object.prototype.hasOwnProperty,Af=/^[:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD][:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\-.0-9\u00B7\u0300-\u036F\u203F-\u2040]*$/,fc={},hc={};function Ef(t){return ma.call(hc,t)?!0:ma.call(fc,t)?!1:Af.test(t)?hc[t]=!0:(fc[t]=!0,!1)}function $f(t,n,r,i){if(r!==null&&r.type===0)return!1;switch(typeof n){case"function":case"symbol":return!0;case"boolean":return i?!1:r!==null?!r.acceptsBooleans:(t=t.toLowerCase().slice(0,5),t!=="data-"&&t!=="aria-");default:return!1}}function Pf(t,n,r,i){if(n===null||typeof n>"u"||$f(t,n,r,i))return!0;if(i)return!1;if(r!==null)switch(r.type){case 3:return!n;case 4:return n===!1;case 5:return isNaN(n);case 6:return isNaN(n)||1>n}return!1}function tr(t,n,r,i,o,l,s){this.acceptsBooleans=n===2||n===3||n===4,this.attributeName=i,this.attributeNamespace=o,this.mustUseProperty=r,this.propertyName=t,this.type=n,this.sanitizeURL=l,this.removeEmptyString=s}var Yn={};"children dangerouslySetInnerHTML defaultValue defaultChecked innerHTML suppressContentEditableWarning suppressHydrationWarning style".split(" ").forEach(function(t){Yn[t]=new tr(t,0,!1,t,null,!1,!1)});[["acceptCharset","accept-charset"],["className","class"],["htmlFor","for"],["httpEquiv","http-equiv"]].forEach(function(t){var n=t[0];Yn[n]=new tr(n,1,!1,t[1],null,!1,!1)});["contentEditable","draggable","spellCheck","value"].forEach(function(t){Yn[t]=new tr(t,2,!1,t.toLowerCase(),null,!1,!1)});["autoReverse","externalResourcesRequired","focusable","preserveAlpha"].forEach(function(t){Yn[t]=new tr(t,2,!1,t,null,!1,!1)});"allowFullScreen async autoFocus autoPlay controls default defer disabled disablePictureInPicture disableRemotePlayback formNoValidate hidden loop noModule noValidate open playsInline readOnly required reversed scoped seamless itemScope".split(" ").forEach(function(t){Yn[t]=new tr(t,3,!1,t.toLowerCase(),null,!1,!1)});["checked","multiple","muted","selected"].forEach(function(t){Yn[t]=new tr(t,3,!0,t,null,!1,!1)});["capture","download"].forEach(function(t){Yn[t]=new tr(t,4,!1,t,null,!1,!1)});["cols","rows","size","span"].forEach(function(t){Yn[t]=new tr(t,6,!1,t,null,!1,!1)});["rowSpan","start"].forEach(function(t){Yn[t]=new tr(t,5,!1,t.toLowerCase(),null,!1,!1)});var fd=/[\-:]([a-z])/g;function hd(t){return t[1].toUpperCase()}"accent-height alignment-baseline arabic-form baseline-shift cap-height clip-path clip-rule color-interpolation color-interpolation-filters color-profile color-rendering dominant-baseline enable-background fill-opacity fill-rule flood-color flood-opacity font-family font-size font-size-adjust font-stretch font-style font-variant font-weight glyph-name glyph-orientation-horizontal glyph-orientation-vertical horiz-adv-x horiz-origin-x image-rendering letter-spacing lighting-color marker-end marker-mid marker-start overline-position overline-thickness paint-order panose-1 pointer-events rendering-intent shape-rendering stop-color stop-opacity strikethrough-position strikethrough-thickness stroke-dasharray stroke-dashoffset stroke-linecap stroke-linejoin stroke-miterlimit stroke-opacity stroke-width text-anchor text-decoration text-rendering underline-position underline-thickness unicode-bidi unicode-range units-per-em v-alphabetic v-hanging v-ideographic v-mathematical vector-effect vert-adv-y vert-origin-x vert-origin-y word-spacing writing-mode xmlns:xlink x-height".split(" ").forEach(function(t){var n=t.replace(fd,hd);Yn[n]=new tr(n,1,!1,t,null,!1,!1)});"xlink:actuate xlink:arcrole xlink:role xlink:show xlink:title xlink:type".split(" ").forEach(function(t){var n=t.replace(fd,hd);Yn[n]=new tr(n,1,!1,t,"http://www.w3.org/1999/xlink",!1,!1)});["xml:base","xml:lang","xml:space"].forEach(function(t){var n=t.replace(fd,hd);Yn[n]=new tr(n,1,!1,t,"http://www.w3.org/XML/1998/namespace",!1,!1)});["tabIndex","crossOrigin"].forEach(function(t){Yn[t]=new tr(t,1,!1,t.toLowerCase(),null,!1,!1)});Yn.xlinkHref=new tr("xlinkHref",1,!1,"xlink:href","http://www.w3.org/1999/xlink",!0,!1);["src","href","action","formAction"].forEach(function(t){Yn[t]=new tr(t,1,!1,t.toLowerCase(),null,!0,!0)});function gd(t,n,r,i){var o=Yn.hasOwnProperty(n)?Yn[n]:null;(o!==null?o.type!==0:i||!(2<n.length)||n[0]!=="o"&&n[0]!=="O"||n[1]!=="n"&&n[1]!=="N")&&(Pf(n,r,o,i)&&(r=null),i||o===null?Ef(n)&&(r===null?t.removeAttribute(n):t.setAttribute(n,""+r)):o.mustUseProperty?t[o.propertyName]=r===null?o.type===3?!1:"":r:(n=o.attributeName,i=o.attributeNamespace,r===null?t.removeAttribute(n):(o=o.type,r=o===3||o===4&&r===!0?"":""+r,i?t.setAttributeNS(i,n,r):t.setAttribute(n,r))))}var Vr=If.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED,pl=Symbol.for("react.element"),Di=Symbol.for("react.portal"),Mi=Symbol.for("react.fragment"),md=Symbol.for("react.strict_mode"),ya=Symbol.for("react.profiler"),ip=Symbol.for("react.provider"),op=Symbol.for("react.context"),yd=Symbol.for("react.forward_ref"),ba=Symbol.for("react.suspense"),ja=Symbol.for("react.suspense_list"),bd=Symbol.for("react.memo"),Gr=Symbol.for("react.lazy"),lp=Symbol.for("react.offscreen"),gc=Symbol.iterator;function fo(t){return t===null||typeof t!="object"?null:(t=gc&&t[gc]||t["@@iterator"],typeof t=="function"?t:null)}var Sn=Object.assign,As;function Co(t){if(As===void 0)try{throw Error()}catch(r){var n=r.stack.trim().match(/\n( *(at )?)/);As=n&&n[1]||""}return`
`+As+t}var Es=!1;function $s(t,n){if(!t||Es)return"";Es=!0;var r=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{if(n)if(n=function(){throw Error()},Object.defineProperty(n.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(n,[])}catch(h){var i=h}Reflect.construct(t,[],n)}else{try{n.call()}catch(h){i=h}t.call(n.prototype)}else{try{throw Error()}catch(h){i=h}t()}}catch(h){if(h&&i&&typeof h.stack=="string"){for(var o=h.stack.split(`
`),l=i.stack.split(`
`),s=o.length-1,u=l.length-1;1<=s&&0<=u&&o[s]!==l[u];)u--;for(;1<=s&&0<=u;s--,u--)if(o[s]!==l[u]){if(s!==1||u!==1)do if(s--,u--,0>u||o[s]!==l[u]){var d=`
`+o[s].replace(" at new "," at ");return t.displayName&&d.includes("<anonymous>")&&(d=d.replace("<anonymous>",t.displayName)),d}while(1<=s&&0<=u);break}}}finally{Es=!1,Error.prepareStackTrace=r}return(t=t?t.displayName||t.name:"")?Co(t):""}function Kf(t){switch(t.tag){case 5:return Co(t.type);case 16:return Co("Lazy");case 13:return Co("Suspense");case 19:return Co("SuspenseList");case 0:case 2:case 15:return t=$s(t.type,!1),t;case 11:return t=$s(t.type.render,!1),t;case 1:return t=$s(t.type,!0),t;default:return""}}function va(t){if(t==null)return null;if(typeof t=="function")return t.displayName||t.name||null;if(typeof t=="string")return t;switch(t){case Mi:return"Fragment";case Di:return"Portal";case ya:return"Profiler";case md:return"StrictMode";case ba:return"Suspense";case ja:return"SuspenseList"}if(typeof t=="object")switch(t.$$typeof){case op:return(t.displayName||"Context")+".Consumer";case ip:return(t._context.displayName||"Context")+".Provider";case yd:var n=t.render;return t=t.displayName,t||(t=n.displayName||n.name||"",t=t!==""?"ForwardRef("+t+")":"ForwardRef"),t;case bd:return n=t.displayName||null,n!==null?n:va(t.type)||"Memo";case Gr:n=t._payload,t=t._init;try{return va(t(n))}catch{}}return null}function _f(t){var n=t.type;switch(t.tag){case 24:return"Cache";case 9:return(n.displayName||"Context")+".Consumer";case 10:return(n._context.displayName||"Context")+".Provider";case 18:return"DehydratedFragment";case 11:return t=n.render,t=t.displayName||t.name||"",n.displayName||(t!==""?"ForwardRef("+t+")":"ForwardRef");case 7:return"Fragment";case 5:return n;case 4:return"Portal";case 3:return"Root";case 6:return"Text";case 16:return va(n);case 8:return n===md?"StrictMode":"Mode";case 22:return"Offscreen";case 12:return"Profiler";case 21:return"Scope";case 13:return"Suspense";case 19:return"SuspenseList";case 25:return"TracingMarker";case 1:case 0:case 17:case 2:case 14:case 15:if(typeof n=="function")return n.displayName||n.name||null;if(typeof n=="string")return n}return null}function si(t){switch(typeof t){case"boolean":case"number":case"string":case"undefined":return t;case"object":return t;default:return""}}function sp(t){var n=t.type;return(t=t.nodeName)&&t.toLowerCase()==="input"&&(n==="checkbox"||n==="radio")}function Hf(t){var n=sp(t)?"checked":"value",r=Object.getOwnPropertyDescriptor(t.constructor.prototype,n),i=""+t[n];if(!t.hasOwnProperty(n)&&typeof r<"u"&&typeof r.get=="function"&&typeof r.set=="function"){var o=r.get,l=r.set;return Object.defineProperty(t,n,{configurable:!0,get:function(){return o.call(this)},set:function(s){i=""+s,l.call(this,s)}}),Object.defineProperty(t,n,{enumerable:r.enumerable}),{getValue:function(){return i},setValue:function(s){i=""+s},stopTracking:function(){t._valueTracker=null,delete t[n]}}}}function xl(t){t._valueTracker||(t._valueTracker=Hf(t))}function ap(t){if(!t)return!1;var n=t._valueTracker;if(!n)return!0;var r=n.getValue(),i="";return t&&(i=sp(t)?t.checked?"true":"false":t.value),t=i,t!==r?(n.setValue(t),!0):!1}function Ul(t){if(t=t||(typeof document<"u"?document:void 0),typeof t>"u")return null;try{return t.activeElement||t.body}catch{return t.body}}function ka(t,n){var r=n.checked;return Sn({},n,{defaultChecked:void 0,defaultValue:void 0,value:void 0,checked:r??t._wrapperState.initialChecked})}function mc(t,n){var r=n.defaultValue==null?"":n.defaultValue,i=n.checked!=null?n.checked:n.defaultChecked;r=si(n.value!=null?n.value:r),t._wrapperState={initialChecked:i,initialValue:r,controlled:n.type==="checkbox"||n.type==="radio"?n.checked!=null:n.value!=null}}function dp(t,n){n=n.checked,n!=null&&gd(t,"checked",n,!1)}function wa(t,n){dp(t,n);var r=si(n.value),i=n.type;if(r!=null)i==="number"?(r===0&&t.value===""||t.value!=r)&&(t.value=""+r):t.value!==""+r&&(t.value=""+r);else if(i==="submit"||i==="reset"){t.removeAttribute("value");return}n.hasOwnProperty("value")?Sa(t,n.type,r):n.hasOwnProperty("defaultValue")&&Sa(t,n.type,si(n.defaultValue)),n.checked==null&&n.defaultChecked!=null&&(t.defaultChecked=!!n.defaultChecked)}function yc(t,n,r){if(n.hasOwnProperty("value")||n.hasOwnProperty("defaultValue")){var i=n.type;if(!(i!=="submit"&&i!=="reset"||n.value!==void 0&&n.value!==null))return;n=""+t._wrapperState.initialValue,r||n===t.value||(t.value=n),t.defaultValue=n}r=t.name,r!==""&&(t.name=""),t.defaultChecked=!!t._wrapperState.initialChecked,r!==""&&(t.name=r)}function Sa(t,n,r){(n!=="number"||Ul(t.ownerDocument)!==t)&&(r==null?t.defaultValue=""+t._wrapperState.initialValue:t.defaultValue!==""+r&&(t.defaultValue=""+r))}var zo=Array.isArray;function Gi(t,n,r,i){if(t=t.options,n){n={};for(var o=0;o<r.length;o++)n["$"+r[o]]=!0;for(r=0;r<t.length;r++)o=n.hasOwnProperty("$"+t[r].value),t[r].selected!==o&&(t[r].selected=o),o&&i&&(t[r].defaultSelected=!0)}else{for(r=""+si(r),n=null,o=0;o<t.length;o++){if(t[o].value===r){t[o].selected=!0,i&&(t[o].defaultSelected=!0);return}n!==null||t[o].disabled||(n=t[o])}n!==null&&(n.selected=!0)}}function Ca(t,n){if(n.dangerouslySetInnerHTML!=null)throw Error(Ie(91));return Sn({},n,{value:void 0,defaultValue:void 0,children:""+t._wrapperState.initialValue})}function bc(t,n){var r=n.value;if(r==null){if(r=n.children,n=n.defaultValue,r!=null){if(n!=null)throw Error(Ie(92));if(zo(r)){if(1<r.length)throw Error(Ie(93));r=r[0]}n=r}n==null&&(n=""),r=n}t._wrapperState={initialValue:si(r)}}function cp(t,n){var r=si(n.value),i=si(n.defaultValue);r!=null&&(r=""+r,r!==t.value&&(t.value=r),n.defaultValue==null&&t.defaultValue!==r&&(t.defaultValue=r)),i!=null&&(t.defaultValue=""+i)}function jc(t){var n=t.textContent;n===t._wrapperState.initialValue&&n!==""&&n!==null&&(t.value=n)}function up(t){switch(t){case"svg":return"http://www.w3.org/2000/svg";case"math":return"http://www.w3.org/1998/Math/MathML";default:return"http://www.w3.org/1999/xhtml"}}function za(t,n){return t==null||t==="http://www.w3.org/1999/xhtml"?up(n):t==="http://www.w3.org/2000/svg"&&n==="foreignObject"?"http://www.w3.org/1999/xhtml":t}var fl,pp=function(t){return typeof MSApp<"u"&&MSApp.execUnsafeLocalFunction?function(n,r,i,o){MSApp.execUnsafeLocalFunction(function(){return t(n,r,i,o)})}:t}(function(t,n){if(t.namespaceURI!=="http://www.w3.org/2000/svg"||"innerHTML"in t)t.innerHTML=n;else{for(fl=fl||document.createElement("div"),fl.innerHTML="<svg>"+n.valueOf().toString()+"</svg>",n=fl.firstChild;t.firstChild;)t.removeChild(t.firstChild);for(;n.firstChild;)t.appendChild(n.firstChild)}});function Ko(t,n){if(n){var r=t.firstChild;if(r&&r===t.lastChild&&r.nodeType===3){r.nodeValue=n;return}}t.textContent=n}var Lo={animationIterationCount:!0,aspectRatio:!0,borderImageOutset:!0,borderImageSlice:!0,borderImageWidth:!0,boxFlex:!0,boxFlexGroup:!0,boxOrdinalGroup:!0,columnCount:!0,columns:!0,flex:!0,flexGrow:!0,flexPositive:!0,flexShrink:!0,flexNegative:!0,flexOrder:!0,gridArea:!0,gridRow:!0,gridRowEnd:!0,gridRowSpan:!0,gridRowStart:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnSpan:!0,gridColumnStart:!0,fontWeight:!0,lineClamp:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,tabSize:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,floodOpacity:!0,stopOpacity:!0,strokeDasharray:!0,strokeDashoffset:!0,strokeMiterlimit:!0,strokeOpacity:!0,strokeWidth:!0},Ff=["Webkit","ms","Moz","O"];Object.keys(Lo).forEach(function(t){Ff.forEach(function(n){n=n+t.charAt(0).toUpperCase()+t.substring(1),Lo[n]=Lo[t]})});function xp(t,n,r){return n==null||typeof n=="boolean"||n===""?"":r||typeof n!="number"||n===0||Lo.hasOwnProperty(t)&&Lo[t]?(""+n).trim():n+"px"}function fp(t,n){t=t.style;for(var r in n)if(n.hasOwnProperty(r)){var i=r.indexOf("--")===0,o=xp(r,n[r],i);r==="float"&&(r="cssFloat"),i?t.setProperty(r,o):t[r]=o}}var Of=Sn({menuitem:!0},{area:!0,base:!0,br:!0,col:!0,embed:!0,hr:!0,img:!0,input:!0,keygen:!0,link:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0});function Ba(t,n){if(n){if(Of[t]&&(n.children!=null||n.dangerouslySetInnerHTML!=null))throw Error(Ie(137,t));if(n.dangerouslySetInnerHTML!=null){if(n.children!=null)throw Error(Ie(60));if(typeof n.dangerouslySetInnerHTML!="object"||!("__html"in n.dangerouslySetInnerHTML))throw Error(Ie(61))}if(n.style!=null&&typeof n.style!="object")throw Error(Ie(62))}}function Ta(t,n){if(t.indexOf("-")===-1)return typeof n.is=="string";switch(t){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var La=null;function jd(t){return t=t.target||t.srcElement||window,t.correspondingUseElement&&(t=t.correspondingUseElement),t.nodeType===3?t.parentNode:t}var Wa=null,Ui=null,qi=null;function vc(t){if(t=ol(t)){if(typeof Wa!="function")throw Error(Ie(280));var n=t.stateNode;n&&(n=ws(n),Wa(t.stateNode,t.type,n))}}function hp(t){Ui?qi?qi.push(t):qi=[t]:Ui=t}function gp(){if(Ui){var t=Ui,n=qi;if(qi=Ui=null,vc(t),n)for(t=0;t<n.length;t++)vc(n[t])}}function mp(t,n){return t(n)}function yp(){}var Ps=!1;function bp(t,n,r){if(Ps)return t(n,r);Ps=!0;try{return mp(t,n,r)}finally{Ps=!1,(Ui!==null||qi!==null)&&(yp(),gp())}}function _o(t,n){var r=t.stateNode;if(r===null)return null;var i=ws(r);if(i===null)return null;r=i[n];e:switch(n){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(i=!i.disabled)||(t=t.type,i=!(t==="button"||t==="input"||t==="select"||t==="textarea")),t=!i;break e;default:t=!1}if(t)return null;if(r&&typeof r!="function")throw Error(Ie(231,n,typeof r));return r}var Na=!1;if(_r)try{var ho={};Object.defineProperty(ho,"passive",{get:function(){Na=!0}}),window.addEventListener("test",ho,ho),window.removeEventListener("test",ho,ho)}catch{Na=!1}function Vf(t,n,r,i,o,l,s,u,d){var h=Array.prototype.slice.call(arguments,3);try{n.apply(r,h)}catch(C){this.onError(C)}}var Wo=!1,ql=null,Ql=!1,Ra=null,Yf={onError:function(t){Wo=!0,ql=t}};function Gf(t,n,r,i,o,l,s,u,d){Wo=!1,ql=null,Vf.apply(Yf,arguments)}function Uf(t,n,r,i,o,l,s,u,d){if(Gf.apply(this,arguments),Wo){if(Wo){var h=ql;Wo=!1,ql=null}else throw Error(Ie(198));Ql||(Ql=!0,Ra=h)}}function Ti(t){var n=t,r=t;if(t.alternate)for(;n.return;)n=n.return;else{t=n;do n=t,n.flags&4098&&(r=n.return),t=n.return;while(t)}return n.tag===3?r:null}function jp(t){if(t.tag===13){var n=t.memoizedState;if(n===null&&(t=t.alternate,t!==null&&(n=t.memoizedState)),n!==null)return n.dehydrated}return null}function kc(t){if(Ti(t)!==t)throw Error(Ie(188))}function qf(t){var n=t.alternate;if(!n){if(n=Ti(t),n===null)throw Error(Ie(188));return n!==t?null:t}for(var r=t,i=n;;){var o=r.return;if(o===null)break;var l=o.alternate;if(l===null){if(i=o.return,i!==null){r=i;continue}break}if(o.child===l.child){for(l=o.child;l;){if(l===r)return kc(o),t;if(l===i)return kc(o),n;l=l.sibling}throw Error(Ie(188))}if(r.return!==i.return)r=o,i=l;else{for(var s=!1,u=o.child;u;){if(u===r){s=!0,r=o,i=l;break}if(u===i){s=!0,i=o,r=l;break}u=u.sibling}if(!s){for(u=l.child;u;){if(u===r){s=!0,r=l,i=o;break}if(u===i){s=!0,i=l,r=o;break}u=u.sibling}if(!s)throw Error(Ie(189))}}if(r.alternate!==i)throw Error(Ie(190))}if(r.tag!==3)throw Error(Ie(188));return r.stateNode.current===r?t:n}function vp(t){return t=qf(t),t!==null?kp(t):null}function kp(t){if(t.tag===5||t.tag===6)return t;for(t=t.child;t!==null;){var n=kp(t);if(n!==null)return n;t=t.sibling}return null}var wp=xr.unstable_scheduleCallback,wc=xr.unstable_cancelCallback,Qf=xr.unstable_shouldYield,Zf=xr.unstable_requestPaint,Tn=xr.unstable_now,Xf=xr.unstable_getCurrentPriorityLevel,vd=xr.unstable_ImmediatePriority,Sp=xr.unstable_UserBlockingPriority,Zl=xr.unstable_NormalPriority,Jf=xr.unstable_LowPriority,Cp=xr.unstable_IdlePriority,bs=null,Mr=null;function eh(t){if(Mr&&typeof Mr.onCommitFiberRoot=="function")try{Mr.onCommitFiberRoot(bs,t,void 0,(t.current.flags&128)===128)}catch{}}var Tr=Math.clz32?Math.clz32:rh,th=Math.log,nh=Math.LN2;function rh(t){return t>>>=0,t===0?32:31-(th(t)/nh|0)|0}var hl=64,gl=4194304;function Bo(t){switch(t&-t){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return t&4194240;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return t&130023424;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 1073741824;default:return t}}function Xl(t,n){var r=t.pendingLanes;if(r===0)return 0;var i=0,o=t.suspendedLanes,l=t.pingedLanes,s=r&268435455;if(s!==0){var u=s&~o;u!==0?i=Bo(u):(l&=s,l!==0&&(i=Bo(l)))}else s=r&~o,s!==0?i=Bo(s):l!==0&&(i=Bo(l));if(i===0)return 0;if(n!==0&&n!==i&&!(n&o)&&(o=i&-i,l=n&-n,o>=l||o===16&&(l&4194240)!==0))return n;if(i&4&&(i|=r&16),n=t.entangledLanes,n!==0)for(t=t.entanglements,n&=i;0<n;)r=31-Tr(n),o=1<<r,i|=t[r],n&=~o;return i}function ih(t,n){switch(t){case 1:case 2:case 4:return n+250;case 8:case 16:case 32:case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return n+5e3;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return-1;case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function oh(t,n){for(var r=t.suspendedLanes,i=t.pingedLanes,o=t.expirationTimes,l=t.pendingLanes;0<l;){var s=31-Tr(l),u=1<<s,d=o[s];d===-1?(!(u&r)||u&i)&&(o[s]=ih(u,n)):d<=n&&(t.expiredLanes|=u),l&=~u}}function Da(t){return t=t.pendingLanes&-1073741825,t!==0?t:t&1073741824?1073741824:0}function zp(){var t=hl;return hl<<=1,!(hl&4194240)&&(hl=64),t}function Ks(t){for(var n=[],r=0;31>r;r++)n.push(t);return n}function rl(t,n,r){t.pendingLanes|=n,n!==536870912&&(t.suspendedLanes=0,t.pingedLanes=0),t=t.eventTimes,n=31-Tr(n),t[n]=r}function lh(t,n){var r=t.pendingLanes&~n;t.pendingLanes=n,t.suspendedLanes=0,t.pingedLanes=0,t.expiredLanes&=n,t.mutableReadLanes&=n,t.entangledLanes&=n,n=t.entanglements;var i=t.eventTimes;for(t=t.expirationTimes;0<r;){var o=31-Tr(r),l=1<<o;n[o]=0,i[o]=-1,t[o]=-1,r&=~l}}function kd(t,n){var r=t.entangledLanes|=n;for(t=t.entanglements;r;){var i=31-Tr(r),o=1<<i;o&n|t[i]&n&&(t[i]|=n),r&=~o}}var an=0;function Bp(t){return t&=-t,1<t?4<t?t&268435455?16:536870912:4:1}var Tp,wd,Lp,Wp,Np,Ma=!1,ml=[],Jr=null,ei=null,ti=null,Ho=new Map,Fo=new Map,qr=[],sh="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset submit".split(" ");function Sc(t,n){switch(t){case"focusin":case"focusout":Jr=null;break;case"dragenter":case"dragleave":ei=null;break;case"mouseover":case"mouseout":ti=null;break;case"pointerover":case"pointerout":Ho.delete(n.pointerId);break;case"gotpointercapture":case"lostpointercapture":Fo.delete(n.pointerId)}}function go(t,n,r,i,o,l){return t===null||t.nativeEvent!==l?(t={blockedOn:n,domEventName:r,eventSystemFlags:i,nativeEvent:l,targetContainers:[o]},n!==null&&(n=ol(n),n!==null&&wd(n)),t):(t.eventSystemFlags|=i,n=t.targetContainers,o!==null&&n.indexOf(o)===-1&&n.push(o),t)}function ah(t,n,r,i,o){switch(n){case"focusin":return Jr=go(Jr,t,n,r,i,o),!0;case"dragenter":return ei=go(ei,t,n,r,i,o),!0;case"mouseover":return ti=go(ti,t,n,r,i,o),!0;case"pointerover":var l=o.pointerId;return Ho.set(l,go(Ho.get(l)||null,t,n,r,i,o)),!0;case"gotpointercapture":return l=o.pointerId,Fo.set(l,go(Fo.get(l)||null,t,n,r,i,o)),!0}return!1}function Rp(t){var n=gi(t.target);if(n!==null){var r=Ti(n);if(r!==null){if(n=r.tag,n===13){if(n=jp(r),n!==null){t.blockedOn=n,Np(t.priority,function(){Lp(r)});return}}else if(n===3&&r.stateNode.current.memoizedState.isDehydrated){t.blockedOn=r.tag===3?r.stateNode.containerInfo:null;return}}}t.blockedOn=null}function Al(t){if(t.blockedOn!==null)return!1;for(var n=t.targetContainers;0<n.length;){var r=Ia(t.domEventName,t.eventSystemFlags,n[0],t.nativeEvent);if(r===null){r=t.nativeEvent;var i=new r.constructor(r.type,r);La=i,r.target.dispatchEvent(i),La=null}else return n=ol(r),n!==null&&wd(n),t.blockedOn=r,!1;n.shift()}return!0}function Cc(t,n,r){Al(t)&&r.delete(n)}function dh(){Ma=!1,Jr!==null&&Al(Jr)&&(Jr=null),ei!==null&&Al(ei)&&(ei=null),ti!==null&&Al(ti)&&(ti=null),Ho.forEach(Cc),Fo.forEach(Cc)}function mo(t,n){t.blockedOn===n&&(t.blockedOn=null,Ma||(Ma=!0,xr.unstable_scheduleCallback(xr.unstable_NormalPriority,dh)))}function Oo(t){function n(o){return mo(o,t)}if(0<ml.length){mo(ml[0],t);for(var r=1;r<ml.length;r++){var i=ml[r];i.blockedOn===t&&(i.blockedOn=null)}}for(Jr!==null&&mo(Jr,t),ei!==null&&mo(ei,t),ti!==null&&mo(ti,t),Ho.forEach(n),Fo.forEach(n),r=0;r<qr.length;r++)i=qr[r],i.blockedOn===t&&(i.blockedOn=null);for(;0<qr.length&&(r=qr[0],r.blockedOn===null);)Rp(r),r.blockedOn===null&&qr.shift()}var Qi=Vr.ReactCurrentBatchConfig,Jl=!0;function ch(t,n,r,i){var o=an,l=Qi.transition;Qi.transition=null;try{an=1,Sd(t,n,r,i)}finally{an=o,Qi.transition=l}}function uh(t,n,r,i){var o=an,l=Qi.transition;Qi.transition=null;try{an=4,Sd(t,n,r,i)}finally{an=o,Qi.transition=l}}function Sd(t,n,r,i){if(Jl){var o=Ia(t,n,r,i);if(o===null)Qs(t,n,i,es,r),Sc(t,i);else if(ah(o,t,n,r,i))i.stopPropagation();else if(Sc(t,i),n&4&&-1<sh.indexOf(t)){for(;o!==null;){var l=ol(o);if(l!==null&&Tp(l),l=Ia(t,n,r,i),l===null&&Qs(t,n,i,es,r),l===o)break;o=l}o!==null&&i.stopPropagation()}else Qs(t,n,i,null,r)}}var es=null;function Ia(t,n,r,i){if(es=null,t=jd(i),t=gi(t),t!==null)if(n=Ti(t),n===null)t=null;else if(r=n.tag,r===13){if(t=jp(n),t!==null)return t;t=null}else if(r===3){if(n.stateNode.current.memoizedState.isDehydrated)return n.tag===3?n.stateNode.containerInfo:null;t=null}else n!==t&&(t=null);return es=t,null}function Dp(t){switch(t){case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 1;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"toggle":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 4;case"message":switch(Xf()){case vd:return 1;case Sp:return 4;case Zl:case Jf:return 16;case Cp:return 536870912;default:return 16}default:return 16}}var Zr=null,Cd=null,El=null;function Mp(){if(El)return El;var t,n=Cd,r=n.length,i,o="value"in Zr?Zr.value:Zr.textContent,l=o.length;for(t=0;t<r&&n[t]===o[t];t++);var s=r-t;for(i=1;i<=s&&n[r-i]===o[l-i];i++);return El=o.slice(t,1<i?1-i:void 0)}function $l(t){var n=t.keyCode;return"charCode"in t?(t=t.charCode,t===0&&n===13&&(t=13)):t=n,t===10&&(t=13),32<=t||t===13?t:0}function yl(){return!0}function zc(){return!1}function hr(t){function n(r,i,o,l,s){this._reactName=r,this._targetInst=o,this.type=i,this.nativeEvent=l,this.target=s,this.currentTarget=null;for(var u in t)t.hasOwnProperty(u)&&(r=t[u],this[u]=r?r(l):l[u]);return this.isDefaultPrevented=(l.defaultPrevented!=null?l.defaultPrevented:l.returnValue===!1)?yl:zc,this.isPropagationStopped=zc,this}return Sn(n.prototype,{preventDefault:function(){this.defaultPrevented=!0;var r=this.nativeEvent;r&&(r.preventDefault?r.preventDefault():typeof r.returnValue!="unknown"&&(r.returnValue=!1),this.isDefaultPrevented=yl)},stopPropagation:function(){var r=this.nativeEvent;r&&(r.stopPropagation?r.stopPropagation():typeof r.cancelBubble!="unknown"&&(r.cancelBubble=!0),this.isPropagationStopped=yl)},persist:function(){},isPersistent:yl}),n}var uo={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(t){return t.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},zd=hr(uo),il=Sn({},uo,{view:0,detail:0}),ph=hr(il),_s,Hs,yo,js=Sn({},il,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:Bd,button:0,buttons:0,relatedTarget:function(t){return t.relatedTarget===void 0?t.fromElement===t.srcElement?t.toElement:t.fromElement:t.relatedTarget},movementX:function(t){return"movementX"in t?t.movementX:(t!==yo&&(yo&&t.type==="mousemove"?(_s=t.screenX-yo.screenX,Hs=t.screenY-yo.screenY):Hs=_s=0,yo=t),_s)},movementY:function(t){return"movementY"in t?t.movementY:Hs}}),Bc=hr(js),xh=Sn({},js,{dataTransfer:0}),fh=hr(xh),hh=Sn({},il,{relatedTarget:0}),Fs=hr(hh),gh=Sn({},uo,{animationName:0,elapsedTime:0,pseudoElement:0}),mh=hr(gh),yh=Sn({},uo,{clipboardData:function(t){return"clipboardData"in t?t.clipboardData:window.clipboardData}}),bh=hr(yh),jh=Sn({},uo,{data:0}),Tc=hr(jh),vh={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},kh={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},wh={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function Sh(t){var n=this.nativeEvent;return n.getModifierState?n.getModifierState(t):(t=wh[t])?!!n[t]:!1}function Bd(){return Sh}var Ch=Sn({},il,{key:function(t){if(t.key){var n=vh[t.key]||t.key;if(n!=="Unidentified")return n}return t.type==="keypress"?(t=$l(t),t===13?"Enter":String.fromCharCode(t)):t.type==="keydown"||t.type==="keyup"?kh[t.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:Bd,charCode:function(t){return t.type==="keypress"?$l(t):0},keyCode:function(t){return t.type==="keydown"||t.type==="keyup"?t.keyCode:0},which:function(t){return t.type==="keypress"?$l(t):t.type==="keydown"||t.type==="keyup"?t.keyCode:0}}),zh=hr(Ch),Bh=Sn({},js,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),Lc=hr(Bh),Th=Sn({},il,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:Bd}),Lh=hr(Th),Wh=Sn({},uo,{propertyName:0,elapsedTime:0,pseudoElement:0}),Nh=hr(Wh),Rh=Sn({},js,{deltaX:function(t){return"deltaX"in t?t.deltaX:"wheelDeltaX"in t?-t.wheelDeltaX:0},deltaY:function(t){return"deltaY"in t?t.deltaY:"wheelDeltaY"in t?-t.wheelDeltaY:"wheelDelta"in t?-t.wheelDelta:0},deltaZ:0,deltaMode:0}),Dh=hr(Rh),Mh=[9,13,27,32],Td=_r&&"CompositionEvent"in window,No=null;_r&&"documentMode"in document&&(No=document.documentMode);var Ih=_r&&"TextEvent"in window&&!No,Ip=_r&&(!Td||No&&8<No&&11>=No),Wc=" ",Nc=!1;function Ap(t,n){switch(t){case"keyup":return Mh.indexOf(n.keyCode)!==-1;case"keydown":return n.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function Ep(t){return t=t.detail,typeof t=="object"&&"data"in t?t.data:null}var Ii=!1;function Ah(t,n){switch(t){case"compositionend":return Ep(n);case"keypress":return n.which!==32?null:(Nc=!0,Wc);case"textInput":return t=n.data,t===Wc&&Nc?null:t;default:return null}}function Eh(t,n){if(Ii)return t==="compositionend"||!Td&&Ap(t,n)?(t=Mp(),El=Cd=Zr=null,Ii=!1,t):null;switch(t){case"paste":return null;case"keypress":if(!(n.ctrlKey||n.altKey||n.metaKey)||n.ctrlKey&&n.altKey){if(n.char&&1<n.char.length)return n.char;if(n.which)return String.fromCharCode(n.which)}return null;case"compositionend":return Ip&&n.locale!=="ko"?null:n.data;default:return null}}var $h={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function Rc(t){var n=t&&t.nodeName&&t.nodeName.toLowerCase();return n==="input"?!!$h[t.type]:n==="textarea"}function $p(t,n,r,i){hp(i),n=ts(n,"onChange"),0<n.length&&(r=new zd("onChange","change",null,r,i),t.push({event:r,listeners:n}))}var Ro=null,Vo=null;function Ph(t){qp(t,0)}function vs(t){var n=$i(t);if(ap(n))return t}function Kh(t,n){if(t==="change")return n}var Pp=!1;if(_r){var Os;if(_r){var Vs="oninput"in document;if(!Vs){var Dc=document.createElement("div");Dc.setAttribute("oninput","return;"),Vs=typeof Dc.oninput=="function"}Os=Vs}else Os=!1;Pp=Os&&(!document.documentMode||9<document.documentMode)}function Mc(){Ro&&(Ro.detachEvent("onpropertychange",Kp),Vo=Ro=null)}function Kp(t){if(t.propertyName==="value"&&vs(Vo)){var n=[];$p(n,Vo,t,jd(t)),bp(Ph,n)}}function _h(t,n,r){t==="focusin"?(Mc(),Ro=n,Vo=r,Ro.attachEvent("onpropertychange",Kp)):t==="focusout"&&Mc()}function Hh(t){if(t==="selectionchange"||t==="keyup"||t==="keydown")return vs(Vo)}function Fh(t,n){if(t==="click")return vs(n)}function Oh(t,n){if(t==="input"||t==="change")return vs(n)}function Vh(t,n){return t===n&&(t!==0||1/t===1/n)||t!==t&&n!==n}var Wr=typeof Object.is=="function"?Object.is:Vh;function Yo(t,n){if(Wr(t,n))return!0;if(typeof t!="object"||t===null||typeof n!="object"||n===null)return!1;var r=Object.keys(t),i=Object.keys(n);if(r.length!==i.length)return!1;for(i=0;i<r.length;i++){var o=r[i];if(!ma.call(n,o)||!Wr(t[o],n[o]))return!1}return!0}function Ic(t){for(;t&&t.firstChild;)t=t.firstChild;return t}function Ac(t,n){var r=Ic(t);t=0;for(var i;r;){if(r.nodeType===3){if(i=t+r.textContent.length,t<=n&&i>=n)return{node:r,offset:n-t};t=i}e:{for(;r;){if(r.nextSibling){r=r.nextSibling;break e}r=r.parentNode}r=void 0}r=Ic(r)}}function _p(t,n){return t&&n?t===n?!0:t&&t.nodeType===3?!1:n&&n.nodeType===3?_p(t,n.parentNode):"contains"in t?t.contains(n):t.compareDocumentPosition?!!(t.compareDocumentPosition(n)&16):!1:!1}function Hp(){for(var t=window,n=Ul();n instanceof t.HTMLIFrameElement;){try{var r=typeof n.contentWindow.location.href=="string"}catch{r=!1}if(r)t=n.contentWindow;else break;n=Ul(t.document)}return n}function Ld(t){var n=t&&t.nodeName&&t.nodeName.toLowerCase();return n&&(n==="input"&&(t.type==="text"||t.type==="search"||t.type==="tel"||t.type==="url"||t.type==="password")||n==="textarea"||t.contentEditable==="true")}function Yh(t){var n=Hp(),r=t.focusedElem,i=t.selectionRange;if(n!==r&&r&&r.ownerDocument&&_p(r.ownerDocument.documentElement,r)){if(i!==null&&Ld(r)){if(n=i.start,t=i.end,t===void 0&&(t=n),"selectionStart"in r)r.selectionStart=n,r.selectionEnd=Math.min(t,r.value.length);else if(t=(n=r.ownerDocument||document)&&n.defaultView||window,t.getSelection){t=t.getSelection();var o=r.textContent.length,l=Math.min(i.start,o);i=i.end===void 0?l:Math.min(i.end,o),!t.extend&&l>i&&(o=i,i=l,l=o),o=Ac(r,l);var s=Ac(r,i);o&&s&&(t.rangeCount!==1||t.anchorNode!==o.node||t.anchorOffset!==o.offset||t.focusNode!==s.node||t.focusOffset!==s.offset)&&(n=n.createRange(),n.setStart(o.node,o.offset),t.removeAllRanges(),l>i?(t.addRange(n),t.extend(s.node,s.offset)):(n.setEnd(s.node,s.offset),t.addRange(n)))}}for(n=[],t=r;t=t.parentNode;)t.nodeType===1&&n.push({element:t,left:t.scrollLeft,top:t.scrollTop});for(typeof r.focus=="function"&&r.focus(),r=0;r<n.length;r++)t=n[r],t.element.scrollLeft=t.left,t.element.scrollTop=t.top}}var Gh=_r&&"documentMode"in document&&11>=document.documentMode,Ai=null,Aa=null,Do=null,Ea=!1;function Ec(t,n,r){var i=r.window===r?r.document:r.nodeType===9?r:r.ownerDocument;Ea||Ai==null||Ai!==Ul(i)||(i=Ai,"selectionStart"in i&&Ld(i)?i={start:i.selectionStart,end:i.selectionEnd}:(i=(i.ownerDocument&&i.ownerDocument.defaultView||window).getSelection(),i={anchorNode:i.anchorNode,anchorOffset:i.anchorOffset,focusNode:i.focusNode,focusOffset:i.focusOffset}),Do&&Yo(Do,i)||(Do=i,i=ts(Aa,"onSelect"),0<i.length&&(n=new zd("onSelect","select",null,n,r),t.push({event:n,listeners:i}),n.target=Ai)))}function bl(t,n){var r={};return r[t.toLowerCase()]=n.toLowerCase(),r["Webkit"+t]="webkit"+n,r["Moz"+t]="moz"+n,r}var Ei={animationend:bl("Animation","AnimationEnd"),animationiteration:bl("Animation","AnimationIteration"),animationstart:bl("Animation","AnimationStart"),transitionend:bl("Transition","TransitionEnd")},Ys={},Fp={};_r&&(Fp=document.createElement("div").style,"AnimationEvent"in window||(delete Ei.animationend.animation,delete Ei.animationiteration.animation,delete Ei.animationstart.animation),"TransitionEvent"in window||delete Ei.transitionend.transition);function ks(t){if(Ys[t])return Ys[t];if(!Ei[t])return t;var n=Ei[t],r;for(r in n)if(n.hasOwnProperty(r)&&r in Fp)return Ys[t]=n[r];return t}var Op=ks("animationend"),Vp=ks("animationiteration"),Yp=ks("animationstart"),Gp=ks("transitionend"),Up=new Map,$c="abort auxClick cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");function di(t,n){Up.set(t,n),Bi(n,[t])}for(var Gs=0;Gs<$c.length;Gs++){var Us=$c[Gs],Uh=Us.toLowerCase(),qh=Us[0].toUpperCase()+Us.slice(1);di(Uh,"on"+qh)}di(Op,"onAnimationEnd");di(Vp,"onAnimationIteration");di(Yp,"onAnimationStart");di("dblclick","onDoubleClick");di("focusin","onFocus");di("focusout","onBlur");di(Gp,"onTransitionEnd");eo("onMouseEnter",["mouseout","mouseover"]);eo("onMouseLeave",["mouseout","mouseover"]);eo("onPointerEnter",["pointerout","pointerover"]);eo("onPointerLeave",["pointerout","pointerover"]);Bi("onChange","change click focusin focusout input keydown keyup selectionchange".split(" "));Bi("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" "));Bi("onBeforeInput",["compositionend","keypress","textInput","paste"]);Bi("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" "));Bi("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" "));Bi("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var To="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),Qh=new Set("cancel close invalid load scroll toggle".split(" ").concat(To));function Pc(t,n,r){var i=t.type||"unknown-event";t.currentTarget=r,Uf(i,n,void 0,t),t.currentTarget=null}function qp(t,n){n=(n&4)!==0;for(var r=0;r<t.length;r++){var i=t[r],o=i.event;i=i.listeners;e:{var l=void 0;if(n)for(var s=i.length-1;0<=s;s--){var u=i[s],d=u.instance,h=u.currentTarget;if(u=u.listener,d!==l&&o.isPropagationStopped())break e;Pc(o,u,h),l=d}else for(s=0;s<i.length;s++){if(u=i[s],d=u.instance,h=u.currentTarget,u=u.listener,d!==l&&o.isPropagationStopped())break e;Pc(o,u,h),l=d}}}if(Ql)throw t=Ra,Ql=!1,Ra=null,t}function xn(t,n){var r=n[Ha];r===void 0&&(r=n[Ha]=new Set);var i=t+"__bubble";r.has(i)||(Qp(n,t,2,!1),r.add(i))}function qs(t,n,r){var i=0;n&&(i|=4),Qp(r,t,i,n)}var jl="_reactListening"+Math.random().toString(36).slice(2);function Go(t){if(!t[jl]){t[jl]=!0,rp.forEach(function(r){r!=="selectionchange"&&(Qh.has(r)||qs(r,!1,t),qs(r,!0,t))});var n=t.nodeType===9?t:t.ownerDocument;n===null||n[jl]||(n[jl]=!0,qs("selectionchange",!1,n))}}function Qp(t,n,r,i){switch(Dp(n)){case 1:var o=ch;break;case 4:o=uh;break;default:o=Sd}r=o.bind(null,n,r,t),o=void 0,!Na||n!=="touchstart"&&n!=="touchmove"&&n!=="wheel"||(o=!0),i?o!==void 0?t.addEventListener(n,r,{capture:!0,passive:o}):t.addEventListener(n,r,!0):o!==void 0?t.addEventListener(n,r,{passive:o}):t.addEventListener(n,r,!1)}function Qs(t,n,r,i,o){var l=i;if(!(n&1)&&!(n&2)&&i!==null)e:for(;;){if(i===null)return;var s=i.tag;if(s===3||s===4){var u=i.stateNode.containerInfo;if(u===o||u.nodeType===8&&u.parentNode===o)break;if(s===4)for(s=i.return;s!==null;){var d=s.tag;if((d===3||d===4)&&(d=s.stateNode.containerInfo,d===o||d.nodeType===8&&d.parentNode===o))return;s=s.return}for(;u!==null;){if(s=gi(u),s===null)return;if(d=s.tag,d===5||d===6){i=l=s;continue e}u=u.parentNode}}i=i.return}bp(function(){var h=l,C=jd(r),k=[];e:{var S=Up.get(t);if(S!==void 0){var B=zd,m=t;switch(t){case"keypress":if($l(r)===0)break e;case"keydown":case"keyup":B=zh;break;case"focusin":m="focus",B=Fs;break;case"focusout":m="blur",B=Fs;break;case"beforeblur":case"afterblur":B=Fs;break;case"click":if(r.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":B=Bc;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":B=fh;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":B=Lh;break;case Op:case Vp:case Yp:B=mh;break;case Gp:B=Nh;break;case"scroll":B=ph;break;case"wheel":B=Dh;break;case"copy":case"cut":case"paste":B=bh;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":B=Lc}var I=(n&4)!==0,F=!I&&t==="scroll",y=I?S!==null?S+"Capture":null:S;I=[];for(var f=h,b;f!==null;){b=f;var D=b.stateNode;if(b.tag===5&&D!==null&&(b=D,y!==null&&(D=_o(f,y),D!=null&&I.push(Uo(f,D,b)))),F)break;f=f.return}0<I.length&&(S=new B(S,m,null,r,C),k.push({event:S,listeners:I}))}}if(!(n&7)){e:{if(S=t==="mouseover"||t==="pointerover",B=t==="mouseout"||t==="pointerout",S&&r!==La&&(m=r.relatedTarget||r.fromElement)&&(gi(m)||m[Hr]))break e;if((B||S)&&(S=C.window===C?C:(S=C.ownerDocument)?S.defaultView||S.parentWindow:window,B?(m=r.relatedTarget||r.toElement,B=h,m=m?gi(m):null,m!==null&&(F=Ti(m),m!==F||m.tag!==5&&m.tag!==6)&&(m=null)):(B=null,m=h),B!==m)){if(I=Bc,D="onMouseLeave",y="onMouseEnter",f="mouse",(t==="pointerout"||t==="pointerover")&&(I=Lc,D="onPointerLeave",y="onPointerEnter",f="pointer"),F=B==null?S:$i(B),b=m==null?S:$i(m),S=new I(D,f+"leave",B,r,C),S.target=F,S.relatedTarget=b,D=null,gi(C)===h&&(I=new I(y,f+"enter",m,r,C),I.target=b,I.relatedTarget=F,D=I),F=D,B&&m)t:{for(I=B,y=m,f=0,b=I;b;b=Wi(b))f++;for(b=0,D=y;D;D=Wi(D))b++;for(;0<f-b;)I=Wi(I),f--;for(;0<b-f;)y=Wi(y),b--;for(;f--;){if(I===y||y!==null&&I===y.alternate)break t;I=Wi(I),y=Wi(y)}I=null}else I=null;B!==null&&Kc(k,S,B,I,!1),m!==null&&F!==null&&Kc(k,F,m,I,!0)}}e:{if(S=h?$i(h):window,B=S.nodeName&&S.nodeName.toLowerCase(),B==="select"||B==="input"&&S.type==="file")var q=Kh;else if(Rc(S))if(Pp)q=Oh;else{q=Hh;var V=_h}else(B=S.nodeName)&&B.toLowerCase()==="input"&&(S.type==="checkbox"||S.type==="radio")&&(q=Fh);if(q&&(q=q(t,h))){$p(k,q,r,C);break e}V&&V(t,S,h),t==="focusout"&&(V=S._wrapperState)&&V.controlled&&S.type==="number"&&Sa(S,"number",S.value)}switch(V=h?$i(h):window,t){case"focusin":(Rc(V)||V.contentEditable==="true")&&(Ai=V,Aa=h,Do=null);break;case"focusout":Do=Aa=Ai=null;break;case"mousedown":Ea=!0;break;case"contextmenu":case"mouseup":case"dragend":Ea=!1,Ec(k,r,C);break;case"selectionchange":if(Gh)break;case"keydown":case"keyup":Ec(k,r,C)}var ie;if(Td)e:{switch(t){case"compositionstart":var M="onCompositionStart";break e;case"compositionend":M="onCompositionEnd";break e;case"compositionupdate":M="onCompositionUpdate";break e}M=void 0}else Ii?Ap(t,r)&&(M="onCompositionEnd"):t==="keydown"&&r.keyCode===229&&(M="onCompositionStart");M&&(Ip&&r.locale!=="ko"&&(Ii||M!=="onCompositionStart"?M==="onCompositionEnd"&&Ii&&(ie=Mp()):(Zr=C,Cd="value"in Zr?Zr.value:Zr.textContent,Ii=!0)),V=ts(h,M),0<V.length&&(M=new Tc(M,t,null,r,C),k.push({event:M,listeners:V}),ie?M.data=ie:(ie=Ep(r),ie!==null&&(M.data=ie)))),(ie=Ih?Ah(t,r):Eh(t,r))&&(h=ts(h,"onBeforeInput"),0<h.length&&(C=new Tc("onBeforeInput","beforeinput",null,r,C),k.push({event:C,listeners:h}),C.data=ie))}qp(k,n)})}function Uo(t,n,r){return{instance:t,listener:n,currentTarget:r}}function ts(t,n){for(var r=n+"Capture",i=[];t!==null;){var o=t,l=o.stateNode;o.tag===5&&l!==null&&(o=l,l=_o(t,r),l!=null&&i.unshift(Uo(t,l,o)),l=_o(t,n),l!=null&&i.push(Uo(t,l,o))),t=t.return}return i}function Wi(t){if(t===null)return null;do t=t.return;while(t&&t.tag!==5);return t||null}function Kc(t,n,r,i,o){for(var l=n._reactName,s=[];r!==null&&r!==i;){var u=r,d=u.alternate,h=u.stateNode;if(d!==null&&d===i)break;u.tag===5&&h!==null&&(u=h,o?(d=_o(r,l),d!=null&&s.unshift(Uo(r,d,u))):o||(d=_o(r,l),d!=null&&s.push(Uo(r,d,u)))),r=r.return}s.length!==0&&t.push({event:n,listeners:s})}var Zh=/\r\n?/g,Xh=/\u0000|\uFFFD/g;function _c(t){return(typeof t=="string"?t:""+t).replace(Zh,`
`).replace(Xh,"")}function vl(t,n,r){if(n=_c(n),_c(t)!==n&&r)throw Error(Ie(425))}function ns(){}var $a=null,Pa=null;function Ka(t,n){return t==="textarea"||t==="noscript"||typeof n.children=="string"||typeof n.children=="number"||typeof n.dangerouslySetInnerHTML=="object"&&n.dangerouslySetInnerHTML!==null&&n.dangerouslySetInnerHTML.__html!=null}var _a=typeof setTimeout=="function"?setTimeout:void 0,Jh=typeof clearTimeout=="function"?clearTimeout:void 0,Hc=typeof Promise=="function"?Promise:void 0,eg=typeof queueMicrotask=="function"?queueMicrotask:typeof Hc<"u"?function(t){return Hc.resolve(null).then(t).catch(tg)}:_a;function tg(t){setTimeout(function(){throw t})}function Zs(t,n){var r=n,i=0;do{var o=r.nextSibling;if(t.removeChild(r),o&&o.nodeType===8)if(r=o.data,r==="/$"){if(i===0){t.removeChild(o),Oo(n);return}i--}else r!=="$"&&r!=="$?"&&r!=="$!"||i++;r=o}while(r);Oo(n)}function ni(t){for(;t!=null;t=t.nextSibling){var n=t.nodeType;if(n===1||n===3)break;if(n===8){if(n=t.data,n==="$"||n==="$!"||n==="$?")break;if(n==="/$")return null}}return t}function Fc(t){t=t.previousSibling;for(var n=0;t;){if(t.nodeType===8){var r=t.data;if(r==="$"||r==="$!"||r==="$?"){if(n===0)return t;n--}else r==="/$"&&n++}t=t.previousSibling}return null}var po=Math.random().toString(36).slice(2),Dr="__reactFiber$"+po,qo="__reactProps$"+po,Hr="__reactContainer$"+po,Ha="__reactEvents$"+po,ng="__reactListeners$"+po,rg="__reactHandles$"+po;function gi(t){var n=t[Dr];if(n)return n;for(var r=t.parentNode;r;){if(n=r[Hr]||r[Dr]){if(r=n.alternate,n.child!==null||r!==null&&r.child!==null)for(t=Fc(t);t!==null;){if(r=t[Dr])return r;t=Fc(t)}return n}t=r,r=t.parentNode}return null}function ol(t){return t=t[Dr]||t[Hr],!t||t.tag!==5&&t.tag!==6&&t.tag!==13&&t.tag!==3?null:t}function $i(t){if(t.tag===5||t.tag===6)return t.stateNode;throw Error(Ie(33))}function ws(t){return t[qo]||null}var Fa=[],Pi=-1;function ci(t){return{current:t}}function fn(t){0>Pi||(t.current=Fa[Pi],Fa[Pi]=null,Pi--)}function un(t,n){Pi++,Fa[Pi]=t.current,t.current=n}var ai={},Qn=ci(ai),or=ci(!1),vi=ai;function to(t,n){var r=t.type.contextTypes;if(!r)return ai;var i=t.stateNode;if(i&&i.__reactInternalMemoizedUnmaskedChildContext===n)return i.__reactInternalMemoizedMaskedChildContext;var o={},l;for(l in r)o[l]=n[l];return i&&(t=t.stateNode,t.__reactInternalMemoizedUnmaskedChildContext=n,t.__reactInternalMemoizedMaskedChildContext=o),o}function lr(t){return t=t.childContextTypes,t!=null}function rs(){fn(or),fn(Qn)}function Oc(t,n,r){if(Qn.current!==ai)throw Error(Ie(168));un(Qn,n),un(or,r)}function Zp(t,n,r){var i=t.stateNode;if(n=n.childContextTypes,typeof i.getChildContext!="function")return r;i=i.getChildContext();for(var o in i)if(!(o in n))throw Error(Ie(108,_f(t)||"Unknown",o));return Sn({},r,i)}function is(t){return t=(t=t.stateNode)&&t.__reactInternalMemoizedMergedChildContext||ai,vi=Qn.current,un(Qn,t),un(or,or.current),!0}function Vc(t,n,r){var i=t.stateNode;if(!i)throw Error(Ie(169));r?(t=Zp(t,n,vi),i.__reactInternalMemoizedMergedChildContext=t,fn(or),fn(Qn),un(Qn,t)):fn(or),un(or,r)}var Er=null,Ss=!1,Xs=!1;function Xp(t){Er===null?Er=[t]:Er.push(t)}function ig(t){Ss=!0,Xp(t)}function ui(){if(!Xs&&Er!==null){Xs=!0;var t=0,n=an;try{var r=Er;for(an=1;t<r.length;t++){var i=r[t];do i=i(!0);while(i!==null)}Er=null,Ss=!1}catch(o){throw Er!==null&&(Er=Er.slice(t+1)),wp(vd,ui),o}finally{an=n,Xs=!1}}return null}var Ki=[],_i=0,os=null,ls=0,mr=[],yr=0,ki=null,$r=1,Pr="";function fi(t,n){Ki[_i++]=ls,Ki[_i++]=os,os=t,ls=n}function Jp(t,n,r){mr[yr++]=$r,mr[yr++]=Pr,mr[yr++]=ki,ki=t;var i=$r;t=Pr;var o=32-Tr(i)-1;i&=~(1<<o),r+=1;var l=32-Tr(n)+o;if(30<l){var s=o-o%5;l=(i&(1<<s)-1).toString(32),i>>=s,o-=s,$r=1<<32-Tr(n)+o|r<<o|i,Pr=l+t}else $r=1<<l|r<<o|i,Pr=t}function Wd(t){t.return!==null&&(fi(t,1),Jp(t,1,0))}function Nd(t){for(;t===os;)os=Ki[--_i],Ki[_i]=null,ls=Ki[--_i],Ki[_i]=null;for(;t===ki;)ki=mr[--yr],mr[yr]=null,Pr=mr[--yr],mr[yr]=null,$r=mr[--yr],mr[yr]=null}var pr=null,cr=null,yn=!1,Br=null;function ex(t,n){var r=br(5,null,null,0);r.elementType="DELETED",r.stateNode=n,r.return=t,n=t.deletions,n===null?(t.deletions=[r],t.flags|=16):n.push(r)}function Yc(t,n){switch(t.tag){case 5:var r=t.type;return n=n.nodeType!==1||r.toLowerCase()!==n.nodeName.toLowerCase()?null:n,n!==null?(t.stateNode=n,pr=t,cr=ni(n.firstChild),!0):!1;case 6:return n=t.pendingProps===""||n.nodeType!==3?null:n,n!==null?(t.stateNode=n,pr=t,cr=null,!0):!1;case 13:return n=n.nodeType!==8?null:n,n!==null?(r=ki!==null?{id:$r,overflow:Pr}:null,t.memoizedState={dehydrated:n,treeContext:r,retryLane:1073741824},r=br(18,null,null,0),r.stateNode=n,r.return=t,t.child=r,pr=t,cr=null,!0):!1;default:return!1}}function Oa(t){return(t.mode&1)!==0&&(t.flags&128)===0}function Va(t){if(yn){var n=cr;if(n){var r=n;if(!Yc(t,n)){if(Oa(t))throw Error(Ie(418));n=ni(r.nextSibling);var i=pr;n&&Yc(t,n)?ex(i,r):(t.flags=t.flags&-4097|2,yn=!1,pr=t)}}else{if(Oa(t))throw Error(Ie(418));t.flags=t.flags&-4097|2,yn=!1,pr=t}}}function Gc(t){for(t=t.return;t!==null&&t.tag!==5&&t.tag!==3&&t.tag!==13;)t=t.return;pr=t}function kl(t){if(t!==pr)return!1;if(!yn)return Gc(t),yn=!0,!1;var n;if((n=t.tag!==3)&&!(n=t.tag!==5)&&(n=t.type,n=n!=="head"&&n!=="body"&&!Ka(t.type,t.memoizedProps)),n&&(n=cr)){if(Oa(t))throw tx(),Error(Ie(418));for(;n;)ex(t,n),n=ni(n.nextSibling)}if(Gc(t),t.tag===13){if(t=t.memoizedState,t=t!==null?t.dehydrated:null,!t)throw Error(Ie(317));e:{for(t=t.nextSibling,n=0;t;){if(t.nodeType===8){var r=t.data;if(r==="/$"){if(n===0){cr=ni(t.nextSibling);break e}n--}else r!=="$"&&r!=="$!"&&r!=="$?"||n++}t=t.nextSibling}cr=null}}else cr=pr?ni(t.stateNode.nextSibling):null;return!0}function tx(){for(var t=cr;t;)t=ni(t.nextSibling)}function no(){cr=pr=null,yn=!1}function Rd(t){Br===null?Br=[t]:Br.push(t)}var og=Vr.ReactCurrentBatchConfig;function bo(t,n,r){if(t=r.ref,t!==null&&typeof t!="function"&&typeof t!="object"){if(r._owner){if(r=r._owner,r){if(r.tag!==1)throw Error(Ie(309));var i=r.stateNode}if(!i)throw Error(Ie(147,t));var o=i,l=""+t;return n!==null&&n.ref!==null&&typeof n.ref=="function"&&n.ref._stringRef===l?n.ref:(n=function(s){var u=o.refs;s===null?delete u[l]:u[l]=s},n._stringRef=l,n)}if(typeof t!="string")throw Error(Ie(284));if(!r._owner)throw Error(Ie(290,t))}return t}function wl(t,n){throw t=Object.prototype.toString.call(n),Error(Ie(31,t==="[object Object]"?"object with keys {"+Object.keys(n).join(", ")+"}":t))}function Uc(t){var n=t._init;return n(t._payload)}function nx(t){function n(y,f){if(t){var b=y.deletions;b===null?(y.deletions=[f],y.flags|=16):b.push(f)}}function r(y,f){if(!t)return null;for(;f!==null;)n(y,f),f=f.sibling;return null}function i(y,f){for(y=new Map;f!==null;)f.key!==null?y.set(f.key,f):y.set(f.index,f),f=f.sibling;return y}function o(y,f){return y=li(y,f),y.index=0,y.sibling=null,y}function l(y,f,b){return y.index=b,t?(b=y.alternate,b!==null?(b=b.index,b<f?(y.flags|=2,f):b):(y.flags|=2,f)):(y.flags|=1048576,f)}function s(y){return t&&y.alternate===null&&(y.flags|=2),y}function u(y,f,b,D){return f===null||f.tag!==6?(f=oa(b,y.mode,D),f.return=y,f):(f=o(f,b),f.return=y,f)}function d(y,f,b,D){var q=b.type;return q===Mi?C(y,f,b.props.children,D,b.key):f!==null&&(f.elementType===q||typeof q=="object"&&q!==null&&q.$$typeof===Gr&&Uc(q)===f.type)?(D=o(f,b.props),D.ref=bo(y,f,b),D.return=y,D):(D=Vl(b.type,b.key,b.props,null,y.mode,D),D.ref=bo(y,f,b),D.return=y,D)}function h(y,f,b,D){return f===null||f.tag!==4||f.stateNode.containerInfo!==b.containerInfo||f.stateNode.implementation!==b.implementation?(f=la(b,y.mode,D),f.return=y,f):(f=o(f,b.children||[]),f.return=y,f)}function C(y,f,b,D,q){return f===null||f.tag!==7?(f=ji(b,y.mode,D,q),f.return=y,f):(f=o(f,b),f.return=y,f)}function k(y,f,b){if(typeof f=="string"&&f!==""||typeof f=="number")return f=oa(""+f,y.mode,b),f.return=y,f;if(typeof f=="object"&&f!==null){switch(f.$$typeof){case pl:return b=Vl(f.type,f.key,f.props,null,y.mode,b),b.ref=bo(y,null,f),b.return=y,b;case Di:return f=la(f,y.mode,b),f.return=y,f;case Gr:var D=f._init;return k(y,D(f._payload),b)}if(zo(f)||fo(f))return f=ji(f,y.mode,b,null),f.return=y,f;wl(y,f)}return null}function S(y,f,b,D){var q=f!==null?f.key:null;if(typeof b=="string"&&b!==""||typeof b=="number")return q!==null?null:u(y,f,""+b,D);if(typeof b=="object"&&b!==null){switch(b.$$typeof){case pl:return b.key===q?d(y,f,b,D):null;case Di:return b.key===q?h(y,f,b,D):null;case Gr:return q=b._init,S(y,f,q(b._payload),D)}if(zo(b)||fo(b))return q!==null?null:C(y,f,b,D,null);wl(y,b)}return null}function B(y,f,b,D,q){if(typeof D=="string"&&D!==""||typeof D=="number")return y=y.get(b)||null,u(f,y,""+D,q);if(typeof D=="object"&&D!==null){switch(D.$$typeof){case pl:return y=y.get(D.key===null?b:D.key)||null,d(f,y,D,q);case Di:return y=y.get(D.key===null?b:D.key)||null,h(f,y,D,q);case Gr:var V=D._init;return B(y,f,b,V(D._payload),q)}if(zo(D)||fo(D))return y=y.get(b)||null,C(f,y,D,q,null);wl(f,D)}return null}function m(y,f,b,D){for(var q=null,V=null,ie=f,M=f=0,re=null;ie!==null&&M<b.length;M++){ie.index>M?(re=ie,ie=null):re=ie.sibling;var ce=S(y,ie,b[M],D);if(ce===null){ie===null&&(ie=re);break}t&&ie&&ce.alternate===null&&n(y,ie),f=l(ce,f,M),V===null?q=ce:V.sibling=ce,V=ce,ie=re}if(M===b.length)return r(y,ie),yn&&fi(y,M),q;if(ie===null){for(;M<b.length;M++)ie=k(y,b[M],D),ie!==null&&(f=l(ie,f,M),V===null?q=ie:V.sibling=ie,V=ie);return yn&&fi(y,M),q}for(ie=i(y,ie);M<b.length;M++)re=B(ie,y,M,b[M],D),re!==null&&(t&&re.alternate!==null&&ie.delete(re.key===null?M:re.key),f=l(re,f,M),V===null?q=re:V.sibling=re,V=re);return t&&ie.forEach(function(Oe){return n(y,Oe)}),yn&&fi(y,M),q}function I(y,f,b,D){var q=fo(b);if(typeof q!="function")throw Error(Ie(150));if(b=q.call(b),b==null)throw Error(Ie(151));for(var V=q=null,ie=f,M=f=0,re=null,ce=b.next();ie!==null&&!ce.done;M++,ce=b.next()){ie.index>M?(re=ie,ie=null):re=ie.sibling;var Oe=S(y,ie,ce.value,D);if(Oe===null){ie===null&&(ie=re);break}t&&ie&&Oe.alternate===null&&n(y,ie),f=l(Oe,f,M),V===null?q=Oe:V.sibling=Oe,V=Oe,ie=re}if(ce.done)return r(y,ie),yn&&fi(y,M),q;if(ie===null){for(;!ce.done;M++,ce=b.next())ce=k(y,ce.value,D),ce!==null&&(f=l(ce,f,M),V===null?q=ce:V.sibling=ce,V=ce);return yn&&fi(y,M),q}for(ie=i(y,ie);!ce.done;M++,ce=b.next())ce=B(ie,y,M,ce.value,D),ce!==null&&(t&&ce.alternate!==null&&ie.delete(ce.key===null?M:ce.key),f=l(ce,f,M),V===null?q=ce:V.sibling=ce,V=ce);return t&&ie.forEach(function(Re){return n(y,Re)}),yn&&fi(y,M),q}function F(y,f,b,D){if(typeof b=="object"&&b!==null&&b.type===Mi&&b.key===null&&(b=b.props.children),typeof b=="object"&&b!==null){switch(b.$$typeof){case pl:e:{for(var q=b.key,V=f;V!==null;){if(V.key===q){if(q=b.type,q===Mi){if(V.tag===7){r(y,V.sibling),f=o(V,b.props.children),f.return=y,y=f;break e}}else if(V.elementType===q||typeof q=="object"&&q!==null&&q.$$typeof===Gr&&Uc(q)===V.type){r(y,V.sibling),f=o(V,b.props),f.ref=bo(y,V,b),f.return=y,y=f;break e}r(y,V);break}else n(y,V);V=V.sibling}b.type===Mi?(f=ji(b.props.children,y.mode,D,b.key),f.return=y,y=f):(D=Vl(b.type,b.key,b.props,null,y.mode,D),D.ref=bo(y,f,b),D.return=y,y=D)}return s(y);case Di:e:{for(V=b.key;f!==null;){if(f.key===V)if(f.tag===4&&f.stateNode.containerInfo===b.containerInfo&&f.stateNode.implementation===b.implementation){r(y,f.sibling),f=o(f,b.children||[]),f.return=y,y=f;break e}else{r(y,f);break}else n(y,f);f=f.sibling}f=la(b,y.mode,D),f.return=y,y=f}return s(y);case Gr:return V=b._init,F(y,f,V(b._payload),D)}if(zo(b))return m(y,f,b,D);if(fo(b))return I(y,f,b,D);wl(y,b)}return typeof b=="string"&&b!==""||typeof b=="number"?(b=""+b,f!==null&&f.tag===6?(r(y,f.sibling),f=o(f,b),f.return=y,y=f):(r(y,f),f=oa(b,y.mode,D),f.return=y,y=f),s(y)):r(y,f)}return F}var ro=nx(!0),rx=nx(!1),ss=ci(null),as=null,Hi=null,Dd=null;function Md(){Dd=Hi=as=null}function Id(t){var n=ss.current;fn(ss),t._currentValue=n}function Ya(t,n,r){for(;t!==null;){var i=t.alternate;if((t.childLanes&n)!==n?(t.childLanes|=n,i!==null&&(i.childLanes|=n)):i!==null&&(i.childLanes&n)!==n&&(i.childLanes|=n),t===r)break;t=t.return}}function Zi(t,n){as=t,Dd=Hi=null,t=t.dependencies,t!==null&&t.firstContext!==null&&(t.lanes&n&&(ir=!0),t.firstContext=null)}function vr(t){var n=t._currentValue;if(Dd!==t)if(t={context:t,memoizedValue:n,next:null},Hi===null){if(as===null)throw Error(Ie(308));Hi=t,as.dependencies={lanes:0,firstContext:t}}else Hi=Hi.next=t;return n}var mi=null;function Ad(t){mi===null?mi=[t]:mi.push(t)}function ix(t,n,r,i){var o=n.interleaved;return o===null?(r.next=r,Ad(n)):(r.next=o.next,o.next=r),n.interleaved=r,Fr(t,i)}function Fr(t,n){t.lanes|=n;var r=t.alternate;for(r!==null&&(r.lanes|=n),r=t,t=t.return;t!==null;)t.childLanes|=n,r=t.alternate,r!==null&&(r.childLanes|=n),r=t,t=t.return;return r.tag===3?r.stateNode:null}var Ur=!1;function Ed(t){t.updateQueue={baseState:t.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,interleaved:null,lanes:0},effects:null}}function ox(t,n){t=t.updateQueue,n.updateQueue===t&&(n.updateQueue={baseState:t.baseState,firstBaseUpdate:t.firstBaseUpdate,lastBaseUpdate:t.lastBaseUpdate,shared:t.shared,effects:t.effects})}function Kr(t,n){return{eventTime:t,lane:n,tag:0,payload:null,callback:null,next:null}}function ri(t,n,r){var i=t.updateQueue;if(i===null)return null;if(i=i.shared,Qt&2){var o=i.pending;return o===null?n.next=n:(n.next=o.next,o.next=n),i.pending=n,Fr(t,r)}return o=i.interleaved,o===null?(n.next=n,Ad(i)):(n.next=o.next,o.next=n),i.interleaved=n,Fr(t,r)}function Pl(t,n,r){if(n=n.updateQueue,n!==null&&(n=n.shared,(r&4194240)!==0)){var i=n.lanes;i&=t.pendingLanes,r|=i,n.lanes=r,kd(t,r)}}function qc(t,n){var r=t.updateQueue,i=t.alternate;if(i!==null&&(i=i.updateQueue,r===i)){var o=null,l=null;if(r=r.firstBaseUpdate,r!==null){do{var s={eventTime:r.eventTime,lane:r.lane,tag:r.tag,payload:r.payload,callback:r.callback,next:null};l===null?o=l=s:l=l.next=s,r=r.next}while(r!==null);l===null?o=l=n:l=l.next=n}else o=l=n;r={baseState:i.baseState,firstBaseUpdate:o,lastBaseUpdate:l,shared:i.shared,effects:i.effects},t.updateQueue=r;return}t=r.lastBaseUpdate,t===null?r.firstBaseUpdate=n:t.next=n,r.lastBaseUpdate=n}function ds(t,n,r,i){var o=t.updateQueue;Ur=!1;var l=o.firstBaseUpdate,s=o.lastBaseUpdate,u=o.shared.pending;if(u!==null){o.shared.pending=null;var d=u,h=d.next;d.next=null,s===null?l=h:s.next=h,s=d;var C=t.alternate;C!==null&&(C=C.updateQueue,u=C.lastBaseUpdate,u!==s&&(u===null?C.firstBaseUpdate=h:u.next=h,C.lastBaseUpdate=d))}if(l!==null){var k=o.baseState;s=0,C=h=d=null,u=l;do{var S=u.lane,B=u.eventTime;if((i&S)===S){C!==null&&(C=C.next={eventTime:B,lane:0,tag:u.tag,payload:u.payload,callback:u.callback,next:null});e:{var m=t,I=u;switch(S=n,B=r,I.tag){case 1:if(m=I.payload,typeof m=="function"){k=m.call(B,k,S);break e}k=m;break e;case 3:m.flags=m.flags&-65537|128;case 0:if(m=I.payload,S=typeof m=="function"?m.call(B,k,S):m,S==null)break e;k=Sn({},k,S);break e;case 2:Ur=!0}}u.callback!==null&&u.lane!==0&&(t.flags|=64,S=o.effects,S===null?o.effects=[u]:S.push(u))}else B={eventTime:B,lane:S,tag:u.tag,payload:u.payload,callback:u.callback,next:null},C===null?(h=C=B,d=k):C=C.next=B,s|=S;if(u=u.next,u===null){if(u=o.shared.pending,u===null)break;S=u,u=S.next,S.next=null,o.lastBaseUpdate=S,o.shared.pending=null}}while(!0);if(C===null&&(d=k),o.baseState=d,o.firstBaseUpdate=h,o.lastBaseUpdate=C,n=o.shared.interleaved,n!==null){o=n;do s|=o.lane,o=o.next;while(o!==n)}else l===null&&(o.shared.lanes=0);Si|=s,t.lanes=s,t.memoizedState=k}}function Qc(t,n,r){if(t=n.effects,n.effects=null,t!==null)for(n=0;n<t.length;n++){var i=t[n],o=i.callback;if(o!==null){if(i.callback=null,i=r,typeof o!="function")throw Error(Ie(191,o));o.call(i)}}}var ll={},Ir=ci(ll),Qo=ci(ll),Zo=ci(ll);function yi(t){if(t===ll)throw Error(Ie(174));return t}function $d(t,n){switch(un(Zo,n),un(Qo,t),un(Ir,ll),t=n.nodeType,t){case 9:case 11:n=(n=n.documentElement)?n.namespaceURI:za(null,"");break;default:t=t===8?n.parentNode:n,n=t.namespaceURI||null,t=t.tagName,n=za(n,t)}fn(Ir),un(Ir,n)}function io(){fn(Ir),fn(Qo),fn(Zo)}function lx(t){yi(Zo.current);var n=yi(Ir.current),r=za(n,t.type);n!==r&&(un(Qo,t),un(Ir,r))}function Pd(t){Qo.current===t&&(fn(Ir),fn(Qo))}var kn=ci(0);function cs(t){for(var n=t;n!==null;){if(n.tag===13){var r=n.memoizedState;if(r!==null&&(r=r.dehydrated,r===null||r.data==="$?"||r.data==="$!"))return n}else if(n.tag===19&&n.memoizedProps.revealOrder!==void 0){if(n.flags&128)return n}else if(n.child!==null){n.child.return=n,n=n.child;continue}if(n===t)break;for(;n.sibling===null;){if(n.return===null||n.return===t)return null;n=n.return}n.sibling.return=n.return,n=n.sibling}return null}var Js=[];function Kd(){for(var t=0;t<Js.length;t++)Js[t]._workInProgressVersionPrimary=null;Js.length=0}var Kl=Vr.ReactCurrentDispatcher,ea=Vr.ReactCurrentBatchConfig,wi=0,wn=null,An=null,Pn=null,us=!1,Mo=!1,Xo=0,lg=0;function Gn(){throw Error(Ie(321))}function _d(t,n){if(n===null)return!1;for(var r=0;r<n.length&&r<t.length;r++)if(!Wr(t[r],n[r]))return!1;return!0}function Hd(t,n,r,i,o,l){if(wi=l,wn=n,n.memoizedState=null,n.updateQueue=null,n.lanes=0,Kl.current=t===null||t.memoizedState===null?cg:ug,t=r(i,o),Mo){l=0;do{if(Mo=!1,Xo=0,25<=l)throw Error(Ie(301));l+=1,Pn=An=null,n.updateQueue=null,Kl.current=pg,t=r(i,o)}while(Mo)}if(Kl.current=ps,n=An!==null&&An.next!==null,wi=0,Pn=An=wn=null,us=!1,n)throw Error(Ie(300));return t}function Fd(){var t=Xo!==0;return Xo=0,t}function Rr(){var t={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return Pn===null?wn.memoizedState=Pn=t:Pn=Pn.next=t,Pn}function kr(){if(An===null){var t=wn.alternate;t=t!==null?t.memoizedState:null}else t=An.next;var n=Pn===null?wn.memoizedState:Pn.next;if(n!==null)Pn=n,An=t;else{if(t===null)throw Error(Ie(310));An=t,t={memoizedState:An.memoizedState,baseState:An.baseState,baseQueue:An.baseQueue,queue:An.queue,next:null},Pn===null?wn.memoizedState=Pn=t:Pn=Pn.next=t}return Pn}function Jo(t,n){return typeof n=="function"?n(t):n}function ta(t){var n=kr(),r=n.queue;if(r===null)throw Error(Ie(311));r.lastRenderedReducer=t;var i=An,o=i.baseQueue,l=r.pending;if(l!==null){if(o!==null){var s=o.next;o.next=l.next,l.next=s}i.baseQueue=o=l,r.pending=null}if(o!==null){l=o.next,i=i.baseState;var u=s=null,d=null,h=l;do{var C=h.lane;if((wi&C)===C)d!==null&&(d=d.next={lane:0,action:h.action,hasEagerState:h.hasEagerState,eagerState:h.eagerState,next:null}),i=h.hasEagerState?h.eagerState:t(i,h.action);else{var k={lane:C,action:h.action,hasEagerState:h.hasEagerState,eagerState:h.eagerState,next:null};d===null?(u=d=k,s=i):d=d.next=k,wn.lanes|=C,Si|=C}h=h.next}while(h!==null&&h!==l);d===null?s=i:d.next=u,Wr(i,n.memoizedState)||(ir=!0),n.memoizedState=i,n.baseState=s,n.baseQueue=d,r.lastRenderedState=i}if(t=r.interleaved,t!==null){o=t;do l=o.lane,wn.lanes|=l,Si|=l,o=o.next;while(o!==t)}else o===null&&(r.lanes=0);return[n.memoizedState,r.dispatch]}function na(t){var n=kr(),r=n.queue;if(r===null)throw Error(Ie(311));r.lastRenderedReducer=t;var i=r.dispatch,o=r.pending,l=n.memoizedState;if(o!==null){r.pending=null;var s=o=o.next;do l=t(l,s.action),s=s.next;while(s!==o);Wr(l,n.memoizedState)||(ir=!0),n.memoizedState=l,n.baseQueue===null&&(n.baseState=l),r.lastRenderedState=l}return[l,i]}function sx(){}function ax(t,n){var r=wn,i=kr(),o=n(),l=!Wr(i.memoizedState,o);if(l&&(i.memoizedState=o,ir=!0),i=i.queue,Od(ux.bind(null,r,i,t),[t]),i.getSnapshot!==n||l||Pn!==null&&Pn.memoizedState.tag&1){if(r.flags|=2048,el(9,cx.bind(null,r,i,o,n),void 0,null),Kn===null)throw Error(Ie(349));wi&30||dx(r,n,o)}return o}function dx(t,n,r){t.flags|=16384,t={getSnapshot:n,value:r},n=wn.updateQueue,n===null?(n={lastEffect:null,stores:null},wn.updateQueue=n,n.stores=[t]):(r=n.stores,r===null?n.stores=[t]:r.push(t))}function cx(t,n,r,i){n.value=r,n.getSnapshot=i,px(n)&&xx(t)}function ux(t,n,r){return r(function(){px(n)&&xx(t)})}function px(t){var n=t.getSnapshot;t=t.value;try{var r=n();return!Wr(t,r)}catch{return!0}}function xx(t){var n=Fr(t,1);n!==null&&Lr(n,t,1,-1)}function Zc(t){var n=Rr();return typeof t=="function"&&(t=t()),n.memoizedState=n.baseState=t,t={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:Jo,lastRenderedState:t},n.queue=t,t=t.dispatch=dg.bind(null,wn,t),[n.memoizedState,t]}function el(t,n,r,i){return t={tag:t,create:n,destroy:r,deps:i,next:null},n=wn.updateQueue,n===null?(n={lastEffect:null,stores:null},wn.updateQueue=n,n.lastEffect=t.next=t):(r=n.lastEffect,r===null?n.lastEffect=t.next=t:(i=r.next,r.next=t,t.next=i,n.lastEffect=t)),t}function fx(){return kr().memoizedState}function _l(t,n,r,i){var o=Rr();wn.flags|=t,o.memoizedState=el(1|n,r,void 0,i===void 0?null:i)}function Cs(t,n,r,i){var o=kr();i=i===void 0?null:i;var l=void 0;if(An!==null){var s=An.memoizedState;if(l=s.destroy,i!==null&&_d(i,s.deps)){o.memoizedState=el(n,r,l,i);return}}wn.flags|=t,o.memoizedState=el(1|n,r,l,i)}function Xc(t,n){return _l(8390656,8,t,n)}function Od(t,n){return Cs(2048,8,t,n)}function hx(t,n){return Cs(4,2,t,n)}function gx(t,n){return Cs(4,4,t,n)}function mx(t,n){if(typeof n=="function")return t=t(),n(t),function(){n(null)};if(n!=null)return t=t(),n.current=t,function(){n.current=null}}function yx(t,n,r){return r=r!=null?r.concat([t]):null,Cs(4,4,mx.bind(null,n,t),r)}function Vd(){}function bx(t,n){var r=kr();n=n===void 0?null:n;var i=r.memoizedState;return i!==null&&n!==null&&_d(n,i[1])?i[0]:(r.memoizedState=[t,n],t)}function jx(t,n){var r=kr();n=n===void 0?null:n;var i=r.memoizedState;return i!==null&&n!==null&&_d(n,i[1])?i[0]:(t=t(),r.memoizedState=[t,n],t)}function vx(t,n,r){return wi&21?(Wr(r,n)||(r=zp(),wn.lanes|=r,Si|=r,t.baseState=!0),n):(t.baseState&&(t.baseState=!1,ir=!0),t.memoizedState=r)}function sg(t,n){var r=an;an=r!==0&&4>r?r:4,t(!0);var i=ea.transition;ea.transition={};try{t(!1),n()}finally{an=r,ea.transition=i}}function kx(){return kr().memoizedState}function ag(t,n,r){var i=oi(t);if(r={lane:i,action:r,hasEagerState:!1,eagerState:null,next:null},wx(t))Sx(n,r);else if(r=ix(t,n,r,i),r!==null){var o=Jn();Lr(r,t,i,o),Cx(r,n,i)}}function dg(t,n,r){var i=oi(t),o={lane:i,action:r,hasEagerState:!1,eagerState:null,next:null};if(wx(t))Sx(n,o);else{var l=t.alternate;if(t.lanes===0&&(l===null||l.lanes===0)&&(l=n.lastRenderedReducer,l!==null))try{var s=n.lastRenderedState,u=l(s,r);if(o.hasEagerState=!0,o.eagerState=u,Wr(u,s)){var d=n.interleaved;d===null?(o.next=o,Ad(n)):(o.next=d.next,d.next=o),n.interleaved=o;return}}catch{}finally{}r=ix(t,n,o,i),r!==null&&(o=Jn(),Lr(r,t,i,o),Cx(r,n,i))}}function wx(t){var n=t.alternate;return t===wn||n!==null&&n===wn}function Sx(t,n){Mo=us=!0;var r=t.pending;r===null?n.next=n:(n.next=r.next,r.next=n),t.pending=n}function Cx(t,n,r){if(r&4194240){var i=n.lanes;i&=t.pendingLanes,r|=i,n.lanes=r,kd(t,r)}}var ps={readContext:vr,useCallback:Gn,useContext:Gn,useEffect:Gn,useImperativeHandle:Gn,useInsertionEffect:Gn,useLayoutEffect:Gn,useMemo:Gn,useReducer:Gn,useRef:Gn,useState:Gn,useDebugValue:Gn,useDeferredValue:Gn,useTransition:Gn,useMutableSource:Gn,useSyncExternalStore:Gn,useId:Gn,unstable_isNewReconciler:!1},cg={readContext:vr,useCallback:function(t,n){return Rr().memoizedState=[t,n===void 0?null:n],t},useContext:vr,useEffect:Xc,useImperativeHandle:function(t,n,r){return r=r!=null?r.concat([t]):null,_l(4194308,4,mx.bind(null,n,t),r)},useLayoutEffect:function(t,n){return _l(4194308,4,t,n)},useInsertionEffect:function(t,n){return _l(4,2,t,n)},useMemo:function(t,n){var r=Rr();return n=n===void 0?null:n,t=t(),r.memoizedState=[t,n],t},useReducer:function(t,n,r){var i=Rr();return n=r!==void 0?r(n):n,i.memoizedState=i.baseState=n,t={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:t,lastRenderedState:n},i.queue=t,t=t.dispatch=ag.bind(null,wn,t),[i.memoizedState,t]},useRef:function(t){var n=Rr();return t={current:t},n.memoizedState=t},useState:Zc,useDebugValue:Vd,useDeferredValue:function(t){return Rr().memoizedState=t},useTransition:function(){var t=Zc(!1),n=t[0];return t=sg.bind(null,t[1]),Rr().memoizedState=t,[n,t]},useMutableSource:function(){},useSyncExternalStore:function(t,n,r){var i=wn,o=Rr();if(yn){if(r===void 0)throw Error(Ie(407));r=r()}else{if(r=n(),Kn===null)throw Error(Ie(349));wi&30||dx(i,n,r)}o.memoizedState=r;var l={value:r,getSnapshot:n};return o.queue=l,Xc(ux.bind(null,i,l,t),[t]),i.flags|=2048,el(9,cx.bind(null,i,l,r,n),void 0,null),r},useId:function(){var t=Rr(),n=Kn.identifierPrefix;if(yn){var r=Pr,i=$r;r=(i&~(1<<32-Tr(i)-1)).toString(32)+r,n=":"+n+"R"+r,r=Xo++,0<r&&(n+="H"+r.toString(32)),n+=":"}else r=lg++,n=":"+n+"r"+r.toString(32)+":";return t.memoizedState=n},unstable_isNewReconciler:!1},ug={readContext:vr,useCallback:bx,useContext:vr,useEffect:Od,useImperativeHandle:yx,useInsertionEffect:hx,useLayoutEffect:gx,useMemo:jx,useReducer:ta,useRef:fx,useState:function(){return ta(Jo)},useDebugValue:Vd,useDeferredValue:function(t){var n=kr();return vx(n,An.memoizedState,t)},useTransition:function(){var t=ta(Jo)[0],n=kr().memoizedState;return[t,n]},useMutableSource:sx,useSyncExternalStore:ax,useId:kx,unstable_isNewReconciler:!1},pg={readContext:vr,useCallback:bx,useContext:vr,useEffect:Od,useImperativeHandle:yx,useInsertionEffect:hx,useLayoutEffect:gx,useMemo:jx,useReducer:na,useRef:fx,useState:function(){return na(Jo)},useDebugValue:Vd,useDeferredValue:function(t){var n=kr();return An===null?n.memoizedState=t:vx(n,An.memoizedState,t)},useTransition:function(){var t=na(Jo)[0],n=kr().memoizedState;return[t,n]},useMutableSource:sx,useSyncExternalStore:ax,useId:kx,unstable_isNewReconciler:!1};function Cr(t,n){if(t&&t.defaultProps){n=Sn({},n),t=t.defaultProps;for(var r in t)n[r]===void 0&&(n[r]=t[r]);return n}return n}function Ga(t,n,r,i){n=t.memoizedState,r=r(i,n),r=r==null?n:Sn({},n,r),t.memoizedState=r,t.lanes===0&&(t.updateQueue.baseState=r)}var zs={isMounted:function(t){return(t=t._reactInternals)?Ti(t)===t:!1},enqueueSetState:function(t,n,r){t=t._reactInternals;var i=Jn(),o=oi(t),l=Kr(i,o);l.payload=n,r!=null&&(l.callback=r),n=ri(t,l,o),n!==null&&(Lr(n,t,o,i),Pl(n,t,o))},enqueueReplaceState:function(t,n,r){t=t._reactInternals;var i=Jn(),o=oi(t),l=Kr(i,o);l.tag=1,l.payload=n,r!=null&&(l.callback=r),n=ri(t,l,o),n!==null&&(Lr(n,t,o,i),Pl(n,t,o))},enqueueForceUpdate:function(t,n){t=t._reactInternals;var r=Jn(),i=oi(t),o=Kr(r,i);o.tag=2,n!=null&&(o.callback=n),n=ri(t,o,i),n!==null&&(Lr(n,t,i,r),Pl(n,t,i))}};function Jc(t,n,r,i,o,l,s){return t=t.stateNode,typeof t.shouldComponentUpdate=="function"?t.shouldComponentUpdate(i,l,s):n.prototype&&n.prototype.isPureReactComponent?!Yo(r,i)||!Yo(o,l):!0}function zx(t,n,r){var i=!1,o=ai,l=n.contextType;return typeof l=="object"&&l!==null?l=vr(l):(o=lr(n)?vi:Qn.current,i=n.contextTypes,l=(i=i!=null)?to(t,o):ai),n=new n(r,l),t.memoizedState=n.state!==null&&n.state!==void 0?n.state:null,n.updater=zs,t.stateNode=n,n._reactInternals=t,i&&(t=t.stateNode,t.__reactInternalMemoizedUnmaskedChildContext=o,t.__reactInternalMemoizedMaskedChildContext=l),n}function eu(t,n,r,i){t=n.state,typeof n.componentWillReceiveProps=="function"&&n.componentWillReceiveProps(r,i),typeof n.UNSAFE_componentWillReceiveProps=="function"&&n.UNSAFE_componentWillReceiveProps(r,i),n.state!==t&&zs.enqueueReplaceState(n,n.state,null)}function Ua(t,n,r,i){var o=t.stateNode;o.props=r,o.state=t.memoizedState,o.refs={},Ed(t);var l=n.contextType;typeof l=="object"&&l!==null?o.context=vr(l):(l=lr(n)?vi:Qn.current,o.context=to(t,l)),o.state=t.memoizedState,l=n.getDerivedStateFromProps,typeof l=="function"&&(Ga(t,n,l,r),o.state=t.memoizedState),typeof n.getDerivedStateFromProps=="function"||typeof o.getSnapshotBeforeUpdate=="function"||typeof o.UNSAFE_componentWillMount!="function"&&typeof o.componentWillMount!="function"||(n=o.state,typeof o.componentWillMount=="function"&&o.componentWillMount(),typeof o.UNSAFE_componentWillMount=="function"&&o.UNSAFE_componentWillMount(),n!==o.state&&zs.enqueueReplaceState(o,o.state,null),ds(t,r,o,i),o.state=t.memoizedState),typeof o.componentDidMount=="function"&&(t.flags|=4194308)}function oo(t,n){try{var r="",i=n;do r+=Kf(i),i=i.return;while(i);var o=r}catch(l){o=`
Error generating stack: `+l.message+`
`+l.stack}return{value:t,source:n,stack:o,digest:null}}function ra(t,n,r){return{value:t,source:null,stack:r??null,digest:n??null}}function qa(t,n){try{console.error(n.value)}catch(r){setTimeout(function(){throw r})}}var xg=typeof WeakMap=="function"?WeakMap:Map;function Bx(t,n,r){r=Kr(-1,r),r.tag=3,r.payload={element:null};var i=n.value;return r.callback=function(){fs||(fs=!0,od=i),qa(t,n)},r}function Tx(t,n,r){r=Kr(-1,r),r.tag=3;var i=t.type.getDerivedStateFromError;if(typeof i=="function"){var o=n.value;r.payload=function(){return i(o)},r.callback=function(){qa(t,n)}}var l=t.stateNode;return l!==null&&typeof l.componentDidCatch=="function"&&(r.callback=function(){qa(t,n),typeof i!="function"&&(ii===null?ii=new Set([this]):ii.add(this));var s=n.stack;this.componentDidCatch(n.value,{componentStack:s!==null?s:""})}),r}function tu(t,n,r){var i=t.pingCache;if(i===null){i=t.pingCache=new xg;var o=new Set;i.set(n,o)}else o=i.get(n),o===void 0&&(o=new Set,i.set(n,o));o.has(r)||(o.add(r),t=Bg.bind(null,t,n,r),n.then(t,t))}function nu(t){do{var n;if((n=t.tag===13)&&(n=t.memoizedState,n=n!==null?n.dehydrated!==null:!0),n)return t;t=t.return}while(t!==null);return null}function ru(t,n,r,i,o){return t.mode&1?(t.flags|=65536,t.lanes=o,t):(t===n?t.flags|=65536:(t.flags|=128,r.flags|=131072,r.flags&=-52805,r.tag===1&&(r.alternate===null?r.tag=17:(n=Kr(-1,1),n.tag=2,ri(r,n,1))),r.lanes|=1),t)}var fg=Vr.ReactCurrentOwner,ir=!1;function Xn(t,n,r,i){n.child=t===null?rx(n,null,r,i):ro(n,t.child,r,i)}function iu(t,n,r,i,o){r=r.render;var l=n.ref;return Zi(n,o),i=Hd(t,n,r,i,l,o),r=Fd(),t!==null&&!ir?(n.updateQueue=t.updateQueue,n.flags&=-2053,t.lanes&=~o,Or(t,n,o)):(yn&&r&&Wd(n),n.flags|=1,Xn(t,n,i,o),n.child)}function ou(t,n,r,i,o){if(t===null){var l=r.type;return typeof l=="function"&&!Jd(l)&&l.defaultProps===void 0&&r.compare===null&&r.defaultProps===void 0?(n.tag=15,n.type=l,Lx(t,n,l,i,o)):(t=Vl(r.type,null,i,n,n.mode,o),t.ref=n.ref,t.return=n,n.child=t)}if(l=t.child,!(t.lanes&o)){var s=l.memoizedProps;if(r=r.compare,r=r!==null?r:Yo,r(s,i)&&t.ref===n.ref)return Or(t,n,o)}return n.flags|=1,t=li(l,i),t.ref=n.ref,t.return=n,n.child=t}function Lx(t,n,r,i,o){if(t!==null){var l=t.memoizedProps;if(Yo(l,i)&&t.ref===n.ref)if(ir=!1,n.pendingProps=i=l,(t.lanes&o)!==0)t.flags&131072&&(ir=!0);else return n.lanes=t.lanes,Or(t,n,o)}return Qa(t,n,r,i,o)}function Wx(t,n,r){var i=n.pendingProps,o=i.children,l=t!==null?t.memoizedState:null;if(i.mode==="hidden")if(!(n.mode&1))n.memoizedState={baseLanes:0,cachePool:null,transitions:null},un(Oi,dr),dr|=r;else{if(!(r&1073741824))return t=l!==null?l.baseLanes|r:r,n.lanes=n.childLanes=1073741824,n.memoizedState={baseLanes:t,cachePool:null,transitions:null},n.updateQueue=null,un(Oi,dr),dr|=t,null;n.memoizedState={baseLanes:0,cachePool:null,transitions:null},i=l!==null?l.baseLanes:r,un(Oi,dr),dr|=i}else l!==null?(i=l.baseLanes|r,n.memoizedState=null):i=r,un(Oi,dr),dr|=i;return Xn(t,n,o,r),n.child}function Nx(t,n){var r=n.ref;(t===null&&r!==null||t!==null&&t.ref!==r)&&(n.flags|=512,n.flags|=2097152)}function Qa(t,n,r,i,o){var l=lr(r)?vi:Qn.current;return l=to(n,l),Zi(n,o),r=Hd(t,n,r,i,l,o),i=Fd(),t!==null&&!ir?(n.updateQueue=t.updateQueue,n.flags&=-2053,t.lanes&=~o,Or(t,n,o)):(yn&&i&&Wd(n),n.flags|=1,Xn(t,n,r,o),n.child)}function lu(t,n,r,i,o){if(lr(r)){var l=!0;is(n)}else l=!1;if(Zi(n,o),n.stateNode===null)Hl(t,n),zx(n,r,i),Ua(n,r,i,o),i=!0;else if(t===null){var s=n.stateNode,u=n.memoizedProps;s.props=u;var d=s.context,h=r.contextType;typeof h=="object"&&h!==null?h=vr(h):(h=lr(r)?vi:Qn.current,h=to(n,h));var C=r.getDerivedStateFromProps,k=typeof C=="function"||typeof s.getSnapshotBeforeUpdate=="function";k||typeof s.UNSAFE_componentWillReceiveProps!="function"&&typeof s.componentWillReceiveProps!="function"||(u!==i||d!==h)&&eu(n,s,i,h),Ur=!1;var S=n.memoizedState;s.state=S,ds(n,i,s,o),d=n.memoizedState,u!==i||S!==d||or.current||Ur?(typeof C=="function"&&(Ga(n,r,C,i),d=n.memoizedState),(u=Ur||Jc(n,r,u,i,S,d,h))?(k||typeof s.UNSAFE_componentWillMount!="function"&&typeof s.componentWillMount!="function"||(typeof s.componentWillMount=="function"&&s.componentWillMount(),typeof s.UNSAFE_componentWillMount=="function"&&s.UNSAFE_componentWillMount()),typeof s.componentDidMount=="function"&&(n.flags|=4194308)):(typeof s.componentDidMount=="function"&&(n.flags|=4194308),n.memoizedProps=i,n.memoizedState=d),s.props=i,s.state=d,s.context=h,i=u):(typeof s.componentDidMount=="function"&&(n.flags|=4194308),i=!1)}else{s=n.stateNode,ox(t,n),u=n.memoizedProps,h=n.type===n.elementType?u:Cr(n.type,u),s.props=h,k=n.pendingProps,S=s.context,d=r.contextType,typeof d=="object"&&d!==null?d=vr(d):(d=lr(r)?vi:Qn.current,d=to(n,d));var B=r.getDerivedStateFromProps;(C=typeof B=="function"||typeof s.getSnapshotBeforeUpdate=="function")||typeof s.UNSAFE_componentWillReceiveProps!="function"&&typeof s.componentWillReceiveProps!="function"||(u!==k||S!==d)&&eu(n,s,i,d),Ur=!1,S=n.memoizedState,s.state=S,ds(n,i,s,o);var m=n.memoizedState;u!==k||S!==m||or.current||Ur?(typeof B=="function"&&(Ga(n,r,B,i),m=n.memoizedState),(h=Ur||Jc(n,r,h,i,S,m,d)||!1)?(C||typeof s.UNSAFE_componentWillUpdate!="function"&&typeof s.componentWillUpdate!="function"||(typeof s.componentWillUpdate=="function"&&s.componentWillUpdate(i,m,d),typeof s.UNSAFE_componentWillUpdate=="function"&&s.UNSAFE_componentWillUpdate(i,m,d)),typeof s.componentDidUpdate=="function"&&(n.flags|=4),typeof s.getSnapshotBeforeUpdate=="function"&&(n.flags|=1024)):(typeof s.componentDidUpdate!="function"||u===t.memoizedProps&&S===t.memoizedState||(n.flags|=4),typeof s.getSnapshotBeforeUpdate!="function"||u===t.memoizedProps&&S===t.memoizedState||(n.flags|=1024),n.memoizedProps=i,n.memoizedState=m),s.props=i,s.state=m,s.context=d,i=h):(typeof s.componentDidUpdate!="function"||u===t.memoizedProps&&S===t.memoizedState||(n.flags|=4),typeof s.getSnapshotBeforeUpdate!="function"||u===t.memoizedProps&&S===t.memoizedState||(n.flags|=1024),i=!1)}return Za(t,n,r,i,l,o)}function Za(t,n,r,i,o,l){Nx(t,n);var s=(n.flags&128)!==0;if(!i&&!s)return o&&Vc(n,r,!1),Or(t,n,l);i=n.stateNode,fg.current=n;var u=s&&typeof r.getDerivedStateFromError!="function"?null:i.render();return n.flags|=1,t!==null&&s?(n.child=ro(n,t.child,null,l),n.child=ro(n,null,u,l)):Xn(t,n,u,l),n.memoizedState=i.state,o&&Vc(n,r,!0),n.child}function Rx(t){var n=t.stateNode;n.pendingContext?Oc(t,n.pendingContext,n.pendingContext!==n.context):n.context&&Oc(t,n.context,!1),$d(t,n.containerInfo)}function su(t,n,r,i,o){return no(),Rd(o),n.flags|=256,Xn(t,n,r,i),n.child}var Xa={dehydrated:null,treeContext:null,retryLane:0};function Ja(t){return{baseLanes:t,cachePool:null,transitions:null}}function Dx(t,n,r){var i=n.pendingProps,o=kn.current,l=!1,s=(n.flags&128)!==0,u;if((u=s)||(u=t!==null&&t.memoizedState===null?!1:(o&2)!==0),u?(l=!0,n.flags&=-129):(t===null||t.memoizedState!==null)&&(o|=1),un(kn,o&1),t===null)return Va(n),t=n.memoizedState,t!==null&&(t=t.dehydrated,t!==null)?(n.mode&1?t.data==="$!"?n.lanes=8:n.lanes=1073741824:n.lanes=1,null):(s=i.children,t=i.fallback,l?(i=n.mode,l=n.child,s={mode:"hidden",children:s},!(i&1)&&l!==null?(l.childLanes=0,l.pendingProps=s):l=Ls(s,i,0,null),t=ji(t,i,r,null),l.return=n,t.return=n,l.sibling=t,n.child=l,n.child.memoizedState=Ja(r),n.memoizedState=Xa,t):Yd(n,s));if(o=t.memoizedState,o!==null&&(u=o.dehydrated,u!==null))return hg(t,n,s,i,u,o,r);if(l){l=i.fallback,s=n.mode,o=t.child,u=o.sibling;var d={mode:"hidden",children:i.children};return!(s&1)&&n.child!==o?(i=n.child,i.childLanes=0,i.pendingProps=d,n.deletions=null):(i=li(o,d),i.subtreeFlags=o.subtreeFlags&14680064),u!==null?l=li(u,l):(l=ji(l,s,r,null),l.flags|=2),l.return=n,i.return=n,i.sibling=l,n.child=i,i=l,l=n.child,s=t.child.memoizedState,s=s===null?Ja(r):{baseLanes:s.baseLanes|r,cachePool:null,transitions:s.transitions},l.memoizedState=s,l.childLanes=t.childLanes&~r,n.memoizedState=Xa,i}return l=t.child,t=l.sibling,i=li(l,{mode:"visible",children:i.children}),!(n.mode&1)&&(i.lanes=r),i.return=n,i.sibling=null,t!==null&&(r=n.deletions,r===null?(n.deletions=[t],n.flags|=16):r.push(t)),n.child=i,n.memoizedState=null,i}function Yd(t,n){return n=Ls({mode:"visible",children:n},t.mode,0,null),n.return=t,t.child=n}function Sl(t,n,r,i){return i!==null&&Rd(i),ro(n,t.child,null,r),t=Yd(n,n.pendingProps.children),t.flags|=2,n.memoizedState=null,t}function hg(t,n,r,i,o,l,s){if(r)return n.flags&256?(n.flags&=-257,i=ra(Error(Ie(422))),Sl(t,n,s,i)):n.memoizedState!==null?(n.child=t.child,n.flags|=128,null):(l=i.fallback,o=n.mode,i=Ls({mode:"visible",children:i.children},o,0,null),l=ji(l,o,s,null),l.flags|=2,i.return=n,l.return=n,i.sibling=l,n.child=i,n.mode&1&&ro(n,t.child,null,s),n.child.memoizedState=Ja(s),n.memoizedState=Xa,l);if(!(n.mode&1))return Sl(t,n,s,null);if(o.data==="$!"){if(i=o.nextSibling&&o.nextSibling.dataset,i)var u=i.dgst;return i=u,l=Error(Ie(419)),i=ra(l,i,void 0),Sl(t,n,s,i)}if(u=(s&t.childLanes)!==0,ir||u){if(i=Kn,i!==null){switch(s&-s){case 4:o=2;break;case 16:o=8;break;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:o=32;break;case 536870912:o=268435456;break;default:o=0}o=o&(i.suspendedLanes|s)?0:o,o!==0&&o!==l.retryLane&&(l.retryLane=o,Fr(t,o),Lr(i,t,o,-1))}return Xd(),i=ra(Error(Ie(421))),Sl(t,n,s,i)}return o.data==="$?"?(n.flags|=128,n.child=t.child,n=Tg.bind(null,t),o._reactRetry=n,null):(t=l.treeContext,cr=ni(o.nextSibling),pr=n,yn=!0,Br=null,t!==null&&(mr[yr++]=$r,mr[yr++]=Pr,mr[yr++]=ki,$r=t.id,Pr=t.overflow,ki=n),n=Yd(n,i.children),n.flags|=4096,n)}function au(t,n,r){t.lanes|=n;var i=t.alternate;i!==null&&(i.lanes|=n),Ya(t.return,n,r)}function ia(t,n,r,i,o){var l=t.memoizedState;l===null?t.memoizedState={isBackwards:n,rendering:null,renderingStartTime:0,last:i,tail:r,tailMode:o}:(l.isBackwards=n,l.rendering=null,l.renderingStartTime=0,l.last=i,l.tail=r,l.tailMode=o)}function Mx(t,n,r){var i=n.pendingProps,o=i.revealOrder,l=i.tail;if(Xn(t,n,i.children,r),i=kn.current,i&2)i=i&1|2,n.flags|=128;else{if(t!==null&&t.flags&128)e:for(t=n.child;t!==null;){if(t.tag===13)t.memoizedState!==null&&au(t,r,n);else if(t.tag===19)au(t,r,n);else if(t.child!==null){t.child.return=t,t=t.child;continue}if(t===n)break e;for(;t.sibling===null;){if(t.return===null||t.return===n)break e;t=t.return}t.sibling.return=t.return,t=t.sibling}i&=1}if(un(kn,i),!(n.mode&1))n.memoizedState=null;else switch(o){case"forwards":for(r=n.child,o=null;r!==null;)t=r.alternate,t!==null&&cs(t)===null&&(o=r),r=r.sibling;r=o,r===null?(o=n.child,n.child=null):(o=r.sibling,r.sibling=null),ia(n,!1,o,r,l);break;case"backwards":for(r=null,o=n.child,n.child=null;o!==null;){if(t=o.alternate,t!==null&&cs(t)===null){n.child=o;break}t=o.sibling,o.sibling=r,r=o,o=t}ia(n,!0,r,null,l);break;case"together":ia(n,!1,null,null,void 0);break;default:n.memoizedState=null}return n.child}function Hl(t,n){!(n.mode&1)&&t!==null&&(t.alternate=null,n.alternate=null,n.flags|=2)}function Or(t,n,r){if(t!==null&&(n.dependencies=t.dependencies),Si|=n.lanes,!(r&n.childLanes))return null;if(t!==null&&n.child!==t.child)throw Error(Ie(153));if(n.child!==null){for(t=n.child,r=li(t,t.pendingProps),n.child=r,r.return=n;t.sibling!==null;)t=t.sibling,r=r.sibling=li(t,t.pendingProps),r.return=n;r.sibling=null}return n.child}function gg(t,n,r){switch(n.tag){case 3:Rx(n),no();break;case 5:lx(n);break;case 1:lr(n.type)&&is(n);break;case 4:$d(n,n.stateNode.containerInfo);break;case 10:var i=n.type._context,o=n.memoizedProps.value;un(ss,i._currentValue),i._currentValue=o;break;case 13:if(i=n.memoizedState,i!==null)return i.dehydrated!==null?(un(kn,kn.current&1),n.flags|=128,null):r&n.child.childLanes?Dx(t,n,r):(un(kn,kn.current&1),t=Or(t,n,r),t!==null?t.sibling:null);un(kn,kn.current&1);break;case 19:if(i=(r&n.childLanes)!==0,t.flags&128){if(i)return Mx(t,n,r);n.flags|=128}if(o=n.memoizedState,o!==null&&(o.rendering=null,o.tail=null,o.lastEffect=null),un(kn,kn.current),i)break;return null;case 22:case 23:return n.lanes=0,Wx(t,n,r)}return Or(t,n,r)}var Ix,ed,Ax,Ex;Ix=function(t,n){for(var r=n.child;r!==null;){if(r.tag===5||r.tag===6)t.appendChild(r.stateNode);else if(r.tag!==4&&r.child!==null){r.child.return=r,r=r.child;continue}if(r===n)break;for(;r.sibling===null;){if(r.return===null||r.return===n)return;r=r.return}r.sibling.return=r.return,r=r.sibling}};ed=function(){};Ax=function(t,n,r,i){var o=t.memoizedProps;if(o!==i){t=n.stateNode,yi(Ir.current);var l=null;switch(r){case"input":o=ka(t,o),i=ka(t,i),l=[];break;case"select":o=Sn({},o,{value:void 0}),i=Sn({},i,{value:void 0}),l=[];break;case"textarea":o=Ca(t,o),i=Ca(t,i),l=[];break;default:typeof o.onClick!="function"&&typeof i.onClick=="function"&&(t.onclick=ns)}Ba(r,i);var s;r=null;for(h in o)if(!i.hasOwnProperty(h)&&o.hasOwnProperty(h)&&o[h]!=null)if(h==="style"){var u=o[h];for(s in u)u.hasOwnProperty(s)&&(r||(r={}),r[s]="")}else h!=="dangerouslySetInnerHTML"&&h!=="children"&&h!=="suppressContentEditableWarning"&&h!=="suppressHydrationWarning"&&h!=="autoFocus"&&(Po.hasOwnProperty(h)?l||(l=[]):(l=l||[]).push(h,null));for(h in i){var d=i[h];if(u=o!=null?o[h]:void 0,i.hasOwnProperty(h)&&d!==u&&(d!=null||u!=null))if(h==="style")if(u){for(s in u)!u.hasOwnProperty(s)||d&&d.hasOwnProperty(s)||(r||(r={}),r[s]="");for(s in d)d.hasOwnProperty(s)&&u[s]!==d[s]&&(r||(r={}),r[s]=d[s])}else r||(l||(l=[]),l.push(h,r)),r=d;else h==="dangerouslySetInnerHTML"?(d=d?d.__html:void 0,u=u?u.__html:void 0,d!=null&&u!==d&&(l=l||[]).push(h,d)):h==="children"?typeof d!="string"&&typeof d!="number"||(l=l||[]).push(h,""+d):h!=="suppressContentEditableWarning"&&h!=="suppressHydrationWarning"&&(Po.hasOwnProperty(h)?(d!=null&&h==="onScroll"&&xn("scroll",t),l||u===d||(l=[])):(l=l||[]).push(h,d))}r&&(l=l||[]).push("style",r);var h=l;(n.updateQueue=h)&&(n.flags|=4)}};Ex=function(t,n,r,i){r!==i&&(n.flags|=4)};function jo(t,n){if(!yn)switch(t.tailMode){case"hidden":n=t.tail;for(var r=null;n!==null;)n.alternate!==null&&(r=n),n=n.sibling;r===null?t.tail=null:r.sibling=null;break;case"collapsed":r=t.tail;for(var i=null;r!==null;)r.alternate!==null&&(i=r),r=r.sibling;i===null?n||t.tail===null?t.tail=null:t.tail.sibling=null:i.sibling=null}}function Un(t){var n=t.alternate!==null&&t.alternate.child===t.child,r=0,i=0;if(n)for(var o=t.child;o!==null;)r|=o.lanes|o.childLanes,i|=o.subtreeFlags&14680064,i|=o.flags&14680064,o.return=t,o=o.sibling;else for(o=t.child;o!==null;)r|=o.lanes|o.childLanes,i|=o.subtreeFlags,i|=o.flags,o.return=t,o=o.sibling;return t.subtreeFlags|=i,t.childLanes=r,n}function mg(t,n,r){var i=n.pendingProps;switch(Nd(n),n.tag){case 2:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return Un(n),null;case 1:return lr(n.type)&&rs(),Un(n),null;case 3:return i=n.stateNode,io(),fn(or),fn(Qn),Kd(),i.pendingContext&&(i.context=i.pendingContext,i.pendingContext=null),(t===null||t.child===null)&&(kl(n)?n.flags|=4:t===null||t.memoizedState.isDehydrated&&!(n.flags&256)||(n.flags|=1024,Br!==null&&(ad(Br),Br=null))),ed(t,n),Un(n),null;case 5:Pd(n);var o=yi(Zo.current);if(r=n.type,t!==null&&n.stateNode!=null)Ax(t,n,r,i,o),t.ref!==n.ref&&(n.flags|=512,n.flags|=2097152);else{if(!i){if(n.stateNode===null)throw Error(Ie(166));return Un(n),null}if(t=yi(Ir.current),kl(n)){i=n.stateNode,r=n.type;var l=n.memoizedProps;switch(i[Dr]=n,i[qo]=l,t=(n.mode&1)!==0,r){case"dialog":xn("cancel",i),xn("close",i);break;case"iframe":case"object":case"embed":xn("load",i);break;case"video":case"audio":for(o=0;o<To.length;o++)xn(To[o],i);break;case"source":xn("error",i);break;case"img":case"image":case"link":xn("error",i),xn("load",i);break;case"details":xn("toggle",i);break;case"input":mc(i,l),xn("invalid",i);break;case"select":i._wrapperState={wasMultiple:!!l.multiple},xn("invalid",i);break;case"textarea":bc(i,l),xn("invalid",i)}Ba(r,l),o=null;for(var s in l)if(l.hasOwnProperty(s)){var u=l[s];s==="children"?typeof u=="string"?i.textContent!==u&&(l.suppressHydrationWarning!==!0&&vl(i.textContent,u,t),o=["children",u]):typeof u=="number"&&i.textContent!==""+u&&(l.suppressHydrationWarning!==!0&&vl(i.textContent,u,t),o=["children",""+u]):Po.hasOwnProperty(s)&&u!=null&&s==="onScroll"&&xn("scroll",i)}switch(r){case"input":xl(i),yc(i,l,!0);break;case"textarea":xl(i),jc(i);break;case"select":case"option":break;default:typeof l.onClick=="function"&&(i.onclick=ns)}i=o,n.updateQueue=i,i!==null&&(n.flags|=4)}else{s=o.nodeType===9?o:o.ownerDocument,t==="http://www.w3.org/1999/xhtml"&&(t=up(r)),t==="http://www.w3.org/1999/xhtml"?r==="script"?(t=s.createElement("div"),t.innerHTML="<script><\/script>",t=t.removeChild(t.firstChild)):typeof i.is=="string"?t=s.createElement(r,{is:i.is}):(t=s.createElement(r),r==="select"&&(s=t,i.multiple?s.multiple=!0:i.size&&(s.size=i.size))):t=s.createElementNS(t,r),t[Dr]=n,t[qo]=i,Ix(t,n,!1,!1),n.stateNode=t;e:{switch(s=Ta(r,i),r){case"dialog":xn("cancel",t),xn("close",t),o=i;break;case"iframe":case"object":case"embed":xn("load",t),o=i;break;case"video":case"audio":for(o=0;o<To.length;o++)xn(To[o],t);o=i;break;case"source":xn("error",t),o=i;break;case"img":case"image":case"link":xn("error",t),xn("load",t),o=i;break;case"details":xn("toggle",t),o=i;break;case"input":mc(t,i),o=ka(t,i),xn("invalid",t);break;case"option":o=i;break;case"select":t._wrapperState={wasMultiple:!!i.multiple},o=Sn({},i,{value:void 0}),xn("invalid",t);break;case"textarea":bc(t,i),o=Ca(t,i),xn("invalid",t);break;default:o=i}Ba(r,o),u=o;for(l in u)if(u.hasOwnProperty(l)){var d=u[l];l==="style"?fp(t,d):l==="dangerouslySetInnerHTML"?(d=d?d.__html:void 0,d!=null&&pp(t,d)):l==="children"?typeof d=="string"?(r!=="textarea"||d!=="")&&Ko(t,d):typeof d=="number"&&Ko(t,""+d):l!=="suppressContentEditableWarning"&&l!=="suppressHydrationWarning"&&l!=="autoFocus"&&(Po.hasOwnProperty(l)?d!=null&&l==="onScroll"&&xn("scroll",t):d!=null&&gd(t,l,d,s))}switch(r){case"input":xl(t),yc(t,i,!1);break;case"textarea":xl(t),jc(t);break;case"option":i.value!=null&&t.setAttribute("value",""+si(i.value));break;case"select":t.multiple=!!i.multiple,l=i.value,l!=null?Gi(t,!!i.multiple,l,!1):i.defaultValue!=null&&Gi(t,!!i.multiple,i.defaultValue,!0);break;default:typeof o.onClick=="function"&&(t.onclick=ns)}switch(r){case"button":case"input":case"select":case"textarea":i=!!i.autoFocus;break e;case"img":i=!0;break e;default:i=!1}}i&&(n.flags|=4)}n.ref!==null&&(n.flags|=512,n.flags|=2097152)}return Un(n),null;case 6:if(t&&n.stateNode!=null)Ex(t,n,t.memoizedProps,i);else{if(typeof i!="string"&&n.stateNode===null)throw Error(Ie(166));if(r=yi(Zo.current),yi(Ir.current),kl(n)){if(i=n.stateNode,r=n.memoizedProps,i[Dr]=n,(l=i.nodeValue!==r)&&(t=pr,t!==null))switch(t.tag){case 3:vl(i.nodeValue,r,(t.mode&1)!==0);break;case 5:t.memoizedProps.suppressHydrationWarning!==!0&&vl(i.nodeValue,r,(t.mode&1)!==0)}l&&(n.flags|=4)}else i=(r.nodeType===9?r:r.ownerDocument).createTextNode(i),i[Dr]=n,n.stateNode=i}return Un(n),null;case 13:if(fn(kn),i=n.memoizedState,t===null||t.memoizedState!==null&&t.memoizedState.dehydrated!==null){if(yn&&cr!==null&&n.mode&1&&!(n.flags&128))tx(),no(),n.flags|=98560,l=!1;else if(l=kl(n),i!==null&&i.dehydrated!==null){if(t===null){if(!l)throw Error(Ie(318));if(l=n.memoizedState,l=l!==null?l.dehydrated:null,!l)throw Error(Ie(317));l[Dr]=n}else no(),!(n.flags&128)&&(n.memoizedState=null),n.flags|=4;Un(n),l=!1}else Br!==null&&(ad(Br),Br=null),l=!0;if(!l)return n.flags&65536?n:null}return n.flags&128?(n.lanes=r,n):(i=i!==null,i!==(t!==null&&t.memoizedState!==null)&&i&&(n.child.flags|=8192,n.mode&1&&(t===null||kn.current&1?En===0&&(En=3):Xd())),n.updateQueue!==null&&(n.flags|=4),Un(n),null);case 4:return io(),ed(t,n),t===null&&Go(n.stateNode.containerInfo),Un(n),null;case 10:return Id(n.type._context),Un(n),null;case 17:return lr(n.type)&&rs(),Un(n),null;case 19:if(fn(kn),l=n.memoizedState,l===null)return Un(n),null;if(i=(n.flags&128)!==0,s=l.rendering,s===null)if(i)jo(l,!1);else{if(En!==0||t!==null&&t.flags&128)for(t=n.child;t!==null;){if(s=cs(t),s!==null){for(n.flags|=128,jo(l,!1),i=s.updateQueue,i!==null&&(n.updateQueue=i,n.flags|=4),n.subtreeFlags=0,i=r,r=n.child;r!==null;)l=r,t=i,l.flags&=14680066,s=l.alternate,s===null?(l.childLanes=0,l.lanes=t,l.child=null,l.subtreeFlags=0,l.memoizedProps=null,l.memoizedState=null,l.updateQueue=null,l.dependencies=null,l.stateNode=null):(l.childLanes=s.childLanes,l.lanes=s.lanes,l.child=s.child,l.subtreeFlags=0,l.deletions=null,l.memoizedProps=s.memoizedProps,l.memoizedState=s.memoizedState,l.updateQueue=s.updateQueue,l.type=s.type,t=s.dependencies,l.dependencies=t===null?null:{lanes:t.lanes,firstContext:t.firstContext}),r=r.sibling;return un(kn,kn.current&1|2),n.child}t=t.sibling}l.tail!==null&&Tn()>lo&&(n.flags|=128,i=!0,jo(l,!1),n.lanes=4194304)}else{if(!i)if(t=cs(s),t!==null){if(n.flags|=128,i=!0,r=t.updateQueue,r!==null&&(n.updateQueue=r,n.flags|=4),jo(l,!0),l.tail===null&&l.tailMode==="hidden"&&!s.alternate&&!yn)return Un(n),null}else 2*Tn()-l.renderingStartTime>lo&&r!==1073741824&&(n.flags|=128,i=!0,jo(l,!1),n.lanes=4194304);l.isBackwards?(s.sibling=n.child,n.child=s):(r=l.last,r!==null?r.sibling=s:n.child=s,l.last=s)}return l.tail!==null?(n=l.tail,l.rendering=n,l.tail=n.sibling,l.renderingStartTime=Tn(),n.sibling=null,r=kn.current,un(kn,i?r&1|2:r&1),n):(Un(n),null);case 22:case 23:return Zd(),i=n.memoizedState!==null,t!==null&&t.memoizedState!==null!==i&&(n.flags|=8192),i&&n.mode&1?dr&1073741824&&(Un(n),n.subtreeFlags&6&&(n.flags|=8192)):Un(n),null;case 24:return null;case 25:return null}throw Error(Ie(156,n.tag))}function yg(t,n){switch(Nd(n),n.tag){case 1:return lr(n.type)&&rs(),t=n.flags,t&65536?(n.flags=t&-65537|128,n):null;case 3:return io(),fn(or),fn(Qn),Kd(),t=n.flags,t&65536&&!(t&128)?(n.flags=t&-65537|128,n):null;case 5:return Pd(n),null;case 13:if(fn(kn),t=n.memoizedState,t!==null&&t.dehydrated!==null){if(n.alternate===null)throw Error(Ie(340));no()}return t=n.flags,t&65536?(n.flags=t&-65537|128,n):null;case 19:return fn(kn),null;case 4:return io(),null;case 10:return Id(n.type._context),null;case 22:case 23:return Zd(),null;case 24:return null;default:return null}}var Cl=!1,qn=!1,bg=typeof WeakSet=="function"?WeakSet:Set,ut=null;function Fi(t,n){var r=t.ref;if(r!==null)if(typeof r=="function")try{r(null)}catch(i){zn(t,n,i)}else r.current=null}function td(t,n,r){try{r()}catch(i){zn(t,n,i)}}var du=!1;function jg(t,n){if($a=Jl,t=Hp(),Ld(t)){if("selectionStart"in t)var r={start:t.selectionStart,end:t.selectionEnd};else e:{r=(r=t.ownerDocument)&&r.defaultView||window;var i=r.getSelection&&r.getSelection();if(i&&i.rangeCount!==0){r=i.anchorNode;var o=i.anchorOffset,l=i.focusNode;i=i.focusOffset;try{r.nodeType,l.nodeType}catch{r=null;break e}var s=0,u=-1,d=-1,h=0,C=0,k=t,S=null;t:for(;;){for(var B;k!==r||o!==0&&k.nodeType!==3||(u=s+o),k!==l||i!==0&&k.nodeType!==3||(d=s+i),k.nodeType===3&&(s+=k.nodeValue.length),(B=k.firstChild)!==null;)S=k,k=B;for(;;){if(k===t)break t;if(S===r&&++h===o&&(u=s),S===l&&++C===i&&(d=s),(B=k.nextSibling)!==null)break;k=S,S=k.parentNode}k=B}r=u===-1||d===-1?null:{start:u,end:d}}else r=null}r=r||{start:0,end:0}}else r=null;for(Pa={focusedElem:t,selectionRange:r},Jl=!1,ut=n;ut!==null;)if(n=ut,t=n.child,(n.subtreeFlags&1028)!==0&&t!==null)t.return=n,ut=t;else for(;ut!==null;){n=ut;try{var m=n.alternate;if(n.flags&1024)switch(n.tag){case 0:case 11:case 15:break;case 1:if(m!==null){var I=m.memoizedProps,F=m.memoizedState,y=n.stateNode,f=y.getSnapshotBeforeUpdate(n.elementType===n.type?I:Cr(n.type,I),F);y.__reactInternalSnapshotBeforeUpdate=f}break;case 3:var b=n.stateNode.containerInfo;b.nodeType===1?b.textContent="":b.nodeType===9&&b.documentElement&&b.removeChild(b.documentElement);break;case 5:case 6:case 4:case 17:break;default:throw Error(Ie(163))}}catch(D){zn(n,n.return,D)}if(t=n.sibling,t!==null){t.return=n.return,ut=t;break}ut=n.return}return m=du,du=!1,m}function Io(t,n,r){var i=n.updateQueue;if(i=i!==null?i.lastEffect:null,i!==null){var o=i=i.next;do{if((o.tag&t)===t){var l=o.destroy;o.destroy=void 0,l!==void 0&&td(n,r,l)}o=o.next}while(o!==i)}}function Bs(t,n){if(n=n.updateQueue,n=n!==null?n.lastEffect:null,n!==null){var r=n=n.next;do{if((r.tag&t)===t){var i=r.create;r.destroy=i()}r=r.next}while(r!==n)}}function nd(t){var n=t.ref;if(n!==null){var r=t.stateNode;switch(t.tag){case 5:t=r;break;default:t=r}typeof n=="function"?n(t):n.current=t}}function $x(t){var n=t.alternate;n!==null&&(t.alternate=null,$x(n)),t.child=null,t.deletions=null,t.sibling=null,t.tag===5&&(n=t.stateNode,n!==null&&(delete n[Dr],delete n[qo],delete n[Ha],delete n[ng],delete n[rg])),t.stateNode=null,t.return=null,t.dependencies=null,t.memoizedProps=null,t.memoizedState=null,t.pendingProps=null,t.stateNode=null,t.updateQueue=null}function Px(t){return t.tag===5||t.tag===3||t.tag===4}function cu(t){e:for(;;){for(;t.sibling===null;){if(t.return===null||Px(t.return))return null;t=t.return}for(t.sibling.return=t.return,t=t.sibling;t.tag!==5&&t.tag!==6&&t.tag!==18;){if(t.flags&2||t.child===null||t.tag===4)continue e;t.child.return=t,t=t.child}if(!(t.flags&2))return t.stateNode}}function rd(t,n,r){var i=t.tag;if(i===5||i===6)t=t.stateNode,n?r.nodeType===8?r.parentNode.insertBefore(t,n):r.insertBefore(t,n):(r.nodeType===8?(n=r.parentNode,n.insertBefore(t,r)):(n=r,n.appendChild(t)),r=r._reactRootContainer,r!=null||n.onclick!==null||(n.onclick=ns));else if(i!==4&&(t=t.child,t!==null))for(rd(t,n,r),t=t.sibling;t!==null;)rd(t,n,r),t=t.sibling}function id(t,n,r){var i=t.tag;if(i===5||i===6)t=t.stateNode,n?r.insertBefore(t,n):r.appendChild(t);else if(i!==4&&(t=t.child,t!==null))for(id(t,n,r),t=t.sibling;t!==null;)id(t,n,r),t=t.sibling}var Fn=null,zr=!1;function Yr(t,n,r){for(r=r.child;r!==null;)Kx(t,n,r),r=r.sibling}function Kx(t,n,r){if(Mr&&typeof Mr.onCommitFiberUnmount=="function")try{Mr.onCommitFiberUnmount(bs,r)}catch{}switch(r.tag){case 5:qn||Fi(r,n);case 6:var i=Fn,o=zr;Fn=null,Yr(t,n,r),Fn=i,zr=o,Fn!==null&&(zr?(t=Fn,r=r.stateNode,t.nodeType===8?t.parentNode.removeChild(r):t.removeChild(r)):Fn.removeChild(r.stateNode));break;case 18:Fn!==null&&(zr?(t=Fn,r=r.stateNode,t.nodeType===8?Zs(t.parentNode,r):t.nodeType===1&&Zs(t,r),Oo(t)):Zs(Fn,r.stateNode));break;case 4:i=Fn,o=zr,Fn=r.stateNode.containerInfo,zr=!0,Yr(t,n,r),Fn=i,zr=o;break;case 0:case 11:case 14:case 15:if(!qn&&(i=r.updateQueue,i!==null&&(i=i.lastEffect,i!==null))){o=i=i.next;do{var l=o,s=l.destroy;l=l.tag,s!==void 0&&(l&2||l&4)&&td(r,n,s),o=o.next}while(o!==i)}Yr(t,n,r);break;case 1:if(!qn&&(Fi(r,n),i=r.stateNode,typeof i.componentWillUnmount=="function"))try{i.props=r.memoizedProps,i.state=r.memoizedState,i.componentWillUnmount()}catch(u){zn(r,n,u)}Yr(t,n,r);break;case 21:Yr(t,n,r);break;case 22:r.mode&1?(qn=(i=qn)||r.memoizedState!==null,Yr(t,n,r),qn=i):Yr(t,n,r);break;default:Yr(t,n,r)}}function uu(t){var n=t.updateQueue;if(n!==null){t.updateQueue=null;var r=t.stateNode;r===null&&(r=t.stateNode=new bg),n.forEach(function(i){var o=Lg.bind(null,t,i);r.has(i)||(r.add(i),i.then(o,o))})}}function Sr(t,n){var r=n.deletions;if(r!==null)for(var i=0;i<r.length;i++){var o=r[i];try{var l=t,s=n,u=s;e:for(;u!==null;){switch(u.tag){case 5:Fn=u.stateNode,zr=!1;break e;case 3:Fn=u.stateNode.containerInfo,zr=!0;break e;case 4:Fn=u.stateNode.containerInfo,zr=!0;break e}u=u.return}if(Fn===null)throw Error(Ie(160));Kx(l,s,o),Fn=null,zr=!1;var d=o.alternate;d!==null&&(d.return=null),o.return=null}catch(h){zn(o,n,h)}}if(n.subtreeFlags&12854)for(n=n.child;n!==null;)_x(n,t),n=n.sibling}function _x(t,n){var r=t.alternate,i=t.flags;switch(t.tag){case 0:case 11:case 14:case 15:if(Sr(n,t),Nr(t),i&4){try{Io(3,t,t.return),Bs(3,t)}catch(I){zn(t,t.return,I)}try{Io(5,t,t.return)}catch(I){zn(t,t.return,I)}}break;case 1:Sr(n,t),Nr(t),i&512&&r!==null&&Fi(r,r.return);break;case 5:if(Sr(n,t),Nr(t),i&512&&r!==null&&Fi(r,r.return),t.flags&32){var o=t.stateNode;try{Ko(o,"")}catch(I){zn(t,t.return,I)}}if(i&4&&(o=t.stateNode,o!=null)){var l=t.memoizedProps,s=r!==null?r.memoizedProps:l,u=t.type,d=t.updateQueue;if(t.updateQueue=null,d!==null)try{u==="input"&&l.type==="radio"&&l.name!=null&&dp(o,l),Ta(u,s);var h=Ta(u,l);for(s=0;s<d.length;s+=2){var C=d[s],k=d[s+1];C==="style"?fp(o,k):C==="dangerouslySetInnerHTML"?pp(o,k):C==="children"?Ko(o,k):gd(o,C,k,h)}switch(u){case"input":wa(o,l);break;case"textarea":cp(o,l);break;case"select":var S=o._wrapperState.wasMultiple;o._wrapperState.wasMultiple=!!l.multiple;var B=l.value;B!=null?Gi(o,!!l.multiple,B,!1):S!==!!l.multiple&&(l.defaultValue!=null?Gi(o,!!l.multiple,l.defaultValue,!0):Gi(o,!!l.multiple,l.multiple?[]:"",!1))}o[qo]=l}catch(I){zn(t,t.return,I)}}break;case 6:if(Sr(n,t),Nr(t),i&4){if(t.stateNode===null)throw Error(Ie(162));o=t.stateNode,l=t.memoizedProps;try{o.nodeValue=l}catch(I){zn(t,t.return,I)}}break;case 3:if(Sr(n,t),Nr(t),i&4&&r!==null&&r.memoizedState.isDehydrated)try{Oo(n.containerInfo)}catch(I){zn(t,t.return,I)}break;case 4:Sr(n,t),Nr(t);break;case 13:Sr(n,t),Nr(t),o=t.child,o.flags&8192&&(l=o.memoizedState!==null,o.stateNode.isHidden=l,!l||o.alternate!==null&&o.alternate.memoizedState!==null||(qd=Tn())),i&4&&uu(t);break;case 22:if(C=r!==null&&r.memoizedState!==null,t.mode&1?(qn=(h=qn)||C,Sr(n,t),qn=h):Sr(n,t),Nr(t),i&8192){if(h=t.memoizedState!==null,(t.stateNode.isHidden=h)&&!C&&t.mode&1)for(ut=t,C=t.child;C!==null;){for(k=ut=C;ut!==null;){switch(S=ut,B=S.child,S.tag){case 0:case 11:case 14:case 15:Io(4,S,S.return);break;case 1:Fi(S,S.return);var m=S.stateNode;if(typeof m.componentWillUnmount=="function"){i=S,r=S.return;try{n=i,m.props=n.memoizedProps,m.state=n.memoizedState,m.componentWillUnmount()}catch(I){zn(i,r,I)}}break;case 5:Fi(S,S.return);break;case 22:if(S.memoizedState!==null){xu(k);continue}}B!==null?(B.return=S,ut=B):xu(k)}C=C.sibling}e:for(C=null,k=t;;){if(k.tag===5){if(C===null){C=k;try{o=k.stateNode,h?(l=o.style,typeof l.setProperty=="function"?l.setProperty("display","none","important"):l.display="none"):(u=k.stateNode,d=k.memoizedProps.style,s=d!=null&&d.hasOwnProperty("display")?d.display:null,u.style.display=xp("display",s))}catch(I){zn(t,t.return,I)}}}else if(k.tag===6){if(C===null)try{k.stateNode.nodeValue=h?"":k.memoizedProps}catch(I){zn(t,t.return,I)}}else if((k.tag!==22&&k.tag!==23||k.memoizedState===null||k===t)&&k.child!==null){k.child.return=k,k=k.child;continue}if(k===t)break e;for(;k.sibling===null;){if(k.return===null||k.return===t)break e;C===k&&(C=null),k=k.return}C===k&&(C=null),k.sibling.return=k.return,k=k.sibling}}break;case 19:Sr(n,t),Nr(t),i&4&&uu(t);break;case 21:break;default:Sr(n,t),Nr(t)}}function Nr(t){var n=t.flags;if(n&2){try{e:{for(var r=t.return;r!==null;){if(Px(r)){var i=r;break e}r=r.return}throw Error(Ie(160))}switch(i.tag){case 5:var o=i.stateNode;i.flags&32&&(Ko(o,""),i.flags&=-33);var l=cu(t);id(t,l,o);break;case 3:case 4:var s=i.stateNode.containerInfo,u=cu(t);rd(t,u,s);break;default:throw Error(Ie(161))}}catch(d){zn(t,t.return,d)}t.flags&=-3}n&4096&&(t.flags&=-4097)}function vg(t,n,r){ut=t,Hx(t)}function Hx(t,n,r){for(var i=(t.mode&1)!==0;ut!==null;){var o=ut,l=o.child;if(o.tag===22&&i){var s=o.memoizedState!==null||Cl;if(!s){var u=o.alternate,d=u!==null&&u.memoizedState!==null||qn;u=Cl;var h=qn;if(Cl=s,(qn=d)&&!h)for(ut=o;ut!==null;)s=ut,d=s.child,s.tag===22&&s.memoizedState!==null?fu(o):d!==null?(d.return=s,ut=d):fu(o);for(;l!==null;)ut=l,Hx(l),l=l.sibling;ut=o,Cl=u,qn=h}pu(t)}else o.subtreeFlags&8772&&l!==null?(l.return=o,ut=l):pu(t)}}function pu(t){for(;ut!==null;){var n=ut;if(n.flags&8772){var r=n.alternate;try{if(n.flags&8772)switch(n.tag){case 0:case 11:case 15:qn||Bs(5,n);break;case 1:var i=n.stateNode;if(n.flags&4&&!qn)if(r===null)i.componentDidMount();else{var o=n.elementType===n.type?r.memoizedProps:Cr(n.type,r.memoizedProps);i.componentDidUpdate(o,r.memoizedState,i.__reactInternalSnapshotBeforeUpdate)}var l=n.updateQueue;l!==null&&Qc(n,l,i);break;case 3:var s=n.updateQueue;if(s!==null){if(r=null,n.child!==null)switch(n.child.tag){case 5:r=n.child.stateNode;break;case 1:r=n.child.stateNode}Qc(n,s,r)}break;case 5:var u=n.stateNode;if(r===null&&n.flags&4){r=u;var d=n.memoizedProps;switch(n.type){case"button":case"input":case"select":case"textarea":d.autoFocus&&r.focus();break;case"img":d.src&&(r.src=d.src)}}break;case 6:break;case 4:break;case 12:break;case 13:if(n.memoizedState===null){var h=n.alternate;if(h!==null){var C=h.memoizedState;if(C!==null){var k=C.dehydrated;k!==null&&Oo(k)}}}break;case 19:case 17:case 21:case 22:case 23:case 25:break;default:throw Error(Ie(163))}qn||n.flags&512&&nd(n)}catch(S){zn(n,n.return,S)}}if(n===t){ut=null;break}if(r=n.sibling,r!==null){r.return=n.return,ut=r;break}ut=n.return}}function xu(t){for(;ut!==null;){var n=ut;if(n===t){ut=null;break}var r=n.sibling;if(r!==null){r.return=n.return,ut=r;break}ut=n.return}}function fu(t){for(;ut!==null;){var n=ut;try{switch(n.tag){case 0:case 11:case 15:var r=n.return;try{Bs(4,n)}catch(d){zn(n,r,d)}break;case 1:var i=n.stateNode;if(typeof i.componentDidMount=="function"){var o=n.return;try{i.componentDidMount()}catch(d){zn(n,o,d)}}var l=n.return;try{nd(n)}catch(d){zn(n,l,d)}break;case 5:var s=n.return;try{nd(n)}catch(d){zn(n,s,d)}}}catch(d){zn(n,n.return,d)}if(n===t){ut=null;break}var u=n.sibling;if(u!==null){u.return=n.return,ut=u;break}ut=n.return}}var kg=Math.ceil,xs=Vr.ReactCurrentDispatcher,Gd=Vr.ReactCurrentOwner,jr=Vr.ReactCurrentBatchConfig,Qt=0,Kn=null,Dn=null,Vn=0,dr=0,Oi=ci(0),En=0,tl=null,Si=0,Ts=0,Ud=0,Ao=null,rr=null,qd=0,lo=1/0,Ar=null,fs=!1,od=null,ii=null,zl=!1,Xr=null,hs=0,Eo=0,ld=null,Fl=-1,Ol=0;function Jn(){return Qt&6?Tn():Fl!==-1?Fl:Fl=Tn()}function oi(t){return t.mode&1?Qt&2&&Vn!==0?Vn&-Vn:og.transition!==null?(Ol===0&&(Ol=zp()),Ol):(t=an,t!==0||(t=window.event,t=t===void 0?16:Dp(t.type)),t):1}function Lr(t,n,r,i){if(50<Eo)throw Eo=0,ld=null,Error(Ie(185));rl(t,r,i),(!(Qt&2)||t!==Kn)&&(t===Kn&&(!(Qt&2)&&(Ts|=r),En===4&&Qr(t,Vn)),sr(t,i),r===1&&Qt===0&&!(n.mode&1)&&(lo=Tn()+500,Ss&&ui()))}function sr(t,n){var r=t.callbackNode;oh(t,n);var i=Xl(t,t===Kn?Vn:0);if(i===0)r!==null&&wc(r),t.callbackNode=null,t.callbackPriority=0;else if(n=i&-i,t.callbackPriority!==n){if(r!=null&&wc(r),n===1)t.tag===0?ig(hu.bind(null,t)):Xp(hu.bind(null,t)),eg(function(){!(Qt&6)&&ui()}),r=null;else{switch(Bp(i)){case 1:r=vd;break;case 4:r=Sp;break;case 16:r=Zl;break;case 536870912:r=Cp;break;default:r=Zl}r=Qx(r,Fx.bind(null,t))}t.callbackPriority=n,t.callbackNode=r}}function Fx(t,n){if(Fl=-1,Ol=0,Qt&6)throw Error(Ie(327));var r=t.callbackNode;if(Xi()&&t.callbackNode!==r)return null;var i=Xl(t,t===Kn?Vn:0);if(i===0)return null;if(i&30||i&t.expiredLanes||n)n=gs(t,i);else{n=i;var o=Qt;Qt|=2;var l=Vx();(Kn!==t||Vn!==n)&&(Ar=null,lo=Tn()+500,bi(t,n));do try{Cg();break}catch(u){Ox(t,u)}while(!0);Md(),xs.current=l,Qt=o,Dn!==null?n=0:(Kn=null,Vn=0,n=En)}if(n!==0){if(n===2&&(o=Da(t),o!==0&&(i=o,n=sd(t,o))),n===1)throw r=tl,bi(t,0),Qr(t,i),sr(t,Tn()),r;if(n===6)Qr(t,i);else{if(o=t.current.alternate,!(i&30)&&!wg(o)&&(n=gs(t,i),n===2&&(l=Da(t),l!==0&&(i=l,n=sd(t,l))),n===1))throw r=tl,bi(t,0),Qr(t,i),sr(t,Tn()),r;switch(t.finishedWork=o,t.finishedLanes=i,n){case 0:case 1:throw Error(Ie(345));case 2:hi(t,rr,Ar);break;case 3:if(Qr(t,i),(i&130023424)===i&&(n=qd+500-Tn(),10<n)){if(Xl(t,0)!==0)break;if(o=t.suspendedLanes,(o&i)!==i){Jn(),t.pingedLanes|=t.suspendedLanes&o;break}t.timeoutHandle=_a(hi.bind(null,t,rr,Ar),n);break}hi(t,rr,Ar);break;case 4:if(Qr(t,i),(i&4194240)===i)break;for(n=t.eventTimes,o=-1;0<i;){var s=31-Tr(i);l=1<<s,s=n[s],s>o&&(o=s),i&=~l}if(i=o,i=Tn()-i,i=(120>i?120:480>i?480:1080>i?1080:1920>i?1920:3e3>i?3e3:4320>i?4320:1960*kg(i/1960))-i,10<i){t.timeoutHandle=_a(hi.bind(null,t,rr,Ar),i);break}hi(t,rr,Ar);break;case 5:hi(t,rr,Ar);break;default:throw Error(Ie(329))}}}return sr(t,Tn()),t.callbackNode===r?Fx.bind(null,t):null}function sd(t,n){var r=Ao;return t.current.memoizedState.isDehydrated&&(bi(t,n).flags|=256),t=gs(t,n),t!==2&&(n=rr,rr=r,n!==null&&ad(n)),t}function ad(t){rr===null?rr=t:rr.push.apply(rr,t)}function wg(t){for(var n=t;;){if(n.flags&16384){var r=n.updateQueue;if(r!==null&&(r=r.stores,r!==null))for(var i=0;i<r.length;i++){var o=r[i],l=o.getSnapshot;o=o.value;try{if(!Wr(l(),o))return!1}catch{return!1}}}if(r=n.child,n.subtreeFlags&16384&&r!==null)r.return=n,n=r;else{if(n===t)break;for(;n.sibling===null;){if(n.return===null||n.return===t)return!0;n=n.return}n.sibling.return=n.return,n=n.sibling}}return!0}function Qr(t,n){for(n&=~Ud,n&=~Ts,t.suspendedLanes|=n,t.pingedLanes&=~n,t=t.expirationTimes;0<n;){var r=31-Tr(n),i=1<<r;t[r]=-1,n&=~i}}function hu(t){if(Qt&6)throw Error(Ie(327));Xi();var n=Xl(t,0);if(!(n&1))return sr(t,Tn()),null;var r=gs(t,n);if(t.tag!==0&&r===2){var i=Da(t);i!==0&&(n=i,r=sd(t,i))}if(r===1)throw r=tl,bi(t,0),Qr(t,n),sr(t,Tn()),r;if(r===6)throw Error(Ie(345));return t.finishedWork=t.current.alternate,t.finishedLanes=n,hi(t,rr,Ar),sr(t,Tn()),null}function Qd(t,n){var r=Qt;Qt|=1;try{return t(n)}finally{Qt=r,Qt===0&&(lo=Tn()+500,Ss&&ui())}}function Ci(t){Xr!==null&&Xr.tag===0&&!(Qt&6)&&Xi();var n=Qt;Qt|=1;var r=jr.transition,i=an;try{if(jr.transition=null,an=1,t)return t()}finally{an=i,jr.transition=r,Qt=n,!(Qt&6)&&ui()}}function Zd(){dr=Oi.current,fn(Oi)}function bi(t,n){t.finishedWork=null,t.finishedLanes=0;var r=t.timeoutHandle;if(r!==-1&&(t.timeoutHandle=-1,Jh(r)),Dn!==null)for(r=Dn.return;r!==null;){var i=r;switch(Nd(i),i.tag){case 1:i=i.type.childContextTypes,i!=null&&rs();break;case 3:io(),fn(or),fn(Qn),Kd();break;case 5:Pd(i);break;case 4:io();break;case 13:fn(kn);break;case 19:fn(kn);break;case 10:Id(i.type._context);break;case 22:case 23:Zd()}r=r.return}if(Kn=t,Dn=t=li(t.current,null),Vn=dr=n,En=0,tl=null,Ud=Ts=Si=0,rr=Ao=null,mi!==null){for(n=0;n<mi.length;n++)if(r=mi[n],i=r.interleaved,i!==null){r.interleaved=null;var o=i.next,l=r.pending;if(l!==null){var s=l.next;l.next=o,i.next=s}r.pending=i}mi=null}return t}function Ox(t,n){do{var r=Dn;try{if(Md(),Kl.current=ps,us){for(var i=wn.memoizedState;i!==null;){var o=i.queue;o!==null&&(o.pending=null),i=i.next}us=!1}if(wi=0,Pn=An=wn=null,Mo=!1,Xo=0,Gd.current=null,r===null||r.return===null){En=1,tl=n,Dn=null;break}e:{var l=t,s=r.return,u=r,d=n;if(n=Vn,u.flags|=32768,d!==null&&typeof d=="object"&&typeof d.then=="function"){var h=d,C=u,k=C.tag;if(!(C.mode&1)&&(k===0||k===11||k===15)){var S=C.alternate;S?(C.updateQueue=S.updateQueue,C.memoizedState=S.memoizedState,C.lanes=S.lanes):(C.updateQueue=null,C.memoizedState=null)}var B=nu(s);if(B!==null){B.flags&=-257,ru(B,s,u,l,n),B.mode&1&&tu(l,h,n),n=B,d=h;var m=n.updateQueue;if(m===null){var I=new Set;I.add(d),n.updateQueue=I}else m.add(d);break e}else{if(!(n&1)){tu(l,h,n),Xd();break e}d=Error(Ie(426))}}else if(yn&&u.mode&1){var F=nu(s);if(F!==null){!(F.flags&65536)&&(F.flags|=256),ru(F,s,u,l,n),Rd(oo(d,u));break e}}l=d=oo(d,u),En!==4&&(En=2),Ao===null?Ao=[l]:Ao.push(l),l=s;do{switch(l.tag){case 3:l.flags|=65536,n&=-n,l.lanes|=n;var y=Bx(l,d,n);qc(l,y);break e;case 1:u=d;var f=l.type,b=l.stateNode;if(!(l.flags&128)&&(typeof f.getDerivedStateFromError=="function"||b!==null&&typeof b.componentDidCatch=="function"&&(ii===null||!ii.has(b)))){l.flags|=65536,n&=-n,l.lanes|=n;var D=Tx(l,u,n);qc(l,D);break e}}l=l.return}while(l!==null)}Gx(r)}catch(q){n=q,Dn===r&&r!==null&&(Dn=r=r.return);continue}break}while(!0)}function Vx(){var t=xs.current;return xs.current=ps,t===null?ps:t}function Xd(){(En===0||En===3||En===2)&&(En=4),Kn===null||!(Si&268435455)&&!(Ts&268435455)||Qr(Kn,Vn)}function gs(t,n){var r=Qt;Qt|=2;var i=Vx();(Kn!==t||Vn!==n)&&(Ar=null,bi(t,n));do try{Sg();break}catch(o){Ox(t,o)}while(!0);if(Md(),Qt=r,xs.current=i,Dn!==null)throw Error(Ie(261));return Kn=null,Vn=0,En}function Sg(){for(;Dn!==null;)Yx(Dn)}function Cg(){for(;Dn!==null&&!Qf();)Yx(Dn)}function Yx(t){var n=qx(t.alternate,t,dr);t.memoizedProps=t.pendingProps,n===null?Gx(t):Dn=n,Gd.current=null}function Gx(t){var n=t;do{var r=n.alternate;if(t=n.return,n.flags&32768){if(r=yg(r,n),r!==null){r.flags&=32767,Dn=r;return}if(t!==null)t.flags|=32768,t.subtreeFlags=0,t.deletions=null;else{En=6,Dn=null;return}}else if(r=mg(r,n,dr),r!==null){Dn=r;return}if(n=n.sibling,n!==null){Dn=n;return}Dn=n=t}while(n!==null);En===0&&(En=5)}function hi(t,n,r){var i=an,o=jr.transition;try{jr.transition=null,an=1,zg(t,n,r,i)}finally{jr.transition=o,an=i}return null}function zg(t,n,r,i){do Xi();while(Xr!==null);if(Qt&6)throw Error(Ie(327));r=t.finishedWork;var o=t.finishedLanes;if(r===null)return null;if(t.finishedWork=null,t.finishedLanes=0,r===t.current)throw Error(Ie(177));t.callbackNode=null,t.callbackPriority=0;var l=r.lanes|r.childLanes;if(lh(t,l),t===Kn&&(Dn=Kn=null,Vn=0),!(r.subtreeFlags&2064)&&!(r.flags&2064)||zl||(zl=!0,Qx(Zl,function(){return Xi(),null})),l=(r.flags&15990)!==0,r.subtreeFlags&15990||l){l=jr.transition,jr.transition=null;var s=an;an=1;var u=Qt;Qt|=4,Gd.current=null,jg(t,r),_x(r,t),Yh(Pa),Jl=!!$a,Pa=$a=null,t.current=r,vg(r),Zf(),Qt=u,an=s,jr.transition=l}else t.current=r;if(zl&&(zl=!1,Xr=t,hs=o),l=t.pendingLanes,l===0&&(ii=null),eh(r.stateNode),sr(t,Tn()),n!==null)for(i=t.onRecoverableError,r=0;r<n.length;r++)o=n[r],i(o.value,{componentStack:o.stack,digest:o.digest});if(fs)throw fs=!1,t=od,od=null,t;return hs&1&&t.tag!==0&&Xi(),l=t.pendingLanes,l&1?t===ld?Eo++:(Eo=0,ld=t):Eo=0,ui(),null}function Xi(){if(Xr!==null){var t=Bp(hs),n=jr.transition,r=an;try{if(jr.transition=null,an=16>t?16:t,Xr===null)var i=!1;else{if(t=Xr,Xr=null,hs=0,Qt&6)throw Error(Ie(331));var o=Qt;for(Qt|=4,ut=t.current;ut!==null;){var l=ut,s=l.child;if(ut.flags&16){var u=l.deletions;if(u!==null){for(var d=0;d<u.length;d++){var h=u[d];for(ut=h;ut!==null;){var C=ut;switch(C.tag){case 0:case 11:case 15:Io(8,C,l)}var k=C.child;if(k!==null)k.return=C,ut=k;else for(;ut!==null;){C=ut;var S=C.sibling,B=C.return;if($x(C),C===h){ut=null;break}if(S!==null){S.return=B,ut=S;break}ut=B}}}var m=l.alternate;if(m!==null){var I=m.child;if(I!==null){m.child=null;do{var F=I.sibling;I.sibling=null,I=F}while(I!==null)}}ut=l}}if(l.subtreeFlags&2064&&s!==null)s.return=l,ut=s;else e:for(;ut!==null;){if(l=ut,l.flags&2048)switch(l.tag){case 0:case 11:case 15:Io(9,l,l.return)}var y=l.sibling;if(y!==null){y.return=l.return,ut=y;break e}ut=l.return}}var f=t.current;for(ut=f;ut!==null;){s=ut;var b=s.child;if(s.subtreeFlags&2064&&b!==null)b.return=s,ut=b;else e:for(s=f;ut!==null;){if(u=ut,u.flags&2048)try{switch(u.tag){case 0:case 11:case 15:Bs(9,u)}}catch(q){zn(u,u.return,q)}if(u===s){ut=null;break e}var D=u.sibling;if(D!==null){D.return=u.return,ut=D;break e}ut=u.return}}if(Qt=o,ui(),Mr&&typeof Mr.onPostCommitFiberRoot=="function")try{Mr.onPostCommitFiberRoot(bs,t)}catch{}i=!0}return i}finally{an=r,jr.transition=n}}return!1}function gu(t,n,r){n=oo(r,n),n=Bx(t,n,1),t=ri(t,n,1),n=Jn(),t!==null&&(rl(t,1,n),sr(t,n))}function zn(t,n,r){if(t.tag===3)gu(t,t,r);else for(;n!==null;){if(n.tag===3){gu(n,t,r);break}else if(n.tag===1){var i=n.stateNode;if(typeof n.type.getDerivedStateFromError=="function"||typeof i.componentDidCatch=="function"&&(ii===null||!ii.has(i))){t=oo(r,t),t=Tx(n,t,1),n=ri(n,t,1),t=Jn(),n!==null&&(rl(n,1,t),sr(n,t));break}}n=n.return}}function Bg(t,n,r){var i=t.pingCache;i!==null&&i.delete(n),n=Jn(),t.pingedLanes|=t.suspendedLanes&r,Kn===t&&(Vn&r)===r&&(En===4||En===3&&(Vn&130023424)===Vn&&500>Tn()-qd?bi(t,0):Ud|=r),sr(t,n)}function Ux(t,n){n===0&&(t.mode&1?(n=gl,gl<<=1,!(gl&130023424)&&(gl=4194304)):n=1);var r=Jn();t=Fr(t,n),t!==null&&(rl(t,n,r),sr(t,r))}function Tg(t){var n=t.memoizedState,r=0;n!==null&&(r=n.retryLane),Ux(t,r)}function Lg(t,n){var r=0;switch(t.tag){case 13:var i=t.stateNode,o=t.memoizedState;o!==null&&(r=o.retryLane);break;case 19:i=t.stateNode;break;default:throw Error(Ie(314))}i!==null&&i.delete(n),Ux(t,r)}var qx;qx=function(t,n,r){if(t!==null)if(t.memoizedProps!==n.pendingProps||or.current)ir=!0;else{if(!(t.lanes&r)&&!(n.flags&128))return ir=!1,gg(t,n,r);ir=!!(t.flags&131072)}else ir=!1,yn&&n.flags&1048576&&Jp(n,ls,n.index);switch(n.lanes=0,n.tag){case 2:var i=n.type;Hl(t,n),t=n.pendingProps;var o=to(n,Qn.current);Zi(n,r),o=Hd(null,n,i,t,o,r);var l=Fd();return n.flags|=1,typeof o=="object"&&o!==null&&typeof o.render=="function"&&o.$$typeof===void 0?(n.tag=1,n.memoizedState=null,n.updateQueue=null,lr(i)?(l=!0,is(n)):l=!1,n.memoizedState=o.state!==null&&o.state!==void 0?o.state:null,Ed(n),o.updater=zs,n.stateNode=o,o._reactInternals=n,Ua(n,i,t,r),n=Za(null,n,i,!0,l,r)):(n.tag=0,yn&&l&&Wd(n),Xn(null,n,o,r),n=n.child),n;case 16:i=n.elementType;e:{switch(Hl(t,n),t=n.pendingProps,o=i._init,i=o(i._payload),n.type=i,o=n.tag=Ng(i),t=Cr(i,t),o){case 0:n=Qa(null,n,i,t,r);break e;case 1:n=lu(null,n,i,t,r);break e;case 11:n=iu(null,n,i,t,r);break e;case 14:n=ou(null,n,i,Cr(i.type,t),r);break e}throw Error(Ie(306,i,""))}return n;case 0:return i=n.type,o=n.pendingProps,o=n.elementType===i?o:Cr(i,o),Qa(t,n,i,o,r);case 1:return i=n.type,o=n.pendingProps,o=n.elementType===i?o:Cr(i,o),lu(t,n,i,o,r);case 3:e:{if(Rx(n),t===null)throw Error(Ie(387));i=n.pendingProps,l=n.memoizedState,o=l.element,ox(t,n),ds(n,i,null,r);var s=n.memoizedState;if(i=s.element,l.isDehydrated)if(l={element:i,isDehydrated:!1,cache:s.cache,pendingSuspenseBoundaries:s.pendingSuspenseBoundaries,transitions:s.transitions},n.updateQueue.baseState=l,n.memoizedState=l,n.flags&256){o=oo(Error(Ie(423)),n),n=su(t,n,i,r,o);break e}else if(i!==o){o=oo(Error(Ie(424)),n),n=su(t,n,i,r,o);break e}else for(cr=ni(n.stateNode.containerInfo.firstChild),pr=n,yn=!0,Br=null,r=rx(n,null,i,r),n.child=r;r;)r.flags=r.flags&-3|4096,r=r.sibling;else{if(no(),i===o){n=Or(t,n,r);break e}Xn(t,n,i,r)}n=n.child}return n;case 5:return lx(n),t===null&&Va(n),i=n.type,o=n.pendingProps,l=t!==null?t.memoizedProps:null,s=o.children,Ka(i,o)?s=null:l!==null&&Ka(i,l)&&(n.flags|=32),Nx(t,n),Xn(t,n,s,r),n.child;case 6:return t===null&&Va(n),null;case 13:return Dx(t,n,r);case 4:return $d(n,n.stateNode.containerInfo),i=n.pendingProps,t===null?n.child=ro(n,null,i,r):Xn(t,n,i,r),n.child;case 11:return i=n.type,o=n.pendingProps,o=n.elementType===i?o:Cr(i,o),iu(t,n,i,o,r);case 7:return Xn(t,n,n.pendingProps,r),n.child;case 8:return Xn(t,n,n.pendingProps.children,r),n.child;case 12:return Xn(t,n,n.pendingProps.children,r),n.child;case 10:e:{if(i=n.type._context,o=n.pendingProps,l=n.memoizedProps,s=o.value,un(ss,i._currentValue),i._currentValue=s,l!==null)if(Wr(l.value,s)){if(l.children===o.children&&!or.current){n=Or(t,n,r);break e}}else for(l=n.child,l!==null&&(l.return=n);l!==null;){var u=l.dependencies;if(u!==null){s=l.child;for(var d=u.firstContext;d!==null;){if(d.context===i){if(l.tag===1){d=Kr(-1,r&-r),d.tag=2;var h=l.updateQueue;if(h!==null){h=h.shared;var C=h.pending;C===null?d.next=d:(d.next=C.next,C.next=d),h.pending=d}}l.lanes|=r,d=l.alternate,d!==null&&(d.lanes|=r),Ya(l.return,r,n),u.lanes|=r;break}d=d.next}}else if(l.tag===10)s=l.type===n.type?null:l.child;else if(l.tag===18){if(s=l.return,s===null)throw Error(Ie(341));s.lanes|=r,u=s.alternate,u!==null&&(u.lanes|=r),Ya(s,r,n),s=l.sibling}else s=l.child;if(s!==null)s.return=l;else for(s=l;s!==null;){if(s===n){s=null;break}if(l=s.sibling,l!==null){l.return=s.return,s=l;break}s=s.return}l=s}Xn(t,n,o.children,r),n=n.child}return n;case 9:return o=n.type,i=n.pendingProps.children,Zi(n,r),o=vr(o),i=i(o),n.flags|=1,Xn(t,n,i,r),n.child;case 14:return i=n.type,o=Cr(i,n.pendingProps),o=Cr(i.type,o),ou(t,n,i,o,r);case 15:return Lx(t,n,n.type,n.pendingProps,r);case 17:return i=n.type,o=n.pendingProps,o=n.elementType===i?o:Cr(i,o),Hl(t,n),n.tag=1,lr(i)?(t=!0,is(n)):t=!1,Zi(n,r),zx(n,i,o),Ua(n,i,o,r),Za(null,n,i,!0,t,r);case 19:return Mx(t,n,r);case 22:return Wx(t,n,r)}throw Error(Ie(156,n.tag))};function Qx(t,n){return wp(t,n)}function Wg(t,n,r,i){this.tag=t,this.key=r,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.ref=null,this.pendingProps=n,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=i,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function br(t,n,r,i){return new Wg(t,n,r,i)}function Jd(t){return t=t.prototype,!(!t||!t.isReactComponent)}function Ng(t){if(typeof t=="function")return Jd(t)?1:0;if(t!=null){if(t=t.$$typeof,t===yd)return 11;if(t===bd)return 14}return 2}function li(t,n){var r=t.alternate;return r===null?(r=br(t.tag,n,t.key,t.mode),r.elementType=t.elementType,r.type=t.type,r.stateNode=t.stateNode,r.alternate=t,t.alternate=r):(r.pendingProps=n,r.type=t.type,r.flags=0,r.subtreeFlags=0,r.deletions=null),r.flags=t.flags&14680064,r.childLanes=t.childLanes,r.lanes=t.lanes,r.child=t.child,r.memoizedProps=t.memoizedProps,r.memoizedState=t.memoizedState,r.updateQueue=t.updateQueue,n=t.dependencies,r.dependencies=n===null?null:{lanes:n.lanes,firstContext:n.firstContext},r.sibling=t.sibling,r.index=t.index,r.ref=t.ref,r}function Vl(t,n,r,i,o,l){var s=2;if(i=t,typeof t=="function")Jd(t)&&(s=1);else if(typeof t=="string")s=5;else e:switch(t){case Mi:return ji(r.children,o,l,n);case md:s=8,o|=8;break;case ya:return t=br(12,r,n,o|2),t.elementType=ya,t.lanes=l,t;case ba:return t=br(13,r,n,o),t.elementType=ba,t.lanes=l,t;case ja:return t=br(19,r,n,o),t.elementType=ja,t.lanes=l,t;case lp:return Ls(r,o,l,n);default:if(typeof t=="object"&&t!==null)switch(t.$$typeof){case ip:s=10;break e;case op:s=9;break e;case yd:s=11;break e;case bd:s=14;break e;case Gr:s=16,i=null;break e}throw Error(Ie(130,t==null?t:typeof t,""))}return n=br(s,r,n,o),n.elementType=t,n.type=i,n.lanes=l,n}function ji(t,n,r,i){return t=br(7,t,i,n),t.lanes=r,t}function Ls(t,n,r,i){return t=br(22,t,i,n),t.elementType=lp,t.lanes=r,t.stateNode={isHidden:!1},t}function oa(t,n,r){return t=br(6,t,null,n),t.lanes=r,t}function la(t,n,r){return n=br(4,t.children!==null?t.children:[],t.key,n),n.lanes=r,n.stateNode={containerInfo:t.containerInfo,pendingChildren:null,implementation:t.implementation},n}function Rg(t,n,r,i,o){this.tag=n,this.containerInfo=t,this.finishedWork=this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.pendingContext=this.context=null,this.callbackPriority=0,this.eventTimes=Ks(0),this.expirationTimes=Ks(-1),this.entangledLanes=this.finishedLanes=this.mutableReadLanes=this.expiredLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=Ks(0),this.identifierPrefix=i,this.onRecoverableError=o,this.mutableSourceEagerHydrationData=null}function ec(t,n,r,i,o,l,s,u,d){return t=new Rg(t,n,r,u,d),n===1?(n=1,l===!0&&(n|=8)):n=0,l=br(3,null,null,n),t.current=l,l.stateNode=t,l.memoizedState={element:i,isDehydrated:r,cache:null,transitions:null,pendingSuspenseBoundaries:null},Ed(l),t}function Dg(t,n,r){var i=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:Di,key:i==null?null:""+i,children:t,containerInfo:n,implementation:r}}function Zx(t){if(!t)return ai;t=t._reactInternals;e:{if(Ti(t)!==t||t.tag!==1)throw Error(Ie(170));var n=t;do{switch(n.tag){case 3:n=n.stateNode.context;break e;case 1:if(lr(n.type)){n=n.stateNode.__reactInternalMemoizedMergedChildContext;break e}}n=n.return}while(n!==null);throw Error(Ie(171))}if(t.tag===1){var r=t.type;if(lr(r))return Zp(t,r,n)}return n}function Xx(t,n,r,i,o,l,s,u,d){return t=ec(r,i,!0,t,o,l,s,u,d),t.context=Zx(null),r=t.current,i=Jn(),o=oi(r),l=Kr(i,o),l.callback=n??null,ri(r,l,o),t.current.lanes=o,rl(t,o,i),sr(t,i),t}function Ws(t,n,r,i){var o=n.current,l=Jn(),s=oi(o);return r=Zx(r),n.context===null?n.context=r:n.pendingContext=r,n=Kr(l,s),n.payload={element:t},i=i===void 0?null:i,i!==null&&(n.callback=i),t=ri(o,n,s),t!==null&&(Lr(t,o,s,l),Pl(t,o,s)),s}function ms(t){if(t=t.current,!t.child)return null;switch(t.child.tag){case 5:return t.child.stateNode;default:return t.child.stateNode}}function mu(t,n){if(t=t.memoizedState,t!==null&&t.dehydrated!==null){var r=t.retryLane;t.retryLane=r!==0&&r<n?r:n}}function tc(t,n){mu(t,n),(t=t.alternate)&&mu(t,n)}function Mg(){return null}var Jx=typeof reportError=="function"?reportError:function(t){console.error(t)};function nc(t){this._internalRoot=t}Ns.prototype.render=nc.prototype.render=function(t){var n=this._internalRoot;if(n===null)throw Error(Ie(409));Ws(t,n,null,null)};Ns.prototype.unmount=nc.prototype.unmount=function(){var t=this._internalRoot;if(t!==null){this._internalRoot=null;var n=t.containerInfo;Ci(function(){Ws(null,t,null,null)}),n[Hr]=null}};function Ns(t){this._internalRoot=t}Ns.prototype.unstable_scheduleHydration=function(t){if(t){var n=Wp();t={blockedOn:null,target:t,priority:n};for(var r=0;r<qr.length&&n!==0&&n<qr[r].priority;r++);qr.splice(r,0,t),r===0&&Rp(t)}};function rc(t){return!(!t||t.nodeType!==1&&t.nodeType!==9&&t.nodeType!==11)}function Rs(t){return!(!t||t.nodeType!==1&&t.nodeType!==9&&t.nodeType!==11&&(t.nodeType!==8||t.nodeValue!==" react-mount-point-unstable "))}function yu(){}function Ig(t,n,r,i,o){if(o){if(typeof i=="function"){var l=i;i=function(){var h=ms(s);l.call(h)}}var s=Xx(n,i,t,0,null,!1,!1,"",yu);return t._reactRootContainer=s,t[Hr]=s.current,Go(t.nodeType===8?t.parentNode:t),Ci(),s}for(;o=t.lastChild;)t.removeChild(o);if(typeof i=="function"){var u=i;i=function(){var h=ms(d);u.call(h)}}var d=ec(t,0,!1,null,null,!1,!1,"",yu);return t._reactRootContainer=d,t[Hr]=d.current,Go(t.nodeType===8?t.parentNode:t),Ci(function(){Ws(n,d,r,i)}),d}function Ds(t,n,r,i,o){var l=r._reactRootContainer;if(l){var s=l;if(typeof o=="function"){var u=o;o=function(){var d=ms(s);u.call(d)}}Ws(n,s,t,o)}else s=Ig(r,n,t,o,i);return ms(s)}Tp=function(t){switch(t.tag){case 3:var n=t.stateNode;if(n.current.memoizedState.isDehydrated){var r=Bo(n.pendingLanes);r!==0&&(kd(n,r|1),sr(n,Tn()),!(Qt&6)&&(lo=Tn()+500,ui()))}break;case 13:Ci(function(){var i=Fr(t,1);if(i!==null){var o=Jn();Lr(i,t,1,o)}}),tc(t,1)}};wd=function(t){if(t.tag===13){var n=Fr(t,134217728);if(n!==null){var r=Jn();Lr(n,t,134217728,r)}tc(t,134217728)}};Lp=function(t){if(t.tag===13){var n=oi(t),r=Fr(t,n);if(r!==null){var i=Jn();Lr(r,t,n,i)}tc(t,n)}};Wp=function(){return an};Np=function(t,n){var r=an;try{return an=t,n()}finally{an=r}};Wa=function(t,n,r){switch(n){case"input":if(wa(t,r),n=r.name,r.type==="radio"&&n!=null){for(r=t;r.parentNode;)r=r.parentNode;for(r=r.querySelectorAll("input[name="+JSON.stringify(""+n)+'][type="radio"]'),n=0;n<r.length;n++){var i=r[n];if(i!==t&&i.form===t.form){var o=ws(i);if(!o)throw Error(Ie(90));ap(i),wa(i,o)}}}break;case"textarea":cp(t,r);break;case"select":n=r.value,n!=null&&Gi(t,!!r.multiple,n,!1)}};mp=Qd;yp=Ci;var Ag={usingClientEntryPoint:!1,Events:[ol,$i,ws,hp,gp,Qd]},vo={findFiberByHostInstance:gi,bundleType:0,version:"18.3.1",rendererPackageName:"react-dom"},Eg={bundleType:vo.bundleType,version:vo.version,rendererPackageName:vo.rendererPackageName,rendererConfig:vo.rendererConfig,overrideHookState:null,overrideHookStateDeletePath:null,overrideHookStateRenamePath:null,overrideProps:null,overridePropsDeletePath:null,overridePropsRenamePath:null,setErrorHandler:null,setSuspenseHandler:null,scheduleUpdate:null,currentDispatcherRef:Vr.ReactCurrentDispatcher,findHostInstanceByFiber:function(t){return t=vp(t),t===null?null:t.stateNode},findFiberByHostInstance:vo.findFiberByHostInstance||Mg,findHostInstancesForRefresh:null,scheduleRefresh:null,scheduleRoot:null,setRefreshHandler:null,getCurrentFiber:null,reconcilerVersion:"18.3.1-next-f1338f8080-20240426"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var Bl=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!Bl.isDisabled&&Bl.supportsFiber)try{bs=Bl.inject(Eg),Mr=Bl}catch{}}fr.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=Ag;fr.createPortal=function(t,n){var r=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!rc(n))throw Error(Ie(200));return Dg(t,n,null,r)};fr.createRoot=function(t,n){if(!rc(t))throw Error(Ie(299));var r=!1,i="",o=Jx;return n!=null&&(n.unstable_strictMode===!0&&(r=!0),n.identifierPrefix!==void 0&&(i=n.identifierPrefix),n.onRecoverableError!==void 0&&(o=n.onRecoverableError)),n=ec(t,1,!1,null,null,r,!1,i,o),t[Hr]=n.current,Go(t.nodeType===8?t.parentNode:t),new nc(n)};fr.findDOMNode=function(t){if(t==null)return null;if(t.nodeType===1)return t;var n=t._reactInternals;if(n===void 0)throw typeof t.render=="function"?Error(Ie(188)):(t=Object.keys(t).join(","),Error(Ie(268,t)));return t=vp(n),t=t===null?null:t.stateNode,t};fr.flushSync=function(t){return Ci(t)};fr.hydrate=function(t,n,r){if(!Rs(n))throw Error(Ie(200));return Ds(null,t,n,!0,r)};fr.hydrateRoot=function(t,n,r){if(!rc(t))throw Error(Ie(405));var i=r!=null&&r.hydratedSources||null,o=!1,l="",s=Jx;if(r!=null&&(r.unstable_strictMode===!0&&(o=!0),r.identifierPrefix!==void 0&&(l=r.identifierPrefix),r.onRecoverableError!==void 0&&(s=r.onRecoverableError)),n=Xx(n,null,t,1,r??null,o,!1,l,s),t[Hr]=n.current,Go(t),i)for(t=0;t<i.length;t++)r=i[t],o=r._getVersion,o=o(r._source),n.mutableSourceEagerHydrationData==null?n.mutableSourceEagerHydrationData=[r,o]:n.mutableSourceEagerHydrationData.push(r,o);return new Ns(n)};fr.render=function(t,n,r){if(!Rs(n))throw Error(Ie(200));return Ds(null,t,n,!1,r)};fr.unmountComponentAtNode=function(t){if(!Rs(t))throw Error(Ie(40));return t._reactRootContainer?(Ci(function(){Ds(null,null,t,!1,function(){t._reactRootContainer=null,t[Hr]=null})}),!0):!1};fr.unstable_batchedUpdates=Qd;fr.unstable_renderSubtreeIntoContainer=function(t,n,r,i){if(!Rs(r))throw Error(Ie(200));if(t==null||t._reactInternals===void 0)throw Error(Ie(38));return Ds(t,n,r,!1,i)};fr.version="18.3.1-next-f1338f8080-20240426";function ef(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(ef)}catch(t){console.error(t)}}ef(),ep.exports=fr;var _t=ep.exports,bu=_t;ga.createRoot=bu.createRoot,ga.hydrateRoot=bu.hydrateRoot;const $g="modulepreload",Pg=function(t){return"/"+t},ju={},vu=function(n,r,i){let o=Promise.resolve();if(r&&r.length>0){document.getElementsByTagName("link");const s=document.querySelector("meta[property=csp-nonce]"),u=(s==null?void 0:s.nonce)||(s==null?void 0:s.getAttribute("nonce"));o=Promise.allSettled(r.map(d=>{if(d=Pg(d),d in ju)return;ju[d]=!0;const h=d.endsWith(".css"),C=h?'[rel="stylesheet"]':"";if(document.querySelector(`link[href="${d}"]${C}`))return;const k=document.createElement("link");if(k.rel=h?"stylesheet":$g,h||(k.as="script"),k.crossOrigin="",k.href=d,u&&k.setAttribute("nonce",u),document.head.appendChild(k),h)return new Promise((S,B)=>{k.addEventListener("load",S),k.addEventListener("error",()=>B(new Error(`Unable to preload CSS for ${d}`)))})}))}function l(s){const u=new Event("vite:preloadError",{cancelable:!0});if(u.payload=s,window.dispatchEvent(u),!u.defaultPrevented)throw s}return o.then(s=>{for(const u of s||[])u.status==="rejected"&&l(u.reason);return n().catch(l)})},sa="http://localhost:5208/api";function Kg(t,n){if(t.startsWith("http")){const s=new URL(t);return n&&Object.entries(n).forEach(([u,d])=>{d!=null&&s.searchParams.append(u,String(d))}),s.toString()}let r=t;r.startsWith("/api/")?r=r.substring(5):r.startsWith("/api")&&(r=r.substring(4)),r.startsWith("/")||(r=`/${r}`);const o=`${sa.endsWith("/")?sa.slice(0,-1):sa}${r}`,l=new URL(o);return n&&Object.entries(n).forEach(([s,u])=>{u!=null&&l.searchParams.append(s,String(u))}),l.toString()}async function Tl(t,n={}){const r=Kg(t,n.query);(t.includes("database/info")||t.includes("admin"))&&console.log(`[httpClient] Requesting: ${t} -> ${r}`);const i=new Headers(n.headers);!(n.body instanceof FormData)&&!i.has("Content-Type")&&n.body&&i.set("Content-Type","application/json");const o=await fetch(r,{credentials:n.credentials??"include",...n,headers:i});if(!o.ok){let l=o.statusText;try{const s=await o.text();if(s)try{const u=JSON.parse(s);l=u.message||u.error||s}catch{l=s}}catch{}throw new Error(l||o.statusText)}if(o.status!==204)return await o.json()}const xe={get:(t,n)=>Tl(t,{method:"GET",query:n}),post:(t,n,r)=>Tl(t,{...r,method:"POST",body:n instanceof FormData?n:n?JSON.stringify(n):void 0}),put:(t,n)=>Tl(t,{method:"PUT",body:n?JSON.stringify(n):void 0}),delete:(t,n)=>Tl(t,{method:"DELETE",body:n?JSON.stringify(n):void 0})},ku=({onLogin:t,busy:n})=>{const[r,i]=a.useState(""),[o,l]=a.useState(""),[s,u]=a.useState(null),d=async h=>{h.preventDefault(),u(null);try{await t(r,o)}catch(C){u(C instanceof Error?C.message:"Giri baarsz oldu")}};return e.jsxs("div",{className:"login-panel",children:[e.jsxs("div",{className:"login-header",children:[e.jsx("div",{className:"login-icon",children:e.jsxs("svg",{width:"48",height:"48",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:[e.jsx("path",{d:"M19 21v-2a4 4 0 0 0-4-4H9a4 4 0 0 0-4 4v2"}),e.jsx("circle",{cx:"12",cy:"7",r:"4"})]})}),e.jsx("h2",{children:"Ktphane Ynetim Sistemi"}),e.jsx("p",{children:"Ltfen giri yapn"})]}),e.jsxs("form",{onSubmit:d,className:"login-form",children:[e.jsxs("div",{className:"form-group",children:[e.jsxs("label",{children:[e.jsxs("svg",{width:"18",height:"18",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:[e.jsx("path",{d:"M20 21v-2a4 4 0 0 0-4-4H8a4 4 0 0 0-4 4v2"}),e.jsx("circle",{cx:"12",cy:"7",r:"4"})]}),"Kullanc Ad"]}),e.jsx("input",{value:r,placeholder:"Kullanc adnz girin",onChange:h=>i(h.target.value),disabled:n,required:!0})]}),e.jsxs("div",{className:"form-group",children:[e.jsxs("label",{children:[e.jsxs("svg",{width:"18",height:"18",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:[e.jsx("rect",{x:"3",y:"11",width:"18",height:"11",rx:"2",ry:"2"}),e.jsx("path",{d:"M7 11V7a5 5 0 0 1 10 0v4"})]}),"Parola"]}),e.jsx("input",{type:"password",value:o,placeholder:"Parolanz girin",onChange:h=>l(h.target.value),disabled:n,required:!0})]}),s&&e.jsxs("div",{className:"error-message",children:[e.jsxs("svg",{width:"20",height:"20",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:[e.jsx("circle",{cx:"12",cy:"12",r:"10"}),e.jsx("line",{x1:"12",y1:"8",x2:"12",y2:"12"}),e.jsx("line",{x1:"12",y1:"16",x2:"12.01",y2:"16"})]}),e.jsx("span",{children:s})]}),e.jsx("button",{className:"login-button",type:"submit",disabled:n||!r||!o,children:n?e.jsxs(e.Fragment,{children:[e.jsx("span",{className:"login-spinner",children:e.jsxs("svg",{width:"20",height:"20",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2.5",strokeLinecap:"round",children:[e.jsx("circle",{cx:"12",cy:"12",r:"10",strokeDasharray:"47",strokeDashoffset:"47",opacity:"0.2"}),e.jsx("circle",{cx:"12",cy:"12",r:"10",strokeDasharray:"47",strokeDashoffset:"11.75"})]})}),"Giri yaplyor..."]}):e.jsxs(e.Fragment,{children:[e.jsxs("svg",{width:"20",height:"20",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:[e.jsx("path",{d:"M15 3h4a2 2 0 0 1 2 2v14a2 2 0 0 1-2 2h-4"}),e.jsx("polyline",{points:"10 17 15 12 10 7"}),e.jsx("line",{x1:"15",y1:"12",x2:"3",y2:"12"})]}),"Giri Yap"]})})]})]})},wu="http://localhost:5208/api";async function tf(t,n=40){const r=`${wu}/google-books/search?query=${encodeURIComponent(t)}&maxResults=${n}`;try{const i=await fetch(r);if(!i.ok){const l=await i.text();let s=`Arama baarsz (${i.status})`;if(i.status===404)s=`Endpoint bulunamad (404). Ltfen backend'in altndan emin olun. URL: ${r}`;else try{s=JSON.parse(l).message||s}catch{s=l||s}throw new Error(s)}const o=await i.json();return Array.isArray(o)?o:[]}catch(i){throw i instanceof Error?i.message.includes("Failed to fetch")||i.message.includes("NetworkError")?new Error(`Backend'e balanlamyor. Ltfen backend'in altndan emin olun. (${wu})`):i:new Error("Arama srasnda beklenmeyen bir hata olutu")}}async function ic(t,n){return xe.post("/google-books/add-to-csv",{books:t,personelName:n==null?void 0:n.trim()})}const oc=t=>t?t.replace(//gi,"i").replace(//gi,"i").replace(//gi,"s").replace(//gi,"s").replace(//gi,"g").replace(//gi,"g").replace(//gi,"u").replace(//gi,"u").replace(//gi,"o").replace(//gi,"o").replace(//gi,"c").replace(//gi,"c").toLowerCase():"",nf=t=>oc(t),G=(t,n)=>{if(t==null)return!1;const r=oc(t.toString()),i=nf(n);return r.includes(i)},Su=Object.freeze(Object.defineProperty({__proto__:null,normalizeSearchTerm:nf,normalizeTurkishText:oc,searchIncludes:G},Symbol.toStringTag,{value:"Module"})),so=(t,n=0)=>{const r=Math.max(n??0,0),i=Math.max((t==null?void 0:t.returned)??0,0),o=Math.max((t==null?void 0:t.borrowed)??0,0),l=i+r;return{borrowed:Math.max(o,l),returned:i}},Vi=t=>t==null?"":t.toString().trim().replace(/\s+/g," ").toLowerCase(),rf=(t,n)=>{const r=new Set,i=Vi(t);if(i&&r.add(i),n){n.name&&r.add(Vi(n.name)),n.surname&&r.add(Vi(n.surname));const o=Vi(`${n.name??""} ${n.surname??""}`);o&&r.add(o)}return r},_g=(t=[],n=[],r)=>{if(t.length===0||r.size===0)return[];const i=n.length>0?new Set(n.map(o=>o.id).filter(Boolean)):null;return t.filter(o=>{if(!o.borrower)return!1;const l=Vi(o.borrower);return r.has(l)?!i||!o.bookId?!0:i.has(o.bookId):!1})},Hg=t=>{if(!t)return!1;const n=t.quantity??0,r=t.healthyCount??n;return n>0&&r>0},aa=({studentFullName:t,studentData:n,loans:r=[],books:i=[],booksToBorrowCount:o,maxBorrowLimit:l})=>{const s=rf(t,n),u=_g(r,i,s),d=Math.max(o,0),h=Math.max(l,0),C=u.length,k=C+d,S=k>h,B=S?k-h:0;return{activeLoanCount:C,totalAfterBorrow:k,exceedsLimit:S,excessCount:B,matchedLoans:u}},Ll=({booksToBorrow:t,loans:n=[],studentFullName:r,studentData:i})=>{const o=[],l=[];if(!t||t.length===0)return{availableBooks:o,alreadyBorrowedBooks:l};const s=rf(r,i),u=new Set(n.filter(d=>d.bookId&&d.borrower&&s.has(Vi(d.borrower))).map(d=>d.bookId));return t.forEach(d=>{Hg(d)&&(d.id&&u.has(d.id)?l.push(d):o.push(d))}),{availableBooks:o,alreadyBorrowedBooks:l}},da=t=>Number.isFinite(t)?Math.max(0,Math.floor(t)):0,$o=(t,n)=>{const r=Math.max(0,Math.floor(t)||0);let i=da(n.healthy),o=da(n.damaged),l=da(n.lost);o>r&&(o=r),l>r-o&&(l=r-o),i>r-o-l&&(i=r-o-l);let s=i+o+l;if(s<r)i+=r-s;else if(s>r){let u=s-r;const d=Math.min(u,i);if(i-=d,u-=d,u>0){const h=Math.min(u,o);o-=h,u-=h}if(u>0){const h=Math.min(u,l);l-=h,u-=h}}return{healthy:Math.max(0,i),damaged:Math.max(0,o),lost:Math.max(0,l)}},Fg=(t,n,r,i)=>{const o={...n};let l=!1;const s=Math.max(0,Math.floor(t)||0),u=n.healthy+n.damaged+n.lost;if(r==="healthy")if(i>0)u>=s?o.damaged>0?(o.damaged-=1,o.healthy+=1,l=!0):o.lost>0&&(o.lost-=1,o.healthy+=1,l=!0):(o.healthy+=1,l=!0);else{if(o.healthy<=0)return{changed:!1,counts:n};o.healthy-=1,o.damaged+=1,l=!0}else if(r==="damaged")if(i>0){if(o.healthy<=0)return{changed:!1,counts:n};o.healthy-=1,o.damaged+=1,l=!0}else{if(o.damaged<=0)return{changed:!1,counts:n};o.damaged-=1,o.healthy+=1,l=!0}else if(i>0){if(o.healthy<=0)return{changed:!1,counts:n};o.healthy-=1,o.lost+=1,l=!0}else{if(o.lost<=0)return{changed:!1,counts:n};o.lost-=1,o.healthy+=1,l=!0}return l?{changed:!0,counts:$o(s,o)}:{changed:!1,counts:n}},ur=({isOpen:t,title:n,icon:r="",children:i,onConfirm:o,onCancel:l,confirmText:s="Onayla",cancelText:u="ptal",confirmButtonColor:d="#ef4444",loading:h=!1,disabled:C=!1})=>t?_t.createPortal(e.jsx("div",{style:{position:"fixed",top:0,left:0,right:0,bottom:0,backgroundColor:"rgba(0, 0, 0, 0.5)",display:"flex",alignItems:"center",justifyContent:"center",zIndex:6e4},onClick:k=>{k.target===k.currentTarget&&l()},children:e.jsxs("div",{style:{backgroundColor:"white",borderRadius:"12px",padding:"24px",maxWidth:"500px",width:"90%",boxShadow:"0 20px 25px -5px rgba(0, 0, 0, 0.1), 0 10px 10px -5px rgba(0, 0, 0, 0.04)"},onClick:k=>k.stopPropagation(),children:[e.jsxs("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center",marginBottom:"20px"},children:[e.jsxs("h2",{style:{margin:0,color:"#1e293b",fontSize:"20px",fontWeight:600},children:[r," ",n]}),e.jsx("button",{onClick:l,style:{background:"none",border:"none",fontSize:"24px",cursor:"pointer",color:"#64748b",padding:0,width:"32px",height:"32px",display:"flex",alignItems:"center",justifyContent:"center"},children:""})]}),e.jsx("div",{style:{marginBottom:"20px"},children:i}),e.jsxs("div",{style:{display:"flex",gap:"12px",justifyContent:"flex-end"},children:[e.jsx("button",{onClick:l,disabled:h,style:{padding:"10px 20px",fontSize:"14px",backgroundColor:"#f3f4f6",color:"#374151",border:"none",borderRadius:"6px",cursor:h?"not-allowed":"pointer",fontWeight:600},children:u}),e.jsx("button",{onClick:o,disabled:h||C,style:{padding:"10px 20px",fontSize:"14px",backgroundColor:h||C?"#94a3b8":d,color:"white",border:"none",borderRadius:"6px",cursor:h||C?"not-allowed":"pointer",fontWeight:600,display:"flex",alignItems:"center",justifyContent:"center",gap:"6px"},children:h?"leniyor...":s})]})]})}),document.body):null,zi=({isOpen:t,title:n,icon:r,children:i,onClose:o,type:l="info",showCloseButton:s=!0,onConfirm:u,confirmText:d="Tamam"})=>{if(!t)return null;const C={info:{color:"#3b82f6",bgColor:"#eff6ff",iconSvg:e.jsxs("svg",{width:"32",height:"32",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:[e.jsx("circle",{cx:"12",cy:"12",r:"10"}),e.jsx("line",{x1:"12",y1:"16",x2:"12",y2:"12"}),e.jsx("line",{x1:"12",y1:"8",x2:"12.01",y2:"8"})]})},success:{color:"#10b981",bgColor:"#ecfdf5",iconSvg:e.jsx("svg",{width:"32",height:"32",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:e.jsx("polyline",{points:"20 6 9 17 4 12"})})},warning:{color:"#f59e0b",bgColor:"#fffbeb",iconSvg:e.jsxs("svg",{width:"32",height:"32",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:[e.jsx("path",{d:"M10.29 3.86L1.82 18a2 2 0 0 0 1.71 3h16.94a2 2 0 0 0 1.71-3L13.71 3.86a2 2 0 0 0-3.42 0z"}),e.jsx("line",{x1:"12",y1:"9",x2:"12",y2:"13"}),e.jsx("line",{x1:"12",y1:"17",x2:"12.01",y2:"17"})]})},error:{color:"#ef4444",bgColor:"#fef2f2",iconSvg:e.jsxs("svg",{width:"32",height:"32",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:[e.jsx("circle",{cx:"12",cy:"12",r:"10"}),e.jsx("line",{x1:"15",y1:"9",x2:"9",y2:"15"}),e.jsx("line",{x1:"9",y1:"9",x2:"15",y2:"15"})]})}}[l],k=r?typeof r=="string"?e.jsx("span",{style:{fontSize:"32px"},children:r}):r:C.iconSvg;return _t.createPortal(e.jsx("div",{style:{position:"fixed",top:0,left:0,right:0,bottom:0,backgroundColor:"rgba(0, 0, 0, 0.5)",display:"flex",alignItems:"center",justifyContent:"center",zIndex:6e4,backdropFilter:"blur(2px)"},onClick:S=>{S.target===S.currentTarget&&o()},children:e.jsxs("div",{className:"info-card-modal",style:{backgroundColor:"white",borderRadius:"16px",padding:"32px 24px",maxWidth:"400px",width:"90%",boxShadow:"0 20px 25px -5px rgba(0, 0, 0, 0.1), 0 10px 10px -5px rgba(0, 0, 0, 0.04)",textAlign:"center",animation:"slideIn 0.3s ease-out"},onClick:S=>S.stopPropagation(),children:[e.jsx("div",{style:{width:"64px",height:"64px",borderRadius:"50%",backgroundColor:C.bgColor,color:C.color,display:"flex",alignItems:"center",justifyContent:"center",margin:"0 auto 20px auto",boxShadow:`0 4px 6px -1px ${C.bgColor}`},children:k}),e.jsx("h3",{style:{margin:"0 0 12px 0",fontSize:"20px",fontWeight:700,color:"#1e293b"},children:n}),e.jsx("div",{style:{margin:"0 0 24px 0",color:"#64748b",fontSize:"15px",lineHeight:"1.5"},children:i}),e.jsx("div",{style:{display:"flex",justifyContent:"center",gap:"12px"},children:u?e.jsxs(e.Fragment,{children:[e.jsx("button",{onClick:o,style:{flex:1,padding:"10px 20px",backgroundColor:"white",color:"#64748b",border:"1px solid #cbd5e1",borderRadius:"8px",fontWeight:600,cursor:"pointer",fontSize:"15px"},children:"ptal"}),e.jsx("button",{onClick:()=>{u(),o()},style:{flex:1,padding:"10px 20px",backgroundColor:C.color,color:"white",border:"none",borderRadius:"8px",fontWeight:600,cursor:"pointer",boxShadow:"0 4px 6px -1px rgba(0, 0, 0, 0.1)",fontSize:"15px"},children:d})]}):e.jsx("button",{onClick:o,style:{padding:"10px 32px",backgroundColor:C.color,color:"white",border:"none",borderRadius:"8px",fontWeight:600,cursor:"pointer",boxShadow:"0 4px 6px -1px rgba(0, 0, 0, 0.1)",fontSize:"15px",minWidth:"120px"},children:d})})]})}),document.body)};function Rn(t){const n=((t==null?void 0:t.name)??"").toString().trim(),r=((t==null?void 0:t.surname)??"").toString().trim();return`${n} ${r}`.replace(/\s+/g," ").trim()}const Og=({book:t,students:n=[],loans:r=[],books:i=[],personelName:o="",onClose:l,onRefresh:s,onEdit:u,isReadOnly:d=!1,onAddNotification:h})=>{const C=g=>{const R=new Date(g);R.setHours(0,0,0,0);const J=new Date;return J.setHours(0,0,0,0),Math.ceil((R.getTime()-J.getTime())/864e5)},k=g=>(g||"").toString().trim().toLowerCase().normalize("NFD").replace(/[\u0300-\u036f]/g,"").replace(/[\s_\-\/]+/g," "),S=(g,R)=>{if(!g||!R)return null;const J=new Date(g),te=new Date(R);if(Number.isNaN(J.getTime())||Number.isNaN(te.getTime()))return null;const ge=te.getTime()-J.getTime();return ge<0?0:Math.max(1,Math.round(ge/864e5))},[B,m]=a.useState(!1),[I,F]=a.useState(!1),[y,f]=a.useState(!1),[b,D]=a.useState(""),[q,V]=a.useState(""),[ie,M]=a.useState(14),[re,ce]=a.useState(!1),[Oe,Re]=a.useState(null),[_e,xt]=a.useState(!1),[De,ft]=a.useState(null),[ze,P]=a.useState(null),[se,fe]=a.useState(!1),[ve,Pe]=a.useState(null),[bt,lt]=a.useState(null),[be,Me]=a.useState(t),[et,Qe]=a.useState(null),[Z,$e]=a.useState(!1),[Xe,Ge]=a.useState(!1),[mt,kt]=a.useState(null),[ot,We]=a.useState(!1),[st,Bt]=a.useState(null),[Ee,Et]=a.useState(7),[c,N]=a.useState(null),[oe,Ae]=a.useState(null),[Be,ye]=a.useState(!1),[Ve,jt]=a.useState(5),[zt,nn]=a.useState(100),[Te,wt]=a.useState(null),[_,ne]=a.useState(!1),[ue,He]=a.useState(null),Se=a.useMemo(()=>{const g=b.trim();if(!g)return;const R=g.toLowerCase();return n.find(J=>{var v;const te=Rn(J).toLowerCase(),ge=J.studentNumber?`${J.studentNumber}`:null;return te===R||((v=J.name)==null?void 0:v.toLowerCase())===R||(J.surname?J.surname.toLowerCase():"")===R||ge===g})},[b,n]),gt=a.useMemo(()=>Se?Rn(Se):b.trim(),[Se,b]),de=a.useMemo(()=>{if(!be||!gt)return null;const g=Ll({booksToBorrow:[be],loans:r,studentFullName:gt,studentData:Se}),R=aa({studentFullName:gt,studentData:Se,loans:r,books:i,booksToBorrowCount:g.availableBooks.length,maxBorrowLimit:Ve}),J=Math.max(Ve-R.activeLoanCount,0);return{selection:g,limitInfo:R,remainingSlots:J}},[be,gt,Se,r,i,Ve]),Ce=(Te==null?void 0:Te.entries)??[],me=a.useMemo(()=>Ce.filter(g=>{var J;return(((J=g.status)==null?void 0:J.toUpperCase())??"")==="RETURNED"&&(typeof g.durationDays=="number"||g.borrowedAt&&g.returnedAt)}).map(g=>g.durationDays??S(g.borrowedAt,g.returnedAt)).filter(g=>typeof g=="number"&&!Number.isNaN(g)),[Ce]),Ct=a.useMemo(()=>{if(!me.length)return null;const g=me.reduce((R,J)=>R+J,0);return Math.round(g/me.length)},[me]),tt=a.useMemo(()=>Ce.reduce((g,R)=>g+(R.lateDays??0),0),[Ce]),Lt=a.useMemo(()=>{if(!Ce.length)return null;let g=null;return Ce.forEach(R=>{const J=R.returnedAt??R.borrowedAt;if(!J)return;const te=new Date(J);Number.isNaN(te.getTime())||(!g||te.getTime()>g.getTime())&&(g=te)}),g},[Ce]),Ht=a.useMemo(()=>{if(!Te)return null;const g=Te.totalBorrowed??0;if(!g)return null;const R=Te.totalReturned??0;return Math.round(R/g*100)},[Te]),Ft=Te?(Te.totalBorrowed??0)>0||Ce.length>0:!1,nt=_||ue||Ft,At=(g,R,J)=>{var tn;const te=((tn=g.status)==null?void 0:tn.toUpperCase())==="RETURNED",ge=te?"ade Edildi":"Aktif",v=te?"#10b981":g.wasLate?"#ef4444":"#3b82f6",$=te?"#d1fae5":g.wasLate?"#fee2e2":"#dbeafe",le=g.borrowedAt?new Date(g.borrowedAt).toLocaleDateString("tr-TR"):"",Le=g.returnedAt?new Date(g.returnedAt).toLocaleDateString("tr-TR"):"",Ke=g.loanDays?`${g.loanDays} gn`:"",Ze=(_n,Ln)=>{if(!_n||!Ln)return null;const Kt=new Date(_n),cn=new Date(Ln);if(Number.isNaN(Kt.getTime())||Number.isNaN(cn.getTime()))return null;const pn=cn.getTime()-Kt.getTime();return pn<0?0:Math.max(1,Math.round(pn/(1e3*60*60*24)))},Mt=te&&typeof g.durationDays=="number"&&!Number.isNaN(g.durationDays)?g.durationDays:te?Ze(g.borrowedAt,g.returnedAt):null,en=Mt!==null?`${Mt} gn`:te?"":"Devam ediyor";return g.studentNumber?`${g.borrower}${g.studentNumber}`:g.borrower,e.jsxs("tr",{style:{borderBottom:R===J-1?"none":"1px solid #f1f5f9",backgroundColor:R%2===0?"#ffffff":"#fcfcfc"},children:[e.jsxs("td",{style:{padding:"14px 12px"},children:[e.jsx("div",{style:{fontWeight:600,color:"#1e293b",fontSize:"13px"},children:g.borrower}),g.studentNumber&&e.jsxs("div",{style:{fontSize:"11px",color:"#94a3b8"},children:["#",g.studentNumber]})]}),e.jsx("td",{style:{padding:"14px 12px"},children:e.jsxs("span",{style:{display:"inline-block",padding:"4px 10px",borderRadius:"6px",fontSize:"11px",fontWeight:700,backgroundColor:$,color:v},children:[ge,g.wasLate&&e.jsx("span",{style:{marginLeft:"4px"},children:""})]})}),e.jsx("td",{style:{padding:"14px 12px",fontSize:"13px",color:"#64748b"},children:le}),e.jsx("td",{style:{padding:"14px 12px",fontSize:"13px",color:"#64748b"},children:Le}),e.jsx("td",{style:{padding:"14px 12px",fontSize:"13px",color:"#64748b"},children:Ke}),e.jsx("td",{style:{padding:"14px 12px",fontSize:"13px",color:"#64748b",fontWeight:500},children:en})]},`${g.borrower}-${g.borrowedAt}-${g.status}-${R}`)},T=a.useMemo(()=>Te?[{key:"completion",label:"Tamamlama Oran",value:Ht!==null?`%${Ht}`:"",subLabel:`${Te.totalReturned??0}/${Te.totalBorrowed??0} teslim`,accent:"#10b981"},{key:"avg",label:"Ortalama Okuma",value:Ct!==null?`${Ct} gn`:"",subLabel:me.length>0?`${me.length} tamamlanan`:void 0,accent:"#6366f1"},{key:"late-count",label:"Gecikme Says",value:`${Te.lateReturns??0}`,subLabel:"Toplam Gecikme",accent:"#ef4444"},{key:"last-activity",label:"Son Aktivite",value:Lt?Lt.toLocaleDateString("tr-TR"):"",subLabel:Lt?Lt.toLocaleTimeString("tr-TR",{hour:"2-digit",minute:"2-digit"}):void 0,accent:"#475569"}]:[],[Te,Ht,Ct,me.length,tt,Lt]);if(a.useEffect(()=>{(async()=>{try{const R=await xe.get("/system-settings");jt(R.maxBorrowLimit),nn(R.maxPenaltyPoints)}catch(R){console.error("Sistem ayarlar yklenemedi:",R)}})()},[]),a.useEffect(()=>{Me(t)},[t]),a.useEffect(()=>{if(!(t!=null&&t.id)){wt(null),He(null),ne(!1);return}let g=!1;return ne(!0),He(null),xe.get("/statistics/book-history",{bookId:t.id}).then(R=>{g||wt(R)}).catch(R=>{g||(wt(null),He(R instanceof Error?R.message:"Kitap gemii yklenemedi"))}).finally(()=>{g||ne(!1)}),()=>{g=!0}},[t==null?void 0:t.id]),!t||!be)return null;const H=n.filter(g=>!q||G(g.name,q)||G(g.surname,q)||G(`${g.name} ${g.surname}`.trim(),q)||G(g.studentNumber,q)||G(g.class,q)||G(g.branch,q)),A=be,he=(g=>{const R=g.totalQuantity??Math.max(g.quantity??0,0),J={healthy:g.healthyCount??Math.max(R-(g.damagedCount??0)-(g.lostCount??0),0),damaged:g.damagedCount??0,lost:g.lostCount??0};return $o(R,J)})(A),it=he.healthy,Ue=he.damaged,Nt=he.lost,rt=it+Ue+Nt,yt=(A.quantity??0)>0,Dt=yt&&it>0,Zt=re||!b||!Dt,Ut=(g,R,J="info",te)=>{ft({title:g,message:R,type:J,icon:te}),xt(!0)},$t=g=>{P(g)},Tt=async(g,R)=>{ce(!0),Re(null);try{const J=Rn(R);if(!J){Ut("Hata","renci ad bo olamaz. Ltfen geerli bir renci sein.","error","");return}const ge=Ll({booksToBorrow:g,loans:r,studentFullName:J,studentData:R}).availableBooks;if(ge.length===0){Re("Seilen kitaplarn hepsi renci tarafndan zaten dn alnm!"),ce(!1);return}let v=null;for(const $ of ge)v=await xe.post(`/books/${$.id}/borrow`,{borrower:J,days:ie,personelName:o});v&&Me(v),m(!1),F(!1),Pe(null),D(""),V(""),M(14),s&&await s()}catch(J){const te=J instanceof Error?J.message:"dn verme baarsz oldu";if(Re(te),te.includes("cezal")||te.includes("Ceza Puan")||te.includes("cezal durumda")){const ge=n.find(v=>v.name===R.name&&v.surname===R.surname);if(ge)kt(ge);else{const v=te.match(/Ceza Puan:\s*(\d+)/),$=v?parseInt(v[1]):0;kt({name:R.name,surname:R.surname,borrowed:R.borrowed||0,returned:R.returned||0,late:R.late||0,class:R.class,branch:R.branch,studentNumber:R.studentNumber,penaltyPoints:$,isBanned:$>=zt})}}}finally{ce(!1)}},Bn=async()=>{if(!b||!be){Re("Ltfen bir renci sein");return}const g=n.find(v=>Rn(v)===b||v.name===b||v.surname===b||v.studentNumber&&`${v.studentNumber}`===b);if(!g){Re("Geerli bir renci sein");return}if(!yt){Re("Mevcut adet 0 olduu iin dn verilemez");return}if(it<=0){Re("Salam kitap adedi mevcut deil");return}const R=Rn(g);if(!R){Re("Geerli bir renci sein");return}const te=Ll({booksToBorrow:[be],loans:r,studentFullName:R,studentData:g}).availableBooks;if(te.length===0){Re("Bu kitap renci tarafndan zaten dn alnm!");return}if(aa({studentFullName:R,studentData:g,loans:r,books:i,booksToBorrowCount:te.length,maxBorrowLimit:Ve}).exceedsLimit){Pe({books:te,student:R}),m(!1),F(!0);return}await Tt(te,g)},bn=async()=>{if(!ve)return;const g=n.find(R=>R.name===ve.student||`${R.name} ${R.surname}`.trim()===ve.student||R.surname===ve.student);g&&(F(!1),await Tt(ve.books,g))},w=async g=>{if(be){if(!o||o.trim()===""){Ut("Hata","Personel ad gereklidir. Ltfen giri yapn veya personel adnz girin.","error","");return}$t({title:"Teslim Alma Onay",icon:"",confirmText:"Teslim Al",confirmButtonColor:"#10b981",message:`${g} adl rencinin kitabn teslim almak istediinize emin misiniz?

Kitap: ${be.title}`,onConfirm:async()=>{ce(!0),Re(null);try{const R=await xe.post(`/books/${be.id}/return`,{borrower:g,personelName:o.trim()});Me(R),Ut("Baarl","Kitap teslim alnd.","success",""),f(!1),lt(null),s&&await s()}catch(R){const J=R instanceof Error?R.message:"Teslim alma baarsz oldu";Ut("Hata",J,"error",""),console.error("Teslim alma hatas:",R)}finally{ce(!1)}}})}},Y=async()=>{if(!(!st||!be)){if(!o||o.trim()===""){N("Personel ad gereklidir. Ltfen giri yapn veya personel adnz girin.");return}ce(!0),N(null);try{const g=st.borrower,R=o.trim();await xe.post(`/books/${be.id}/return`,{borrower:g,personelName:R});const J=Math.max(0,C(st.dueDate)),te=Math.max(Ee+J,Ee),ge=await xe.post(`/books/${be.id}/borrow`,{borrower:g,days:te,personelName:R});Me(ge),We(!1),Bt(null),s&&await s()}catch(g){N(g instanceof Error?g.message:"Sre uzatlamad")}finally{ce(!1)}}},ee=async()=>{st&&(We(!1),Bt(null),w(st.borrower))};return e.jsxs(e.Fragment,{children:[e.jsxs("div",{className:"card",style:{maxWidth:"900px",width:"90%",maxHeight:"90vh",overflowY:"auto",position:"relative"},onClick:g=>g.stopPropagation(),children:[e.jsx(ur,{isOpen:!!ze,title:(ze==null?void 0:ze.title)||"Onay",icon:(ze==null?void 0:ze.icon)||"",onConfirm:async()=>{if(ze){fe(!0);try{await ze.onConfirm()}finally{fe(!1),P(null)}}},onCancel:()=>{se||P(null)},confirmText:(ze==null?void 0:ze.confirmText)||"Onayla",cancelText:"ptal",confirmButtonColor:(ze==null?void 0:ze.confirmButtonColor)||"#ef4444",loading:se,children:e.jsx("div",{style:{fontSize:"14px",color:"#475569",lineHeight:"1.6",whiteSpace:"pre-wrap"},children:(ze==null?void 0:ze.message)||""})}),e.jsx(zi,{isOpen:_e,title:(De==null?void 0:De.title)||"Bilgi",icon:De==null?void 0:De.icon,type:(De==null?void 0:De.type)||"info",onClose:()=>{xt(!1),ft(null)},children:e.jsx("div",{style:{fontSize:"14px",color:"#475569",lineHeight:"1.6",whiteSpace:"pre-wrap"},children:(De==null?void 0:De.message)||""})}),e.jsx("div",{style:{marginBottom:"24px"},children:e.jsxs("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"flex-start",marginBottom:"12px",gap:"12px"},children:[e.jsx("div",{style:{flex:1,minWidth:0},children:e.jsx("h2",{style:{margin:0,color:"#0f172a",fontWeight:700,wordBreak:"break-word"},children:A.title})}),e.jsxs("div",{style:{display:"flex",gap:"8px",flexShrink:0},children:[u&&!d&&e.jsxs("button",{onClick:()=>{u(be),l()},style:{padding:"8px 16px",fontSize:"14px",backgroundColor:"#3b82f6",color:"white",border:"none",borderRadius:"6px",cursor:"pointer",fontWeight:600,whiteSpace:"nowrap"},children:[e.jsxs("svg",{width:"16",height:"16",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",style:{marginRight:"6px",verticalAlign:"middle"},children:[e.jsx("path",{d:"M11 4H4a2 2 0 0 0-2 2v14a2 2 0 0 0 2 2h14a2 2 0 0 0 2-2v-7"}),e.jsx("path",{d:"M18.5 2.5a2.121 2.121 0 0 1 3 3L12 15l-4 1 1-4 9.5-9.5z"})]}),"Kitap Dzenle"]}),e.jsx("button",{onClick:l,style:{background:"none",border:"none",fontSize:"24px",cursor:"pointer",color:"#64748b",padding:0,width:"32px",height:"32px",display:"flex",alignItems:"center",justifyContent:"center",flexShrink:0},children:""})]})]})}),e.jsxs("div",{style:{display:"grid",gap:"20px"},children:[e.jsxs("div",{style:{padding:"20px",backgroundColor:"#f8fafc",borderRadius:"8px",border:"1px solid #e2e8f0"},children:[e.jsx("h3",{style:{marginTop:0,marginBottom:"16px",fontSize:"18px",fontWeight:600,color:"#1e293b"},children:"Knye Bilgileri"}),e.jsxs("div",{style:{display:"grid",gap:"12px"},children:[e.jsxs("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"flex-start"},children:[e.jsx("span",{style:{color:"#64748b",fontSize:"14px",fontWeight:500},children:"Yazar:"}),e.jsx("span",{style:{fontWeight:600,fontSize:"14px",color:A.author?"#1e293b":"#94a3b8",textAlign:"right"},children:A.author||"-"})]}),e.jsxs("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"flex-start"},children:[e.jsx("span",{style:{color:"#0f172a",fontSize:"14px",fontWeight:600},children:"Kategori:"}),e.jsx("span",{style:{fontWeight:600,fontSize:"14px",color:A.category?"#4338ca":"#64748b",textAlign:"right"},children:A.category?e.jsx("span",{style:{backgroundColor:"#e0e7ff",color:"#4338ca",padding:"2px 8px",borderRadius:"8px",fontSize:"12px",fontWeight:500},children:A.category}):"-"})]}),e.jsxs("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"flex-start"},children:[e.jsx("span",{style:{color:"#0f172a",fontSize:"14px",fontWeight:600},children:"dnte:"}),e.jsxs("span",{style:{fontWeight:600,fontSize:"14px",color:A.loans.length>0?"#ef4444":"#10b981",textAlign:"right"},children:[A.loans.length," adet"]})]}),e.jsxs("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"flex-start"},children:[e.jsx("span",{style:{color:"#0f172a",fontSize:"14px",fontWeight:600},children:"Raf Numaras:"}),e.jsx("span",{style:{fontWeight:600,fontSize:"14px",color:A.shelf?"#3b82f6":"#94a3b8",textAlign:"right"},children:A.shelf||"-"})]}),e.jsxs("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"flex-start"},children:[e.jsx("span",{style:{color:"#0f172a",fontSize:"14px",fontWeight:600},children:"Yaynevi:"}),e.jsx("span",{style:{fontWeight:600,fontSize:"14px",color:A.publisher?"#0f172a":"#64748b",textAlign:"right"},children:A.publisher||"-"})]}),e.jsxs("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"flex-start"},children:[e.jsx("span",{style:{color:"#0f172a",fontSize:"14px",fontWeight:600},children:"Yayn Yl:"}),e.jsx("span",{style:{fontWeight:600,fontSize:"14px",color:A.year?"#0f172a":"#64748b",textAlign:"right"},children:A.year||"-"})]}),e.jsxs("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"flex-start"},children:[e.jsx("span",{style:{color:"#0f172a",fontSize:"14px",fontWeight:600},children:"Sayfa Says:"}),e.jsx("span",{style:{fontWeight:600,fontSize:"14px",color:A.pageCount?"#0f172a":"#64748b",textAlign:"right"},children:A.pageCount?`${A.pageCount} sayfa`:"-"})]}),e.jsxs("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"flex-start"},children:[e.jsx("span",{style:{color:"#0f172a",fontSize:"14px",fontWeight:600},children:"Kitap Numaras:"}),e.jsx("span",{style:{fontWeight:600,fontSize:"14px",color:A.bookNumber?"#0f172a":"#64748b",textAlign:"right"},children:A.bookNumber?`#${A.bookNumber}`:"-"})]}),e.jsxs("div",{style:{marginTop:"8px",paddingTop:"12px",borderTop:"1px solid #e2e8f0"},children:[e.jsx("strong",{style:{color:"#0f172a",fontSize:"14px",fontWeight:700,display:"block",marginBottom:"8px"},children:"zet:"}),e.jsx("p",{style:{margin:0,fontSize:"14px",lineHeight:"1.6",color:A.summary?"#0f172a":"#64748b"},children:A.summary||"-"})]}),e.jsxs("div",{style:{marginTop:"12px",paddingTop:"12px",borderTop:"1px solid #e2e8f0"},children:[e.jsx("strong",{style:{color:"#0f172a",fontSize:"14px",fontWeight:700,display:"block",marginBottom:"8px"},children:"Kitap Durumu"}),e.jsx("div",{style:{display:"grid",gridTemplateColumns:"repeat(auto-fit, minmax(150px, 1fr))",gap:"12px"},children:[{label:"Salam",color:"#16a34a",background:"#dcfce7",value:it},{label:"Hasarl",color:"#b45309",background:"#fef3c7",value:Ue},{label:"Kayp",color:"#dc2626",background:"#fee2e2",value:Nt}].map(g=>e.jsx("div",{style:{background:g.background,borderRadius:"12px",padding:"12px"},children:e.jsxs("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center"},children:[e.jsx("span",{style:{color:g.color,fontWeight:700,fontSize:"13px"},children:g.label}),e.jsxs("span",{style:{fontWeight:700,color:"#0f172a",fontSize:"16px"},children:[g.value," adet"]})]})},g.label))}),e.jsxs("p",{style:{margin:"8px 0 0 0",fontSize:"13px",color:"#475569"},children:["Toplam fiziksel stok: ",e.jsx("strong",{children:rt})," / ",A.totalQuantity]})]})]})]}),e.jsxs("div",{style:{padding:"16px",backgroundColor:"#ffffff",borderRadius:"8px",border:"1px solid #e2e8f0",marginBottom:"16px",boxShadow:"0 1px 3px rgba(0, 0, 0, 0.05)"},children:[e.jsxs("h3",{style:{marginTop:0,marginBottom:"12px",fontSize:"16px",fontWeight:600,color:"#0f172a",display:"flex",alignItems:"center",gap:"8px"},children:[e.jsxs("svg",{width:"20",height:"20",viewBox:"0 0 24 24",fill:"none",stroke:"#0f172a",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:[e.jsx("line",{x1:"18",y1:"20",x2:"18",y2:"10"}),e.jsx("line",{x1:"12",y1:"20",x2:"12",y2:"4"}),e.jsx("line",{x1:"6",y1:"20",x2:"6",y2:"14"})]}),"Kitap statistikleri"]}),(()=>{const g=A.quantity||0,R=A.loans.length||0,J=A.loans.filter(ge=>{const v=new Date(ge.dueDate);v.setHours(0,0,0,0);const $=new Date;return $.setHours(0,0,0,0),v.getTime()<$.getTime()}).length,te=A.totalQuantity>0?A.totalQuantity:g+R;return e.jsxs("div",{style:{display:"flex",flexDirection:"column",gap:"12px"},children:[e.jsxs("div",{style:{display:"grid",gridTemplateColumns:"repeat(2, 1fr)",gap:"12px"},children:[e.jsxs("div",{style:{textAlign:"center",padding:"12px 10px",background:"linear-gradient(135deg, #667eea 0%, #764ba2 100%)",borderRadius:"8px",boxShadow:"0 2px 4px rgba(102, 126, 234, 0.2)",color:"white"},children:[e.jsx("div",{style:{marginBottom:"4px",display:"flex",justifyContent:"center"},children:e.jsxs("svg",{width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:[e.jsx("path",{d:"M4 19.5A2.5 2.5 0 0 1 6.5 17H20"}),e.jsx("path",{d:"M6.5 2H20v20H6.5A2.5 2.5 0 0 1 4 19.5v-15A2.5 2.5 0 0 1 6.5 2z"})]})}),e.jsx("div",{style:{fontSize:"24px",fontWeight:700,marginBottom:"4px"},children:te}),e.jsx("div",{style:{fontSize:"11px",fontWeight:500,opacity:.95},children:"Toplam Adet"})]}),e.jsxs("div",{style:{textAlign:"center",padding:"12px 10px",background:"linear-gradient(135deg, #10b981 0%, #059669 100%)",borderRadius:"8px",boxShadow:"0 2px 4px rgba(16, 185, 129, 0.2)",color:"white"},children:[e.jsx("div",{style:{marginBottom:"4px",display:"flex",justifyContent:"center"},children:e.jsxs("svg",{width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:[e.jsx("path",{d:"M4 19.5A2.5 2.5 0 0 1 6.5 17H20"}),e.jsx("path",{d:"M6.5 2H20v20H6.5A2.5 2.5 0 0 1 4 19.5v-15A2.5 2.5 0 0 1 6.5 2z"}),e.jsx("line",{x1:"8",y1:"8",x2:"16",y2:"8"}),e.jsx("line",{x1:"8",y1:"12",x2:"16",y2:"12"}),e.jsx("line",{x1:"8",y1:"16",x2:"16",y2:"16"})]})}),e.jsx("div",{style:{fontSize:"24px",fontWeight:700,marginBottom:"4px"},children:g}),e.jsx("div",{style:{fontSize:"11px",fontWeight:500,opacity:.95},children:"Mevcut Adet"})]})]}),e.jsxs("div",{style:{display:"grid",gridTemplateColumns:J>0?"repeat(2, 1fr)":"1fr",gap:"12px"},children:[e.jsxs("div",{style:{textAlign:"center",padding:"12px 10px",background:"linear-gradient(135deg, #f59e0b 0%, #d97706 100%)",borderRadius:"8px",boxShadow:"0 2px 4px rgba(245, 158, 11, 0.2)",color:"white"},children:[e.jsx("div",{style:{marginBottom:"4px",display:"flex",justifyContent:"center"},children:e.jsxs("svg",{width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:[e.jsx("path",{d:"M4 19.5A2.5 2.5 0 0 1 6.5 17H20"}),e.jsx("path",{d:"M6.5 2H20v20H6.5A2.5 2.5 0 0 1 4 19.5v-15A2.5 2.5 0 0 1 6.5 2z"}),e.jsx("path",{d:"M9 9l3 3 3-3"})]})}),e.jsx("div",{style:{fontSize:"24px",fontWeight:700,marginBottom:"4px"},children:R}),e.jsx("div",{style:{fontSize:"11px",fontWeight:500,opacity:.95},children:"Aktif dn"})]}),J>0&&e.jsxs("div",{style:{textAlign:"center",padding:"12px 10px",background:"linear-gradient(135deg, #ef4444 0%, #dc2626 100%)",borderRadius:"8px",boxShadow:"0 2px 4px rgba(239, 68, 68, 0.2)",color:"white"},children:[e.jsx("div",{style:{marginBottom:"4px",display:"flex",justifyContent:"center"},children:e.jsxs("svg",{width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:[e.jsx("path",{d:"M10.29 3.86L1.82 18a2 2 0 0 0 1.71 3h16.94a2 2 0 0 0 1.71-3L13.71 3.86a2 2 0 0 0-3.42 0z"}),e.jsx("line",{x1:"12",y1:"9",x2:"12",y2:"13"}),e.jsx("line",{x1:"12",y1:"17",x2:"12.01",y2:"17"})]})}),e.jsx("div",{style:{fontSize:"24px",fontWeight:700,marginBottom:"4px"},children:J}),e.jsx("div",{style:{fontSize:"11px",fontWeight:500,opacity:.95},children:"Geciken"})]})]})]})})()]}),A.loans.length>0&&e.jsxs("div",{children:[e.jsx("strong",{style:{color:"#64748b",fontSize:"14px",display:"block",marginBottom:"8px"},children:"Aktif dnler"}),e.jsx("div",{style:{display:"flex",flexDirection:"column",gap:"8px"},children:A.loans.map((g,R)=>{const J=C(g.dueDate),te=J<0,ge=J,v=!te&&ge>=0&&ge<=3,$=k(g.borrower),le=n.find(Ke=>{const Ze=`${Ke.name} ${Ke.surname||""}`.trim();return k(Ke.name)===$||k(Ze)===$}),Le=!!$&&!le;return e.jsx("div",{onClick:()=>{le&&Qe(le)},style:{padding:"12px",backgroundColor:"#f8fafc",borderRadius:"8px",border:"1px solid #e2e8f0",cursor:le?"pointer":"default",transition:"all 0.2s"},onMouseEnter:Ke=>{le&&(Ke.currentTarget.style.backgroundColor="#f0f9ff",Ke.currentTarget.style.borderColor="#3b82f6")},onMouseLeave:Ke=>{le&&(Ke.currentTarget.style.backgroundColor="#f8fafc",Ke.currentTarget.style.borderColor="#e2e8f0")},children:e.jsxs("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center"},children:[e.jsxs("div",{style:{flex:1},children:[e.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"8px",flexWrap:"wrap",marginBottom:"8px"},children:[e.jsx("div",{style:{fontWeight:700,fontSize:"16px",color:"#1e293b"},children:g.borrower}),Le&&e.jsx("span",{style:{padding:"2px 8px",borderRadius:"999px",fontSize:"11px",fontWeight:700,backgroundColor:"#fee2e2",color:"#991b1b",border:"1px solid #fecaca"},children:"Silinmi renci"})]}),le&&e.jsxs("div",{style:{display:"flex",flexDirection:"column",gap:"4px",marginBottom:"8px"},children:[e.jsxs("div",{style:{fontSize:"13px",color:"#64748b"},children:[e.jsx("strong",{children:"Snf/ube:"})," ",le.class?`${le.class}`:"",le.branch?`/${le.branch}`:""]}),le.studentNumber&&e.jsxs("div",{style:{fontSize:"13px",color:"#64748b"},children:[e.jsx("strong",{children:"Numara:"})," ",le.studentNumber]})]}),e.jsxs("div",{style:{fontSize:"12px",color:"#64748b"},children:["Teslim: ",new Date(g.dueDate).toLocaleDateString("tr-TR")]})]}),e.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"12px"},onClick:Ke=>Ke.stopPropagation(),children:[e.jsx("div",{style:{padding:"4px 12px",borderRadius:"12px",fontSize:"12px",fontWeight:600,backgroundColor:te?"#fee2e2":v?"#fef3c7":"#d1fae5",color:te?"#dc2626":v?"#d97706":"#059669"},children:te?`Gecikmi (${Math.abs(ge)} gn)`:`${ge} gn kald`}),!d&&e.jsx("button",{onClick:()=>w(g.borrower),disabled:re,style:{padding:"6px 16px",fontSize:"12px",backgroundColor:re?"#9ca3af":"#10b981",color:"white",border:"none",borderRadius:"6px",cursor:re?"not-allowed":"pointer",fontWeight:600,whiteSpace:"nowrap"},children:re?"leniyor...":e.jsxs(e.Fragment,{children:[e.jsx("svg",{width:"14",height:"14",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",style:{marginRight:"6px",verticalAlign:"middle"},children:e.jsx("polyline",{points:"20 6 9 17 4 12"})}),"Teslim Al"]})})]})]})},R)})})]}),nt&&e.jsxs("div",{style:{border:`1px solid ${Z?"#3b82f6":"#e2e8f0"}`,borderRadius:"14px",backgroundColor:Z?"#f0f4ff":"#ffffff",boxShadow:Z?"0 12px 30px rgba(59,130,246,0.12)":"0 1px 3px rgba(0,0,0,0.05)",transition:"all 0.25s ease",marginTop:"16px",overflow:"hidden"},children:[e.jsxs("div",{onClick:()=>$e(!Z),style:{padding:"20px",cursor:"pointer",display:"flex",justifyContent:"space-between",alignItems:"center",flexWrap:"wrap",gap:"16px"},children:[e.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"12px"},children:[e.jsx("div",{style:{display:"flex",alignItems:"center",justifyContent:"center",width:"40px",height:"40px",borderRadius:"10px",backgroundColor:Z?"#dbeafe":"#f1f5f9",color:Z?"#2563eb":"#64748b",transition:"all 0.2s"},children:e.jsxs("svg",{width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:[e.jsx("path",{d:"M4 19.5A2.5 2.5 0 0 1 6.5 17H20"}),e.jsx("path",{d:"M6.5 2H20v20H6.5A2.5 2.5 0 0 1 4 19.5v-15A2.5 2.5 0 0 1 6.5 2z"}),e.jsx("path",{d:"M9 9l3 3 3-3"})]})}),e.jsxs("div",{children:[e.jsx("h3",{style:{margin:0,fontSize:"17px",fontWeight:700,color:Z?"#1e293b":"#334155"},children:"Kitap Gemii ve statistikler"}),Ce.length>0&&e.jsxs("div",{style:{fontSize:"13px",color:Z?"#3b82f6":"#64748b",marginTop:"2px"},children:[Ce.length," kayt bulundu"]})]})]}),e.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"16px"},children:[!Z&&Te&&e.jsxs("div",{style:{display:"flex",gap:"8px",flexWrap:"wrap"},children:[e.jsxs("div",{style:{padding:"6px 14px",borderRadius:"99px",backgroundColor:"#f1f5f9",fontSize:"12px",fontWeight:600,color:"#475569"},children:["Toplam: ",Te.totalBorrowed??0]}),(Te.activeLoans??0)>0&&e.jsxs("div",{style:{padding:"6px 14px",borderRadius:"99px",backgroundColor:"#dbeafe",fontSize:"12px",fontWeight:600,color:"#3b82f6"},children:[Te.activeLoans," Aktif"]})]}),e.jsx("div",{style:{display:"flex",alignItems:"center",justifyContent:"center",width:"32px",height:"32px",borderRadius:"50%",backgroundColor:Z?"#ffffff":"#f8fafc",border:"1px solid",borderColor:Z?"#bfdbfe":"#e2e8f0",color:Z?"#3b82f6":"#94a3b8",transform:Z?"rotate(180deg)":"rotate(0deg)",transition:"all 0.3s ease"},children:e.jsx("svg",{width:"20",height:"20",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:e.jsx("polyline",{points:"6 9 12 15 18 9"})})})]})]}),Z&&e.jsx("div",{style:{borderTop:"1px solid #dbeafe",padding:"24px",animation:"slideDown 0.3s ease-out"},children:_?e.jsx("p",{style:{margin:0,color:"#475569"},children:"Gemi istatistikler ykleniyor..."}):ue?e.jsx("p",{style:{margin:0,color:"#dc2626"},children:ue}):Te&&Ft?e.jsxs("div",{style:{display:"flex",flexDirection:"column",gap:"16px"},children:[T.length>0&&e.jsxs("div",{style:{marginBottom:"24px"},children:[e.jsx("h4",{style:{margin:"0 0 16px 0",fontSize:"14px",fontWeight:600,color:"#64748b",textTransform:"uppercase",letterSpacing:"0.05em"},children:"Performans zeti"}),e.jsx("div",{style:{display:"grid",gridTemplateColumns:"repeat(2, 1fr)",gap:"16px"},children:T.map(g=>e.jsxs("div",{style:{padding:"16px",backgroundColor:"#ffffff",borderRadius:"12px",border:"1px solid #e2e8f0",borderLeft:`4px solid ${g.accent}`,boxShadow:"0 2px 4px rgba(0,0,0,0.02)"},children:[e.jsx("div",{style:{fontSize:"12px",color:"#64748b",fontWeight:600,marginBottom:"6px"},children:g.label}),e.jsx("div",{style:{fontSize:"20px",fontWeight:700,color:"#1e293b"},children:g.value}),g.subLabel&&e.jsx("div",{style:{fontSize:"12px",color:"#94a3b8",marginTop:"4px"},children:g.subLabel})]},g.key))})]}),Ce.length>0?e.jsxs("div",{children:[e.jsx("h4",{style:{margin:"0 0 16px 0",fontSize:"14px",fontWeight:600,color:"#64748b",textTransform:"uppercase",letterSpacing:"0.05em"},children:"dn Gemii Listesi"}),e.jsx("div",{style:{overflowX:"auto",borderRadius:"8px",border:"1px solid #e2e8f0"},children:e.jsxs("table",{style:{width:"100%",borderCollapse:"collapse"},children:[e.jsx("thead",{children:e.jsx("tr",{style:{backgroundColor:"#f8fafc",borderBottom:"1px solid #e2e8f0"},children:["RENC","DURUM","ALI T.","ADE T.","G. PLANI","SRE"].map(g=>e.jsx("th",{style:{padding:"14px 12px",textAlign:"left",fontSize:"12px",color:"#64748b",fontWeight:700,whiteSpace:"nowrap"},children:g},g))})}),e.jsx("tbody",{children:Ce.map((g,R)=>At(g,R,Ce.length))})]})})]}):e.jsx("p",{style:{margin:0,color:"#475569"},children:"Bu kitap iin gemi kayd bulunamad."})]}):e.jsx("p",{style:{margin:0,color:"#475569"},children:"Bu kitap iin gemi kayd bulunamad."})})]}),!d&&e.jsxs("div",{style:{display:"flex",flexDirection:"column",gap:"8px",marginTop:"24px",paddingTop:"24px",borderTop:"1px solid #e2e8f0"},children:[e.jsxs("button",{onClick:()=>{Dt&&m(!0)},disabled:!Dt,style:{flex:1,padding:"12px 24px",backgroundColor:Dt?"#3b82f6":"#94a3b8",color:"white",border:"none",borderRadius:"8px",cursor:Dt?"pointer":"not-allowed",fontWeight:600,fontSize:"14px",display:"flex",alignItems:"center",justifyContent:"center",gap:"6px",opacity:Dt?1:.85},children:[e.jsxs("svg",{width:"16",height:"16",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:[e.jsx("path",{d:"M4 19.5A2.5 2.5 0 0 1 6.5 17H20"}),e.jsx("path",{d:"M6.5 2H20v20H6.5A2.5 2.5 0 0 1 4 19.5v-15A2.5 2.5 0 0 1 6.5 2z"}),e.jsx("path",{d:"M9 9l3 3 3-3"})]}),"dn Ver"]}),!Dt&&e.jsx("div",{style:{fontSize:"12px",color:"#b91c1c",fontWeight:600},children:"Mevcut adet 0 veya salam kopya bulunmad iin dn verilemez."})]})]})]}),!d&&B&&e.jsx("div",{style:{position:"fixed",top:0,left:0,right:0,bottom:0,backgroundColor:"rgba(0, 0, 0, 0.5)",display:"flex",alignItems:"center",justifyContent:"center",zIndex:51e3},onClick:g=>{g.target===g.currentTarget&&(m(!1),Re(null),D(""),V(""))},children:e.jsxs("div",{className:"card",style:{maxWidth:"500px",width:"90%",maxHeight:"90vh",overflow:"auto",backgroundColor:"white"},onClick:g=>g.stopPropagation(),children:[e.jsx("h3",{style:{marginTop:0},children:"Kitap dn Ver"}),Oe&&e.jsx("div",{style:{padding:"12px",backgroundColor:"#fee2e2",color:"#dc2626",borderRadius:"8px",marginBottom:"16px"},children:Oe}),e.jsxs("div",{style:{marginBottom:"16px"},children:[e.jsx("label",{style:{display:"block",marginBottom:"8px",fontWeight:600},children:"renci Se"}),e.jsx("input",{type:"text",placeholder:"renci ara...",value:q,onChange:g=>V(g.target.value),style:{width:"100%",padding:"10px",borderRadius:"6px",border:"1px solid #e5e7eb",marginBottom:"8px"}}),q&&!b&&e.jsx("div",{style:{border:"1px solid #e5e7eb",borderRadius:"6px",maxHeight:"200px",overflowY:"auto",backgroundColor:"white"},children:H.length>0?H.map(g=>{const R=Rn(g),J=r.filter(ge=>(ge.borrower===R||ge.borrower===g.name)&&i.some(v=>v.id===ge.bookId)),te=so(g,J.length);return e.jsxs("div",{onClick:()=>{D(R),V("")},style:{padding:"12px",cursor:"pointer",borderBottom:"1px solid #f3f4f6",backgroundColor:b===R?"#eff6ff":"white",transition:"background-color 0.2s"},onMouseEnter:ge=>{b!==R&&(ge.currentTarget.style.backgroundColor="#f9fafb")},onMouseLeave:ge=>{b!==R&&(ge.currentTarget.style.backgroundColor="white")},children:[e.jsxs("div",{style:{fontWeight:600,color:"#1f2937",marginBottom:"6px"},children:[g.name," ",g.surname]}),e.jsxs("div",{style:{fontSize:"12px",color:"#6b7280",display:"flex",gap:"12px",flexWrap:"wrap"},children:[e.jsxs("span",{children:[e.jsx("strong",{children:"dn:"})," ",te.borrowed]}),e.jsxs("span",{children:[e.jsx("strong",{children:"ade:"})," ",te.returned]}),e.jsxs("span",{children:[e.jsx("strong",{children:"Geciken:"})," ",e.jsx("span",{style:{color:g.late>0?"#ef4444":"#10b981",fontWeight:600},children:g.late})]}),e.jsxs("span",{children:[e.jsx("strong",{children:"Aktif dn:"})," ",J.length]})]})]},R)}):e.jsx("div",{style:{padding:"20px",textAlign:"center",color:"#6b7280"},children:"Arama sonucu bulunamad"})}),b&&e.jsxs("div",{style:{marginTop:"8px",padding:"16px",backgroundColor:"#eff6ff",borderRadius:"8px",border:"1px solid #3b82f6"},children:[e.jsxs("div",{style:{fontWeight:600,marginBottom:"12px",fontSize:"16px",color:"#1f2937"},children:["Seilen renci: ",b]}),(()=>{const g=n.find(te=>te.name===b||`${te.name} ${te.surname}`.trim()===b||te.surname===b);if(!g)return null;const R=r.filter(te=>(te.borrower===b||te.borrower===g.name)&&i.some(ge=>ge.id===te.bookId)),J=so(g,R.length);return e.jsxs("div",{style:{display:"flex",flexDirection:"column",gap:"8px",marginBottom:"12px"},children:[e.jsxs("div",{style:{display:"flex",gap:"16px",flexWrap:"wrap"},children:[e.jsxs("div",{style:{fontSize:"14px"},children:[e.jsx("strong",{children:"Toplam dn:"})," ",J.borrowed]}),e.jsxs("div",{style:{fontSize:"14px"},children:[e.jsx("strong",{children:"ade:"})," ",J.returned]}),e.jsxs("div",{style:{fontSize:"14px"},children:[e.jsx("strong",{children:"Geciken Kitap:"})," ",e.jsx("span",{style:{color:g.late>0?"#ef4444":"#10b981",fontWeight:600},children:g.late})]}),e.jsxs("div",{style:{fontSize:"14px"},children:[e.jsx("strong",{children:"Aktif dn:"})," ",(()=>{const te=R.length;return e.jsxs(e.Fragment,{children:[e.jsx("span",{style:{color:te>0?"#3b82f6":"#10b981",fontWeight:600},children:te}),e.jsxs("span",{style:{fontSize:"12px",color:"#64748b",marginLeft:"8px"},children:["/ ",Ve," (Limit)"]})]})})()]})]}),g.late>0&&e.jsxs("div",{style:{padding:"8px",backgroundColor:"#fee2e2",borderRadius:"6px",color:"#dc2626",fontSize:"13px",fontWeight:600},children:[" Bu rencinin ",g.late," geciken kitab var!"]})]})})(),e.jsx("button",{onClick:()=>{D("")},style:{padding:"6px 16px",fontSize:"13px",backgroundColor:"#ef4444",color:"white",border:"none",borderRadius:"6px",cursor:"pointer",fontWeight:600},children:"Seimi Kaldr"})]})]}),gt&&e.jsx("div",{style:{marginBottom:"16px"},children:(()=>{if(!de)return e.jsx("div",{style:{padding:"12px",borderRadius:"10px",backgroundColor:"#f8fafc",border:"1px solid #e2e8f0",color:"#475569",fontSize:"13px",fontWeight:500},children:"renci limiti bilgisi yklenemedi. Ltfen tekrar deneyin."});const{selection:g,limitInfo:R,remainingSlots:J}=de,te=R.totalAfterBorrow,ge=g.alreadyBorrowedBooks.length,v=g.availableBooks.length,$=te>Ve&&v>0,le=!$&&v>0&&te===Ve,Le=!$&&!le&&v>0&&J>0&&J<=2,Ke=$?"#fee2e2":le?"#fef3c7":Le?"#ecfeff":"#f8fafc",Ze=$?"#fecaca":le?"#fde68a":Le?"#bae6fd":"#e2e8f0",Mt=$?"#b91c1c":le?"#92400e":Le?"#0369a1":"#475569";return e.jsxs("div",{style:{padding:"12px",borderRadius:"10px",border:`1px solid ${Ze}`,backgroundColor:Ke,color:Mt,fontSize:"13px",lineHeight:1.5},children:[e.jsx("div",{style:{fontWeight:700,marginBottom:"6px"},children:"Kitap Limiti Durumu"}),e.jsxs("div",{style:{marginBottom:"4px"},children:["Aktif dn: ",e.jsx("strong",{children:R.activeLoanCount})," / ",Ve]}),v>0&&e.jsxs("div",{style:{marginBottom:"4px"},children:["Bu kitap verildiinde toplam ",e.jsx("strong",{children:te})," kitap olacak."]}),ge>0&&e.jsx("div",{style:{marginBottom:"4px",color:"#b45309",fontWeight:600},children:" Bu renci kitab zaten dn alm. Yeniden verilemez."}),$&&e.jsxs("div",{style:{fontWeight:600},children:[" Bu ilem limiti ",e.jsxs("strong",{children:[te-Ve," kitap"]})," aacak. Personel onay kart alacak."]}),!$&&le&&e.jsx("div",{style:{fontWeight:600},children:" Bu ilem sonras renci limiti dolduracak. Takip iin not almanz nerilir."}),!$&&!le&&Le&&e.jsxs("div",{style:{fontWeight:600},children:[" rencinin yalnzca ",e.jsx("strong",{children:J})," bo slotu kald."]}),!$&&!le&&!Le&&v>0&&e.jsx("div",{style:{fontWeight:500,color:"#0369a1"},children:"renci limiti uygun. lem gvenle yaplabilir."})]})})()}),e.jsxs("div",{style:{marginBottom:"16px"},children:[e.jsx("label",{style:{display:"block",marginBottom:"8px",fontWeight:600},children:"Sre (Gn)"}),e.jsx("input",{type:"number",value:ie,onChange:g=>M(parseInt(g.target.value)||14),min:"1",max:"30",style:{width:"100%",padding:"10px",borderRadius:"6px",border:"1px solid #e5e7eb"}})]}),e.jsxs("div",{style:{display:"flex",gap:"12px"},children:[e.jsx("button",{onClick:Bn,disabled:Zt,style:{flex:1,padding:"12px",backgroundColor:Zt?"#9ca3af":"#3b82f6",color:"white",border:"none",borderRadius:"6px",cursor:Zt?"not-allowed":"pointer",fontWeight:600,display:"flex",alignItems:"center",justifyContent:"center",gap:"6px"},children:re?"leniyor...":e.jsxs(e.Fragment,{children:[e.jsxs("svg",{width:"16",height:"16",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:[e.jsx("path",{d:"M4 19.5A2.5 2.5 0 0 1 6.5 17H20"}),e.jsx("path",{d:"M6.5 2H20v20H6.5A2.5 2.5 0 0 1 4 19.5v-15A2.5 2.5 0 0 1 6.5 2z"}),e.jsx("path",{d:"M9 9l3 3 3-3"})]}),"dn Ver"]})}),e.jsx("button",{onClick:()=>{m(!1),Re(null),D(""),V("")},style:{flex:1,padding:"12px",backgroundColor:"#ef4444",color:"white",border:"none",borderRadius:"6px",cursor:"pointer",fontWeight:600},children:"ptal"})]})]})}),I&&ve&&_t.createPortal(e.jsx("div",{style:{position:"fixed",top:0,left:0,right:0,bottom:0,backgroundColor:"rgba(0, 0, 0, 0.5)",display:"flex",alignItems:"center",justifyContent:"center",zIndex:6e4},onClick:g=>{g.target===g.currentTarget&&(F(!1),Pe(null))},children:e.jsxs("div",{style:{backgroundColor:"white",borderRadius:"12px",padding:"24px",maxWidth:"500px",width:"90%",boxShadow:"0 20px 25px -5px rgba(0, 0, 0, 0.1), 0 10px 10px -5px rgba(0, 0, 0, 0.04)"},onClick:g=>g.stopPropagation(),children:[e.jsxs("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center",marginBottom:"20px"},children:[e.jsx("h2",{style:{margin:0,color:"#1e293b",fontSize:"20px",fontWeight:600},children:" Kitap Limiti Uyars"}),e.jsx("button",{onClick:()=>{F(!1),Pe(null)},style:{background:"none",border:"none",fontSize:"24px",cursor:"pointer",color:"#64748b",padding:0,width:"32px",height:"32px",display:"flex",alignItems:"center",justifyContent:"center"},children:""})]}),(()=>{const g=n.find(Ke=>Ke.name===ve.student||Rn(Ke)===ve.student||Ke.surname===ve.student);if(!g)return null;const R=Rn(g),J=Ll({booksToBorrow:ve.books,loans:r,studentFullName:R,studentData:g}),te=J.availableBooks,ge=aa({studentFullName:R,studentData:g,loans:r,books:i,booksToBorrowCount:te.length,maxBorrowLimit:Ve}),v=ge.activeLoanCount,$=ge.totalAfterBorrow,le=$-Ve,Le=J.alreadyBorrowedBooks.length;return e.jsxs(e.Fragment,{children:[e.jsxs("div",{style:{marginBottom:"20px"},children:[e.jsxs("div",{style:{fontSize:"14px",color:"#475569",marginBottom:"12px",lineHeight:"1.6"},children:[e.jsx("strong",{children:ve.student})," rencisi u anda ",e.jsx("strong",{children:v})," kitap dn alm durumda."]}),Le>0&&e.jsxs("div",{style:{padding:"8px",backgroundColor:"#fee2e2",borderRadius:"6px",color:"#dc2626",fontSize:"13px",fontWeight:600,marginBottom:"12px"},children:[" Seilen kitaplardan ",e.jsx("strong",{children:Le})," tanesi renci tarafndan zaten dn alnm. Bu kitaplar verilmeyecek."]}),e.jsxs("div",{style:{fontSize:"14px",color:"#475569",marginBottom:"12px",lineHeight:"1.6"},children:["Verilebilecek ",e.jsx("strong",{children:te.length})," kitap eklendiinde toplam ",e.jsx("strong",{children:$})," kitap olacak."]}),e.jsxs("div",{style:{padding:"12px",backgroundColor:"#fef3c7",borderRadius:"8px",border:"1px solid #fbbf24",marginBottom:"12px"},children:[e.jsx("div",{style:{fontSize:"14px",color:"#92400e",fontWeight:600,marginBottom:"4px"},children:" Limit Am"}),e.jsxs("div",{style:{fontSize:"13px",color:"#78350f"},children:["Bir renci en fazla ",e.jsxs("strong",{children:[Ve," kitap"]})," alabilir. Bu ilem sonras renci ",e.jsxs("strong",{children:[le," kitap fazla"]})," alacak.",Le>0&&e.jsxs("span",{style:{display:"block",marginTop:"4px",fontSize:"12px"},children:["Not: ",Le," kitap zaten dnte olduu iin verilmeyecek."]})]})]}),e.jsxs("div",{style:{fontSize:"13px",color:"#64748b",marginTop:"12px"},children:[e.jsxs("strong",{children:["Verilebilecek Kitaplar (",te.length,"):"]}),e.jsx("ul",{style:{marginTop:"8px",paddingLeft:"20px",fontSize:"12px"},children:te.map(Ke=>e.jsxs("li",{style:{marginBottom:"4px"},children:[Ke.title," - ",Ke.author]},Ke.id))}),Le>0&&e.jsxs(e.Fragment,{children:[e.jsxs("strong",{style:{color:"#dc2626",marginTop:"12px",display:"block"},children:["Zaten dnte Olan Kitaplar (",Le,"):"]}),e.jsx("ul",{style:{marginTop:"8px",paddingLeft:"20px",fontSize:"12px",color:"#9ca3af"},children:ve.books.filter(Ke=>!te.some(Ze=>Ze.id===Ke.id)).map(Ke=>e.jsxs("li",{style:{marginBottom:"4px",textDecoration:"line-through"},children:[Ke.title," - ",Ke.author]},Ke.id))})]})]})]}),e.jsxs("div",{style:{display:"flex",gap:"12px",justifyContent:"flex-end"},children:[e.jsx("button",{onClick:()=>{F(!1),Pe(null)},style:{padding:"10px 20px",fontSize:"14px",backgroundColor:"#f3f4f6",color:"#374151",border:"none",borderRadius:"6px",cursor:"pointer",fontWeight:600},children:"ptal"}),e.jsx("button",{onClick:async()=>{g&&await bn()},disabled:re||te.length===0,style:{padding:"10px 20px",fontSize:"14px",backgroundColor:re||te.length===0?"#94a3b8":"#ef4444",color:"white",border:"none",borderRadius:"6px",cursor:re||te.length===0?"not-allowed":"pointer",fontWeight:600,display:"flex",alignItems:"center",justifyContent:"center",gap:"6px"},children:re?"leniyor...":e.jsxs(e.Fragment,{children:[e.jsxs("svg",{width:"16",height:"16",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:[e.jsx("path",{d:"M4 19.5A2.5 2.5 0 0 1 6.5 17H20"}),e.jsx("path",{d:"M6.5 2H20v20H6.5A2.5 2.5 0 0 1 4 19.5v-15A2.5 2.5 0 0 1 6.5 2z"}),e.jsx("path",{d:"M9 9l3 3 3-3"})]}),"Yine de dn Ver (",te.length," kitap)"]})})]})]})})()]})}),document.body),!d&&y&&e.jsx("div",{style:{position:"fixed",top:0,left:0,right:0,bottom:0,backgroundColor:"rgba(0, 0, 0, 0.5)",display:"flex",alignItems:"center",justifyContent:"center",zIndex:2e3},onClick:()=>{f(!1),Re(null),lt(null)},children:e.jsxs("div",{className:"card",style:{maxWidth:"500px",width:"90%",backgroundColor:"white"},onClick:g=>g.stopPropagation(),children:[e.jsx("h3",{style:{marginTop:0},children:"Kitap Teslim Al"}),Oe&&e.jsx("div",{style:{padding:"12px",backgroundColor:"#fee2e2",color:"#dc2626",borderRadius:"8px",marginBottom:"16px"},children:Oe}),e.jsx("div",{style:{display:"flex",flexDirection:"column",gap:"12px"},children:A.loans.map((g,R)=>{const J=C(g.dueDate),te=J<0,ge=J,v=!te&&ge>=0&&ge<=3,$=n.find(le=>le.name===g.borrower||`${le.name} ${le.surname}`.trim()===g.borrower||le.surname===g.borrower);return e.jsxs("div",{onClick:()=>{$&&Qe($)},style:{padding:"16px",backgroundColor:"#f8fafc",borderRadius:"8px",border:"1px solid #e2e8f0",cursor:$?"pointer":"default",transition:"all 0.2s"},onMouseEnter:le=>{$&&(le.currentTarget.style.backgroundColor="#f0f9ff",le.currentTarget.style.borderColor="#3b82f6")},onMouseLeave:le=>{$&&(le.currentTarget.style.backgroundColor="#f8fafc",le.currentTarget.style.borderColor="#e2e8f0")},children:[e.jsxs("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center",marginBottom:"8px"},children:[e.jsxs("div",{children:[e.jsx("div",{style:{fontWeight:700,marginBottom:"8px",fontSize:"16px",color:"#1e293b"},children:g.borrower}),$&&e.jsxs("div",{style:{display:"flex",flexDirection:"column",gap:"4px",marginBottom:"8px"},children:[e.jsxs("div",{style:{fontSize:"13px",color:"#64748b"},children:[e.jsx("strong",{children:"Snf/ube:"})," ",$.class?`${$.class}`:"",$.branch?`/${$.branch}`:""]}),$.studentNumber&&e.jsxs("div",{style:{fontSize:"13px",color:"#64748b"},children:[e.jsx("strong",{children:"Numara:"})," ",$.studentNumber]})]}),e.jsxs("div",{style:{fontSize:"12px",color:"#64748b"},children:["Teslim: ",new Date(g.dueDate).toLocaleDateString("tr-TR")]})]}),e.jsx("div",{style:{padding:"4px 12px",borderRadius:"12px",fontSize:"12px",fontWeight:600,backgroundColor:te?"#fee2e2":v?"#fef3c7":"#d1fae5",color:te?"#dc2626":v?"#d97706":"#059669"},children:ge===0?"Sresi Doldu":`${ge} gn kald`})]}),e.jsxs("div",{style:{display:"flex",gap:"8px"},children:[e.jsxs("button",{onClick:le=>{le.stopPropagation(),w(g.borrower)},disabled:re,style:{flex:1,padding:"10px",backgroundColor:re?"#9ca3af":"#10b981",color:"white",border:"none",borderRadius:"6px",cursor:re?"not-allowed":"pointer",fontWeight:600,fontSize:"14px",display:"flex",alignItems:"center",justifyContent:"center",gap:"6px"},children:[e.jsx("svg",{width:"14",height:"14",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:e.jsx("polyline",{points:"20 6 9 17 4 12"})}),re?"leniyor...":"Teslim Al"]}),e.jsxs("button",{onClick:le=>{le.stopPropagation(),Bt(g),We(!0)},disabled:re,style:{padding:"10px 16px",backgroundColor:re?"#9ca3af":"#6366f1",color:"white",border:"none",borderRadius:"6px",cursor:re?"not-allowed":"pointer",fontWeight:600,fontSize:"14px",display:"flex",alignItems:"center",justifyContent:"center",gap:"4px"},children:[e.jsxs("svg",{width:"14",height:"14",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:[e.jsx("circle",{cx:"12",cy:"12",r:"1"}),e.jsx("circle",{cx:"12",cy:"5",r:"1"}),e.jsx("circle",{cx:"12",cy:"19",r:"1"}),e.jsx("circle",{cx:"5",cy:"12",r:"1"}),e.jsx("circle",{cx:"19",cy:"12",r:"1"})]}),"lemler"]})]})]},R)})}),e.jsx("button",{onClick:()=>{f(!1),Re(null),lt(null)},style:{marginTop:"16px",width:"100%",padding:"12px",backgroundColor:"#ef4444",color:"white",border:"none",borderRadius:"6px",cursor:"pointer",fontWeight:600},children:"ptal"})]})}),et&&e.jsx("div",{style:{position:"fixed",top:0,left:0,right:0,bottom:0,backgroundColor:"rgba(0, 0, 0, 0.5)",display:"flex",alignItems:"center",justifyContent:"center",zIndex:2001},onClick:()=>Qe(null),children:e.jsxs("div",{className:"card",style:{maxWidth:"700px",width:"90%",maxHeight:"90vh",overflow:"auto",position:"relative"},onClick:g=>g.stopPropagation(),children:[e.jsxs("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center",marginBottom:"24px"},children:[e.jsx("h2",{style:{margin:0},children:"renci Detaylar"}),e.jsx("button",{onClick:()=>Qe(null),style:{background:"none",border:"none",fontSize:"24px",cursor:"pointer",color:"#64748b"},children:""})]}),e.jsxs("div",{style:{display:"flex",flexDirection:"column",gap:"20px"},children:[e.jsxs("div",{style:{padding:"16px",backgroundColor:"#f8fafc",borderRadius:"8px",border:"1px solid #e2e8f0"},children:[e.jsx("h3",{style:{marginTop:0,marginBottom:"16px",fontSize:"18px"},children:"Temel Bilgiler"}),e.jsxs("div",{style:{display:"grid",gridTemplateColumns:"repeat(auto-fit, minmax(200px, 1fr))",gap:"12px"},children:[e.jsxs("div",{children:[e.jsx("strong",{style:{color:"#64748b",fontSize:"13px",display:"block",marginBottom:"4px"},children:"Ad"}),e.jsx("p",{style:{margin:0,fontSize:"16px",fontWeight:600},children:et.name})]}),e.jsxs("div",{children:[e.jsx("strong",{style:{color:"#64748b",fontSize:"13px",display:"block",marginBottom:"4px"},children:"Soyad"}),e.jsx("p",{style:{margin:0,fontSize:"16px",fontWeight:600},children:et.surname})]}),et.studentNumber&&e.jsxs("div",{children:[e.jsx("strong",{style:{color:"#64748b",fontSize:"13px",display:"block",marginBottom:"4px"},children:"renci Numaras"}),e.jsx("p",{style:{margin:0,fontSize:"16px",fontWeight:600},children:et.studentNumber})]}),et.class&&e.jsxs("div",{children:[e.jsx("strong",{style:{color:"#64748b",fontSize:"13px",display:"block",marginBottom:"4px"},children:"Snf"}),e.jsx("p",{style:{margin:0,fontSize:"16px",fontWeight:600},children:et.class})]}),et.branch&&e.jsxs("div",{children:[e.jsx("strong",{style:{color:"#64748b",fontSize:"13px",display:"block",marginBottom:"4px"},children:"ube"}),e.jsx("p",{style:{margin:0,fontSize:"16px",fontWeight:600},children:et.branch})]})]})]}),e.jsxs("div",{style:{padding:"20px",backgroundColor:"#ffffff",borderRadius:"12px",border:"1px solid #e2e8f0",boxShadow:"0 1px 3px rgba(0, 0, 0, 0.05)"},children:[e.jsxs("h3",{style:{marginTop:0,marginBottom:"20px",fontSize:"18px",fontWeight:600,color:"#0f172a",display:"flex",alignItems:"center",gap:"8px"},children:[e.jsxs("svg",{width:"20",height:"20",viewBox:"0 0 24 24",fill:"none",stroke:"#0f172a",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:[e.jsx("line",{x1:"18",y1:"20",x2:"18",y2:"10"}),e.jsx("line",{x1:"12",y1:"20",x2:"12",y2:"4"}),e.jsx("line",{x1:"6",y1:"20",x2:"6",y2:"14"})]}),"dn statistikleri"]}),(()=>{const g=et.late??0,R=Rn(et),J=r.length>0&&i.length>0?r.filter(ge=>(ge.borrower===R||ge.borrower===et.name)&&i.some(v=>v.id===ge.bookId)):[],te=J.length>0?J.length:(et.borrowed??0)-(et.returned??0);return e.jsxs("div",{style:{display:"flex",flexDirection:"column",gap:"16px"},children:[e.jsxs("div",{style:{display:"grid",gridTemplateColumns:"repeat(2, 1fr)",gap:"16px"},children:[e.jsxs("div",{style:{textAlign:"center",padding:"20px 16px",background:"linear-gradient(135deg, #667eea 0%, #764ba2 100%)",borderRadius:"12px",boxShadow:"0 4px 6px rgba(102, 126, 234, 0.2)",color:"white"},children:[e.jsx("div",{style:{marginBottom:"8px",display:"flex",justifyContent:"center"},children:e.jsxs("svg",{width:"32",height:"32",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:[e.jsx("path",{d:"M4 19.5A2.5 2.5 0 0 1 6.5 17H20"}),e.jsx("path",{d:"M6.5 2H20v20H6.5A2.5 2.5 0 0 1 4 19.5v-15A2.5 2.5 0 0 1 6.5 2z"}),e.jsx("line",{x1:"8",y1:"8",x2:"16",y2:"8"}),e.jsx("line",{x1:"8",y1:"12",x2:"16",y2:"12"}),e.jsx("line",{x1:"8",y1:"16",x2:"16",y2:"16"})]})}),e.jsx("div",{style:{fontSize:"32px",fontWeight:700,marginBottom:"6px"},children:et.borrowed??0}),e.jsx("div",{style:{fontSize:"13px",fontWeight:500,opacity:.95},children:"Toplam dn"})]}),e.jsxs("div",{style:{textAlign:"center",padding:"20px 16px",background:"linear-gradient(135deg, #10b981 0%, #059669 100%)",borderRadius:"12px",boxShadow:"0 4px 6px rgba(16, 185, 129, 0.2)",color:"white"},children:[e.jsx("div",{style:{marginBottom:"8px",display:"flex",justifyContent:"center"},children:e.jsxs("svg",{width:"32",height:"32",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:[e.jsx("path",{d:"M22 11.08V12a10 10 0 1 1-5.93-9.14"}),e.jsx("polyline",{points:"22 4 12 14.01 9 11.01"})]})}),e.jsx("div",{style:{fontSize:"32px",fontWeight:700,marginBottom:"6px"},children:et.returned??0}),e.jsx("div",{style:{fontSize:"13px",fontWeight:500,opacity:.95},children:"ade"})]})]}),e.jsxs("div",{style:{display:"grid",gridTemplateColumns:g>0?"repeat(2, 1fr)":"1fr",gap:"16px"},children:[e.jsxs("div",{style:{textAlign:"center",padding:"20px 16px",background:"linear-gradient(135deg, #f59e0b 0%, #d97706 100%)",borderRadius:"12px",boxShadow:"0 4px 6px rgba(245, 158, 11, 0.2)",color:"white"},children:[e.jsx("div",{style:{marginBottom:"8px",display:"flex",justifyContent:"center"},children:e.jsxs("svg",{width:"32",height:"32",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:[e.jsx("path",{d:"M4 19.5A2.5 2.5 0 0 1 6.5 17H20"}),e.jsx("path",{d:"M6.5 2H20v20H6.5A2.5 2.5 0 0 1 4 19.5v-15A2.5 2.5 0 0 1 6.5 2z"}),e.jsx("path",{d:"M9 9l3 3 3-3"})]})}),e.jsx("div",{style:{fontSize:"32px",fontWeight:700,marginBottom:"6px"},children:te}),e.jsx("div",{style:{fontSize:"13px",fontWeight:500,opacity:.95},children:"Aktif dn"})]}),g>0&&e.jsxs("div",{style:{textAlign:"center",padding:"20px 16px",background:"linear-gradient(135deg, #ef4444 0%, #dc2626 100%)",borderRadius:"12px",boxShadow:"0 4px 6px rgba(239, 68, 68, 0.2)",color:"white"},children:[e.jsx("div",{style:{marginBottom:"8px",display:"flex",justifyContent:"center"},children:e.jsxs("svg",{width:"32",height:"32",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:[e.jsx("path",{d:"M10.29 3.86L1.82 18a2 2 0 0 0 1.71 3h16.94a2 2 0 0 0 1.71-3L13.71 3.86a2 2 0 0 0-3.42 0z"}),e.jsx("line",{x1:"12",y1:"9",x2:"12",y2:"13"}),e.jsx("line",{x1:"12",y1:"17",x2:"12.01",y2:"17"})]})}),e.jsx("div",{style:{fontSize:"32px",fontWeight:700,marginBottom:"6px"},children:g}),e.jsx("div",{style:{fontSize:"13px",fontWeight:500,opacity:.95},children:"Geciken"})]})]})]})})()]}),be&&(()=>{const g=Rn(et);return be.loans.filter(R=>R.borrower===g||R.borrower===et.name).length>0})()&&e.jsxs("div",{children:[e.jsx("h3",{style:{marginTop:0,marginBottom:"16px",fontSize:"18px"},children:"Bu Kitaptan dnler"}),e.jsx("div",{style:{display:"flex",flexDirection:"column",gap:"8px"},children:be.loans.filter(g=>{const R=Rn(et);return g.borrower===R||g.borrower===et.name}).map((g,R)=>{const J=C(g.dueDate),te=J<0,ge=J,v=!te&&ge>=0&&ge<=3;return e.jsx("div",{style:{padding:"12px",backgroundColor:"#f8fafc",borderRadius:"8px",border:"1px solid #e2e8f0"},children:e.jsxs("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center"},children:[e.jsxs("div",{children:[e.jsx("div",{style:{fontWeight:600,marginBottom:"4px"},children:be.title}),e.jsxs("div",{style:{fontSize:"12px",color:"#64748b"},children:["Teslim Tarihi: ",new Date(g.dueDate).toLocaleDateString("tr-TR")]}),g.personel&&e.jsxs("div",{style:{fontSize:"12px",color:"#64748b"},children:["Personel: ",g.personel]})]}),e.jsx("div",{style:{padding:"4px 12px",borderRadius:"12px",fontSize:"12px",fontWeight:600,backgroundColor:te?"#fee2e2":v?"#fef3c7":"#d1fae5",color:te?"#dc2626":v?"#d97706":"#059669"},children:te?`Gecikmi (${Math.abs(ge)} gn)`:`${ge} gn kald`})]})},R)})})]})]})]})}),!d&&Xe&&mt&&e.jsx("div",{style:{position:"fixed",top:0,left:0,right:0,bottom:0,backgroundColor:"rgba(0, 0, 0, 0.5)",display:"flex",alignItems:"center",justifyContent:"center",zIndex:6e4},onClick:()=>{Ge(!1),kt(null),Re(null)},children:e.jsxs("div",{className:"card",style:{maxWidth:"600px",width:"90%",maxHeight:"90vh",overflow:"auto",position:"relative"},onClick:g=>g.stopPropagation(),children:[e.jsxs("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center",marginBottom:"24px"},children:[e.jsx("h2",{style:{margin:0,color:"#1e293b"},children:"Ceza Puan Dzenle"}),e.jsx("button",{onClick:()=>{Ge(!1),kt(null),Re(null)},style:{background:"none",border:"none",fontSize:"24px",cursor:"pointer",color:"#64748b",padding:0,width:"32px",height:"32px",display:"flex",alignItems:"center",justifyContent:"center"},children:""})]}),e.jsxs("div",{style:{display:"flex",flexDirection:"column",gap:"20px"},children:[e.jsxs("div",{style:{padding:"16px",backgroundColor:"#f8fafc",borderRadius:"8px",border:"1px solid #e2e8f0"},children:[e.jsx("div",{style:{fontWeight:600,marginBottom:"8px",fontSize:"16px"},children:mt.name}),e.jsxs("div",{style:{fontSize:"14px",color:"#64748b"},children:[mt.class&&mt.branch?`${mt.class}-${mt.branch}`:mt.class?`${mt.class}. Snf`:"",mt.studentNumber&&`  No: ${mt.studentNumber}`]})]}),(()=>{const g=mt.penaltyPoints||0;return e.jsxs("div",{style:{padding:"20px",backgroundColor:"#ffffff",borderRadius:"12px",border:"1px solid #e2e8f0"},children:[e.jsx("h3",{style:{marginTop:0,marginBottom:"16px",fontSize:"18px",fontWeight:600,color:"#1e293b"},children:" Ceza Puan"}),e.jsxs("div",{style:{display:"flex",flexDirection:"column",gap:"12px"},children:[e.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"16px"},children:[e.jsxs("div",{style:{flex:1},children:[e.jsx("strong",{style:{color:"#64748b",fontSize:"14px",display:"block",marginBottom:"4px"},children:"Ceza Puan"}),e.jsx("p",{style:{margin:0,fontSize:"24px",fontWeight:700,color:g>=zt?"#ef4444":g>0?"#f59e0b":"#10b981"},children:g}),e.jsx("p",{style:{margin:"4px 0 0 0",fontSize:"12px",color:"#64748b"},children:"(Geciken kitap teslim edildiinde ceza puan otomatik eklenir ve dmez. Sadece personel input ile drlebilir)"})]}),g>=zt&&e.jsx("div",{style:{padding:"12px 20px",backgroundColor:"#fee2e2",borderRadius:"8px",border:"2px solid #ef4444",color:"#dc2626",fontWeight:600},children:" Ceza Durumunda - Kitap Alamaz"})]}),e.jsxs("div",{style:{display:"flex",gap:"8px",alignItems:"center"},children:[e.jsx("input",{type:"number",id:"penalty-points-book-modal-input",min:"0",defaultValue:mt.penaltyPoints||0,style:{flex:1,padding:"10px",borderRadius:"6px",border:"1px solid #d1d5db",fontSize:"14px"},placeholder:"Ceza puan"}),e.jsx("button",{onClick:async()=>{const R=document.getElementById("penalty-points-book-modal-input");if(!R)return;const J=parseInt(R.value)||0;if(J<0){Ut("Hata","Ceza puan negatif olamaz.","error","");return}try{ce(!0),await xe.put(`/admin/students/${encodeURIComponent(mt.name)}/penalty`,{penaltyPoints:J}),kt({...mt,penaltyPoints:J,isBanned:J>=zt}),Ge(!1),kt(null),Re(null),s&&await s(),Ut("Baarl","Ceza puan baaryla gncellendi.","success","")}catch(te){Ut("Hata",te instanceof Error?te.message:"Ceza puan gncellenirken bir hata olutu","error","")}finally{ce(!1)}},disabled:re,style:{padding:"10px 20px",fontSize:"14px",backgroundColor:re?"#9ca3af":"#3b82f6",color:"white",border:"none",borderRadius:"6px",cursor:re?"not-allowed":"pointer",fontWeight:600},children:re?"Gncelleniyor...":"Gncelle"})]})]})]})})()]})]})}),ot&&st&&_t.createPortal(e.jsx("div",{style:{position:"fixed",top:0,left:0,right:0,bottom:0,backgroundColor:"rgba(0, 0, 0, 0.5)",display:"flex",alignItems:"center",justifyContent:"center",zIndex:6e4},onClick:g=>{g.target===g.currentTarget&&(We(!1),Bt(null),N(null))},children:e.jsxs("div",{className:"card",style:{maxWidth:"500px",width:"90%",maxHeight:"90vh",overflow:"auto",position:"relative"},onClick:g=>g.stopPropagation(),children:[e.jsxs("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center",marginBottom:"24px"},children:[e.jsxs("h2",{style:{margin:0,color:"#1e293b",display:"flex",alignItems:"center",gap:"8px"},children:[e.jsxs("svg",{width:"20",height:"20",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:[e.jsx("circle",{cx:"12",cy:"12",r:"1"}),e.jsx("circle",{cx:"12",cy:"5",r:"1"}),e.jsx("circle",{cx:"12",cy:"19",r:"1"}),e.jsx("circle",{cx:"5",cy:"12",r:"1"}),e.jsx("circle",{cx:"19",cy:"12",r:"1"})]}),"lemler"]}),e.jsx("button",{onClick:()=>{We(!1),Bt(null),N(null)},style:{background:"none",border:"none",fontSize:"24px",cursor:"pointer",color:"#64748b",padding:0,width:"32px",height:"32px",display:"flex",alignItems:"center",justifyContent:"center"},children:""})]}),e.jsxs("div",{style:{marginBottom:"24px",padding:"16px",backgroundColor:"#f8fafc",borderRadius:"8px",border:"1px solid #e2e8f0"},children:[e.jsx("div",{style:{fontWeight:600,marginBottom:"8px",fontSize:"16px",color:"#1e293b"},children:be.title}),e.jsxs("div",{style:{fontSize:"14px",color:"#64748b",marginBottom:"4px"},children:["renci: ",e.jsx("strong",{style:{color:"#334155"},children:st.borrower})]}),e.jsxs("div",{style:{fontSize:"14px",color:"#64748b"},children:["Teslim Tarihi: ",e.jsx("strong",{style:{color:"#334155"},children:new Date(st.dueDate).toLocaleDateString("tr-TR")})]})]}),c&&e.jsx("div",{style:{marginBottom:"16px",padding:"12px",backgroundColor:"#fee2e2",color:"#dc2626",borderRadius:"8px",border:"1px solid #fecaca"},children:c}),e.jsxs("div",{style:{display:"flex",flexDirection:"column",gap:"12px"},children:[e.jsxs("div",{style:{padding:"16px",backgroundColor:"#f8fafc",borderRadius:"8px",border:"1px solid #e2e8f0"},children:[e.jsx("label",{style:{display:"block",marginBottom:"12px",fontWeight:600,fontSize:"14px",color:"#1e293b"},children:"Sre Uzatma (Gn)"}),e.jsxs("select",{value:Ee,onChange:g=>Et(parseInt(g.target.value)),style:{width:"100%",padding:"10px",borderRadius:"6px",border:"1px solid #d1d5db",fontSize:"14px",marginBottom:"12px",backgroundColor:"#fff"},children:[e.jsx("option",{value:7,children:"7 Gn"}),e.jsx("option",{value:14,children:"14 Gn"}),e.jsx("option",{value:21,children:"21 Gn"}),e.jsx("option",{value:30,children:"30 Gn"})]}),e.jsx("button",{onClick:Y,disabled:re,style:{width:"100%",padding:"12px",backgroundColor:re?"#9ca3af":"#3b82f6",color:"white",border:"none",borderRadius:"6px",cursor:re?"not-allowed":"pointer",fontWeight:600,fontSize:"14px",display:"flex",alignItems:"center",justifyContent:"center",gap:"6px"},children:re?"leniyor...":e.jsxs(e.Fragment,{children:[e.jsxs("svg",{width:"16",height:"16",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:[e.jsx("circle",{cx:"12",cy:"12",r:"10"}),e.jsx("polyline",{points:"12 6 12 12 16 14"})]}),"Sre Uzat"]})})]}),e.jsx("button",{onClick:ee,disabled:re,style:{width:"100%",padding:"12px",backgroundColor:re?"#9ca3af":"#10b981",color:"white",border:"none",borderRadius:"6px",cursor:re?"not-allowed":"pointer",fontWeight:600,fontSize:"14px",display:"flex",alignItems:"center",justifyContent:"center",gap:"6px"},children:re?"leniyor...":e.jsxs(e.Fragment,{children:[e.jsx("svg",{width:"16",height:"16",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:e.jsx("polyline",{points:"20 6 9 17 4 12"})}),"Teslim Al"]})})]})]})}),document.body),ze&&e.jsx(ur,{isOpen:!!ze,title:ze.title,icon:ze.icon,confirmText:ze.confirmText,confirmButtonColor:ze.confirmButtonColor,onConfirm:async()=>{fe(!0);try{await ze.onConfirm()}finally{fe(!1),P(null)}},onCancel:()=>P(null),loading:se,children:e.jsx("div",{style:{lineHeight:"1.5",color:"#4b5563"},children:ze.message.split(`
`).map((g,R)=>e.jsx("p",{style:{margin:"0 0 8px 0"},children:g},R))})}),De&&e.jsx(zi,{isOpen:_e,title:De.title,type:De.type,icon:De.icon,onClose:()=>{xt(!1),ft(null)},children:e.jsx("p",{style:{lineHeight:"1.5",color:"#4b5563"},children:De.message})})]})},ao=t=>{const{onClose:n}=t;return _t.createPortal(e.jsx("div",{style:{position:"fixed",top:0,left:0,right:0,bottom:0,backgroundColor:"rgba(0, 0, 0, 0.5)",display:"flex",alignItems:"center",justifyContent:"center",zIndex:52e3,backdropFilter:"blur(4px)"},onClick:n,children:e.jsx(Og,{...t,onEdit:t.onEdit})}),document.body)},Cu=({book:t,onSave:n,onClose:r})=>{var Pe,bt,lt;const[i,o]=a.useState((t==null?void 0:t.title)||""),[l,s]=a.useState((t==null?void 0:t.author)||""),[u,d]=a.useState((t==null?void 0:t.category)||"Roman"),[h,C]=a.useState((t==null?void 0:t.totalQuantity)||1),k=a.useMemo(()=>{const be=(t==null?void 0:t.totalQuantity)??1,Me={healthy:(t==null?void 0:t.healthyCount)??Math.max(be-((t==null?void 0:t.damagedCount)??0)-((t==null?void 0:t.lostCount)??0),0),damaged:(t==null?void 0:t.damagedCount)??0,lost:(t==null?void 0:t.lostCount)??0};return $o(be,Me)},[t]),[S,B]=a.useState(k),[m,I]=a.useState((t==null?void 0:t.shelf)||""),[F,y]=a.useState((t==null?void 0:t.publisher)||""),[f,b]=a.useState((t==null?void 0:t.summary)||""),[D,q]=a.useState(((Pe=t==null?void 0:t.year)==null?void 0:Pe.toString())||""),[V,ie]=a.useState(((bt=t==null?void 0:t.pageCount)==null?void 0:bt.toString())||""),[M,re]=a.useState(((lt=t==null?void 0:t.bookNumber)==null?void 0:lt.toString())||""),[ce,Oe]=a.useState(!1),[Re,_e]=a.useState(null),xt=["Roman","Tarih","Deneme","Psikoloji","Fantastik","Bilim Kurgu","Macera","Biyografi"];a.useEffect(()=>{o((t==null?void 0:t.title)||""),s((t==null?void 0:t.author)||""),d((t==null?void 0:t.category)||"Roman");const be=(t==null?void 0:t.totalQuantity)??1;C(be),B($o(be,{healthy:(t==null?void 0:t.healthyCount)??Math.max(be-((t==null?void 0:t.damagedCount)??0)-((t==null?void 0:t.lostCount)??0),0),damaged:(t==null?void 0:t.damagedCount)??0,lost:(t==null?void 0:t.lostCount)??0}))},[t]);const De=S.healthy,ft=S.damaged,ze=S.lost,P=De+ft+ze,se=be=>{const Me=Math.max(1,be),et=ft+ze||0,Qe=Math.max(Me,et);C(Qe),B(Z=>$o(Qe,Z))},fe=(be,Me)=>{B(et=>{const Qe=Fg(h,et,be,Me);return Qe.changed?Qe.counts:et})},ve=async be=>{if(be.preventDefault(),_e(null),!i.trim()||!l.trim()){_e("Balk ve yazar alanlar zorunludur");return}Oe(!0);try{await n({title:i.trim(),author:l.trim(),category:u,quantity:h,healthyCount:De,damagedCount:ft,lostCount:ze,id:t==null?void 0:t.id,shelf:m.trim()||void 0,publisher:F.trim()||void 0,summary:f.trim()||void 0,year:D?parseInt(D):void 0,pageCount:V?parseInt(V):void 0,bookNumber:M?parseInt(M):void 0}),r()}catch(Me){_e(Me instanceof Error?Me.message:"Kayt baarsz oldu")}finally{Oe(!1)}};return e.jsx("div",{style:{position:"fixed",top:0,left:0,right:0,bottom:0,backgroundColor:"rgba(0, 0, 0, 0.5)",display:"flex",alignItems:"center",justifyContent:"center",zIndex:10001},onClick:r,children:e.jsxs("div",{className:"card",style:{maxWidth:"900px",width:"90%",maxHeight:"90vh",position:"relative",overflow:"hidden"},onClick:be=>be.stopPropagation(),children:[e.jsx("button",{onClick:r,style:{position:"absolute",top:"16px",right:"16px",background:"none",border:"none",fontSize:"24px",cursor:"pointer",color:"#64748b"},children:""}),e.jsx("h2",{style:{marginTop:0},children:t?"Kitap Dzenle":"Yeni Kitap Ekle"}),e.jsxs("form",{onSubmit:ve,style:{display:"flex",flexDirection:"column",gap:"16px",maxHeight:"70vh",overflowY:"auto",paddingRight:"8px"},children:[e.jsxs("div",{style:{display:"grid",gridTemplateColumns:"repeat(auto-fit, minmax(250px, 1fr))",gap:"16px"},children:[e.jsxs("div",{children:[e.jsxs("label",{style:{display:"block",marginBottom:"4px",fontWeight:600,fontSize:"14px"},children:["Kitap Bal ",e.jsx("span",{style:{color:"#ef4444"},children:"*"})]}),e.jsx("input",{type:"text",value:i,onChange:be=>o(be.target.value),required:!0,style:{width:"100%",padding:"10px",borderRadius:"6px",border:"1px solid #d1d5db",fontSize:"14px"},placeholder:"Kitap baln girin"})]}),e.jsxs("div",{children:[e.jsxs("label",{style:{display:"block",marginBottom:"4px",fontWeight:600,fontSize:"14px"},children:["Yazar ",e.jsx("span",{style:{color:"#ef4444"},children:"*"})]}),e.jsx("input",{type:"text",value:l,onChange:be=>s(be.target.value),required:!0,style:{width:"100%",padding:"10px",borderRadius:"6px",border:"1px solid #d1d5db",fontSize:"14px"},placeholder:"Yazar adn girin"})]}),e.jsxs("div",{children:[e.jsx("label",{style:{display:"block",marginBottom:"4px",fontWeight:600,fontSize:"14px"},children:"Kategori"}),e.jsx("select",{value:u,onChange:be=>d(be.target.value),style:{width:"100%",padding:"10px",borderRadius:"6px",border:"1px solid #d1d5db",fontSize:"14px"},children:xt.map(be=>e.jsx("option",{value:be,children:be},be))})]}),e.jsxs("div",{children:[e.jsx("label",{style:{display:"block",marginBottom:"4px",fontWeight:600,fontSize:"14px"},children:"Adet"}),e.jsx("input",{type:"number",value:h,onChange:be=>se(parseInt(be.target.value)||1),min:"1",style:{width:"100%",padding:"10px",borderRadius:"6px",border:"1px solid #d1d5db",fontSize:"14px"}})]}),e.jsxs("div",{style:{gridColumn:"1 / -1",backgroundColor:"#f1f5f9",borderRadius:"8px",padding:"12px",border:"1px solid #e2e8f0"},children:[e.jsx("label",{style:{display:"block",marginBottom:"8px",fontWeight:600,fontSize:"14px"},children:"Kitap Durumu Dalm"}),e.jsxs("div",{style:{display:"grid",gridTemplateColumns:"repeat(auto-fit, minmax(140px, 1fr))",gap:"12px"},children:[e.jsxs("div",{children:[e.jsx("span",{style:{display:"block",color:"#0f172a",fontSize:"13px",fontWeight:600,marginBottom:"4px"},children:"Salam"}),e.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"8px"},children:[e.jsx("button",{type:"button",onClick:()=>fe("healthy",-1),disabled:De<=0,style:{width:"32px",height:"32px",borderRadius:"50%",border:"1px solid #cbd5f5",background:De>0?"#ffffff":"#e2e8f0",cursor:De>0?"pointer":"not-allowed",display:"flex",alignItems:"center",justifyContent:"center",padding:0,fontSize:"18px",fontWeight:600},children:""}),e.jsx("span",{style:{minWidth:"40px",textAlign:"center",fontWeight:600},children:De}),e.jsx("button",{type:"button",onClick:()=>fe("healthy",1),disabled:P>=h&&ft===0&&ze===0,style:{width:"32px",height:"32px",borderRadius:"50%",border:"1px solid #cbd5f5",background:P<h||ft>0||ze>0?"#ffffff":"#e2e8f0",cursor:P<h||ft>0||ze>0?"pointer":"not-allowed",display:"flex",alignItems:"center",justifyContent:"center",padding:0,fontSize:"18px",fontWeight:600},children:"+"})]})]}),e.jsxs("div",{children:[e.jsx("span",{style:{display:"block",color:"#b45309",fontSize:"13px",fontWeight:600,marginBottom:"4px"},children:"Hasarl"}),e.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"8px"},children:[e.jsx("button",{type:"button",onClick:()=>fe("damaged",-1),disabled:ft<=0,style:{width:"32px",height:"32px",borderRadius:"50%",border:"1px solid #fcd34d",background:ft>0?"#ffffff":"#fefce8",cursor:ft>0?"pointer":"not-allowed",display:"flex",alignItems:"center",justifyContent:"center",padding:0,fontSize:"18px",fontWeight:600},children:""}),e.jsx("span",{style:{minWidth:"40px",textAlign:"center",fontWeight:600},children:ft}),e.jsx("button",{type:"button",onClick:()=>fe("damaged",1),disabled:De<=0,style:{width:"32px",height:"32px",borderRadius:"50%",border:"1px solid #fcd34d",background:De>0?"#ffffff":"#fefce8",cursor:De>0?"pointer":"not-allowed",display:"flex",alignItems:"center",justifyContent:"center",padding:0,fontSize:"18px",fontWeight:600},children:"+"})]})]}),e.jsxs("div",{children:[e.jsx("span",{style:{display:"block",color:"#dc2626",fontSize:"13px",fontWeight:600,marginBottom:"4px"},children:"Kayp"}),e.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"8px"},children:[e.jsx("button",{type:"button",onClick:()=>fe("lost",-1),disabled:ze<=0,style:{width:"32px",height:"32px",borderRadius:"50%",border:"1px solid #fecaca",background:ze>0?"#ffffff":"#fef2f2",cursor:ze>0?"pointer":"not-allowed",display:"flex",alignItems:"center",justifyContent:"center",padding:0,fontSize:"18px",fontWeight:600},children:""}),e.jsx("span",{style:{minWidth:"40px",textAlign:"center",fontWeight:600},children:ze}),e.jsx("button",{type:"button",onClick:()=>fe("lost",1),disabled:De<=0,style:{width:"32px",height:"32px",borderRadius:"50%",border:"1px solid #fecaca",background:De>0?"#ffffff":"#fef2f2",cursor:De>0?"pointer":"not-allowed",display:"flex",alignItems:"center",justifyContent:"center",padding:0,fontSize:"18px",fontWeight:600},children:"+"})]})]})]}),e.jsxs("p",{style:{margin:"8px 0 0 0",fontSize:"13px",color:"#475569"},children:["Toplam: ",e.jsx("strong",{children:P})," / ",h]}),e.jsx("p",{style:{margin:"4px 0 0 0",fontSize:"12px",color:"#94a3b8"},children:"Hasarl veya kayp says artarken salam kitap says otomatik der."})]}),e.jsxs("div",{children:[e.jsx("label",{style:{display:"block",marginBottom:"4px",fontWeight:600,fontSize:"14px"},children:"Raf Numaras"}),e.jsx("input",{type:"text",value:m,onChange:be=>I(be.target.value),style:{width:"100%",padding:"10px",borderRadius:"6px",border:"1px solid #d1d5db",fontSize:"14px"},placeholder:"rn: Raf-ROM-A01-01"})]}),e.jsxs("div",{children:[e.jsx("label",{style:{display:"block",marginBottom:"4px",fontWeight:600,fontSize:"14px"},children:"Yaynevi"}),e.jsx("input",{type:"text",value:F,onChange:be=>y(be.target.value),style:{width:"100%",padding:"10px",borderRadius:"6px",border:"1px solid #d1d5db",fontSize:"14px"},placeholder:"Yaynevi adn girin"})]}),e.jsxs("div",{children:[e.jsx("label",{style:{display:"block",marginBottom:"4px",fontWeight:600,fontSize:"14px"},children:"Yayn Yl"}),e.jsx("input",{type:"number",value:D,onChange:be=>q(be.target.value),style:{width:"100%",padding:"10px",borderRadius:"6px",border:"1px solid #d1d5db",fontSize:"14px"},placeholder:"rn: 2020",min:"1800",max:"2024"})]}),e.jsxs("div",{children:[e.jsx("label",{style:{display:"block",marginBottom:"4px",fontWeight:600,fontSize:"14px"},children:"Sayfa Says"}),e.jsx("input",{type:"number",value:V,onChange:be=>ie(be.target.value),style:{width:"100%",padding:"10px",borderRadius:"6px",border:"1px solid #d1d5db",fontSize:"14px"},placeholder:"rn: 350",min:"1"})]}),e.jsxs("div",{children:[e.jsx("label",{style:{display:"block",marginBottom:"4px",fontWeight:600,fontSize:"14px"},children:"Kitap Numaras"}),e.jsx("input",{type:"number",value:M,onChange:be=>re(be.target.value),style:{width:"100%",padding:"10px",borderRadius:"6px",border:"1px solid #d1d5db",fontSize:"14px"},placeholder:"rn: 1234",min:"1"})]})]}),e.jsxs("div",{children:[e.jsx("label",{style:{display:"block",marginBottom:"4px",fontWeight:600,fontSize:"14px"},children:"zet"}),e.jsx("textarea",{value:f,onChange:be=>b(be.target.value),placeholder:"Kitap zetini girin (opsiyonel)",rows:4,style:{width:"100%",padding:"10px",borderRadius:"6px",border:"1px solid #d1d5db",resize:"vertical",fontSize:"14px"}})]}),Re&&e.jsx("p",{style:{color:"#ef4444",margin:0},children:Re}),e.jsxs("div",{style:{display:"flex",gap:"12px",justifyContent:"flex-end"},children:[e.jsx("button",{type:"button",onClick:r,style:{padding:"10px 20px"},children:"ptal"}),e.jsx("button",{type:"submit",className:"primary",disabled:ce,style:{padding:"10px 20px"},children:ce?"Kaydediliyor...":t?"Gncelle":"Ekle"})]})]})]})})},gr=({books:t,students:n=[],loans:r=[],personelName:i="",onRefresh:o,onSearch:l,onAdd:s,onDelete:u,onBulkDeleteSuccess:d,canEdit:h=!1,resetSearch:C=!1,filterVariant:k="full"})=>{const[S,B]=a.useState(null),[m,I]=a.useState(!1),[F,y]=a.useState(null),[f,b]=a.useState(""),[D,q]=a.useState(""),[V,ie]=a.useState(""),[M,re]=a.useState(""),[ce,Oe]=a.useState(""),[Re,_e]=a.useState(""),[xt,De]=a.useState("title-asc"),[ft,ze]=a.useState(1),[P,se]=a.useState(20),[fe,ve]=a.useState(null),[Pe,bt]=a.useState(null),[lt,be]=a.useState(!1),[Me,et]=a.useState(null),[Qe,Z]=a.useState("asc"),[$e,Xe]=a.useState(!1),[Ge,mt]=a.useState(new Set),[kt,ot]=a.useState(!1),[We,st]=a.useState(null),[Bt,Ee]=a.useState(new Map),[Et,c]=a.useState(""),[N,oe]=a.useState(!1),[Ae,Be]=a.useState(!1),[ye,Ve]=a.useState(null),[jt,zt]=a.useState(!1),[nn,Te]=a.useState(!1),[wt,_]=a.useState(null),ne=k==="search-only",ue=k==="compact"||ne,He=async(T,H=0)=>{var Ue,Nt;let A=0;const Ne=[],he=[],it=Array.from(T);for(const rt of it)try{u&&await u(rt,{silent:!0,skipConfirm:!0,deferRefresh:!0,suppressErrorInfo:!0});const yt=t.find(Dt=>Dt.id===rt);if(yt){const Dt=(yt.totalQuantity??0)>0?yt.totalQuantity:(yt.quantity??0)+(Array.isArray(yt.loans)?yt.loans.length:0);Ne.push(`${yt.title} - ${yt.author} (Toplam Adet: ${Dt})`)}A++}catch(yt){const Dt=yt instanceof Error?yt.message:(Nt=(Ue=yt==null?void 0:yt.response)==null?void 0:Ue.data)==null?void 0:Nt.message,Zt=t.find(Ut=>Ut.id===rt);he.push(Zt?`${Zt.title} - ${Zt.author}: ${Dt||"Silinemedi"}`:`${rt}: ${Dt||"Silinemedi"}`)}if(he.length>0&&A===0)_({title:"Hata",message:he.join(`
`),type:"error",icon:""}),Te(!0);else if(A>0){let rt="";A===1?rt=`${Ne[0]} silindi.`:rt=`${A} kitap silindi:
${Ne.map(yt=>` ${yt}`).join(`
`)}`,H>0&&(rt+=`

Toplam ${H} dnte kitap silindi.`),he.length>0&&(rt+=`

Hata alnan kitaplar:
${he.join(`
`)}`),_({title:"Baarl",message:rt,type:"success",icon:""}),Te(!0),Xe(!1),mt(new Set),o()}};a.useEffect(()=>{C&&(b(""),q(""),ie(""),re(""),Oe(""),_e(""),De("none"),Xe(!1),mt(new Set))},[C]);const Se=a.useMemo(()=>{const T=new Map,H=A=>A?A.toLowerCase().trim().replace(/\s+/g," "):"";return t.forEach(A=>{if(!A.title||!A.author)return;const Ne=H(A.title),he=H(A.author),it=`${Ne}_${he}`;if(T.has(it)){const Ue=T.get(it),Nt=[...Ue.loans||[],...A.loans||[]],rt=(Ue.quantity||0)+(A.quantity||0),yt=rt+Nt.length;T.set(it,{...Ue,quantity:rt,totalQuantity:yt,loans:Nt,pageCount:Ue.pageCount&&A.pageCount?Math.max(Ue.pageCount,A.pageCount):Ue.pageCount||A.pageCount||void 0,shelf:Ue.shelf||A.shelf,publisher:Ue.publisher||A.publisher,summary:Ue.summary||A.summary,bookNumber:Ue.bookNumber||A.bookNumber,year:Ue.year||A.year,id:Ue.id})}else T.set(it,{...A})}),Array.from(T.values())},[t]),gt=a.useMemo(()=>{const T=new Set(Se.map(H=>H.category).filter(Boolean));return Array.from(T).sort()},[Se]),de=a.useMemo(()=>{const T=new Set(Se.map(H=>H.author).filter(Boolean));return Array.from(T).sort()},[Se]),Ce=a.useMemo(()=>{let T=[...Se];return f&&f.trim()&&(T=T.filter(H=>{var Ue;const A=((Ue=H.loans)==null?void 0:Ue.length)??0,Ne=H.healthyCount??0,he=H.damagedCount??0,it=H.lostCount??0;return G(H.title,f)||G(H.author,f)||G(H.category,f)||G(H.shelf,f)||G(H.publisher,f)||G(H.summary,f)||G(H.bookNumber,f)||G(H.year,f)||G(H.pageCount,f)||G(H.quantity,f)||G(H.totalQuantity,f)||G(A,f)||G(Ne,f)||G(he,f)||G(it,f)||f.toLowerCase().includes("salam")&&Ne>0||f.toLowerCase().includes("hasarl")&&he>0||f.toLowerCase().includes("hasar")&&he>0||f.toLowerCase().includes("kayp")&&it>0})),!ue&&D&&(T=T.filter(H=>H.category===D)),!ue&&V&&(T=T.filter(H=>H.author===V)),!ue&&M&&(M==="recent"?T=T.filter(H=>H.year&&H.year>=2020):M==="old"?T=T.filter(H=>H.year&&H.year<2e3):M==="2000-2010"?T=T.filter(H=>H.year&&H.year>=2e3&&H.year<=2010):M==="2010-2020"&&(T=T.filter(H=>H.year&&H.year>=2010&&H.year<=2020))),ce&&(ce==="available"?T=T.filter(H=>H.quantity>0):ce==="out-of-stock"?T=T.filter(H=>H.quantity===0):ce==="low-stock"?T=T.filter(H=>H.quantity>0&&H.quantity<=3):ce==="medium-stock"&&(T=T.filter(H=>H.quantity>=4&&H.quantity<=10))),Re&&(Re==="healthy"?T=T.filter(H=>(H.healthyCount??0)>0):Re==="damaged"?T=T.filter(H=>(H.damagedCount??0)>0):Re==="lost"?T=T.filter(H=>(H.lostCount??0)>0):Re==="healthy-only"&&(T=T.filter(H=>(H.healthyCount??0)>0&&(H.damagedCount??0)===0&&(H.lostCount??0)===0))),xt!=="none"&&(T=[...T].sort((H,A)=>{switch(xt){case"title-asc":return H.title.localeCompare(A.title,"tr");case"title-desc":return A.title.localeCompare(H.title,"tr");case"author-asc":return H.author.localeCompare(A.author,"tr");case"author-desc":return A.author.localeCompare(H.author,"tr");case"year-asc":return(H.year||0)-(A.year||0);case"year-desc":return(A.year||0)-(H.year||0);case"quantity-asc":return H.quantity-A.quantity;case"quantity-desc":return A.quantity-H.quantity;default:return 0}})),Me?T=[...T].sort((H,A)=>{var he,it;let Ne=0;switch(Me){case"title":Ne=(H.title||"").localeCompare(A.title||"","tr");break;case"author":Ne=(H.author||"").localeCompare(A.author||"","tr");break;case"category":Ne=(H.category||"").localeCompare(A.category||"","tr");break;case"year":Ne=(H.year||0)-(A.year||0);break;case"quantity":Ne=(H.quantity??0)-(A.quantity??0);break;case"loans":Ne=(((he=H.loans)==null?void 0:he.length)??0)-(((it=A.loans)==null?void 0:it.length)??0);break;default:Ne=0}return Ne===0&&Me!=="title"&&(Ne=(H.title||"").localeCompare(A.title||"","tr")),Qe==="asc"?Ne:-Ne}):xt==="none"&&(T=[...T].sort((H,A)=>{const Ne=(H.title||"").localeCompare(A.title||"","tr");return Ne!==0?Ne:(H.id||"").localeCompare(A.id||"","tr")})),T},[Se,ue,f,D,V,M,ce,Re,xt,Me,Qe]),me=Math.max(1,Math.ceil(Ce.length/P)),Ct=Math.min(ft,me),tt=(Ct-1)*P,Lt=Ce.slice(tt,tt+P);a.useEffect(()=>{ft>me&&me>0&&ze(1)},[f,D,V,M,ce,Re,xt,Me,Qe]);const Ht=T=>{b(T)},Ft=T=>{B(T)},nt=()=>{const T=[];if(me<=7)for(let A=1;A<=me;A++)T.push(A);else if(T.push(1),Ct<=4){for(let A=2;A<=5;A++)T.push(A);T.push("..."),T.push(me)}else if(Ct>=me-3){T.push("...");for(let A=me-4;A<=me;A++)T.push(A)}else{T.push("...");for(let A=Ct-1;A<=Ct+1;A++)T.push(A);T.push("..."),T.push(me)}return T},At=()=>{const T=nt();return e.jsxs("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center",marginTop:"16px",flexWrap:"wrap",gap:"8px"},children:[e.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"4px",flexWrap:"wrap"},children:[e.jsx("button",{onClick:()=>ze(Math.max(1,Ct-1)),disabled:Ct===1,style:{padding:"8px 12px",borderRadius:"6px",border:"1px solid #e5e7eb",background:Ct===1?"#f1f5f9":"#fff",cursor:Ct===1?"not-allowed":"pointer",color:Ct===1?"#94a3b8":"#475569",fontWeight:500,fontSize:"14px"},children:"nceki"}),T.map((H,A)=>{if(H==="...")return e.jsx("span",{style:{padding:"0 8px",color:"#94a3b8",fontSize:"14px"},children:"..."},`ellipsis-${A}`);const Ne=H,he=Ne===Ct;return e.jsx("span",{onClick:()=>ze(Ne),style:{padding:"0 8px",color:he?"#1d4ed8":"#475569",cursor:"pointer",fontWeight:he?700:400,fontSize:"14px",textDecoration:he?"underline":"none",textUnderlineOffset:"2px"},children:Ne},Ne)}),e.jsx("button",{onClick:()=>ze(Math.min(me,Ct+1)),disabled:Ct===me,style:{padding:"8px 12px",borderRadius:"6px",border:"1px solid #e5e7eb",background:Ct===me?"#f1f5f9":"#fff",cursor:Ct===me?"not-allowed":"pointer",color:Ct===me?"#94a3b8":"#475569",fontWeight:500,fontSize:"14px"},children:"Sonraki"}),e.jsx("input",{type:"number",value:Et,onChange:H=>c(H.target.value),onKeyDown:H=>{if(H.key==="Enter"){const A=parseInt(Et,10);A>=1&&A<=me?(ze(A),c("")):(alert(`Ltfen 1 ile ${me} arasnda bir say girin.`),c(""))}},placeholder:Ct.toString(),min:1,max:me,style:{width:"60px",padding:"6px 8px",borderRadius:"6px",border:"1px solid #e5e7eb",fontSize:"14px",textAlign:"center",marginLeft:"4px"}})]}),e.jsx("div",{style:{display:"flex",alignItems:"center",gap:"8px"},children:e.jsx("span",{style:{fontSize:"14px",color:"#64748b"},children:Ce.length>0?`${tt+1}-${Math.min(tt+P,Ce.length)} / ${Ce.length}`:"0"})})]})};return a.useEffect(()=>{if(N){const T=H=>{const A=H.target;!A.closest("[data-info-popover-catalog]")&&!A.closest("[data-info-button-catalog]")&&oe(!1)};return document.addEventListener("mousedown",T),()=>{document.removeEventListener("mousedown",T)}}},[N]),e.jsxs(e.Fragment,{children:[e.jsxs("div",{className:"card",style:{position:"relative"},children:[!ne&&e.jsxs("div",{style:{position:"absolute",top:"16px",right:"16px",zIndex:100},children:[e.jsx("button",{"data-info-button-catalog":!0,onClick:()=>oe(!N),style:{width:"32px",height:"32px",borderRadius:"50%",border:"2px solid",borderColor:N?"#3b82f6":"#fbbf24",background:N?"#eff6ff":"#fef9e7",cursor:"pointer",display:"flex",alignItems:"center",justifyContent:"center",fontSize:"20px",color:N?"#1d4ed8":"#d97706",transition:"all 0.2s",fontWeight:700,boxShadow:"0 2px 4px rgba(0, 0, 0, 0.1)",position:"relative",padding:0},onMouseEnter:T=>{N||(T.currentTarget.style.backgroundColor="#fef3c7",T.currentTarget.style.borderColor="#f59e0b")},onMouseLeave:T=>{N||(T.currentTarget.style.backgroundColor="#fef9e7",T.currentTarget.style.borderColor="#fbbf24")},children:e.jsxs("svg",{width:"18",height:"18",viewBox:"0 0 24 24",fill:"none",stroke:N?"#1d4ed8":"#d97706",strokeWidth:"2.5",strokeLinecap:"round",strokeLinejoin:"round",style:{display:"block"},children:[e.jsx("path",{d:"M21 15a2 2 0 0 1-2 2H7l-4 4V5a2 2 0 0 1 2-2h14a2 2 0 0 1 2 2z"}),e.jsx("line",{x1:"9",y1:"10",x2:"15",y2:"10"}),e.jsx("line",{x1:"9",y1:"14",x2:"15",y2:"14"})]})}),N&&e.jsxs("div",{"data-info-popover-catalog":!0,style:{position:"absolute",top:"40px",right:"0",width:"400px",maxWidth:"90vw",backgroundColor:"#fef9e7",borderRadius:"12px",border:"1px solid #fbbf24",boxShadow:"0 10px 25px rgba(0, 0, 0, 0.15)",padding:"20px",zIndex:1001,fontSize:"14px"},onClick:T=>T.stopPropagation(),children:[e.jsx("div",{style:{position:"absolute",top:"-8px",right:"20px",width:"16px",height:"16px",backgroundColor:"#fef9e7",borderLeft:"1px solid #fbbf24",borderTop:"1px solid #fbbf24",transform:"rotate(45deg)"}}),e.jsx("div",{style:{display:"flex",flexDirection:"column",gap:"16px"},children:e.jsxs("div",{children:[e.jsxs("h3",{style:{marginTop:0,marginBottom:"10px",fontSize:"16px",fontWeight:600,color:"#1e293b",display:"flex",alignItems:"center",gap:"6px"},children:[e.jsxs("svg",{width:"18",height:"18",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:[e.jsx("path",{d:"M4 19.5A2.5 2.5 0 0 1 6.5 17H20"}),e.jsx("path",{d:"M6.5 2H20v20H6.5A2.5 2.5 0 0 1 4 19.5v-15A2.5 2.5 0 0 1 6.5 2z"})]}),"Kitap Katalou Kullanm"]}),e.jsxs("div",{style:{display:"flex",flexDirection:"column",gap:"8px",fontSize:"13px",color:"#475569",lineHeight:"1.5"},children:[e.jsxs("p",{style:{margin:0},children:[e.jsx("strong",{style:{color:"#1e293b"},children:"Arama:"})," Kitap ad, yazar, kategori veya knye bilgilerine gre arama yapabilirsiniz. Ayn ad ve yazara sahip kitaplar otomatik birletirilir."]}),e.jsxs("p",{style:{margin:0},children:[e.jsx("strong",{style:{color:"#1e293b"},children:"Filtreleme:"})," Kategori, yazar, yl ve adet durumuna gre filtreleme yapabilirsiniz."]}),e.jsxs("p",{style:{margin:0},children:[e.jsx("strong",{style:{color:"#1e293b"},children:"Sralama:"})," Stun balklarna tklayarak kitap ad, yazar, yl veya adet saysna gre sralama yapabilirsiniz."]}),e.jsxs("p",{style:{margin:0},children:[e.jsx("strong",{style:{color:"#1e293b"},children:"Kitap Ekleme:"}),' "Yeni Kitap" butonu ile yeni kitap ekleyebilirsiniz. Ayn ad ve yazara sahip kitaplar otomatik birletirilir.']}),e.jsxs("p",{style:{margin:0},children:[e.jsx("strong",{style:{color:"#1e293b"},children:"Kitap Dzenleme:"})," Kitap satrna tklayarak detaylar grntleyebilir ve dzenleyebilirsiniz."]}),e.jsxs("p",{style:{margin:0},children:[e.jsx("strong",{style:{color:"#1e293b"},children:"oklu lem:"}),' "Se" butonu ile birden fazla kitap seip toplu dzenleme yapabilirsiniz.']}),e.jsxs("p",{style:{margin:"8px 0 0 0"},children:[e.jsx("strong",{style:{color:"#1e293b"},children:"Adet Kontrol:"})," Adet says otomatik gncellenir. Kitap dn verildiinde azalr, teslim edildiinde artar."]})]})]})})]})]}),e.jsxs("div",{className:"toolbar",style:{display:"flex",flexDirection:"column",gap:"12px"},children:[e.jsx("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center",flexWrap:"wrap",gap:"12px"},children:e.jsx("h2",{style:{margin:0,color:"#1e293b",fontWeight:700},children:"Kitap Katalou"})}),ne?e.jsx("input",{placeholder:"Kitap, yazar, kategori veya knye bilgilerine gre ara...",value:f,onChange:T=>Ht(T.target.value),style:{width:"100%",padding:"10px",borderRadius:"6px",border:"1px solid #e5e7eb"}}):e.jsxs("div",{style:{display:"flex",gap:"8px",flexWrap:"wrap",alignItems:"center",width:"100%"},children:[e.jsx("input",{placeholder:"Kitap, yazar, kategori veya knye bilgilerine gre ara...",value:f,onChange:T=>Ht(T.target.value),style:{flex:1,minWidth:"200px",padding:"10px"}}),h&&s&&e.jsx("button",{className:"primary",onClick:()=>I(!0),children:"+ Yeni Kitap"}),h&&e.jsx("button",{onClick:()=>{Xe(!$e),$e&&mt(new Set)},style:{padding:"10px 20px",borderRadius:"8px",border:$e?"2px solid #3b82f6":"1px solid #e5e7eb",background:$e?"#eff6ff":"#fff",color:$e?"#1d4ed8":"#374151",cursor:"pointer",fontWeight:600,fontSize:"14px"},children:$e?" Seimi ptal":" Se"})]}),$e&&Ge.size>0&&h&&e.jsxs("div",{style:{display:"flex",gap:"8px",alignItems:"center",padding:"12px",backgroundColor:"#f0f9ff",borderRadius:"8px",border:"1px solid #bae6fd"},children:[e.jsxs("span",{style:{fontWeight:600,color:"#0369a1"},children:[Ge.size," kitap seildi"]}),s&&e.jsx("button",{onClick:()=>ot(!0),style:{padding:"8px 16px",borderRadius:"6px",border:"1px solid #3b82f6",background:"#3b82f6",color:"white",cursor:"pointer",fontWeight:600,fontSize:"14px"},children:"Seilenleri Dzenle"}),u&&e.jsx("button",{onClick:async()=>{if(Ge.size===0)return;const T=t.filter(Ne=>Ge.has(Ne.id)),H=await xe.get("/books/loans"),A=T.map(Ne=>{const he=H.filter(it=>it.bookId===Ne.id);return{id:Ne.id,name:`${Ne.title} - ${Ne.author}`,loans:he}}).filter(Ne=>Ne.loans.length>0);if(A.length>0){Ve({type:"books",items:A,selectedItems:new Set(Ge)}),Be(!0);return}await He(Ge)},style:{padding:"8px 16px",borderRadius:"6px",border:"1px solid #ef4444",background:"#ef4444",color:"white",cursor:"pointer",fontWeight:600,fontSize:"14px"},children:"Seilenleri Sil"})]}),ne?null:ue?e.jsxs("div",{style:{display:"flex",flexDirection:"column",gap:"8px",marginBottom:"4px"},children:[e.jsx("div",{style:{display:"grid",gridTemplateColumns:"repeat(auto-fit, minmax(160px, 1fr))",gap:"8px"},children:[{value:"",label:"Tm"},{value:"available",label:"Mevcut"},{value:"low-stock",label:"Az Adet (1-3)"},{value:"medium-stock",label:"Orta Adet (4-10)"},{value:"out-of-stock",label:"Tkenen"}].map(T=>e.jsx("button",{onClick:()=>Oe(T.value),style:{padding:"10px",borderRadius:"8px",border:ce===T.value?"2px solid #2563eb":"1px solid #e5e7eb",background:ce===T.value?"#eff6ff":"#fff",cursor:"pointer",fontWeight:700,color:ce===T.value?"#1d4ed8":"#475569",transition:"all 0.2s"},children:T.label},T.label))}),(f||ce)&&e.jsx("button",{onClick:()=>{b(""),Oe(""),l("")},style:{alignSelf:"flex-start",padding:"8px 16px",backgroundColor:"#ef4444",color:"white",border:"none",borderRadius:"6px",cursor:"pointer",fontSize:"13px",fontWeight:600},children:"Filtreleri Temizle"})]}):e.jsxs("div",{style:{display:"grid",gridTemplateColumns:"repeat(6, 1fr)",gap:"12px",alignItems:"end",padding:"12px",backgroundColor:"#f8fafc",borderRadius:"8px"},children:[e.jsxs("div",{style:{display:"flex",flexDirection:"column",gap:"4px"},children:[e.jsx("label",{style:{fontSize:"12px",fontWeight:600,color:"#64748b"},children:"Kategori"}),e.jsxs("select",{value:D,onChange:T=>q(T.target.value),style:{padding:"8px",borderRadius:"6px",border:"1px solid #e5e7eb",width:"100%"},children:[e.jsx("option",{value:"",children:"Tm"}),gt.map(T=>e.jsx("option",{value:T,children:T},T))]})]}),e.jsxs("div",{style:{display:"flex",flexDirection:"column",gap:"4px"},children:[e.jsx("label",{style:{fontSize:"12px",fontWeight:600,color:"#64748b"},children:"Yazar"}),e.jsxs("select",{value:V,onChange:T=>ie(T.target.value),style:{padding:"8px",borderRadius:"6px",border:"1px solid #e5e7eb",width:"100%"},children:[e.jsx("option",{value:"",children:"Tm"}),de.map(T=>e.jsx("option",{value:T,children:T},T))]})]}),e.jsxs("div",{style:{display:"flex",flexDirection:"column",gap:"4px"},children:[e.jsx("label",{style:{fontSize:"12px",fontWeight:600,color:"#64748b"},children:"Yl"}),e.jsxs("select",{value:M,onChange:T=>re(T.target.value),style:{padding:"8px",borderRadius:"6px",border:"1px solid #e5e7eb",width:"100%"},children:[e.jsx("option",{value:"",children:"Tm"}),e.jsx("option",{value:"recent",children:"2020 ve sonras"}),e.jsx("option",{value:"2010-2020",children:"2010-2020"}),e.jsx("option",{value:"2000-2010",children:"2000-2010"}),e.jsx("option",{value:"old",children:"2000 ncesi"})]})]}),e.jsxs("div",{style:{display:"flex",flexDirection:"column",gap:"4px"},children:[e.jsx("label",{style:{fontSize:"12px",fontWeight:600,color:"#64748b"},children:"Adet Durumu"}),e.jsxs("select",{value:ce,onChange:T=>Oe(T.target.value),style:{padding:"8px",borderRadius:"6px",border:"1px solid #e5e7eb",width:"100%"},children:[e.jsx("option",{value:"",children:"Tm"}),e.jsx("option",{value:"available",children:"Mevcut"}),e.jsx("option",{value:"low-stock",children:"Az Adet (1-3)"}),e.jsx("option",{value:"medium-stock",children:"Orta Adet (4-10)"}),e.jsx("option",{value:"out-of-stock",children:"Adette Yok"})]})]}),e.jsxs("div",{style:{display:"flex",flexDirection:"column",gap:"4px"},children:[e.jsx("label",{style:{fontSize:"12px",fontWeight:600,color:"#64748b"},children:"Kitap Durumu"}),e.jsxs("select",{value:Re,onChange:T=>_e(T.target.value),style:{padding:"8px",borderRadius:"6px",border:"1px solid #e5e7eb",width:"100%"},children:[e.jsx("option",{value:"",children:"Tm"}),e.jsx("option",{value:"healthy-only",children:"Sadece Salam"}),e.jsx("option",{value:"healthy",children:"Salam"}),e.jsx("option",{value:"damaged",children:"Hasarl"}),e.jsx("option",{value:"lost",children:"Kayp"})]})]}),e.jsx("div",{children:(f||D||V||M||ce||Re)&&e.jsx("button",{onClick:()=>{b(""),q(""),ie(""),re(""),Oe(""),_e(""),De("none"),l("")},style:{padding:"8px 16px",backgroundColor:"#ef4444",color:"white",border:"none",borderRadius:"6px",cursor:"pointer",fontSize:"13px",fontWeight:600,width:"100%",whiteSpace:"nowrap"},children:"Filtreleri Temizle"})})]})]}),e.jsxs("div",{style:{marginBottom:"12px",fontSize:"14px",color:"#64748b"},children:["Toplam ",e.jsx("strong",{children:Ce.length})," kitap gsteriliyor"]}),e.jsxs("table",{className:"book-table",style:{width:"100%",tableLayout:"auto"},children:[e.jsx("thead",{children:e.jsxs("tr",{children:[e.jsxs("th",{onClick:()=>{Me==="title"?Z(Qe==="asc"?"desc":"asc"):(et("title"),Z("asc"))},style:{cursor:"pointer",userSelect:"none",minWidth:"200px",width:"25%",fontWeight:600,textTransform:"none"},children:["Balk ",Me==="title"&&(Qe==="asc"?"":"")]}),e.jsxs("th",{onClick:()=>{Me==="author"?Z(Qe==="asc"?"desc":"asc"):(et("author"),Z("asc"))},style:{cursor:"pointer",userSelect:"none",minWidth:"150px",width:"20%",fontWeight:600,textTransform:"none"},children:["Yazar ",Me==="author"&&(Qe==="asc"?"":"")]}),e.jsxs("th",{onClick:()=>{Me==="category"?Z(Qe==="asc"?"desc":"asc"):(et("category"),Z("asc"))},style:{cursor:"pointer",userSelect:"none",minWidth:"120px",width:"15%",fontWeight:600,textTransform:"none"},children:["Kategori ",Me==="category"&&(Qe==="asc"?"":"")]}),e.jsxs("th",{onClick:()=>{Me==="year"?Z(Qe==="asc"?"desc":"asc"):(et("year"),Z("asc"))},style:{cursor:"pointer",userSelect:"none",minWidth:"80px",width:"8%",textAlign:"center",fontWeight:600,textTransform:"none"},children:["Yl ",Me==="year"&&(Qe==="asc"?"":"")]}),e.jsxs("th",{onClick:()=>{Me==="quantity"?Z(Qe==="asc"?"desc":"asc"):(et("quantity"),Z("asc"))},style:{cursor:"pointer",userSelect:"none",minWidth:"100px",width:"12%",textAlign:"center",fontWeight:600,textTransform:"none"},children:["Adet ",Me==="quantity"&&(Qe==="asc"?"":"")]}),e.jsxs("th",{onClick:()=>{Me==="loans"?Z(Qe==="asc"?"desc":"asc"):(et("loans"),Z("asc"))},style:{cursor:"pointer",userSelect:"none",minWidth:"100px",width:"12%",textAlign:"center",fontWeight:600,textTransform:"none"},children:["dn ",Me==="loans"&&(Qe==="asc"?"":"")]}),$e&&h&&e.jsx("th",{style:{width:"60px",textAlign:"center",fontWeight:600,textTransform:"none"},children:e.jsx("div",{onClick:()=>{if(Ge.size===Lt.length&&Lt.length>0)mt(new Set);else{const T=new Set(Lt.map(H=>H.id||"").filter(Boolean));mt(T)}},style:{width:"24px",height:"24px",borderRadius:"50%",border:Ge.size===Lt.length&&Lt.length>0?"2px solid #3b82f6":"2px solid #cbd5e1",background:Ge.size===Lt.length&&Lt.length>0?"#3b82f6":"white",cursor:"pointer",display:"inline-flex",alignItems:"center",justifyContent:"center",transition:"all 0.2s",margin:"0 auto"},children:Ge.size===Lt.length&&Lt.length>0&&e.jsx("span",{style:{color:"white",fontSize:"14px",fontWeight:"bold"},children:""})})})]})}),e.jsx("tbody",{children:Lt.map(T=>e.jsxs("tr",{onClick:()=>{$e||Ft(T)},style:{cursor:$e?"default":"pointer"},onMouseEnter:H=>{$e||(H.currentTarget.style.backgroundColor="#f0f9ff")},onMouseLeave:H=>{$e||(H.currentTarget.style.backgroundColor="transparent")},children:[e.jsx("td",{style:{wordBreak:"break-word"},children:e.jsx("strong",{children:T.title})}),e.jsx("td",{style:{wordBreak:"break-word"},children:T.author}),e.jsx("td",{children:e.jsx("span",{style:{backgroundColor:"#e0e7ff",color:"#4338ca",padding:"4px 10px",borderRadius:"6px",fontSize:"12px",fontWeight:500,display:"inline-block",whiteSpace:"nowrap"},children:T.category})}),e.jsx("td",{style:{color:"#64748b",textAlign:"center"},children:T.year||""}),e.jsx("td",{style:{textAlign:"center"},children:e.jsxs("span",{style:{backgroundColor:T.quantity<=3?"#fee2e2":T.quantity<=6?"#fef3c7":"#d1fae5",color:T.quantity<=3?"#dc2626":T.quantity<=6?"#d97706":"#059669",padding:"4px 8px",borderRadius:"12px",fontSize:"12px",fontWeight:600,display:"inline-block"},children:[T.quantity," adet"]})}),e.jsx("td",{style:{textAlign:"center"},children:(()=>{const H=T.loans.length;let A="#10b981";return H>0&&H<=3?A="#dc2626":H>3&&H<=6?A="#d97706":H>6&&(A="#ef4444"),e.jsx("span",{style:{color:A,fontWeight:600,fontSize:"14px"},children:H})})()}),$e&&h&&e.jsx("td",{onClick:H=>H.stopPropagation(),style:{textAlign:"center"},children:e.jsx("div",{onClick:H=>{H.stopPropagation();const A=new Set(Ge);Ge.has(T.id||"")?A.delete(T.id||""):A.add(T.id||""),mt(A)},style:{width:"24px",height:"24px",borderRadius:"50%",border:Ge.has(T.id||"")?"2px solid #3b82f6":"2px solid #cbd5e1",background:Ge.has(T.id||"")?"#3b82f6":"white",cursor:"pointer",display:"inline-flex",alignItems:"center",justifyContent:"center",transition:"all 0.2s"},children:Ge.has(T.id||"")&&e.jsx("span",{style:{color:"white",fontSize:"14px",fontWeight:"bold"},children:""})})})]},T.id))})]}),Ce.length>0&&At(),Ce.length===0&&e.jsx("p",{style:{padding:"20px",textAlign:"center",color:"#64748b"},children:f||D||M||ce||Re?"Arama kriterlerinize uygun kitap bulunamad.":"Henz kitap bulunmuyor."})]}),S&&_t.createPortal(e.jsx(ao,{book:S,students:n,loans:r,books:t,personelName:i,onClose:()=>B(null),onRefresh:o,onEdit:s?T=>{y(T),B(null)}:void 0}),document.body),m&&s&&_t.createPortal(e.jsx(Cu,{book:null,onSave:async T=>{await s(T),I(!1),o()},onClose:()=>I(!1)}),document.body),F&&s&&_t.createPortal(e.jsx(Cu,{book:F,onSave:async T=>{await s(T),y(null),o()},onClose:()=>y(null)}),document.body),kt&&s&&_t.createPortal(e.jsx("div",{style:{position:"fixed",top:0,left:0,right:0,bottom:0,backgroundColor:"rgba(0, 0, 0, 0.5)",display:"flex",alignItems:"center",justifyContent:"center",zIndex:10001},onClick:()=>{ot(!1),st(null),Ee(new Map)},children:e.jsxs("div",{className:"card",style:{maxWidth:"900px",width:"90%",maxHeight:"90vh",overflowY:"auto",overflowX:"hidden",position:"relative"},onClick:T=>T.stopPropagation(),children:[e.jsxs("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center",marginBottom:"24px"},children:[e.jsx("h2",{style:{margin:0},children:"oklu Kitap Dzenleme"}),e.jsx("button",{onClick:()=>{ot(!1),st(null),Ee(new Map)},style:{background:"none",border:"none",fontSize:"24px",cursor:"pointer",color:"#64748b"},children:""})]}),We?e.jsxs("div",{children:[e.jsxs("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center",marginBottom:"16px"},children:[e.jsxs("div",{children:[e.jsxs("strong",{style:{fontSize:"16px"},children:[We==="title"?"Ad":We==="author"?"Yazar":We==="category"?"Kategori":We==="quantity"?"Adet":We==="shelf"?"Raf":We==="publisher"?"Yaynevi":We==="year"?"Yayn Yl":We==="pageCount"?"Sayfa Says":We==="bookNumber"?"Kitap Numaras":"zet"," Dzenleme"]}),e.jsxs("p",{style:{margin:"4px 0 0 0",color:"#64748b",fontSize:"14px"},children:[Ge.size," kitap seildi"]})]}),e.jsx("button",{onClick:()=>{st(null),Ee(new Map)},style:{padding:"6px 12px",borderRadius:"6px",border:"1px solid #e5e7eb",background:"#fff",cursor:"pointer",fontSize:"14px"},children:" Geri"})]}),e.jsx("div",{style:{maxHeight:"500px",overflowY:"auto",border:"1px solid #e5e7eb",borderRadius:"8px",padding:"12px"},children:Se.filter(T=>Ge.has(T.id||"")).map(T=>{var he,it,Ue,Nt;const H=T.id||"",A=Bt.get(H)||"",Ne=We==="title"?T.title:We==="author"?T.author:We==="category"?T.category:We==="quantity"?(he=T.totalQuantity)==null?void 0:he.toString():We==="shelf"?T.shelf:We==="publisher"?T.publisher:We==="year"?(it=T.year)==null?void 0:it.toString():We==="pageCount"?(Ue=T.pageCount)==null?void 0:Ue.toString():We==="bookNumber"?(Nt=T.bookNumber)==null?void 0:Nt.toString():We==="summary"?T.summary:"";return e.jsxs("div",{style:{padding:"16px",marginBottom:"12px",backgroundColor:"#f8fafc",borderRadius:"8px",border:"1px solid #e2e8f0"},children:[e.jsxs("div",{style:{marginBottom:"12px"},children:[e.jsx("div",{style:{fontWeight:600,marginBottom:"4px",fontSize:"15px"},children:T.title}),e.jsxs("div",{style:{fontSize:"12px",color:"#64748b"},children:[T.author,"  ",T.category]}),e.jsxs("div",{style:{fontSize:"11px",color:"#94a3b8",marginTop:"4px"},children:["Mevcut: ",Ne||""]})]}),e.jsx("div",{children:We==="category"?A==="__NEW__"?e.jsxs("div",{style:{display:"flex",gap:"8px",alignItems:"center"},children:[e.jsx("input",{type:"text",value:Bt.get(`${H}_new`)||"",onChange:rt=>{const yt=new Map(Bt);yt.set(`${H}_new`,rt.target.value),Ee(yt)},placeholder:"Yeni kategori adn girin",style:{flex:1,padding:"10px",borderRadius:"6px",border:"1px solid #d1d5db"}}),e.jsx("button",{onClick:()=>{const rt=new Map(Bt);rt.set(H,""),rt.delete(`${H}_new`),Ee(rt)},style:{padding:"10px 16px",borderRadius:"6px",border:"1px solid #e5e7eb",background:"#fff",cursor:"pointer",fontSize:"14px"},children:" Geri"})]}):e.jsxs("select",{value:A,onChange:rt=>{const yt=new Map(Bt);rt.target.value==="__NEW__"?yt.set(H,"__NEW__"):(yt.set(H,rt.target.value),yt.delete(`${H}_new`)),Ee(yt)},style:{width:"100%",padding:"10px",borderRadius:"6px",border:"1px solid #d1d5db"},children:[e.jsx("option",{value:"",children:"Kategori sein"}),["Roman","Tarih","Deneme","Psikoloji","Fantastik","Bilim Kurgu","Macera","Biyografi"].map(rt=>e.jsx("option",{value:rt,children:rt},rt)),e.jsx("option",{value:"__NEW__",children:" Mevcutlar haricinde ekle"})]}):We==="quantity"||We==="year"||We==="pageCount"||We==="bookNumber"?e.jsx("input",{type:"number",value:A,onChange:rt=>{const yt=new Map(Bt);yt.set(H,rt.target.value),Ee(yt)},placeholder:`Yeni ${We==="quantity"?"adet":We==="year"?"yayn yl":We==="pageCount"?"sayfa says":"kitap numaras"} deerini girin`,style:{width:"100%",padding:"10px",borderRadius:"6px",border:"1px solid #d1d5db"},min:We==="quantity"||We==="pageCount"||We==="bookNumber"?"1":"1800",max:We==="year"?"2024":void 0}):We==="summary"?e.jsx("textarea",{value:A,onChange:rt=>{const yt=new Map(Bt);yt.set(H,rt.target.value),Ee(yt)},placeholder:"Yeni zet deerini girin",rows:3,style:{width:"100%",padding:"10px",borderRadius:"6px",border:"1px solid #d1d5db",resize:"vertical"}}):e.jsx("input",{type:"text",value:A,onChange:rt=>{const yt=new Map(Bt);yt.set(H,rt.target.value),Ee(yt)},placeholder:`Yeni ${We==="title"?"ad":We==="author"?"yazar":We==="shelf"?"raf":"yaynevi"} deerini girin`,style:{width:"100%",padding:"10px",borderRadius:"6px",border:"1px solid #d1d5db"}})})]},T.id)})}),e.jsxs("div",{style:{display:"flex",gap:"12px",justifyContent:"flex-end",marginTop:"24px"},children:[e.jsx("button",{type:"button",onClick:()=>{ot(!1),st(null),Ee(new Map)},style:{padding:"10px 20px",borderRadius:"6px",border:"1px solid #e5e7eb",background:"#fff",cursor:"pointer",fontWeight:600},children:"ptal"}),e.jsx("button",{onClick:async()=>{const T=Se.filter(A=>Ge.has(A.id||"")),H=T.filter(A=>{const Ne=A.id||"",he=Bt.get(Ne);if(We==="category"&&he==="__NEW__"){const it=Bt.get(`${Ne}_new`);return!it||!it.trim()}return!he||We!=="summary"&&he!=="__NEW__"&&!he.trim()});if(H.length>0){alert(`Ltfen tm kitaplar iin deer girin. ${H.length} kitap iin deer eksik.`);return}if(window.confirm(`${Ge.size} kitabn ${We==="title"?"ismini":We==="author"?"yazarn":We==="category"?"kategorisini":We==="quantity"?"adetini":We==="shelf"?"rafn":We==="publisher"?"yaynevini":We==="year"?"yayn yln":We==="pageCount"?"sayfa saysn":We==="bookNumber"?"kitap numarasn":"zetini"} gncellemek istediinize emin misiniz?`)){for(const A of T){const Ne=A.id||"";let he=Bt.get(Ne)||"";We==="category"&&he==="__NEW__"&&(he=Bt.get(`${Ne}_new`)||"");const it={title:A.title,author:A.author,category:A.category,quantity:A.totalQuantity,id:A.id};We==="title"?it.title=he.trim():We==="author"?it.author=he.trim():We==="category"?it.category=he.trim():We==="quantity"?it.quantity=parseInt(he)||A.totalQuantity:We==="shelf"?it.shelf=he.trim():We==="publisher"?it.publisher=he.trim():We==="year"?it.year=he?parseInt(he):void 0:We==="pageCount"?it.pageCount=he?parseInt(he):void 0:We==="bookNumber"?it.bookNumber=he?parseInt(he):void 0:We==="summary"&&(it.summary=he.trim()),await s(it)}ot(!1),st(null),Ee(new Map),Xe(!1),mt(new Set),o()}},style:{padding:"10px 20px",borderRadius:"6px",border:"none",background:"#3b82f6",color:"white",cursor:"pointer",fontWeight:600},children:"Kayt ve Onay"})]})]}):e.jsxs("div",{children:[e.jsx("label",{style:{display:"block",marginBottom:"8px",fontWeight:600,fontSize:"14px"},children:"Dzenlenecek Alan Sein"}),e.jsxs("select",{value:"",onChange:T=>{st(T.target.value);const H=new Map;Se.filter(A=>Ge.has(A.id||"")).forEach(A=>{var he,it,Ue,Nt;const Ne=T.target.value==="title"?A.title:T.target.value==="author"?A.author:T.target.value==="category"?A.category:T.target.value==="quantity"?(he=A.totalQuantity)==null?void 0:he.toString():T.target.value==="shelf"?A.shelf:T.target.value==="publisher"?A.publisher:T.target.value==="year"?(it=A.year)==null?void 0:it.toString():T.target.value==="pageCount"?(Ue=A.pageCount)==null?void 0:Ue.toString():T.target.value==="bookNumber"?(Nt=A.bookNumber)==null?void 0:Nt.toString():T.target.value==="summary"?A.summary:"";H.set(A.id||"",Ne||"")}),Ee(H)},style:{width:"100%",padding:"10px",borderRadius:"6px",border:"1px solid #d1d5db",marginBottom:"24px"},children:[e.jsx("option",{value:"",children:"-- Seiniz --"}),e.jsx("option",{value:"title",children:"Ad"}),e.jsx("option",{value:"author",children:"Yazar"}),e.jsx("option",{value:"category",children:"Kategori"}),e.jsx("option",{value:"quantity",children:"Adet"}),e.jsx("option",{value:"shelf",children:"Raf"}),e.jsx("option",{value:"publisher",children:"Yaynevi"}),e.jsx("option",{value:"year",children:"Yayn Yl"}),e.jsx("option",{value:"pageCount",children:"Sayfa Says"}),e.jsx("option",{value:"bookNumber",children:"Kitap Numaras"}),e.jsx("option",{value:"summary",children:"zet"})]})]})]})}),document.body),e.jsx(ur,{isOpen:Ae,title:"Toplu Kitap Silme",icon:"",onConfirm:async()=>{if(!ye)return;Be(!1);const T=ye.selectedItems,H=ye.items.reduce((A,Ne)=>T.has(Ne.id)?A+Ne.loans.length:A,0);Ve(null),zt(!0);try{await He(T,H)}finally{zt(!1)}},onCancel:()=>{Be(!1),Ve(null)},confirmText:"Tamam, Sil",cancelText:"ptal",confirmButtonColor:"#ef4444",loading:jt,disabled:(ye==null?void 0:ye.selectedItems.size)===0,children:ye&&e.jsxs(e.Fragment,{children:[e.jsx("div",{style:{fontSize:"14px",color:"#475569",marginBottom:"16px",lineHeight:"1.6"},children:e.jsx("strong",{children:"Silinecekler ierisinde dn listesi olanlar var:"})}),e.jsx("div",{style:{maxHeight:"400px",overflowY:"auto",marginBottom:"16px"},children:ye.items.map((T,H)=>e.jsxs("div",{style:{padding:"12px",backgroundColor:"#fef3c7",borderRadius:"8px",border:"1px solid #fbbf24",marginBottom:"12px"},children:[e.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"12px",marginBottom:"8px"},children:[e.jsx("div",{onClick:()=>{const A=new Set(ye.selectedItems);ye.selectedItems.has(T.id)?A.delete(T.id):A.add(T.id),Ve({...ye,selectedItems:A})},style:{width:"24px",height:"24px",borderRadius:"4px",border:"2px solid #fbbf24",backgroundColor:ye.selectedItems.has(T.id)?"#f59e0b":"transparent",display:"flex",alignItems:"center",justifyContent:"center",cursor:"pointer",flexShrink:0,color:"white",fontWeight:"bold",fontSize:"14px"},children:ye.selectedItems.has(T.id)&&e.jsx("span",{children:""})}),e.jsx("div",{style:{flex:1},children:e.jsxs("div",{style:{fontSize:"14px",color:"#92400e",fontWeight:600},children:[T.name," - ",T.loans.length," dn"]})})]}),e.jsx("ul",{style:{margin:0,paddingLeft:"40px",fontSize:"13px",color:"#78350f"},children:T.loans.map((A,Ne)=>{const he=A.dueDate?new Date(A.dueDate).toLocaleDateString("tr-TR"):"-";return e.jsx("li",{style:{marginBottom:"4px"},children:e.jsxs(e.Fragment,{children:[e.jsx("strong",{children:A.borrower})," (Teslim: ",he,")"]})},Ne)})})]},H))}),e.jsxs("div",{style:{fontSize:"13px",color:"#64748b",padding:"12px",backgroundColor:"#f1f5f9",borderRadius:"8px"},children:[e.jsxs("strong",{children:[ye.items.reduce((T,H)=>T+H.loans.length,0)," dn kayd"]})," seilen kitaplarla birlikte silinecek."]})]})}),e.jsx(zi,{isOpen:nn,title:(wt==null?void 0:wt.title)||"Bilgi",icon:wt==null?void 0:wt.icon,type:(wt==null?void 0:wt.type)||"info",onClose:()=>{Te(!1),_(null)},children:e.jsx("div",{style:{fontSize:"14px",color:"#475569",lineHeight:"1.6"},children:wt==null?void 0:wt.message})})]})},Vg=({student:t,loans:n=[],books:r=[],maxPenaltyPoints:i=100,personelName:o="",onRefresh:l,onEdit:s,onBookClick:u,studentHistory:d,historyEntries:h=[],deriveLoanCounters:C,resolveLateCount:k,calculateLateBooksCount:S,loading:B=!1,showEditButton:m=!0})=>{const[I]=a.useState(`penalty-input-${t.name}-${t.surname}-${Date.now()}`),[F,y]=a.useState(!1),[f,b]=a.useState(!1),D=Z=>{const $e=Z.borrowed||0,Xe=Z.returned||0,Ge=Math.max($e-Xe,0);return{totalBorrowed:$e,totalReturned:Xe,activeLoans:Ge}},q=Z=>Z.late||0,V=(Z,$e,Xe)=>{const Ge=new Date;return Ge.setHours(0,0,0,0),$e.filter(mt=>{if(mt.borrower!==Z)return!1;const kt=new Date(mt.dueDate);return kt.setHours(0,0,0,0),kt<Ge&&Xe.some(ot=>ot.id===mt.bookId)}).length},ie=C||D,M=k||q,re=S||V,{totalBorrowed:ce,totalReturned:Oe,activeLoans:Re}=(d==null?void 0:d.activeLoans)!==void 0?ie(t,{activeOverride:d.activeLoans}):ie(t),_e=(d==null?void 0:d.lateReturns)!==void 0?d.lateReturns:M(t),De=(()=>{const Z=`${t.name} ${t.surname}`.trim();return re(Z,n,r)})(),ft=_e+De,ze=t.penaltyPoints||0;console.log("[StudentDetailCard] Penalty Check:",{studentName:`${t.name} ${t.surname}`,penaltyPoints:ze,maxPenaltyPoints:i,isPenalized:ze>=i,shouldShowWarning:ze>=i});const P=async()=>{const Z=document.getElementById(I);if(!Z)return;const $e=parseInt(Z.value)||0;if($e<0){alert("Ceza puan negatif olamaz.");return}try{y(!0),await xe.put(`/admin/students/${encodeURIComponent(t.name)}/penalty`,{penaltyPoints:$e,personelName:o||""}),l&&await l(),alert("Ceza puan baaryla gncellendi.")}catch(Xe){alert(Xe instanceof Error?Xe.message:"Ceza puan gncellenirken bir hata olutu")}finally{y(!1)}},se=(Z,$e)=>{if(!Z||!$e)return null;const Xe=new Date(Z),Ge=new Date($e);if(Number.isNaN(Xe.getTime())||Number.isNaN(Ge.getTime()))return null;const mt=Ge.getTime()-Xe.getTime();return mt<0?0:Math.max(1,Math.round(mt/(1e3*60*60*24)))},fe=a.useMemo(()=>h.filter(Z=>{var Xe;return(((Xe=Z.status)==null?void 0:Xe.toUpperCase())??"")==="RETURNED"&&(typeof Z.durationDays=="number"||Z.borrowedAt&&Z.returnedAt)}),[h]),ve=a.useMemo(()=>fe.map(Z=>Z.durationDays??se(Z.borrowedAt,Z.returnedAt)).filter(Z=>typeof Z=="number"&&!Number.isNaN(Z)),[fe]),Pe=a.useMemo(()=>{if(!ve.length)return null;const Z=ve.reduce(($e,Xe)=>$e+Xe,0);return Math.round(Z/ve.length)},[ve]),bt=a.useMemo(()=>{var Z;return((Z=d==null?void 0:d.books)==null?void 0:Z.reduce(($e,Xe)=>$e+(Xe.totalLateDays??0),0))??0},[d]),lt=a.useMemo(()=>{if(!h.length)return null;let Z=null;return h.forEach($e=>{const Xe=$e.returnedAt??$e.borrowedAt;if(!Xe)return;const Ge=new Date(Xe);Number.isNaN(Ge.getTime())||(!Z||Ge.getTime()>Z.getTime())&&(Z=Ge)}),Z},[h]),be=a.useMemo(()=>{if(!d)return null;const Z=d.totalBorrowed??0;if(!Z)return null;const $e=d.totalReturned??0;return Math.round($e/Z*100)},[d]),Me=a.useMemo(()=>{if(!d)return[];const Z=d.totalBorrowed??0,$e=d.totalReturned??0;return[{key:"avg",label:"Ortalama Okuma",value:Pe!==null?`${Pe} gn`:"",subLabel:ve.length>0?`${ve.length} tamamlanan kitap`:void 0,accent:"#0ea5e9"},{key:"completion",label:"Tamamlama Oran",value:be!==null?`%${be}`:"",subLabel:Z>0?`${$e}/${Z} kitap`:void 0,accent:"#10b981"},{key:"late-days",label:"Gecikme Gnleri",value:bt>0?`${bt} gn`:"Yok",subLabel:`${d.lateReturns??0} gecikme`,accent:"#ef4444"},{key:"last-activity",label:"Son Aktivite",value:lt?lt.toLocaleDateString("tr-TR"):"",subLabel:lt?lt.toLocaleTimeString("tr-TR",{hour:"2-digit",minute:"2-digit"}):void 0,accent:"#475569"}]},[d,Pe,be,bt,lt,ve.length]),et=`${t.name} ${t.surname}`.trim(),Qe=n.filter(Z=>Z.borrower===t.name||Z.borrower===et);return e.jsxs("div",{style:{display:"flex",flexDirection:"column",gap:"20px"},children:[e.jsxs("div",{style:{padding:"20px",backgroundColor:"#ffffff",borderRadius:"12px",border:"1px solid #e2e8f0",boxShadow:"0 1px 3px rgba(0, 0, 0, 0.05)"},children:[e.jsx("h3",{style:{marginTop:0,marginBottom:"16px",fontSize:"18px",fontWeight:600,color:"#1e293b"},children:"Temel Bilgiler"}),e.jsxs("div",{style:{display:"grid",gridTemplateColumns:"2fr 1.2fr 0.8fr 0.8fr",gap:"16px"},children:[e.jsxs("div",{children:[e.jsx("strong",{style:{color:"#64748b",fontSize:"14px",display:"block",marginBottom:"4px"},children:"Ad Soyad"}),e.jsx("p",{style:{margin:0,fontSize:"16px",fontWeight:600},children:et})]}),e.jsxs("div",{children:[e.jsx("strong",{style:{color:"#64748b",fontSize:"14px",display:"block",marginBottom:"4px"},children:"renci Numaras"}),e.jsx("p",{style:{margin:0,fontSize:"16px",fontWeight:600},children:t.studentNumber||"-"})]}),e.jsxs("div",{children:[e.jsx("strong",{style:{color:"#64748b",fontSize:"14px",display:"block",marginBottom:"4px"},children:"Snf"}),e.jsx("p",{style:{margin:0,fontSize:"16px",fontWeight:600},children:t.class||"-"})]}),e.jsxs("div",{children:[e.jsx("strong",{style:{color:"#64748b",fontSize:"14px",display:"block",marginBottom:"4px"},children:"ube"}),e.jsx("p",{style:{margin:0,fontSize:"16px",fontWeight:600},children:t.branch||"-"})]})]})]}),e.jsxs("div",{style:{padding:"20px",backgroundColor:"#ffffff",borderRadius:"12px",border:"1px solid #e2e8f0",boxShadow:"0 1px 3px rgba(0, 0, 0, 0.05)"},children:[e.jsxs("h3",{style:{marginTop:0,marginBottom:"20px",fontSize:"18px",fontWeight:600,color:"#1e293b",display:"flex",alignItems:"center",gap:"8px"},children:[e.jsxs("svg",{width:"20",height:"20",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:[e.jsx("line",{x1:"18",y1:"20",x2:"18",y2:"10"}),e.jsx("line",{x1:"12",y1:"20",x2:"12",y2:"4"}),e.jsx("line",{x1:"6",y1:"20",x2:"6",y2:"14"})]}),"dn statistikleri"]}),e.jsxs("div",{style:{display:"flex",flexDirection:"column",gap:"12px"},children:[e.jsxs("div",{style:{display:"grid",gridTemplateColumns:"repeat(2, 1fr)",gap:"12px"},children:[e.jsxs("div",{style:{textAlign:"center",padding:"12px 10px",background:"linear-gradient(135deg, #667eea 0%, #764ba2 100%)",borderRadius:"8px",boxShadow:"0 2px 4px rgba(102, 126, 234, 0.2)",color:"white"},children:[e.jsx("div",{style:{marginBottom:"4px",display:"flex",justifyContent:"center"},children:e.jsxs("svg",{width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:[e.jsx("path",{d:"M4 19.5A2.5 2.5 0 0 1 6.5 17H20"}),e.jsx("path",{d:"M6.5 2H20v20H6.5A2.5 2.5 0 0 1 4 19.5v-15A2.5 2.5 0 0 1 6.5 2z"})]})}),e.jsx("div",{style:{fontSize:"24px",fontWeight:700,marginBottom:"4px"},children:ce}),e.jsx("div",{style:{fontSize:"11px",fontWeight:500,opacity:.95},children:"Toplam dn"})]}),e.jsxs("div",{style:{textAlign:"center",padding:"12px 10px",background:"linear-gradient(135deg, #10b981 0%, #059669 100%)",borderRadius:"8px",boxShadow:"0 2px 4px rgba(16, 185, 129, 0.2)",color:"white"},children:[e.jsx("div",{style:{marginBottom:"4px",display:"flex",justifyContent:"center"},children:e.jsx("svg",{width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:e.jsx("polyline",{points:"20 6 9 17 4 12"})})}),e.jsx("div",{style:{fontSize:"24px",fontWeight:700,marginBottom:"4px"},children:Oe}),e.jsx("div",{style:{fontSize:"11px",fontWeight:500,opacity:.95},children:"ade"})]})]}),ft>0?e.jsxs("div",{style:{display:"grid",gridTemplateColumns:"repeat(2, 1fr)",gap:"12px"},children:[e.jsxs("div",{style:{textAlign:"center",padding:"12px 10px",background:"linear-gradient(135deg, #f59e0b 0%, #d97706 100%)",borderRadius:"8px",boxShadow:"0 2px 4px rgba(245, 158, 11, 0.2)",color:"white"},children:[e.jsx("div",{style:{marginBottom:"4px",display:"flex",justifyContent:"center"},children:e.jsxs("svg",{width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:[e.jsx("path",{d:"M4 19.5A2.5 2.5 0 0 1 6.5 17H20"}),e.jsx("path",{d:"M6.5 2H20v20H6.5A2.5 2.5 0 0 1 4 19.5v-15A2.5 2.5 0 0 1 6.5 2z"}),e.jsx("path",{d:"M9 9l3 3 3-3"})]})}),e.jsx("div",{style:{fontSize:"24px",fontWeight:700,marginBottom:"4px"},children:Re}),e.jsx("div",{style:{fontSize:"11px",fontWeight:500,opacity:.95},children:"Aktif dn"})]}),e.jsxs("div",{style:{textAlign:"center",padding:"12px 10px",background:"linear-gradient(135deg, #ef4444 0%, #dc2626 100%)",borderRadius:"8px",boxShadow:"0 2px 4px rgba(239, 68, 68, 0.2)",color:"white"},children:[e.jsx("div",{style:{marginBottom:"4px",display:"flex",justifyContent:"center"},children:e.jsxs("svg",{width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:[e.jsx("path",{d:"M10.29 3.86L1.82 18a2 2 0 0 0 1.71 3h16.94a2 2 0 0 0 1.71-3L13.71 3.86a2 2 0 0 0-3.42 0z"}),e.jsx("line",{x1:"12",y1:"9",x2:"12",y2:"13"}),e.jsx("line",{x1:"12",y1:"17",x2:"12.01",y2:"17"})]})}),e.jsx("div",{style:{fontSize:"24px",fontWeight:700,marginBottom:"4px"},children:ft}),e.jsx("div",{style:{fontSize:"11px",fontWeight:500,opacity:.95},children:"Geciken"})]})]}):e.jsxs("div",{style:{textAlign:"center",padding:"12px 10px",background:"linear-gradient(135deg, #f59e0b 0%, #d97706 100%)",borderRadius:"8px",boxShadow:"0 2px 4px rgba(245, 158, 11, 0.2)",color:"white",width:"100%"},children:[e.jsx("div",{style:{marginBottom:"4px",display:"flex",justifyContent:"center"},children:e.jsxs("svg",{width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:[e.jsx("path",{d:"M4 19.5A2.5 2.5 0 0 1 6.5 17H20"}),e.jsx("path",{d:"M6.5 2H20v20H6.5A2.5 2.5 0 0 1 4 19.5v-15A2.5 2.5 0 0 1 6.5 2z"})]})}),e.jsx("div",{style:{fontSize:"24px",fontWeight:700,marginBottom:"4px"},children:Re}),e.jsx("div",{style:{fontSize:"11px",fontWeight:500,opacity:.95},children:"Aktif dn"})]})]})]}),e.jsxs("div",{style:{padding:"20px",backgroundColor:"#ffffff",borderRadius:"12px",border:"1px solid #e2e8f0",boxShadow:"0 1px 3px rgba(0, 0, 0, 0.05)"},children:[e.jsxs("h3",{style:{marginTop:0,marginBottom:"16px",fontSize:"18px",fontWeight:600,color:"#1e293b",display:"flex",alignItems:"center",gap:"8px"},children:[e.jsxs("svg",{width:"20",height:"20",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:[e.jsx("circle",{cx:"12",cy:"12",r:"10"}),e.jsx("line",{x1:"12",y1:"8",x2:"12",y2:"12"}),e.jsx("line",{x1:"12",y1:"16",x2:"12.01",y2:"16"})]}),"Ceza Puan"]}),e.jsxs("div",{style:{display:"flex",flexDirection:"column",gap:"12px"},children:[e.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"16px"},children:[e.jsxs("div",{style:{flex:1},children:[e.jsx("strong",{style:{color:"#64748b",fontSize:"14px",display:"block",marginBottom:"4px"},children:"Ceza Puan"}),e.jsx("p",{style:{margin:0,fontSize:"24px",fontWeight:700,color:ze>=i?"#ef4444":ze>0?"#f59e0b":"#10b981"},children:ze}),e.jsx("p",{style:{margin:"4px 0 0 0",fontSize:"12px",color:"#64748b"},children:"(Ceza puanlar otomatik olarak hesaplanr ve maksimum deer kaydedilir. Kitaplar teslim edilse bile maksimum deer korunur. Sadece manuel gncelleme ile deiir)"})]}),ze>=i&&e.jsxs("div",{style:{padding:"12px 20px",backgroundColor:"#fee2e2",borderRadius:"8px",border:"2px solid #ef4444",color:"#dc2626",fontWeight:600,display:"flex",alignItems:"center",gap:"8px"},children:[e.jsxs("svg",{width:"18",height:"18",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:[e.jsx("path",{d:"M10.29 3.86L1.82 18a2 2 0 0 0 1.71 3h16.94a2 2 0 0 0 1.71-3L13.71 3.86a2 2 0 0 0-3.42 0z"}),e.jsx("line",{x1:"12",y1:"9",x2:"12",y2:"13"}),e.jsx("line",{x1:"12",y1:"17",x2:"12.01",y2:"17"})]}),"Ceza Durumunda - Kitap Alamaz"]})]}),m&&e.jsxs("div",{style:{display:"flex",gap:"8px",alignItems:"center"},children:[e.jsx("input",{type:"number",id:I,min:"0",defaultValue:ze,style:{flex:1,padding:"10px",borderRadius:"6px",border:"1px solid #d1d5db",fontSize:"14px"},placeholder:"Ceza puan"}),e.jsx("button",{onClick:P,disabled:F||B,style:{padding:"10px 20px",fontSize:"14px",backgroundColor:F||B?"#9ca3af":"#3b82f6",color:"white",border:"none",borderRadius:"6px",cursor:F||B?"not-allowed":"pointer",fontWeight:600},children:F?"Gncelleniyor...":"Gncelle"})]})]})]}),Qe.length>0&&e.jsxs("div",{children:[e.jsx("h3",{style:{marginTop:0,marginBottom:"16px",fontSize:"18px",fontWeight:600,color:"#1e293b"},children:"Aktif dnler"}),e.jsx("div",{style:{display:"flex",flexDirection:"column",gap:"12px"},children:Qe.map((Z,$e)=>{const Xe=new Date(Z.dueDate);Xe.setHours(0,0,0,0);const Ge=new Date;Ge.setHours(0,0,0,0);const mt=Xe.getTime()-Ge.getTime(),kt=Math.ceil(mt/(1e3*60*60*24)),ot=kt<0,We=kt,st=!ot&&We>=0&&We<=3,Bt=r.find(Ee=>Ee.id===Z.bookId);return e.jsx("div",{onClick:Ee=>{Ee.stopPropagation(),Bt&&u&&u(Bt)},style:{padding:"16px",backgroundColor:"#f8fafc",borderRadius:"8px",border:"1px solid #e2e8f0",cursor:Bt&&u?"pointer":"default",transition:"all 0.2s"},onMouseEnter:Ee=>{Bt&&u&&(Ee.currentTarget.style.backgroundColor="#f1f5f9",Ee.currentTarget.style.borderColor="#cbd5e1")},onMouseLeave:Ee=>{Bt&&u&&(Ee.currentTarget.style.backgroundColor="#f8fafc",Ee.currentTarget.style.borderColor="#e2e8f0")},children:e.jsxs("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center",flexWrap:"wrap",gap:"12px"},children:[e.jsxs("div",{style:{flex:1},children:[e.jsx("div",{style:{fontWeight:600,marginBottom:"8px",fontSize:"16px",color:"#1e293b"},children:Z.title}),e.jsxs("div",{style:{fontSize:"13px",color:"#64748b",marginBottom:"4px"},children:[e.jsx("strong",{children:"Yazar:"})," ",Z.author]}),e.jsxs("div",{style:{fontSize:"13px",color:"#64748b",marginBottom:"4px"},children:[e.jsx("strong",{children:"Kategori:"})," ",Z.category]}),e.jsxs("div",{style:{fontSize:"13px",color:"#64748b",marginBottom:"4px"},children:[e.jsx("strong",{children:"Teslim Tarihi:"})," ",Xe.toLocaleDateString("tr-TR")]}),Z.personel&&e.jsxs("div",{style:{fontSize:"13px",color:"#64748b"},children:[e.jsx("strong",{children:"Personel:"})," ",Z.personel]})]}),e.jsx("div",{style:{display:"flex",flexDirection:"column",alignItems:"flex-end",gap:"8px"},children:e.jsx("div",{style:{padding:"8px 16px",borderRadius:"12px",fontSize:"13px",fontWeight:600,backgroundColor:ot?"#fee2e2":st?"#fef3c7":"#d1fae5",color:ot?"#dc2626":st?"#d97706":"#059669",whiteSpace:"nowrap"},children:We===0?"Sresi Doldu":`${We} gn kald`})})]})},$e)})})]}),(d||h&&h.length>0)&&e.jsxs("div",{style:{border:`1px solid ${f?"#3b82f6":"#e2e8f0"}`,borderRadius:"14px",backgroundColor:f?"#f0f4ff":"#ffffff",boxShadow:f?"0 12px 30px rgba(59,130,246,0.12)":"0 1px 3px rgba(0,0,0,0.05)",transition:"all 0.25s ease",overflow:"hidden"},children:[e.jsxs("div",{onClick:()=>b(!f),style:{padding:"20px",cursor:"pointer",display:"flex",justifyContent:"space-between",alignItems:"center",flexWrap:"wrap",gap:"16px"},children:[e.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"12px"},children:[e.jsx("div",{style:{display:"flex",alignItems:"center",justifyContent:"center",width:"40px",height:"40px",borderRadius:"10px",backgroundColor:f?"#dbeafe":"#f1f5f9",color:f?"#2563eb":"#64748b",transition:"all 0.2s"},children:e.jsxs("svg",{width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:[e.jsx("path",{d:"M2 3h6a4 4 0 0 1 4 4v14a3 3 0 0 0-3-3H2z"}),e.jsx("path",{d:"M22 3h-6a4 4 0 0 0-4 4v14a3 3 0 0 1 3-3h7z"})]})}),e.jsxs("div",{children:[e.jsx("h3",{style:{margin:0,fontSize:"17px",fontWeight:700,color:f?"#1e293b":"#334155"},children:"Okuma Gemii ve statistikler"}),e.jsxs("div",{style:{fontSize:"13px",color:f?"#3b82f6":"#64748b",marginTop:"2px"},children:[h.length," kayt bulundu"]})]})]}),e.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"16px"},children:[!f&&d&&e.jsxs("div",{style:{display:"flex",gap:"8px",flexWrap:"wrap"},children:[e.jsxs("div",{style:{padding:"6px 14px",borderRadius:"99px",backgroundColor:"#f1f5f9",fontSize:"12px",fontWeight:600,color:"#475569"},children:["Toplam: ",ce]}),ft>0&&e.jsxs("div",{style:{padding:"6px 14px",borderRadius:"99px",backgroundColor:"#fee2e2",fontSize:"12px",fontWeight:600,color:"#ef4444"},children:[ft," Gecikme"]}),Re>0&&e.jsxs("div",{style:{padding:"6px 14px",borderRadius:"99px",backgroundColor:"#dbeafe",fontSize:"12px",fontWeight:600,color:"#3b82f6"},children:[Re," Aktif"]})]}),e.jsx("div",{style:{display:"flex",alignItems:"center",justifyContent:"center",width:"32px",height:"32px",borderRadius:"50%",backgroundColor:f?"#ffffff":"#f8fafc",border:"1px solid",borderColor:f?"#bfdbfe":"#e2e8f0",color:f?"#3b82f6":"#94a3b8",transform:f?"rotate(180deg)":"rotate(0deg)",transition:"all 0.3s ease"},children:e.jsx("svg",{width:"20",height:"20",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:e.jsx("polyline",{points:"6 9 12 15 18 9"})})})]})]}),f&&e.jsxs("div",{style:{borderTop:"1px solid #dbeafe",padding:"24px",animation:"slideDown 0.3s ease-out"},children:[Me.length>0&&e.jsxs("div",{style:{marginBottom:"32px"},children:[e.jsx("h4",{style:{margin:"0 0 16px 0",fontSize:"14px",fontWeight:600,color:"#64748b",textTransform:"uppercase",letterSpacing:"0.05em"},children:"Performans zeti"}),e.jsx("div",{style:{display:"grid",gridTemplateColumns:"repeat(2, 1fr)",gap:"16px"},children:Me.map(Z=>e.jsxs("div",{style:{padding:"16px",backgroundColor:"#ffffff",borderRadius:"12px",border:"1px solid #e2e8f0",borderLeft:`4px solid ${Z.accent}`,boxShadow:"0 2px 4px rgba(0,0,0,0.02)"},children:[e.jsx("div",{style:{fontSize:"12px",color:"#64748b",fontWeight:600,marginBottom:"6px"},children:Z.label}),e.jsx("div",{style:{fontSize:"20px",fontWeight:700,color:"#1e293b"},children:Z.value}),Z.subLabel&&e.jsx("div",{style:{fontSize:"12px",color:"#94a3b8",marginTop:"4px"},children:Z.subLabel})]},Z.key))})]}),h&&h.length>0&&e.jsxs("div",{children:[e.jsx("h4",{style:{margin:"0 0 16px 0",fontSize:"14px",fontWeight:600,color:"#64748b",textTransform:"uppercase",letterSpacing:"0.05em"},children:"dn Gemii Listesi"}),e.jsx("div",{style:{overflowX:"auto",borderRadius:"8px",border:"1px solid #e2e8f0"},children:e.jsxs("table",{style:{width:"100%",borderCollapse:"collapse"},children:[e.jsx("thead",{children:e.jsxs("tr",{style:{backgroundColor:"#f8fafc",borderBottom:"1px solid #e2e8f0"},children:[e.jsx("th",{style:{padding:"14px 12px",textAlign:"left",fontSize:"12px",color:"#64748b",fontWeight:700,whiteSpace:"nowrap"},children:"KTAP"}),e.jsx("th",{style:{padding:"14px 12px",textAlign:"left",fontSize:"12px",color:"#64748b",fontWeight:700,whiteSpace:"nowrap"},children:"DURUM"}),e.jsx("th",{style:{padding:"14px 12px",textAlign:"left",fontSize:"12px",color:"#64748b",fontWeight:700,whiteSpace:"nowrap"},children:"ALI T."}),e.jsx("th",{style:{padding:"14px 12px",textAlign:"left",fontSize:"12px",color:"#64748b",fontWeight:700,whiteSpace:"nowrap"},children:"ADE T."}),e.jsx("th",{style:{padding:"14px 12px",textAlign:"left",fontSize:"12px",color:"#64748b",fontWeight:700,whiteSpace:"nowrap"},children:"G. PLANI"}),e.jsx("th",{style:{padding:"14px 12px",textAlign:"left",fontSize:"12px",color:"#64748b",fontWeight:700,whiteSpace:"nowrap"},children:"SRE"})]})}),e.jsx("tbody",{children:h.map((Z,$e)=>{var c;const Xe=((c=Z.status)==null?void 0:c.toUpperCase())==="RETURNED",Ge=Xe?"ade Edildi":"Aktif",mt=Xe?"#10b981":Z.wasLate?"#ef4444":"#3b82f6",kt=Xe?"#d1fae5":Z.wasLate?"#fee2e2":"#dbeafe",ot=Z.borrowedAt?new Date(Z.borrowedAt).toLocaleDateString("tr-TR"):"",We=Z.returnedAt?new Date(Z.returnedAt).toLocaleDateString("tr-TR"):"",st=Z.loanDays?`${Z.loanDays} gn`:"",Bt=(N,oe)=>{if(!N||!oe)return null;const Ae=new Date(N),Be=new Date(oe);if(Number.isNaN(Ae.getTime())||Number.isNaN(Be.getTime()))return null;const ye=Be.getTime()-Ae.getTime();return ye<0?0:Math.max(1,Math.round(ye/(1e3*60*60*24)))},Ee=Xe&&typeof Z.durationDays=="number"&&!Number.isNaN(Z.durationDays)?Z.durationDays:Xe?Bt(Z.borrowedAt,Z.returnedAt):null,Et=Ee!==null?`${Ee} gn`:Xe?"":"Devam ediyor";return e.jsxs("tr",{style:{borderBottom:$e===h.length-1?"none":"1px solid #f1f5f9",backgroundColor:$e%2===0?"#ffffff":"#fcfcfc"},children:[e.jsxs("td",{style:{padding:"14px 12px"},children:[e.jsx("div",{style:{fontWeight:600,color:"#1e293b",fontSize:"13px"},children:Z.bookTitle}),Z.bookId&&e.jsxs("div",{style:{fontSize:"11px",color:"#94a3b8"},children:["#",Z.bookId]})]}),e.jsx("td",{style:{padding:"14px 12px"},children:e.jsxs("span",{style:{display:"inline-block",padding:"4px 10px",borderRadius:"6px",fontSize:"11px",fontWeight:700,backgroundColor:kt,color:mt},children:[Ge,Z.wasLate&&e.jsx("span",{style:{marginLeft:"4px"},children:""})]})}),e.jsx("td",{style:{padding:"14px 12px",fontSize:"13px",color:"#64748b"},children:ot}),e.jsx("td",{style:{padding:"14px 12px",fontSize:"13px",color:"#64748b"},children:We}),e.jsx("td",{style:{padding:"14px 12px",fontSize:"13px",color:"#64748b"},children:st}),e.jsx("td",{style:{padding:"14px 12px",fontSize:"13px",color:"#64748b",fontWeight:500},children:Et})]},`${Z.bookId}-${Z.borrowedAt}-${$e}`)})})]})})]})]})]})]})},lc=({isOpen:t,onClose:n,student:r,loans:i,books:o=[],personelName:l,onRefresh:s,onEdit:u,onBookClick:d,maxPenaltyPoints:h=100,loading:C=!1,studentHistory:k,historyEntries:S=[]})=>!t||!r?null:_t.createPortal(e.jsx("div",{style:{position:"fixed",top:0,left:0,right:0,bottom:0,backgroundColor:"rgba(0, 0, 0, 0.5)",display:"flex",alignItems:"center",justifyContent:"center",zIndex:51e3},onClick:n,children:e.jsxs("div",{className:"card",style:{maxWidth:"800px",width:"90%",maxHeight:"90vh",overflowY:"auto",overflowX:"hidden",position:"relative",backgroundColor:"#fff",borderRadius:"12px",padding:"24px",boxShadow:"0 20px 25px -5px rgba(0, 0, 0, 0.1), 0 10px 10px -5px rgba(0, 0, 0, 0.04)"},onClick:B=>B.stopPropagation(),children:[e.jsxs("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center",marginBottom:"24px"},children:[e.jsx("h2",{style:{margin:0,color:"#1e293b",fontSize:"24px",fontWeight:700},children:"renci Detaylar"}),e.jsxs("div",{style:{display:"flex",gap:"8px",alignItems:"center"},children:[u&&e.jsxs("button",{onClick:()=>u(r),style:{padding:"8px 16px",fontSize:"14px",backgroundColor:"#3b82f6",color:"white",border:"none",borderRadius:"6px",cursor:"pointer",fontWeight:600,whiteSpace:"nowrap",display:"flex",alignItems:"center",gap:"6px",transition:"background-color 0.2s"},onMouseEnter:B=>B.currentTarget.style.backgroundColor="#2563eb",onMouseLeave:B=>B.currentTarget.style.backgroundColor="#3b82f6",children:[e.jsxs("svg",{width:"16",height:"16",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:[e.jsx("path",{d:"M11 4H4a2 2 0 0 0-2 2v14a2 2 0 0 0 2 2h14a2 2 0 0 0 2-2v-7"}),e.jsx("path",{d:"M18.5 2.5a2.121 2.121 0 0 1 3 3L12 15l-4 1 1-4 9.5-9.5z"})]}),"Dzenle"]}),e.jsx("button",{onClick:n,style:{background:"none",border:"none",fontSize:"24px",cursor:"pointer",color:"#64748b",padding:"4px",width:"32px",height:"32px",display:"flex",alignItems:"center",justifyContent:"center",borderRadius:"50%",transition:"background-color 0.2s"},onMouseEnter:B=>B.currentTarget.style.backgroundColor="#f1f5f9",onMouseLeave:B=>B.currentTarget.style.backgroundColor="transparent",children:""})]})]}),e.jsx(Vg,{student:r,loans:i,books:o,personelName:l,onRefresh:s,onBookClick:d,maxPenaltyPoints:h,loading:C,studentHistory:k,historyEntries:S,showEditButton:!!u})]})}),document.body),On=({loans:t,books:n=[],students:r=[],onRefresh:i,personelName:o,resetSearch:l=!1,filterVariant:s="full",onAddNotification:u})=>{const d=x=>{const K=new Date(x);K.setHours(0,0,0,0);const Q=new Date;return Q.setHours(0,0,0,0),Math.ceil((K.getTime()-Q.getTime())/864e5)},h=x=>x==null?"":x.toString().trim().replace(/\s+/g," ").toLowerCase(),C=(x,K)=>{const Q=new Set,ke=h(x);if(ke&&Q.add(ke),K){K.name&&Q.add(h(K.name)),K.surname&&Q.add(h(K.surname));const Ye=h(`${K.name??""} ${K.surname??""}`.trim());Ye&&Q.add(Ye)}return Q},k=a.useMemo(()=>(x,K)=>{const Q=C(x,K);return Q.size===0?0:t.filter(Ye=>{const ae=h(Ye.borrower);return ae&&Q.has(ae)}).filter(Ye=>d(Ye.dueDate)<0).length},[t]),S=x=>`${x.bookId}|||${x.borrower}|||${x.dueDate}`,[B,m]=a.useState(null),[I,F]=a.useState(""),[y,f]=a.useState(""),[b,D]=a.useState(""),[q,V]=a.useState(""),[ie,M]=a.useState(null),[re,ce]=a.useState(!1),[Oe,Re]=a.useState(!1),[_e,xt]=a.useState(null),[De,ft]=a.useState(!1),[ze,P]=a.useState(null),[se,fe]=a.useState(7),[ve,Pe]=a.useState(!1),[bt,lt]=a.useState(null),[be,Me]=a.useState(null),[et,Qe]=a.useState(null),[Z,$e]=a.useState(null),[Xe,Ge]=a.useState(null),[mt,kt]=a.useState("asc"),ot=a.useMemo(()=>{const x=new Map;t.forEach(ht=>{const Jt=x.get(ht.bookId)||0;x.set(ht.bookId,Jt+1)});const K=Array.from(x.values()),Q=x.size,ke=K.filter(ht=>ht===1).length,Ye=K.filter(ht=>ht>=2&&ht<=3).length,ae=K.filter(ht=>ht>=4&&ht<=7).length,ct=K.filter(ht=>ht>=8&&ht<=14).length,Wt=K.filter(ht=>ht>=15).length;return[{label:"Tm",value:"",color:"#6b7280",bgColor:"#eff6ff",textColor:"#374151",borderColor:"#bfdbfe",count:Q},{label:"1 Adet",value:"1",color:"#ef4444",bgColor:"#fef2f2",textColor:"#991b1b",count:ke},{label:"2-3 Adet",value:"2-3",color:"#f59e0b",bgColor:"#fffbeb",textColor:"#92400e",count:Ye},{label:"4-7 Adet",value:"4-7",color:"#3b82f6",bgColor:"#eff6ff",textColor:"#1e40af",count:ae},{label:"8-14 Adet",value:"8-14",color:"#10b981",bgColor:"#f0fdf4",textColor:"#065f46",count:ct},{label:"15+ Adet",value:"15plus",color:"#8b5cf6",bgColor:"#f5f3ff",textColor:"#6d28d9",count:Wt}]},[t]),We=a.useMemo(()=>t.filter(x=>d(x.dueDate)<0).length,[t]),[st,Bt]=a.useState(5),[Ee,Et]=a.useState(100);a.useEffect(()=>{(async()=>{try{const K=await xe.get("/system-settings");Bt(K.maxBorrowLimit??5),Et(K.maxPenaltyPoints??100)}catch(K){console.error("Sistem ayarlar yklenemedi:",K)}})()},[]);const[c,N]=a.useState(!1),[oe,Ae]=a.useState(1),[Be,ye]=a.useState(20),[Ve,jt]=a.useState(""),[zt,nn]=a.useState(!1),[Te,wt]=a.useState(new Set),[_,ne]=a.useState(!1),[ue,He]=a.useState(""),[Se,gt]=a.useState(""),[de,Ce]=a.useState([]),[me,Ct]=a.useState(""),[tt,Lt]=a.useState(14),[Ht,Ft]=a.useState(!1),[nt,At]=a.useState(null),[T,H]=a.useState(""),[A,Ne]=a.useState(new Set),[he,it]=a.useState(null),[Ue,Nt]=a.useState(!1),[rt,yt]=a.useState(null),[Dt,Zt]=a.useState(!1),[Ut,$t]=a.useState(!1),[Tt,Bn]=a.useState(null),[bn,w]=a.useState(null),[Y,ee]=a.useState(!1),[g,R]=a.useState(null);a.useEffect(()=>{if(!B){w(null),R(null),ee(!1);return}const x=`${B.name} ${B.surname}`.trim()||B.name,K={studentNumber:B.studentNumber,borrower:x||void 0};B.name&&!B.studentNumber&&(K.studentNumber=void 0,K.borrower=B.name);let Q=!1;return ee(!0),R(null),xe.get("/statistics/student-history",K).then(ke=>{Q||w(ke)}).catch(ke=>{Q||(R(ke instanceof Error?ke.message:"Gemi istatistikler yklenemedi"),w(null))}).finally(()=>{Q||ee(!1)}),()=>{Q=!0}},[B]);const[J,te]=a.useState(!1),[ge,v]=a.useState(null),[$,le]=a.useState(!1),Le=(x,K,Q="info",ke)=>{Bn({title:x,message:K,type:Q,icon:ke}),$t(!0)},Ke=s==="search-only",Ze=s==="compact"||Ke,Mt=de.some(x=>x.quantity<=0||(x.healthyCount??0)<=0),en=ve||de.length===0||!me||Mt;a.useEffect(()=>{Ke&&(f(""),D(""))},[Ke]),a.useEffect(()=>{l&&(F(""),f(""),V(""),D(""))},[l]),a.useEffect(()=>{if(bt){const x=setTimeout(()=>{lt(null)},5e3);return()=>clearTimeout(x)}},[bt]),a.useEffect(()=>{if(be){const x=setTimeout(()=>{Me(null)},5e3);return()=>clearTimeout(x)}},[be]),a.useEffect(()=>{if(et){const x=setTimeout(()=>{Qe(null)},5e3);return()=>clearTimeout(x)}},[et]),a.useEffect(()=>{if(Z){const x=setTimeout(()=>{$e(null)},5e3);return()=>clearTimeout(x)}},[Z]);const tn=a.useMemo(()=>{const x=new Set(t.map(K=>K.category).filter(Boolean));return Array.from(x).sort()},[t]),_n=a.useMemo(()=>{const x=new Set(t.map(K=>K.author).filter(Boolean));return Array.from(x).sort((K,Q)=>K.localeCompare(Q,"tr"))},[t]),Ln=a.useMemo(()=>n.filter(x=>x.quantity>0&&(x.healthyCount??0)>0),[n]),Kt=a.useMemo(()=>!ue||!ue.trim()?Ln:Ln.filter(x=>G(x.title,ue)||G(x.author,ue)||G(x.category,ue)||G(x.shelf,ue)||G(x.publisher,ue)||G(x.summary,ue)||G(x.bookNumber,ue)||G(x.year,ue)||G(x.pageCount,ue)),[Ln,ue]),cn=a.useMemo(()=>!Se||!Se.trim()?r:r.filter(x=>G(x.name,Se)||G(x.surname,Se)||G(`${x.name} ${x.surname}`.trim(),Se)||G(x.studentNumber,Se)||G(x.class,Se)||G(x.branch,Se)||x.class&&x.branch&&G(`${x.class}-${x.branch}`,Se)||x.class&&x.branch&&G(`${x.class}${x.branch}`,Se)),[r,Se]),pn=(x,K)=>{const Q=ae=>ae.quantity>0&&(ae.healthyCount??0)>0,ke=r.find(ae=>`${ae.name} ${ae.surname}`.trim()===K||ae.name===K||ae.surname===K)??null,Ye=C(K,ke);return x.filter(ae=>!t.some(Wt=>Wt.bookId===ae.id&&Ye.has(h(Wt.borrower)))&&Q(ae))},nr=a.useMemo(()=>{const x=new Map;return t.forEach(K=>{const Q=K.bookId;x.has(Q)||x.set(Q,[]),x.get(Q).push(K)}),x},[t]),Gt=a.useMemo(()=>Array.from(nr.entries()).map(([x,K])=>{const Q=K[0],ke=K.reduce((ht,Jt)=>new Date(Jt.dueDate)<new Date(ht.dueDate)?Jt:ht),Ye=Math.min(...K.map(ht=>d(ht.dueDate))),ae=K.some(ht=>d(ht.dueDate)<0),ct=K.some(ht=>{const Jt=d(ht.dueDate);return!ae&&Jt>=0&&Jt<=3}),Wt=K.map(ht=>{const Jt=r.find(sn=>sn.name===ht.borrower||`${sn.name} ${sn.surname}`.trim()===ht.borrower||sn.surname===ht.borrower);return Jt?`${Jt.name} ${Jt.surname}`.trim():ht.borrower});return{bookId:x,title:Q.title,author:Q.author,category:Q.category,loanCount:K.length,allLoans:K,earliestDueDate:ke.dueDate,minRemainingDays:Ye,hasLate:ae,hasWarning:ct,borrowerNames:Wt}}),[nr,r]),Zn=a.useMemo(()=>{let x=[...t];if(I&&I.trim()&&(x=x.filter(K=>{const Q=d(K.dueDate),Ye=Q<0?"gecikmi gecikme sresi doldu":Q>=0&&Q<=3?"yaknda uyar":"normal";if(G(K.title,I)||G(K.author,I)||G(K.borrower,I)||G(K.category,I)||G(K.personel,I)||G(Ye,I))return!0;const ae=n.find(ct=>ct.id===K.bookId);return!!(ae&&(G(ae.shelf,I)||G(ae.publisher,I)||G(ae.summary,I)||G(ae.bookNumber,I)||G(ae.year,I)||G(ae.pageCount,I)||G(ae.category,I)))})),!Ze&&y&&(x=x.filter(K=>K.category===y)),b&&!Ke)if(b==="late")x=x.filter(K=>d(K.dueDate)<0);else{const K=new Map;t.forEach(Q=>{const ke=K.get(Q.bookId)||0;K.set(Q.bookId,ke+1)}),b==="1"?x=x.filter(Q=>K.get(Q.bookId)===1):b==="2-3"?x=x.filter(Q=>{const ke=K.get(Q.bookId)||0;return ke>=2&&ke<=3}):b==="4-7"?x=x.filter(Q=>{const ke=K.get(Q.bookId)||0;return ke>=4&&ke<=7}):b==="8-14"?x=x.filter(Q=>{const ke=K.get(Q.bookId)||0;return ke>=8&&ke<=14}):b==="15plus"&&(x=x.filter(Q=>(K.get(Q.bookId)||0)>=15))}return Ze||(x=[...x].sort((K,Q)=>{const ke=d(K.dueDate),Ye=d(Q.dueDate),ae=ke<0,ct=Ye<0;return ae&&!ct?-1:!ae&&ct?1:ke-Ye})),x},[t,n,I,y,b,Ze,Ke]),Cn=a.useMemo(()=>{let x=[...Gt];return I&&I.trim()&&(x=x.filter(K=>{if(G(K.title,I)||G(K.author,I)||G(K.category,I)||K.allLoans&&K.allLoans.some(ke=>!!(G(ke.borrower,I)||G(ke.personel,I))))return!0;const Q=n.find(ke=>ke.id===K.bookId);return!!(Q&&(G(Q.shelf,I)||G(Q.publisher,I)||G(Q.summary,I)||G(Q.bookNumber,I)||G(Q.year,I)||G(Q.pageCount,I)||G(Q.category,I)))})),!Ze&&y&&(x=x.filter(K=>K.category===y)),!Ze&&q&&(x=x.filter(K=>K.author===q)),b&&!Ke&&(b==="late"?x=x.filter(K=>K.hasLate):b==="1"?x=x.filter(K=>K.loanCount===1):b==="2-3"?x=x.filter(K=>K.loanCount>=2&&K.loanCount<=3):b==="4-7"?x=x.filter(K=>K.loanCount>=4&&K.loanCount<=7):b==="8-14"?x=x.filter(K=>K.loanCount>=8&&K.loanCount<=14):b==="15plus"&&(x=x.filter(K=>K.loanCount>=15))),Ze||(x=[...x].sort((K,Q)=>K.hasLate&&!Q.hasLate?-1:!K.hasLate&&Q.hasLate?1:K.minRemainingDays-Q.minRemainingDays)),Xe&&(x=[...x].sort((K,Q)=>{let ke=0;switch(Xe){case"title":ke=(K.title||"").localeCompare(Q.title||"","tr");break;case"author":ke=(K.author||"").localeCompare(Q.author||"","tr");break;case"borrower":const Ye=K.borrowerNames&&K.borrowerNames.length>0?K.borrowerNames[0].toLowerCase():"",ae=Q.borrowerNames&&Q.borrowerNames.length>0?Q.borrowerNames[0].toLowerCase():"";ke=Ye.localeCompare(ae,"tr",{sensitivity:"base"});break;case"quantity":const ct=n.find(sn=>sn.id===K.bookId),Wt=n.find(sn=>sn.id===Q.bookId),ht=ct?(ct.totalQuantity||ct.quantity||0)-K.loanCount:0,Jt=Wt?(Wt.totalQuantity||Wt.quantity||0)-Q.loanCount:0;ke=ht-Jt;break;case"earliestDueDate":ke=new Date(K.earliestDueDate).getTime()-new Date(Q.earliestDueDate).getTime();break;default:ke=0}return ke===0&&Xe!=="title"&&(ke=(K.title||"").localeCompare(Q.title||"","tr")),mt==="asc"?ke:-ke})),x},[Gt,n,I,y,q,b,Xe,mt,Ze,Ke]),z=Math.max(1,Math.ceil(Cn.length/Be)),U=Math.min(oe,z),pe=(U-1)*Be,Fe=Cn.slice(pe,pe+Be);a.useEffect(()=>{oe>z&&z>0&&Ae(1)},[I,y,q,b,Xe,mt,z,oe]);const Je=()=>{const x=[];if(z<=7)for(let Q=1;Q<=z;Q++)x.push(Q);else if(x.push(1),U<=4){for(let Q=2;Q<=5;Q++)x.push(Q);x.push("..."),x.push(z)}else if(U>=z-3){x.push("...");for(let Q=z-4;Q<=z;Q++)x.push(Q)}else{x.push("...");for(let Q=U-1;Q<=U+1;Q++)x.push(Q);x.push("..."),x.push(z)}return x},Vt=async()=>{if(ie){Pe(!0),Qe(null);try{await xe.post(`/books/${ie.bookId}/return`,{borrower:ie.borrower,personelName:o}),await xe.post(`/books/${ie.bookId}/borrow`,{borrower:ie.borrower,days:se,personelName:o}),ce(!1),M(null),Qe(null),await i()}catch(x){Qe(x instanceof Error?x.message:"Sre uzatma baarsz oldu")}finally{Pe(!1)}}},rn=async()=>{ie&&(v(ie),te(!0),ce(!1))},Xt=async x=>{le(!0);try{await xe.post(`/books/${x.bookId}/return`,{borrower:x.borrower,personelName:o}),Le("Baarl",`${x.borrower} adl rencinin kitab teslim alnd`,"success",""),ce(!1),M(null),v(null),te(!1),await i()}catch(K){Le("Hata",K instanceof Error?K.message:"Teslim alma baarsz oldu","error","")}finally{le(!1)}},vt=()=>{if(Te.size===0){Le("Hata","nce bir kitap sein","error","");return}const x=t.filter(Q=>Te.has(Q.bookId));if(x.length===0){Le("Hata","Seilen kitaplara ait dn kayd bulunamad","error","");return}const K=x.map(Q=>({id:S(Q),loan:Q}));yt({items:K,selectedItems:new Set(K.map(Q=>Q.id))}),Nt(!0)},ln=()=>{Nt(!1),yt(null)},Mn=async()=>{if(!rt)return;const x=rt.items.filter(K=>rt.selectedItems.has(K.id));if(x.length===0){Le("Hata","Silmek iin en az bir dn kayd sein","error","");return}if(!o||o.trim()===""){Le("Hata","Personel adnz girin","error","");return}Nt(!1),yt(null),await qt(x)},qt=async x=>{var Ye,ae;Zt(!0);const K=[],Q=[];let ke=0;try{for(const ct of x)try{await xe.post(`/books/${ct.loan.bookId}/return`,{borrower:ct.loan.borrower,personelName:o.trim()}),K.push(`${ct.loan.title} - ${ct.loan.borrower}`),ke++}catch(Wt){const ht=Wt instanceof Error?Wt.message:(ae=(Ye=Wt==null?void 0:Wt.response)==null?void 0:Ye.data)==null?void 0:ae.message;Q.push(`${ct.loan.title} - ${ct.loan.borrower}: ${ht||"Silinemedi"}`)}if(ke>0){const ct=ke===1?`${K[0]} silindi.`:`${ke} dn kayd silindi:
${K.map(ht=>` ${ht}`).join(`
`)}`,Wt=Q.length>0?`${ct}

Hata alnan dnler:
${Q.join(`
`)}`:ct;Le("Baarl",Wt,"success",""),N(!1),wt(new Set),await i()}else Q.length>0&&Le("Hata",Q.join(`
`),"error","")}finally{Zt(!1)}};return a.useEffect(()=>{if(zt){const x=K=>{const Q=K.target;!Q.closest("[data-info-popover-borrow]")&&!Q.closest("[data-info-button-borrow]")&&nn(!1)};return document.addEventListener("mousedown",x),()=>{document.removeEventListener("mousedown",x)}}},[zt]),e.jsxs(e.Fragment,{children:[e.jsxs("div",{className:"card",style:{position:"relative"},children:[!Ke&&e.jsxs("div",{style:{position:"absolute",top:"16px",right:"16px",zIndex:100},children:[e.jsx("button",{"data-info-button-borrow":!0,onClick:()=>nn(!zt),style:{width:"32px",height:"32px",borderRadius:"50%",border:"2px solid",borderColor:zt?"#3b82f6":"#fbbf24",background:zt?"#eff6ff":"#fef9e7",cursor:"pointer",display:"flex",alignItems:"center",justifyContent:"center",fontSize:"20px",color:zt?"#1d4ed8":"#d97706",transition:"all 0.2s",fontWeight:700,boxShadow:"0 2px 4px rgba(0, 0, 0, 0.1)",position:"relative",padding:0},onMouseEnter:x=>{zt||(x.currentTarget.style.backgroundColor="#fef3c7",x.currentTarget.style.borderColor="#f59e0b")},onMouseLeave:x=>{zt||(x.currentTarget.style.backgroundColor="#fef9e7",x.currentTarget.style.borderColor="#fbbf24")},children:e.jsxs("svg",{width:"18",height:"18",viewBox:"0 0 24 24",fill:"none",stroke:zt?"#1d4ed8":"#d97706",strokeWidth:"2.5",strokeLinecap:"round",strokeLinejoin:"round",style:{display:"block"},children:[e.jsx("path",{d:"M21 15a2 2 0 0 1-2 2H7l-4 4V5a2 2 0 0 1 2-2h14a2 2 0 0 1 2 2z"}),e.jsx("line",{x1:"9",y1:"10",x2:"15",y2:"10"}),e.jsx("line",{x1:"9",y1:"14",x2:"15",y2:"14"})]})}),zt&&e.jsxs("div",{"data-info-popover-borrow":!0,style:{position:"absolute",top:"40px",right:"0",width:"400px",maxWidth:"90vw",backgroundColor:"#fef9e7",borderRadius:"12px",border:"1px solid #fbbf24",boxShadow:"0 10px 25px rgba(0, 0, 0, 0.15)",padding:"20px",zIndex:1001,fontSize:"14px"},onClick:x=>x.stopPropagation(),children:[e.jsx("div",{style:{position:"absolute",top:"-8px",right:"20px",width:"16px",height:"16px",backgroundColor:"#fef9e7",borderLeft:"1px solid #fbbf24",borderTop:"1px solid #fbbf24",transform:"rotate(45deg)"}}),e.jsx("div",{style:{display:"flex",flexDirection:"column",gap:"16px"},children:e.jsxs("div",{children:[e.jsxs("h3",{style:{marginTop:0,marginBottom:"10px",fontSize:"16px",fontWeight:600,color:"#1e293b",display:"flex",alignItems:"center",gap:"6px"},children:[e.jsxs("svg",{width:"18",height:"18",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:[e.jsx("path",{d:"M4 19.5A2.5 2.5 0 0 1 6.5 17H20"}),e.jsx("path",{d:"M6.5 2H20v20H6.5A2.5 2.5 0 0 1 4 19.5v-15A2.5 2.5 0 0 1 6.5 2z"}),e.jsx("line",{x1:"8",y1:"8",x2:"16",y2:"8"}),e.jsx("line",{x1:"8",y1:"12",x2:"16",y2:"12"}),e.jsx("line",{x1:"8",y1:"16",x2:"16",y2:"16"})]}),"dn Listesi lemleri"]}),e.jsxs("div",{style:{display:"flex",flexDirection:"column",gap:"8px",fontSize:"13px",color:"#475569",lineHeight:"1.5"},children:[e.jsxs("p",{style:{margin:0,display:"flex",alignItems:"flex-start",gap:"6px"},children:[e.jsxs("svg",{width:"16",height:"16",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",style:{marginTop:"2px",flexShrink:0},children:[e.jsx("path",{d:"M4 19.5A2.5 2.5 0 0 1 6.5 17H20"}),e.jsx("path",{d:"M6.5 2H20v20H6.5A2.5 2.5 0 0 1 4 19.5v-15A2.5 2.5 0 0 1 6.5 2z"}),e.jsx("path",{d:"M9 9l3 3 3-3"})]}),e.jsxs("span",{children:[e.jsx("strong",{style:{color:"#1e293b"},children:"dn Ver:"}),' "dn Ver" butonuna tklayarak yeni kitap dn verebilirsiniz.']})]}),e.jsxs("p",{style:{margin:0,display:"flex",alignItems:"flex-start",gap:"6px"},children:[e.jsx("svg",{width:"16",height:"16",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",style:{marginTop:"2px",flexShrink:0},children:e.jsx("polyline",{points:"20 6 9 17 4 12"})}),e.jsxs("span",{children:[e.jsx("strong",{style:{color:"#1e293b"},children:"Teslim Al:"}),' Her dn kaydnda "Teslim Al" butonu ile kitab teslim alabilirsiniz. Geciken kitaplar teslim edildiinde ceza puan otomatik hesaplanr.']})]}),e.jsxs("p",{style:{margin:0,display:"flex",alignItems:"flex-start",gap:"6px"},children:[e.jsxs("svg",{width:"16",height:"16",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",style:{marginTop:"2px",flexShrink:0},children:[e.jsx("circle",{cx:"12",cy:"12",r:"10"}),e.jsx("polyline",{points:"12 6 12 12 16 14"})]}),e.jsxs("span",{children:[e.jsx("strong",{style:{color:"#1e293b"},children:"Sre Uzat:"}),' "Sre Uzat" butonu ile dn sresini uzatabilirsiniz. Kitap nce teslim alnr, sonra yeni sreyle tekrar dn verilir.']})]}),e.jsxs("p",{style:{margin:0,display:"flex",alignItems:"flex-start",gap:"6px"},children:[e.jsxs("svg",{width:"16",height:"16",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",style:{marginTop:"2px",flexShrink:0},children:[e.jsx("circle",{cx:"11",cy:"11",r:"8"}),e.jsx("path",{d:"M21 21l-4.35-4.35"})]}),e.jsxs("span",{children:[e.jsx("strong",{style:{color:"#1e293b"},children:"Arama ve Filtreleme:"})," Arama kutusu ile kitap, yazar, renci, kategori veya Personel adna gre arama yapabilirsiniz."]})]}),e.jsxs("div",{style:{margin:"0 0 4px 0",padding:"10px 12px",borderRadius:"8px",backgroundColor:"#fef3c7",color:"#92400e",display:"flex",alignItems:"center",gap:"10px",fontWeight:500},children:[e.jsxs("svg",{width:"18",height:"18",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:[e.jsx("circle",{cx:"12",cy:"12",r:"10"}),e.jsx("line",{x1:"12",y1:"16",x2:"12",y2:"12"}),e.jsx("line",{x1:"12",y1:"8",x2:"12.01",y2:"8"})]}),"Kitap msait deilse veya salam nshas yoksa, dn verme blmnde listelenmeyecektir."]}),e.jsxs("p",{style:{margin:0,display:"flex",alignItems:"flex-start",gap:"6px"},children:[e.jsxs("svg",{width:"16",height:"16",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",style:{marginTop:"2px",flexShrink:0},children:[e.jsx("polyline",{points:"9 11 12 14 22 4"}),e.jsx("path",{d:"M21 12v7a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h11"})]}),e.jsxs("span",{children:[e.jsx("strong",{style:{color:"#1e293b"},children:"Seim Modu:"}),' "Se" butonu ile oklu ilem yapabilirsiniz.']})]}),e.jsxs("p",{style:{margin:"8px 0 0 0",display:"flex",alignItems:"flex-start",gap:"6px"},children:[e.jsxs("svg",{width:"16",height:"16",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",style:{marginTop:"2px",flexShrink:0},children:[e.jsx("path",{d:"M10.29 3.86L1.82 18a2 2 0 0 0 1.71 3h16.94a2 2 0 0 0 1.71-3L13.71 3.86a2 2 0 0 0-3.42 0z"}),e.jsx("line",{x1:"12",y1:"9",x2:"12",y2:"13"}),e.jsx("line",{x1:"12",y1:"17",x2:"12.01",y2:"17"})]}),e.jsxs("span",{children:[e.jsx("strong",{style:{color:"#ef4444"},children:"Ceza Puan:"})," ","Ceza puan ",Ee," veya zeri olan renciler kitap alamaz. Geciken kitaplar teslim edildiinde ceza puan otomatik hesaplanr ve maksimum deer olarak kaydedilir."]})]})]})]})})]})]}),Ke?e.jsxs("div",{style:{display:"flex",flexDirection:"column",gap:"12px",marginBottom:"16px",width:"100%"},children:[e.jsx("h2",{style:{margin:0,textAlign:"center"},children:"dn Listesi"}),e.jsx("input",{type:"text",value:I,onChange:x=>{F(x.target.value)},onKeyDown:x=>{x.key==="Escape"&&F("")},placeholder:"Kitap, yazar, renci, kategori veya Personel ile ara...",style:{width:"100%",padding:"10px",borderRadius:"6px",border:"1px solid #e5e7eb"}})]}):e.jsxs("div",{style:{display:"flex",flexDirection:"column",gap:"12px",marginBottom:"16px",width:"100%"},children:[e.jsx("h2",{style:{margin:0,textAlign:"center"},children:"dn Listesi"}),e.jsxs("div",{style:{display:"flex",gap:"8px",flexWrap:"wrap",alignItems:"center",width:"100%"},children:[e.jsx("input",{type:"text",value:I,onChange:x=>{F(x.target.value)},onKeyDown:x=>{x.key==="Escape"&&F("")},placeholder:"Kitap, yazar, renci, kategori veya Personel ile ara...",style:{flex:1,minWidth:"200px",padding:"10px",borderRadius:"6px",border:"1px solid #e5e7eb"}}),e.jsxs("button",{onClick:()=>ne(!0),style:{padding:"10px 20px",borderRadius:"8px",border:"none",background:"#10b981",color:"white",cursor:"pointer",fontWeight:600,fontSize:"14px"},children:[e.jsxs("svg",{width:"18",height:"18",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",style:{marginRight:"6px",verticalAlign:"middle"},children:[e.jsx("path",{d:"M4 19.5A2.5 2.5 0 0 1 6.5 17H20"}),e.jsx("path",{d:"M6.5 2H20v20H6.5A2.5 2.5 0 0 1 4 19.5v-15A2.5 2.5 0 0 1 6.5 2z"}),e.jsx("path",{d:"M9 9l3 3 3-3"})]}),"dn Ver"]}),!Ke&&e.jsx("button",{onClick:()=>{N(!c),c&&wt(new Set)},style:{padding:"10px 20px",borderRadius:"8px",border:c?"2px solid #2563eb":"1px solid #e5e7eb",background:c?"#eff6ff":"#fff",color:c?"#1d4ed8":"#374151",cursor:"pointer",fontWeight:600,fontSize:"14px"},children:c?" Seimi ptal":" Se"})]})]}),Ke?null:e.jsxs(e.Fragment,{children:[e.jsx("div",{style:{display:"flex",flexDirection:"column",gap:"8px",marginBottom:"16px"},children:e.jsxs("div",{style:{display:"grid",gridTemplateColumns:"repeat(auto-fit, minmax(120px, 1fr))",gap:"8px"},children:[ot.map(x=>e.jsxs("button",{onClick:()=>D(b===x.value?"":x.value),style:{padding:"10px",borderRadius:"8px",border:b===x.value?x.value===""?`2px solid ${x.bgColor}`:`2px solid ${x.color}`:"1px solid #e5e7eb",background:b===x.value?x.bgColor:"#fff",cursor:"pointer",fontWeight:700,color:b===x.value?x.textColor:"#374151",fontSize:"13px",transition:"all 0.2s"},onMouseEnter:K=>{b!==x.value&&(K.currentTarget.style.backgroundColor=x.bgColor,K.currentTarget.style.borderColor=x.color)},onMouseLeave:K=>{b!==x.value&&(K.currentTarget.style.backgroundColor="#fff",K.currentTarget.style.borderColor="#e5e7eb")},children:[e.jsx("div",{children:x.label}),e.jsxs("div",{style:{fontSize:"11px",opacity:.8,marginTop:"2px"},children:["(",x.count,")"]})]},x.value||"all")),e.jsxs("button",{onClick:()=>D(b==="late"?"":"late"),style:{padding:"10px",borderRadius:"8px",border:b==="late"?"2px solid #fb923c":"1px solid #e5e7eb",background:b==="late"?"rgba(251, 211, 184, 0.8)":"#fff",cursor:"pointer",fontWeight:700,color:b==="late"?"#c2410c":"#374151",fontSize:"13px",transition:"all 0.2s"},onMouseEnter:x=>{b!=="late"&&(x.currentTarget.style.backgroundColor="rgba(251, 211, 184, 0.8)",x.currentTarget.style.borderColor="#fb923c")},onMouseLeave:x=>{b!=="late"&&(x.currentTarget.style.backgroundColor="#fff",x.currentTarget.style.borderColor="#e5e7eb")},children:[e.jsx("div",{children:"Gecikmi"}),e.jsxs("div",{style:{fontSize:"11px",opacity:.8,marginTop:"2px"},children:["(",We,")"]})]},"late-filter")]})}),!Ze&&e.jsxs("div",{style:{display:"grid",gridTemplateColumns:"repeat(4, 1fr)",gap:"12px",alignItems:"end",padding:"12px",backgroundColor:"#f8fafc",borderRadius:"8px",marginBottom:"16px"},children:[e.jsxs("div",{style:{display:"flex",flexDirection:"column",gap:"4px"},children:[e.jsx("label",{style:{fontSize:"12px",fontWeight:600,color:"#64748b"},children:"Kategori"}),e.jsxs("select",{value:y,onChange:x=>f(x.target.value),style:{padding:"8px",borderRadius:"6px",border:"1px solid #e5e7eb",width:"100%"},title:y||"Tm",children:[e.jsx("option",{value:"",children:"Tm"}),tn.map(x=>e.jsx("option",{value:x,children:x},x))]})]}),e.jsxs("div",{style:{display:"flex",flexDirection:"column",gap:"4px"},children:[e.jsx("label",{style:{fontSize:"12px",fontWeight:600,color:"#64748b"},children:"Yazar"}),e.jsxs("select",{value:q,onChange:x=>V(x.target.value),style:{padding:"8px",borderRadius:"6px",border:"1px solid #e5e7eb",width:"100%"},title:q||"Tm",children:[e.jsx("option",{value:"",children:"Tm"}),_n.map(x=>e.jsx("option",{value:x,children:x},x))]})]}),e.jsxs("div",{style:{display:"flex",flexDirection:"column",gap:"4px"},children:[e.jsx("label",{style:{fontSize:"12px",fontWeight:600,color:"#64748b"},children:"Adet Durumu"}),e.jsx("select",{value:b,onChange:x=>D(x.target.value),style:{padding:"8px",borderRadius:"6px",border:"1px solid #e5e7eb",width:"100%"},title:b||"Tm",children:ot.map(x=>e.jsxs("option",{value:x.value,children:[x.label," (",x.count,")"]},x.value||"all"))})]}),e.jsx("div",{children:(I||y||q||b)&&e.jsx("button",{onClick:()=>{F(""),f(""),V(""),D("");const x=document.querySelector('input[placeholder*="Kitap, yazar"]');x&&(x.value="")},style:{padding:"8px 16px",backgroundColor:"#ef4444",color:"white",border:"none",borderRadius:"6px",cursor:"pointer",fontSize:"13px",fontWeight:600,width:"100%",whiteSpace:"nowrap"},children:"Filtreleri Temizle"})})]})]}),c&&Te.size>0&&e.jsxs("div",{style:{display:"flex",gap:"8px",alignItems:"center",padding:"12px",backgroundColor:"#f0f9ff",borderRadius:"8px",border:"1px solid #bae6fd",marginBottom:"16px"},children:[e.jsxs("span",{style:{fontWeight:600,color:"#0369a1"},children:[Te.size," kitap seildi"]}),e.jsx("button",{onClick:()=>Ft(!0),style:{padding:"8px 16px",borderRadius:"6px",border:"1px solid #3b82f6",background:"#3b82f6",color:"white",cursor:"pointer",fontWeight:600,fontSize:"14px"},children:"Seilenleri Dzenle"}),e.jsx("button",{onClick:vt,style:{padding:"8px 16px",borderRadius:"6px",border:"1px solid #ef4444",background:"#ef4444",color:"white",cursor:"pointer",fontWeight:600,fontSize:"14px"},children:"Seilenleri Sil"})]}),e.jsxs("div",{style:{marginBottom:"12px",fontSize:"14px",color:"#64748b"},children:["Toplam ",e.jsx("strong",{children:Cn.length})," kitap, ",e.jsx("strong",{children:Zn.length})," dn kayd gsteriliyor"]}),bt&&e.jsx("div",{style:{padding:"12px",backgroundColor:"#fee2e2",color:"#dc2626",borderRadius:"8px",marginBottom:"16px"},children:bt}),Cn.length===0?e.jsx("p",{style:{padding:"20px",textAlign:"center",color:"#64748b"},children:I||y||q||b?"Arama kriterlerinize uygun dn kayd bulunamad.":"u an dnte kitap yok."}):e.jsxs("table",{className:"book-table",children:[e.jsx("thead",{children:e.jsxs("tr",{children:[e.jsxs("th",{onClick:()=>{Xe==="title"?kt(mt==="asc"?"desc":"asc"):(Ge("title"),kt("asc"))},style:{cursor:"pointer",userSelect:"none",width:"25%",minWidth:"180px",fontWeight:600,fontSize:"14px"},children:["Kitap ",Xe==="title"&&(mt==="asc"?"":"")]}),e.jsxs("th",{onClick:()=>{Xe==="author"?kt(mt==="asc"?"desc":"asc"):(Ge("author"),kt("asc"))},style:{cursor:"pointer",userSelect:"none",width:"15%",minWidth:"120px",fontWeight:600,fontSize:"14px"},children:["Yazar ",Xe==="author"&&(mt==="asc"?"":"")]}),e.jsxs("th",{onClick:()=>{Xe==="borrower"?kt(mt==="asc"?"desc":"asc"):(Ge("borrower"),kt("asc"))},style:{cursor:"pointer",userSelect:"none",width:"20%",minWidth:"150px",fontWeight:600,fontSize:"14px"},children:["renci ",Xe==="borrower"&&(mt==="asc"?"":"")]}),e.jsxs("th",{onClick:()=>{Xe==="quantity"?kt(mt==="asc"?"desc":"asc"):(Ge("quantity"),kt("asc"))},style:{cursor:"pointer",userSelect:"none",width:"12%",minWidth:"100px",fontWeight:600,fontSize:"14px"},children:["Adet ",Xe==="quantity"&&(mt==="asc"?"":"")]}),e.jsxs("th",{onClick:()=>{Xe==="earliestDueDate"?kt(mt==="asc"?"desc":"asc"):(Ge("earliestDueDate"),kt("asc"))},style:{cursor:"pointer",userSelect:"none",width:"18%",minWidth:"150px",fontWeight:600,fontSize:"14px"},children:["Teslim Tarihi ",Xe==="earliestDueDate"&&(mt==="asc"?"":"")]}),c&&e.jsx("th",{style:{width:"30px",minWidth:"30px",maxWidth:"30px",textAlign:"center"},children:e.jsx("div",{onClick:()=>{Te.size===Cn.length&&Cn.length>0?wt(new Set):wt(new Set(Cn.map(x=>x.bookId)))},style:{width:"24px",height:"24px",borderRadius:"50%",border:Te.size===Cn.length&&Cn.length>0?"2px solid #3b82f6":"2px solid #cbd5e1",background:Te.size===Cn.length&&Cn.length>0?"#3b82f6":"white",cursor:"pointer",display:"inline-flex",alignItems:"center",justifyContent:"center",transition:"all 0.2s"},children:Te.size===Cn.length&&Cn.length>0&&e.jsx("span",{style:{color:"white",fontSize:"14px",fontWeight:"bold"},children:""})})})]})}),e.jsx("tbody",{children:Fe.map(x=>{const K=n.find(Ye=>Ye.id===x.bookId),Q=K?(K.totalQuantity||K.quantity||0)-x.loanCount:0;K&&(K.totalQuantity||K.quantity);const ke=new Date(x.earliestDueDate);return e.jsxs("tr",{style:{cursor:c?"default":"pointer"},onClick:Ye=>{!c&&!Ye.defaultPrevented&&(xt(x.bookId),Re(!0))},onMouseEnter:Ye=>{c||(Ye.currentTarget.style.backgroundColor="#f0f9ff")},onMouseLeave:Ye=>{Ye.currentTarget.style.backgroundColor="transparent"},children:[e.jsx("td",{style:{width:"25%",minWidth:"180px"},children:e.jsx("strong",{children:x.title})}),e.jsx("td",{style:{width:"15%",minWidth:"120px"},children:x.author}),e.jsx("td",{style:{width:"20%",minWidth:"150px"},children:e.jsx("div",{style:{fontSize:"13px",color:"#1e293b",lineHeight:"1.4"},children:x.borrowerNames&&x.borrowerNames.length>0?x.borrowerNames.map((Ye,ae)=>e.jsx("div",{style:{marginBottom:ae<x.borrowerNames.length-1?"4px":"0"},children:Ye},ae)):e.jsx("span",{style:{color:"#94a3b8"},children:""})})}),e.jsx("td",{style:{width:"12%",minWidth:"100px"},children:e.jsxs("span",{style:{backgroundColor:Q<=0?"#fee2e2":Q<=2?"#fef3c7":"#d1fae5",color:Q<=0?"#dc2626":Q<=2?"#d97706":"#059669",padding:"4px 8px",borderRadius:"12px",fontSize:"12px",fontWeight:600},children:[Q," adet"]})}),e.jsx("td",{style:{width:"18%",minWidth:"150px"},children:e.jsx("div",{style:{fontSize:"14px",fontWeight:500},children:ke.toLocaleDateString("tr-TR",{year:"numeric",month:"long",day:"numeric"})})}),c&&e.jsx("td",{onClick:Ye=>Ye.stopPropagation(),style:{width:"30px",minWidth:"30px",maxWidth:"30px",textAlign:"center"},children:e.jsx("div",{onClick:Ye=>{Ye.stopPropagation();const ae=new Set(Te);Te.has(x.bookId)?ae.delete(x.bookId):ae.add(x.bookId),wt(ae)},style:{width:"24px",height:"24px",borderRadius:"50%",border:Te.has(x.bookId)?"2px solid #3b82f6":"2px solid #cbd5e1",background:Te.has(x.bookId)?"#3b82f6":"white",cursor:"pointer",display:"inline-flex",alignItems:"center",justifyContent:"center",transition:"all 0.2s"},children:Te.has(x.bookId)&&e.jsx("span",{style:{color:"white",fontSize:"14px",fontWeight:"bold"},children:""})})})]},x.bookId)})})]}),!Ze&&z>1&&e.jsxs("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center",marginTop:"16px",flexWrap:"wrap",gap:"8px"},children:[e.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"4px",flexWrap:"wrap"},children:[e.jsx("button",{onClick:()=>Ae(Math.max(1,U-1)),disabled:U===1,style:{padding:"8px 12px",borderRadius:"6px",border:"1px solid #e5e7eb",background:U===1?"#f1f5f9":"#fff",cursor:U===1?"not-allowed":"pointer",color:U===1?"#94a3b8":"#475569",fontWeight:500,fontSize:"14px"},children:"nceki"}),Je().map((x,K)=>{if(x==="...")return e.jsx("span",{style:{padding:"0 8px",color:"#94a3b8",fontSize:"14px"},children:"..."},`ellipsis-${K}`);const Q=x,ke=Q===U;return e.jsx("span",{onClick:()=>Ae(Q),style:{padding:"0 8px",color:ke?"#1d4ed8":"#475569",cursor:"pointer",fontWeight:ke?700:400,fontSize:"14px",textDecoration:ke?"underline":"none",textUnderlineOffset:"2px"},children:Q},Q)}),e.jsx("button",{onClick:()=>Ae(Math.min(z,U+1)),disabled:U===z,style:{padding:"8px 12px",borderRadius:"6px",border:"1px solid #e5e7eb",background:U===z?"#f1f5f9":"#fff",cursor:U===z?"not-allowed":"pointer",color:U===z?"#94a3b8":"#475569",fontWeight:500,fontSize:"14px"},children:"Sonraki"}),e.jsx("input",{type:"number",value:Ve,onChange:x=>jt(x.target.value),onKeyDown:x=>{if(x.key==="Enter"){const K=parseInt(Ve,10);K>=1&&K<=z?(Ae(K),jt("")):(Le("Uyar",`Ltfen 1 ile ${z} arasnda bir say girin.`,"warning",""),jt(""))}},placeholder:U.toString(),min:1,max:z,style:{width:"60px",padding:"6px 8px",borderRadius:"6px",border:"1px solid #e5e7eb",fontSize:"14px",textAlign:"center",marginLeft:"4px"}})]}),e.jsxs("div",{style:{fontSize:"14px",color:"#64748b"},children:["Sayfa ",U," / ",z," (Toplam ",Cn.length," kayt)"]})]})]}),Oe&&_e&&_t.createPortal(e.jsx("div",{style:{position:"fixed",top:0,left:0,right:0,bottom:0,backgroundColor:"rgba(0, 0, 0, 0.5)",display:"flex",alignItems:"center",justifyContent:"center",zIndex:10001,cursor:"pointer"},onClick:()=>{Re(!1),xt(null)},children:e.jsxs("div",{className:"card",style:{maxWidth:"90%",maxHeight:"90vh",overflow:"auto",width:"800px",backgroundColor:"white",position:"relative",cursor:"default"},onClick:x=>x.stopPropagation(),children:[e.jsxs("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center",marginBottom:"24px"},children:[e.jsx("h2",{style:{margin:0},children:"dn Listesi Detay"}),e.jsx("button",{onClick:()=>{Re(!1),xt(null)},style:{background:"none",border:"none",fontSize:"24px",cursor:"pointer",color:"#64748b",padding:0,width:"32px",height:"32px",display:"flex",alignItems:"center",justifyContent:"center"},children:""})]}),(()=>{const x=t.filter(ae=>ae.bookId===_e);if(x.length===0)return null;const K=x[0],Q=n.find(ae=>ae.id===_e),ke=Q&&(Q.totalQuantity||Q.quantity)||0,Ye=ke-x.length;return e.jsxs("div",{children:[e.jsxs("div",{onClick:()=>{Q&&(P(Q),ft(!0))},style:{marginBottom:"20px",padding:"16px",backgroundColor:"#f8fafc",borderRadius:"8px",cursor:Q?"pointer":"default",transition:"all 0.2s"},onMouseEnter:ae=>{Q&&(ae.currentTarget.style.backgroundColor="#f0f9ff",ae.currentTarget.style.border="1px solid #3b82f6")},onMouseLeave:ae=>{Q&&(ae.currentTarget.style.backgroundColor="#f8fafc",ae.currentTarget.style.border="none")},children:[e.jsx("div",{style:{fontWeight:600,fontSize:"18px",marginBottom:"12px",color:"#1e293b"},children:K.title}),e.jsxs("div",{style:{display:"grid",gridTemplateColumns:"repeat(2, 1fr)",gap:"12px",marginBottom:"12px"},children:[e.jsxs("div",{children:[e.jsx("div",{style:{fontSize:"12px",color:"#64748b",marginBottom:"4px"},children:"Yazar"}),e.jsx("div",{style:{fontWeight:500,color:"#334155"},children:K.author||""})]}),e.jsxs("div",{children:[e.jsx("div",{style:{fontSize:"12px",color:"#64748b",marginBottom:"4px"},children:"Kategori"}),e.jsx("div",{style:{fontWeight:500,color:"#334155"},children:K.category||""})]}),Q&&e.jsxs(e.Fragment,{children:[Q.publisher&&e.jsxs("div",{children:[e.jsx("div",{style:{fontSize:"12px",color:"#64748b",marginBottom:"4px"},children:"Yaynevi"}),e.jsx("div",{style:{fontWeight:500,color:"#334155"},children:Q.publisher})]}),Q.year&&e.jsxs("div",{children:[e.jsx("div",{style:{fontSize:"12px",color:"#64748b",marginBottom:"4px"},children:"Yayn Yl"}),e.jsx("div",{style:{fontWeight:500,color:"#334155"},children:Q.year})]}),Q.shelf&&e.jsxs("div",{children:[e.jsx("div",{style:{fontSize:"12px",color:"#64748b",marginBottom:"4px"},children:"Raf"}),e.jsx("div",{style:{fontWeight:500,color:"#334155"},children:Q.shelf})]}),Q.bookNumber&&e.jsxs("div",{children:[e.jsx("div",{style:{fontSize:"12px",color:"#64748b",marginBottom:"4px"},children:"Kitap Numaras"}),e.jsx("div",{style:{fontWeight:500,color:"#334155"},children:Q.bookNumber})]})]})]}),e.jsx("div",{style:{marginTop:"12px",paddingTop:"12px",borderTop:"1px solid #e2e8f0"},children:e.jsxs("div",{style:{display:"grid",gridTemplateColumns:"repeat(3, 1fr)",gap:"12px"},children:[e.jsxs("div",{children:[e.jsx("div",{style:{fontSize:"12px",color:"#64748b",marginBottom:"4px"},children:"Toplam Adet"}),e.jsx("div",{style:{fontWeight:600,fontSize:"16px",color:"#1e293b"},children:ke})]}),e.jsxs("div",{children:[e.jsx("div",{style:{fontSize:"12px",color:"#64748b",marginBottom:"4px"},children:"dnte"}),e.jsxs("div",{style:{fontWeight:600,fontSize:"16px",color:"#1e293b"},children:[x.length," adet"]})]}),e.jsxs("div",{children:[e.jsx("div",{style:{fontSize:"12px",color:"#64748b",marginBottom:"4px"},children:"Mevcut"}),e.jsxs("div",{style:{fontWeight:600,fontSize:"16px",color:Ye<=0?"#dc2626":"#059669"},children:[Ye," adet"]})]})]})})]}),e.jsxs("h3",{style:{marginBottom:"16px"},children:["dn Verilen renciler (",x.length," adet):"]}),x.length===0?e.jsx("div",{style:{padding:"20px",textAlign:"center",color:"#64748b"},children:"Bu kitap iin dn kayd bulunamad."}):e.jsx("div",{style:{display:"flex",flexDirection:"column",gap:"8px"},children:x.sort((ae,ct)=>d(ae.dueDate)-d(ct.dueDate)).map((ae,ct)=>{const Wt=d(ae.dueDate),ht=Wt<0,Jt=Wt,sn=!ht&&Jt>=0&&Jt<=3,dn=r.find(It=>It.name===ae.borrower||`${It.name} ${It.surname}`.trim()===ae.borrower||It.surname===ae.borrower);return e.jsx("div",{onClick:()=>{const It=r.find(hn=>hn.name===ae.borrower||`${hn.name} ${hn.surname}`.trim()===ae.borrower||hn.surname===ae.borrower);m(It||{name:ae.borrower,surname:"",studentNumber:0,class:0,branch:"",borrowed:0,returned:0,late:0,penaltyPoints:0,isBanned:!1})},style:{padding:"12px",backgroundColor:"#f8fafc",borderRadius:"8px",border:"1px solid #e2e8f0",cursor:"pointer",transition:"all 0.2s"},onMouseEnter:It=>{It.currentTarget.style.backgroundColor="#f0f9ff",It.currentTarget.style.borderColor="#3b82f6"},onMouseLeave:It=>{It.currentTarget.style.backgroundColor="#f8fafc",It.currentTarget.style.borderColor="#e2e8f0"},children:e.jsxs("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center"},children:[e.jsxs("div",{style:{flex:1},children:[e.jsx("div",{style:{fontWeight:700,marginBottom:"8px",fontSize:"16px",color:"#1e293b"},children:ae.borrower}),dn&&e.jsxs("div",{style:{display:"flex",flexDirection:"column",gap:"4px",marginBottom:"8px"},children:[dn.studentNumber&&e.jsxs("div",{style:{fontSize:"13px",color:"#64748b"},children:[e.jsx("strong",{children:"Numara:"})," ",dn.studentNumber]}),(dn.class||dn.branch)&&e.jsxs("div",{style:{fontSize:"13px",color:"#64748b"},children:[e.jsx("strong",{children:"Snf/ube:"})," ",dn.class?`${dn.class}`:"",dn.branch?`/${dn.branch}`:""]}),(()=>{const It=dn.penaltyPoints||0;return It>0&&e.jsxs("div",{style:{fontSize:"13px",color:It>=Ee?"#ef4444":"#f59e0b"},children:[e.jsx("strong",{children:"Ceza Puan:"})," ",It]})})()]}),e.jsxs("div",{style:{fontSize:"12px",color:"#64748b",marginBottom:"4px"},children:[e.jsx("strong",{children:"Teslim Tarihi:"})," ",new Date(ae.dueDate).toLocaleDateString("tr-TR",{year:"numeric",month:"long",day:"numeric"})]}),ae.personel&&e.jsxs("div",{style:{fontSize:"12px",color:"#64748b"},children:[e.jsx("strong",{children:"Personel:"})," ",ae.personel]})]}),e.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"12px"},onClick:It=>It.stopPropagation(),children:[e.jsx("div",{style:{padding:"4px 12px",borderRadius:"12px",fontSize:"12px",fontWeight:600,backgroundColor:ht?"#fee2e2":sn?"#fef3c7":"#d1fae5",color:ht?"#dc2626":sn?"#d97706":"#059669"},children:ht?"Sresi Doldu":Jt===0?"Bugn Son Gn":`${Jt} gn kald`}),e.jsx("button",{onClick:It=>{It.stopPropagation(),M(ae),ce(!0)},style:{padding:"6px 16px",fontSize:"12px",backgroundColor:"#3b82f6",color:"white",border:"none",borderRadius:"6px",cursor:"pointer",fontWeight:600,whiteSpace:"nowrap"},children:"lemler"})]})]})},`${ae.bookId}-${ae.borrower}-${ct}`)})})]})})()]})}),document.body),re&&ie&&_t.createPortal(e.jsx("div",{style:{position:"fixed",top:0,left:0,right:0,bottom:0,backgroundColor:"rgba(0, 0, 0, 0.5)",display:"flex",alignItems:"center",justifyContent:"center",zIndex:10002,cursor:"pointer"},onClick:()=>{ce(!1),M(null),Qe(null)},children:e.jsxs("div",{className:"card",style:{maxWidth:"500px",width:"90%",maxHeight:"90vh",overflow:"auto",position:"relative",cursor:"default"},onClick:x=>x.stopPropagation(),children:[e.jsxs("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center",marginBottom:"20px"},children:[e.jsx("h2",{style:{margin:0},children:"lem Sein"}),e.jsx("button",{onClick:()=>{ce(!1),M(null),Qe(null)},style:{background:"none",border:"none",fontSize:"24px",cursor:"pointer",color:"#64748b",padding:0,width:"32px",height:"32px",display:"flex",alignItems:"center",justifyContent:"center",flexShrink:0,borderRadius:"6px",transition:"all 0.2s"},onMouseEnter:x=>{x.currentTarget.style.backgroundColor="#f1f5f9",x.currentTarget.style.color="#1e293b"},onMouseLeave:x=>{x.currentTarget.style.backgroundColor="transparent",x.currentTarget.style.color="#64748b"},children:""})]}),e.jsxs("div",{style:{marginBottom:"24px",padding:"16px",backgroundColor:"#f8fafc",borderRadius:"8px",border:"1px solid #e2e8f0"},children:[e.jsx("div",{style:{fontWeight:600,marginBottom:"8px",fontSize:"16px",color:"#1e293b"},children:ie.title}),e.jsxs("div",{style:{fontSize:"14px",color:"#64748b",marginBottom:"4px"},children:["renci: ",e.jsx("strong",{style:{color:"#334155"},children:ie.borrower})]}),e.jsx("div",{style:{fontSize:"14px",color:"#64748b"},children:(()=>{const x=d(ie.dueDate);return e.jsxs("span",{children:["Kalan Gn: ",e.jsx("strong",{style:{color:x<=3?"#ef4444":"#334155"},children:x===0?"Bugn Son Gn":`${x} gn`})]})})()})]}),et&&e.jsx("div",{style:{marginBottom:"16px",padding:"12px",backgroundColor:"#fee2e2",color:"#dc2626",borderRadius:"8px",border:"1px solid #fecaca"},children:et}),e.jsxs("div",{style:{display:"flex",flexDirection:"column",gap:"12px"},children:[e.jsxs("div",{style:{padding:"16px",backgroundColor:"#f8fafc",borderRadius:"8px",border:"1px solid #e2e8f0"},children:[e.jsx("label",{style:{display:"block",marginBottom:"12px",fontWeight:600,fontSize:"14px",color:"#1e293b"},children:"Sre Uzatma (Gn)"}),e.jsxs("select",{value:se,onChange:x=>fe(parseInt(x.target.value)),style:{width:"100%",padding:"10px",borderRadius:"6px",border:"1px solid #d1d5db",fontSize:"14px",marginBottom:"12px",backgroundColor:"#fff"},children:[e.jsx("option",{value:7,children:"7 Gn"}),e.jsx("option",{value:14,children:"14 Gn"}),e.jsx("option",{value:21,children:"21 Gn"}),e.jsx("option",{value:30,children:"30 Gn"})]}),e.jsx("button",{onClick:Vt,disabled:ve,style:{width:"100%",padding:"12px",backgroundColor:ve?"#9ca3af":"#3b82f6",color:"white",border:"none",borderRadius:"6px",cursor:ve?"not-allowed":"pointer",fontWeight:600,fontSize:"14px",display:"flex",alignItems:"center",justifyContent:"center",gap:"6px",transition:"all 0.2s"},onMouseEnter:x=>{ve||(x.currentTarget.style.backgroundColor="#2563eb")},onMouseLeave:x=>{ve||(x.currentTarget.style.backgroundColor="#3b82f6")},children:ve?"leniyor...":e.jsxs(e.Fragment,{children:[e.jsxs("svg",{width:"16",height:"16",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:[e.jsx("circle",{cx:"12",cy:"12",r:"10"}),e.jsx("polyline",{points:"12 6 12 12 16 14"})]}),"Sre Uzat"]})})]}),e.jsx("button",{onClick:rn,disabled:ve,style:{width:"100%",padding:"12px",backgroundColor:ve?"#9ca3af":"#10b981",color:"white",border:"none",borderRadius:"6px",cursor:ve?"not-allowed":"pointer",fontWeight:600,fontSize:"14px",display:"flex",alignItems:"center",justifyContent:"center",gap:"6px",transition:"all 0.2s"},onMouseEnter:x=>{ve||(x.currentTarget.style.backgroundColor="#059669")},onMouseLeave:x=>{ve||(x.currentTarget.style.backgroundColor="#10b981")},children:ve?"leniyor...":e.jsxs(e.Fragment,{children:[e.jsx("svg",{width:"16",height:"16",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:e.jsx("polyline",{points:"20 6 9 17 4 12"})}),"Teslim Al"]})})]})]})}),document.body),_&&_t.createPortal(e.jsx("div",{style:{position:"fixed",top:0,left:0,right:0,bottom:0,backgroundColor:"rgba(0, 0, 0, 0.5)",display:"flex",alignItems:"center",justifyContent:"center",zIndex:1e4},onClick:()=>{ne(!1),$e(null)},children:e.jsxs("div",{className:"card",style:{maxWidth:"800px",width:"90%",maxHeight:"90vh",overflow:"auto",position:"relative"},onClick:x=>x.stopPropagation(),children:[e.jsxs("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center",marginBottom:"24px"},children:[e.jsxs("h2",{style:{margin:0,color:"#1e293b",display:"flex",alignItems:"center",gap:"8px"},children:[e.jsxs("svg",{width:"20",height:"20",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:[e.jsx("path",{d:"M4 19.5A2.5 2.5 0 0 1 6.5 17H20"}),e.jsx("path",{d:"M6.5 2H20v20H6.5A2.5 2.5 0 0 1 4 19.5v-15A2.5 2.5 0 0 1 6.5 2z"}),e.jsx("path",{d:"M9 9l3 3 3-3"})]}),"Kitap dn Verme"]}),e.jsx("button",{onClick:()=>{ne(!1),Ce([]),Ct(""),He(""),gt(""),$e(null)},style:{background:"none",border:"none",fontSize:"24px",cursor:"pointer",color:"#64748b",padding:0,width:"32px",height:"32px",display:"flex",alignItems:"center",justifyContent:"center"},children:""})]}),e.jsxs("div",{style:{display:"flex",flexDirection:"column",gap:"20px"},children:[e.jsxs("div",{children:[e.jsx("label",{style:{display:"block",marginBottom:"8px",fontWeight:600,fontSize:"14px"},children:"Kitap Ara ve Se *"}),e.jsx("div",{style:{fontSize:"12px",color:"#6b7280",marginBottom:"8px"},children:"Not: Salam kopyas olmayan kitaplar aramada listelenmez."}),e.jsx("input",{type:"text",value:ue,onChange:x=>He(x.target.value),placeholder:"Kitap ad, yazar veya kategori ile ara...",style:{width:"100%",padding:"10px",borderRadius:"6px",border:"1px solid #e5e7eb"}}),ue&&e.jsx("div",{style:{marginTop:"8px",maxHeight:"300px",overflowY:"auto",border:"1px solid #e5e7eb",borderRadius:"8px",backgroundColor:"white"},children:Kt.length>0?Kt.filter(x=>!de.some(K=>K.id===x.id)).map(x=>{const K=x.healthyCount??0,Q=K>1?"#059669":K===1?"#d97706":"#dc2626",ke=!!me&&(()=>{const Ye=r.find(ct=>`${ct.name} ${ct.surname}`.trim()===me||ct.name===me||ct.surname===me)??null,ae=C(me,Ye);return t.some(ct=>ct.bookId===x.id&&ae.has(h(ct.borrower)))})();return e.jsxs("div",{onClick:()=>{de.some(Ye=>Ye.id===x.id)||(Ce([...de,x]),He(""))},style:{padding:"12px",cursor:"pointer",borderBottom:"1px solid #f3f4f6",backgroundColor:ke?"#f3f4f6":"white",opacity:ke?.7:1},onMouseEnter:Ye=>{Ye.currentTarget.style.backgroundColor=ke?"#e5e7eb":"#f9fafb"},onMouseLeave:Ye=>{Ye.currentTarget.style.backgroundColor=ke?"#f3f4f6":"white"},children:[e.jsxs("div",{style:{fontWeight:600,marginBottom:"4px",color:ke?"#6b7280":"#1f2937"},children:[x.title,ke&&e.jsx("span",{style:{marginLeft:"8px",fontSize:"11px",color:"#dc2626",fontWeight:600},children:" Zaten dnte"})]}),e.jsxs("div",{style:{fontSize:"14px",color:ke?"#9ca3af":"#6b7280",marginBottom:"4px"},children:[x.author,"  ",x.category]}),e.jsxs("div",{style:{fontSize:"12px",color:"#475569",display:"flex",gap:"12px",flexWrap:"wrap"},children:[e.jsxs("span",{children:["Mevcut Adet: ",x.quantity]}),e.jsxs("span",{style:{color:Q,fontWeight:600},children:["Salam Mevcut: ",K]})]})]},x.id)}):e.jsx("div",{style:{padding:"20px",textAlign:"center",color:"#6b7280"},children:"Arama sonucu bulunamad"})}),de.length>0&&e.jsxs("div",{style:{marginTop:"8px",padding:"12px",backgroundColor:"#eff6ff",borderRadius:"8px",border:"1px solid #3b82f6"},children:[e.jsxs("div",{style:{fontWeight:600,marginBottom:"8px",fontSize:"14px"},children:["Seilen Kitaplar (",de.length,"):"]}),e.jsx("div",{style:{display:"flex",flexDirection:"column",gap:"8px"},children:de.map(x=>{const K=x.healthyCount??0,Q=K>1?"#059669":K===1?"#d97706":"#dc2626",ke=x.quantity<=0,Ye=ke||K<=0,ae=!!me&&(()=>{const ht=r.find(sn=>`${sn.name} ${sn.surname}`.trim()===me||sn.name===me||sn.surname===me)??null,Jt=C(me,ht);return t.some(sn=>sn.bookId===x.id&&Jt.has(h(sn.borrower)))})(),ct=ae||Ye?"#f3f4f6":"white",Wt=ae||Ye?"1px solid #9ca3af":"1px solid #dbeafe";return e.jsxs("div",{style:{display:"flex",flexDirection:"column",gap:"8px",padding:"8px",backgroundColor:ct,borderRadius:"6px",border:Wt,opacity:ae||Ye?.8:1},children:[e.jsxs("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center"},children:[e.jsxs("div",{style:{flex:1},children:[e.jsx("div",{style:{fontWeight:600,fontSize:"13px",color:ae?"#6b7280":"#1f2937"},children:x.title}),e.jsxs("div",{style:{fontSize:"12px",color:ae?"#9ca3af":"#6b7280"},children:[x.author,"  ",x.category]}),e.jsxs("div",{style:{fontSize:"12px",color:"#475569",display:"flex",gap:"12px",flexWrap:"wrap"},children:[e.jsxs("span",{children:["Mevcut Adet: ",x.quantity]}),e.jsxs("span",{style:{color:Q,fontWeight:600},children:["Salam Mevcut: ",K]})]})]}),e.jsx("button",{onClick:()=>{Ce(de.filter(ht=>ht.id!==x.id))},style:{padding:"4px 12px",fontSize:"12px",backgroundColor:"#ef4444",color:"white",border:"none",borderRadius:"4px",cursor:"pointer",fontWeight:600,marginLeft:"8px"},children:"Kaldr"})]}),ae&&e.jsxs("div",{style:{padding:"6px 10px",backgroundColor:"#fee2e2",borderRadius:"4px",fontSize:"12px",color:"#dc2626",fontWeight:600,display:"flex",alignItems:"center",gap:"6px"},children:[e.jsx("span",{children:""}),e.jsx("span",{children:"Bu renci zaten bu kitab dn alm!"})]}),K<=0&&e.jsxs("div",{style:{padding:"6px 10px",backgroundColor:"#fef2f2",borderRadius:"4px",fontSize:"12px",color:"#dc2626",fontWeight:600,display:"flex",alignItems:"center",gap:"6px"},children:[e.jsx("span",{children:""}),e.jsx("span",{children:"Salam kopya kalmad, dn verilemez."})]}),Ye&&e.jsxs("div",{style:{padding:"6px 10px",backgroundColor:"#fef2f2",borderRadius:"4px",fontSize:"12px",color:"#dc2626",fontWeight:600,display:"flex",alignItems:"center",gap:"6px"},children:[e.jsx("span",{children:""}),e.jsx("span",{children:ke?"Mevcut adet 0 olduu iin dn verilemez.":"Salam kopya kalmad, dn verilemez."})]})]},x.id)})}),e.jsx("button",{onClick:()=>{Ce([])},style:{marginTop:"8px",padding:"6px 12px",fontSize:"12px",backgroundColor:"#ef4444",color:"white",border:"none",borderRadius:"4px",cursor:"pointer",fontWeight:600,width:"100%"},children:"Tmn Kaldr"})]})]}),e.jsxs("div",{children:[e.jsx("label",{style:{display:"block",marginBottom:"8px",fontWeight:600,fontSize:"14px"},children:"renci Ara ve Se *"}),e.jsx("input",{type:"text",value:Se,onChange:x=>gt(x.target.value),placeholder:"renci ad, numara, snf veya ube ile ara...",style:{width:"100%",padding:"10px",borderRadius:"6px",border:"1px solid #e5e7eb"}}),Se&&e.jsx("div",{style:{marginTop:"8px",maxHeight:"300px",overflowY:"auto",border:"1px solid #e5e7eb",borderRadius:"8px",backgroundColor:"white"},children:cn.length>0?cn.map(x=>{const K=Rn(x),Q=C(K,x),ke=t.filter(ae=>Q.has(h(ae.borrower))&&n.some(ct=>ct.id===ae.bookId)),Ye=so(x,ke.length);return e.jsxs("div",{onClick:()=>{Ct(K),gt("")},style:{padding:"12px",cursor:"pointer",borderBottom:"1px solid #f3f4f6",backgroundColor:me===K?"#eff6ff":"white",transition:"background-color 0.2s"},onMouseEnter:ae=>{me!==K&&(ae.currentTarget.style.backgroundColor="#f9fafb")},onMouseLeave:ae=>{me!==K&&(ae.currentTarget.style.backgroundColor="white")},children:[e.jsxs("div",{style:{fontWeight:600,color:"#1f2937",marginBottom:"6px"},children:[x.name," ",x.surname]}),e.jsxs("div",{style:{fontSize:"12px",color:"#6b7280",display:"flex",gap:"12px",flexWrap:"wrap"},children:[e.jsxs("span",{children:[e.jsx("strong",{children:"dn:"})," ",Ye.borrowed]}),e.jsxs("span",{children:[e.jsx("strong",{children:"ade:"})," ",Ye.returned]}),e.jsxs("span",{children:[e.jsx("strong",{children:"Geciken:"})," ",(()=>{const ae=k(K,x);return e.jsx("span",{style:{color:ae>0?"#ef4444":"#10b981",fontWeight:600},children:ae})})()]}),e.jsxs("span",{children:[e.jsx("strong",{children:"Aktif dn:"})," ",ke.length]})]})]},K)}):e.jsx("div",{style:{padding:"20px",textAlign:"center",color:"#6b7280"},children:"Arama sonucu bulunamad"})}),me&&e.jsxs("div",{style:{marginTop:"8px",padding:"16px",backgroundColor:"#eff6ff",borderRadius:"8px",border:"1px solid #3b82f6"},children:[e.jsxs("div",{style:{fontWeight:600,marginBottom:"12px",fontSize:"16px",color:"#1f2937"},children:["Seilen renci: ",me]}),(()=>{const x=r.find(ae=>`${ae.name} ${ae.surname}`.trim()===me||ae.name===me||ae.surname===me)??null;if(!x)return null;const K=C(me,x),ke=t.filter(ae=>K.has(h(ae.borrower))&&n.some(ct=>ct.id===ae.bookId)).length,Ye=so(x,ke);return e.jsxs("div",{style:{display:"flex",flexDirection:"column",gap:"8px",marginBottom:"12px"},children:[e.jsxs("div",{style:{display:"flex",gap:"16px",flexWrap:"wrap"},children:[e.jsxs("div",{style:{fontSize:"14px"},children:[e.jsx("strong",{children:"Toplam dn:"})," ",Ye.borrowed]}),e.jsxs("div",{style:{fontSize:"14px"},children:[e.jsx("strong",{children:"ade:"})," ",Ye.returned]}),e.jsxs("div",{style:{fontSize:"14px"},children:[e.jsx("strong",{children:"Geciken Kitap:"})," ",(()=>{const ae=k(me,x);return e.jsx("span",{style:{color:ae>0?"#ef4444":"#10b981",fontWeight:600},children:ae})})()]}),e.jsxs("div",{style:{fontSize:"14px"},children:[e.jsx("strong",{children:"Aktif dn:"})," ",e.jsxs(e.Fragment,{children:[e.jsx("span",{style:{color:ke>0?"#3b82f6":"#10b981",fontWeight:600},children:ke}),e.jsxs("span",{style:{fontSize:"12px",color:"#64748b",marginLeft:"8px"},children:["/ ",st," (Limit)"]})]})]})]}),(()=>{const ae=pn(de,me),ct=ke+ae.length,Wt=st-ke,ht=de.length-ae.length;return ct>st?e.jsxs("div",{style:{padding:"8px",backgroundColor:"#fee2e2",borderRadius:"6px",color:"#dc2626",fontSize:"13px",fontWeight:600,marginBottom:"8px"},children:[" Bu ilem sonras renci ",ct," kitap alacak (Limit: ",st,"). Onay gerekecek!",ht>0&&e.jsxs("span",{style:{display:"block",fontSize:"12px",marginTop:"4px"},children:["(",ht," kitap zaten dnte, verilemeyecek)"]})]}):Wt>0&&Wt<=2&&ae.length>0?e.jsxs("div",{style:{padding:"8px",backgroundColor:"#fef3c7",borderRadius:"6px",color:"#92400e",fontSize:"13px",fontWeight:600,marginBottom:"8px"},children:[" rencinin ",Wt," kitap daha alma hakk var.",ht>0&&e.jsxs("span",{style:{display:"block",fontSize:"12px",marginTop:"4px"},children:["(",ht," kitap zaten dnte, verilemeyecek)"]})]}):ht>0?e.jsxs("div",{style:{padding:"8px",backgroundColor:"#fee2e2",borderRadius:"6px",color:"#dc2626",fontSize:"13px",fontWeight:600,marginBottom:"8px"},children:[" Seilen kitaplardan ",ht," tanesi renci tarafndan zaten dn alnm. Bu kitaplar verilmeyecek."]}):null})(),(()=>{const ae=k(me,x);return ae>0&&e.jsxs("div",{style:{padding:"8px",backgroundColor:"#fee2e2",borderRadius:"6px",color:"#dc2626",fontSize:"13px",fontWeight:600},children:[" Bu rencinin ",ae," geciken kitab var!"]})})()]})})(),e.jsx("button",{onClick:()=>{Ct("")},style:{padding:"6px 16px",fontSize:"13px",backgroundColor:"#ef4444",color:"white",border:"none",borderRadius:"6px",cursor:"pointer",fontWeight:600},children:"Seimi Kaldr"})]})]}),e.jsxs("div",{children:[e.jsx("label",{style:{display:"block",marginBottom:"8px",fontWeight:600,fontSize:"14px"},children:"dn Sresi (Gn) *"}),e.jsxs("select",{value:tt,onChange:x=>Lt(parseInt(x.target.value)),style:{width:"100%",padding:"10px",borderRadius:"6px",border:"1px solid #e5e7eb"},children:[e.jsx("option",{value:7,children:"7 Gn"}),e.jsx("option",{value:10,children:"10 Gn"}),e.jsx("option",{value:14,children:"14 Gn"}),e.jsx("option",{value:21,children:"21 Gn"}),e.jsx("option",{value:30,children:"30 Gn"})]})]}),Z&&e.jsx("div",{style:{padding:"12px",backgroundColor:"#fee2e2",color:"#dc2626",borderRadius:"8px"},children:Z}),Mt&&e.jsx("div",{style:{padding:"10px",backgroundColor:"#fef2f2",color:"#b91c1c",borderRadius:"6px",fontWeight:600},children:" Mevcut adedi 0 olan veya salam kopyas kalmayan kitaplar seimde. Ltfen bu kitaplar kaldrn."}),e.jsxs("div",{style:{display:"flex",gap:"12px",justifyContent:"flex-end"},children:[e.jsx("button",{onClick:()=>{ne(!1),Ce([]),Ct(""),He(""),gt(""),$e(null)},style:{padding:"10px 20px",fontSize:"14px",backgroundColor:"#f3f4f6",color:"#374151",border:"none",borderRadius:"6px",cursor:"pointer",fontWeight:600},children:"ptal"}),e.jsx("button",{onClick:async()=>{if(de.length===0){$e("Ltfen en az bir kitap sein");return}if(!me){$e("Ltfen bir renci sein");return}if(tt<1){$e("dn sresi en az 1 gn olmaldr");return}if(Mt){$e("Mevcut adedi 0 olan veya salam kopyas kalmayan kitaplar dn verilemez.");return}const x=r.find(Wt=>`${Wt.name} ${Wt.surname}`.trim()===me||Wt.name===me||Wt.surname===me)??null,K=(x==null?void 0:x.penaltyPoints)||0;if(K>=Ee){$e(`Bu renci cezal durumda (Ceza Puan: ${K}). Kitap dn alamaz.`);return}const Q=pn(de,me);if(Q.length===0){$e("Seilen kitaplarn hepsi renci tarafndan zaten dn alnm!");return}const ke=C(me,x),ct=t.filter(Wt=>ke.has(h(Wt.borrower))&&n.some(ht=>ht.id===Wt.bookId)).length+Q.length;if(!(ct>st&&!await new Promise(ht=>{Bn({title:"Kitap Limiti Uyars",message:`Bu ilem sonras renci ${ct} kitap alacak (Limit: ${st}). Devam etmek istiyor musunuz?`,type:"warning",icon:""}),$t(!0),window.__borrowLimitConfirm=ht})))try{Pe(!0),$e(null);for(const Wt of Q)await xe.post(`/books/${Wt.id}/borrow`,{borrower:me,days:tt,personelName:o.trim()});ne(!1),Ce([]),Ct(""),He(""),gt(""),$e(null),await i()}catch(Wt){$e(Wt instanceof Error?Wt.message:"dn verme ilemi baarsz oldu")}finally{Pe(!1)}},disabled:en,style:{padding:"10px 20px",fontSize:"14px",backgroundColor:en?"#9ca3af":"#10b981",color:"white",border:"none",borderRadius:"6px",cursor:en?"not-allowed":"pointer",fontWeight:600},children:ve?"leniyor...":"dn Ver"})]})]})]})}),document.body),Ht&&_t.createPortal(e.jsx("div",{style:{position:"fixed",top:0,left:0,right:0,bottom:0,backgroundColor:"rgba(0, 0, 0, 0.5)",display:"flex",alignItems:"center",justifyContent:"center",zIndex:10003,cursor:"pointer"},onClick:()=>{Ft(!1),At(null),H(""),Ne(new Set),Me(null)},children:e.jsxs("div",{className:"card",style:{maxWidth:"800px",width:"90%",maxHeight:"90vh",overflow:"auto",backgroundColor:"white",position:"relative",cursor:"default"},onClick:x=>x.stopPropagation(),children:[e.jsxs("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center",marginBottom:"24px"},children:[e.jsx("h2",{style:{margin:0},children:"Seilenleri Dzenle"}),e.jsx("button",{onClick:()=>{Ft(!1),At(null),H(""),Ne(new Set)},style:{background:"none",border:"none",fontSize:"24px",cursor:"pointer",color:"#64748b",padding:0,width:"32px",height:"32px",display:"flex",alignItems:"center",justifyContent:"center"},children:""})]}),nt?e.jsxs("div",{children:[e.jsxs("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center",marginBottom:"16px"},children:[e.jsxs("div",{children:[e.jsxs("strong",{style:{fontSize:"16px"},children:[nt==="extendDays"?"Sre Uzatma":"Personel"," Dzenleme"]}),e.jsxs("p",{style:{margin:"4px 0 0 0",color:"#64748b",fontSize:"14px"},children:[Te.size," kitap seildi"]})]}),e.jsx("button",{onClick:()=>{At(null),H(""),Ne(new Set),Me(null)},style:{padding:"6px 12px",borderRadius:"6px",border:"1px solid #e5e7eb",background:"#fff",cursor:"pointer",fontSize:"14px"},children:" Geri"})]}),e.jsx("div",{style:{maxHeight:"500px",overflowY:"auto",border:"1px solid #e5e7eb",borderRadius:"8px",padding:"12px"},children:Cn.filter(x=>Te.has(x.bookId)).map(x=>x.allLoans.map(K=>{const Q=`${K.bookId}|||${K.borrower}`,ke=A.has(Q),Ye=nt==="extendDays"?"7 gn":nt==="personel"&&K.personel||"";return e.jsxs("div",{style:{marginBottom:"16px",padding:"12px",backgroundColor:"#f8fafc",borderRadius:"6px",display:"flex",gap:"12px",alignItems:"flex-start"},children:[e.jsx("div",{onClick:()=>{const ae=new Set(A);ke?ae.delete(Q):ae.add(Q),Ne(ae)},style:{width:"24px",height:"24px",borderRadius:"50%",border:ke?"2px solid #3b82f6":"2px solid #cbd5e1",background:ke?"#3b82f6":"white",cursor:"pointer",display:"flex",alignItems:"center",justifyContent:"center",transition:"all 0.2s",flexShrink:0,marginTop:"2px"},children:ke&&e.jsx("span",{style:{color:"white",fontSize:"14px",fontWeight:"bold"},children:""})}),e.jsx("div",{style:{flex:1},children:e.jsxs("div",{children:[e.jsx("strong",{children:K.title}),e.jsxs("div",{style:{fontSize:"12px",color:"#64748b",marginTop:"4px"},children:["renci: ",K.borrower]}),e.jsxs("div",{style:{fontSize:"12px",color:"#64748b"},children:["Mevcut: ",Ye||""]})]})})]},Q)})).flat()}),e.jsxs("div",{style:{marginTop:"24px",padding:"16px",backgroundColor:"#f8fafc",borderRadius:"8px",border:"1px solid #e2e8f0"},children:[e.jsxs("label",{style:{display:"block",marginBottom:"8px",fontWeight:600,fontSize:"14px"},children:[nt==="extendDays"?"Sre (Gn)":"Personel Ad"," *"]}),nt==="extendDays"?e.jsxs("select",{value:T,onChange:x=>H(x.target.value),style:{width:"100%",padding:"10px",borderRadius:"6px",border:"1px solid #d1d5db"},children:[e.jsx("option",{value:"",children:" Seiniz "}),e.jsx("option",{value:"7",children:"7 gn"}),e.jsx("option",{value:"10",children:"10 gn"}),e.jsx("option",{value:"14",children:"14 gn"}),e.jsx("option",{value:"21",children:"21 gn"}),e.jsx("option",{value:"30",children:"30 gn"})]}):nt==="personel"?e.jsx("input",{type:"text",value:T,onChange:x=>H(x.target.value),placeholder:"Personel adn girin (bo brakabilirsiniz)",style:{width:"100%",padding:"10px",borderRadius:"6px",border:"1px solid #d1d5db"}}):null,e.jsxs("p",{style:{margin:"8px 0 0 0",fontSize:"12px",color:"#64748b"},children:["Bu deer seili olan ",A.size," dn kaydna uygulanacak"]})]}),be&&e.jsx("div",{style:{marginTop:"16px",padding:"12px",backgroundColor:"#fee2e2",color:"#dc2626",borderRadius:"8px"},children:be}),e.jsxs("div",{style:{marginTop:"24px",display:"flex",gap:"12px",justifyContent:"flex-end"},children:[e.jsx("button",{onClick:()=>{Ft(!1),At(null),H(""),Ne(new Set)},style:{padding:"10px 20px",borderRadius:"6px",border:"1px solid #e5e7eb",background:"#fff",cursor:"pointer",fontSize:"14px",fontWeight:600},children:"ptal"}),e.jsx("button",{onClick:async()=>{const x=A.size;if(x===0){Me("Ltfen en az bir dn kayd sein");return}if(nt==="extendDays"&&!T){Me("Ltfen sre sein");return}if(await new Promise(Q=>{Bn({title:"Toplu Dzenleme Onay",message:`${x} dn kaydnn ${nt==="extendDays"?"sresini uzatmak":"Personel bilgisini gncellemek"} istediinize emin misiniz?`,type:"warning",icon:""}),$t(!0),window.__bulkEditConfirm=Q}))try{Pe(!0),Me(null);for(const Q of A){const[ke,Ye]=Q.split("|||");if(nt==="extendDays")await xe.post(`/books/${ke}/return`,{borrower:Ye,personelName:o.trim()}),await xe.post(`/books/${ke}/borrow`,{borrower:Ye,days:parseInt(T||"7"),personelName:o.trim()});else if(nt==="personel"){const ae=t.find(ct=>ct.bookId===ke&&ct.borrower===Ye);ae&&(await xe.post(`/books/${ke}/return`,{borrower:Ye,personelName:o.trim()}),await xe.post(`/books/${ke}/borrow`,{borrower:Ye,days:(()=>{const ct=Math.ceil((new Date(ae.dueDate).getTime()-Date.now())/864e5);return ct>0?ct:7})(),personelName:(T==null?void 0:T.trim())||o.trim()}))}}Ft(!1),At(null),H(""),Ne(new Set),Me(null),N(!1),wt(new Set),await i()}catch(Q){Me(Q instanceof Error?Q.message:"Dzenleme ilemi baarsz oldu")}finally{Pe(!1)}},disabled:ve,style:{padding:"10px 20px",fontSize:"14px",backgroundColor:ve?"#9ca3af":"#3b82f6",color:"white",border:"none",borderRadius:"6px",cursor:ve?"not-allowed":"pointer",fontWeight:600},children:ve?"leniyor...":"Gncelle"})]})]}):e.jsxs("div",{children:[e.jsx("label",{style:{display:"block",marginBottom:"8px",fontWeight:600,fontSize:"14px"},children:"Dzenlenecek Alan Sein"}),e.jsxs("select",{value:"",onChange:x=>{At(x.target.value),H(""),Ne(new Set)},style:{width:"100%",padding:"10px",borderRadius:"6px",border:"1px solid #d1d5db",marginBottom:"24px"},children:[e.jsx("option",{value:"",children:"-- Seiniz --"}),e.jsx("option",{value:"extendDays",children:"Sre Uzatma (Gn)"}),e.jsx("option",{value:"personel",children:"Personel"})]})]})]})}),document.body),he&&_t.createPortal(e.jsx("div",{style:{position:"fixed",top:0,left:0,right:0,bottom:0,backgroundColor:"rgba(0, 0, 0, 0.5)",display:"flex",alignItems:"center",justifyContent:"center",zIndex:10002},onClick:()=>it(null),children:e.jsxs("div",{className:"card",style:{maxWidth:"500px",width:"90%",maxHeight:"90vh",overflow:"auto",position:"relative"},onClick:x=>x.stopPropagation(),children:[e.jsxs("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center",marginBottom:"24px"},children:[e.jsxs("h2",{style:{margin:0,color:"#1e293b",display:"flex",alignItems:"center",gap:"8px"},children:[e.jsxs("svg",{width:"20",height:"20",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:[e.jsx("circle",{cx:"12",cy:"12",r:"10"}),e.jsx("polyline",{points:"12 6 12 12 16 14"})]}),"Sre Uzat"]}),e.jsx("button",{onClick:()=>it(null),style:{background:"none",border:"none",fontSize:"24px",cursor:"pointer",color:"#64748b",padding:0,width:"32px",height:"32px",display:"flex",alignItems:"center",justifyContent:"center"},children:""})]}),e.jsxs("div",{style:{display:"flex",flexDirection:"column",gap:"20px"},children:[e.jsxs("div",{style:{padding:"16px",backgroundColor:"#f8fafc",borderRadius:"8px",border:"1px solid #e2e8f0"},children:[e.jsx("div",{style:{fontWeight:600,marginBottom:"8px",fontSize:"16px"},children:he.title}),e.jsxs("div",{style:{fontSize:"14px",color:"#64748b"},children:[he.author,"  ",he.category]}),e.jsxs("div",{style:{fontSize:"13px",color:"#64748b",marginTop:"4px"},children:["Mevcut Teslim Tarihi: ",new Date(he.dueDate).toLocaleDateString("tr-TR")]})]}),e.jsxs("div",{style:{padding:"20px",backgroundColor:"#ffffff",borderRadius:"12px",border:"1px solid #e2e8f0"},children:[e.jsx("h3",{style:{marginTop:0,marginBottom:"16px",fontSize:"18px",fontWeight:600,color:"#1e293b"},children:"Yeni Sre Sein"}),e.jsxs("div",{style:{display:"flex",flexDirection:"column",gap:"12px"},children:[e.jsx("label",{style:{fontSize:"14px",fontWeight:600,color:"#64748b"},children:"Uzatma Sresi (Gn)"}),e.jsxs("select",{value:se,onChange:x=>fe(parseInt(x.target.value)),style:{width:"100%",padding:"10px",borderRadius:"6px",border:"1px solid #d1d5db",fontSize:"14px"},children:[e.jsx("option",{value:7,children:"7 Gn"}),e.jsx("option",{value:14,children:"14 Gn"}),e.jsx("option",{value:21,children:"21 Gn"}),e.jsx("option",{value:30,children:"30 Gn"})]}),e.jsxs("div",{style:{fontSize:"12px",color:"#64748b",marginTop:"4px"},children:["Yeni teslim tarihi: ",new Date(Date.now()+se*24*60*60*1e3).toLocaleDateString("tr-TR")]})]})]}),e.jsxs("div",{style:{display:"flex",gap:"12px",justifyContent:"flex-end"},children:[e.jsx("button",{onClick:()=>it(null),style:{padding:"10px 20px",fontSize:"14px",backgroundColor:"#f3f4f6",color:"#374151",border:"none",borderRadius:"6px",cursor:"pointer",fontWeight:600},children:"ptal"}),e.jsx("button",{onClick:async()=>{if(!(!he||!o))try{Pe(!0),await xe.post(`/books/${he.bookId}/return`,{borrower:he.borrower,personelName:o.trim()}),await xe.post(`/books/${he.bookId}/borrow`,{borrower:he.borrower,days:se,personelName:o.trim()}),it(null),i&&await i()}catch(x){Le("Hata",x instanceof Error?x.message:"Sre uzatma baarsz oldu","error","")}finally{Pe(!1)}},disabled:ve||!o,style:{padding:"10px 20px",fontSize:"14px",backgroundColor:ve||!o?"#9ca3af":"#3b82f6",color:"white",border:"none",borderRadius:"6px",cursor:ve||!o?"not-allowed":"pointer",fontWeight:600,display:"flex",alignItems:"center",justifyContent:"center",gap:"6px"},children:ve?"leniyor...":e.jsxs(e.Fragment,{children:[e.jsxs("svg",{width:"16",height:"16",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:[e.jsx("circle",{cx:"12",cy:"12",r:"10"}),e.jsx("polyline",{points:"12 6 12 12 16 14"})]}),"Sre Uzat"]})})]})]})]})}),document.body),De&&ze&&e.jsx(ao,{book:ze,books:n,loans:t,students:r,personelName:o,onClose:()=>{ft(!1),P(null)},onRefresh:i}),e.jsx(ur,{isOpen:J,title:"Kitap Teslim Alma Onay",icon:"",onConfirm:async()=>{ge&&await Xt(ge)},onCancel:()=>{te(!1),v(null)},confirmText:"Teslim Al",cancelText:"ptal",confirmButtonColor:"#10b981",loading:$,children:ge?e.jsxs("div",{style:{fontSize:"14px",color:"#475569",lineHeight:"1.6"},children:[e.jsx("strong",{children:ge.borrower})," adl rencinin ",e.jsx("strong",{children:ge.title})," kitabn teslim almak istediinize emin misiniz?"]}):null}),e.jsx(ur,{isOpen:Ue,title:"Toplu dn Silme",icon:"",onConfirm:Mn,onCancel:ln,confirmText:"Tamam, Sil",cancelText:"ptal",confirmButtonColor:"#ef4444",loading:Dt,disabled:(rt==null?void 0:rt.selectedItems.size)===0,children:rt?e.jsxs(e.Fragment,{children:[e.jsx("div",{style:{fontSize:"14px",color:"#475569",marginBottom:"16px",lineHeight:"1.6"},children:e.jsx("strong",{children:"Silinecekler ierisinde dn listesi olanlar var:"})}),e.jsx("div",{style:{maxHeight:"400px",overflowY:"auto",marginBottom:"16px"},children:rt.items.map((x,K)=>{const Q=x.loan.dueDate?new Date(x.loan.dueDate).toLocaleDateString("tr-TR"):"-",ke=rt.selectedItems.has(x.id);return e.jsxs("div",{style:{padding:"12px",backgroundColor:"#fef3c7",borderRadius:"8px",border:"1px solid #fbbf24",marginBottom:"12px"},children:[e.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"12px",marginBottom:"8px"},children:[e.jsx("div",{onClick:()=>{const Ye=new Set(rt.selectedItems);ke?Ye.delete(x.id):Ye.add(x.id),yt({...rt,selectedItems:Ye})},style:{width:"24px",height:"24px",borderRadius:"4px",border:"2px solid #fbbf24",backgroundColor:ke?"#f59e0b":"transparent",display:"flex",alignItems:"center",justifyContent:"center",cursor:"pointer",flexShrink:0,color:"white",fontWeight:"bold",fontSize:"14px"},children:ke&&e.jsx("span",{children:""})}),e.jsx("div",{style:{flex:1},children:e.jsxs("div",{style:{fontSize:"14px",color:"#92400e",fontWeight:600},children:[x.loan.title," - ",x.loan.borrower]})})]}),e.jsx("ul",{style:{margin:0,paddingLeft:"40px",fontSize:"13px",color:"#78350f"},children:e.jsxs("li",{style:{marginBottom:"4px"},children:["Teslim: ",Q,x.loan.personel&&`  Personel: ${x.loan.personel}`]})})]},K)})}),e.jsxs("div",{style:{fontSize:"13px",color:"#64748b",padding:"12px",backgroundColor:"#f1f5f9",borderRadius:"8px"},children:[e.jsxs("strong",{children:[rt.selectedItems.size," dn kayd"]})," silinecek."]})]}):e.jsx("div",{style:{fontSize:"14px",color:"#475569"},children:"Silinecek kaytlar hazrlanyor..."})}),e.jsx(zi,{isOpen:Ut,title:(Tt==null?void 0:Tt.title)||"Bilgi",icon:Tt==null?void 0:Tt.icon,type:(Tt==null?void 0:Tt.type)||"info",onClose:()=>{$t(!1),Bn(null),window.__borrowLimitConfirm&&(window.__borrowLimitConfirm(!1),delete window.__borrowLimitConfirm),window.__bulkEditConfirm&&(window.__bulkEditConfirm(!1),delete window.__bulkEditConfirm)},onConfirm:(Tt==null?void 0:Tt.type)==="warning"?()=>{window.__borrowLimitConfirm&&(window.__borrowLimitConfirm(!0),delete window.__borrowLimitConfirm),window.__bulkEditConfirm&&(window.__bulkEditConfirm(!0),delete window.__bulkEditConfirm)}:void 0,confirmText:"Onayla",children:e.jsx("div",{style:{fontSize:"14px",color:"#475569",lineHeight:"1.6"},children:Tt==null?void 0:Tt.message})}),e.jsx(lc,{isOpen:!!B,onClose:()=>{m(null),w(null)},student:B,loans:t,books:n,personelName:o,onRefresh:i,onBookClick:x=>{xt(x.id),Re(!0)},maxPenaltyPoints:Ee,loading:Y,studentHistory:bn||void 0,historyEntries:(bn==null?void 0:bn.entries)??[]})]})},Ni=t=>t.replace(/\s+/g," ").trim().toLowerCase(),ca=(t,n)=>{if(t.studentNumber)return`num:${t.studentNumber}`;const r=`${t.name||""} ${t.surname||""}`.trim(),i=r?Ni(r):"";return i?`name:${i}`:`idx:${n}`},zu=t=>{if(t.studentNumber!==void 0&&t.studentNumber!==null)return`number:${t.studentNumber}`;const n=(t.name||"").trim().toLowerCase(),r=(t.surname||"").trim().toLowerCase();return`${n}:${r}`},Yl=t=>Math.max((t==null?void 0:t.borrowed)??0,0),Gl=t=>Math.max((t==null?void 0:t.returned)??0,0),of=t=>Math.max((t==null?void 0:t.late)??0,0),Wl=t=>Math.max(Yl(t)-Gl(t),0),ko=t=>of(t),Yg=(t,n)=>{const r=`${t.name} ${t.surname}`.trim();return n.filter(i=>i.borrower===t.name||i.borrower===r).length},Gg=(t,n)=>{if(!t||!n)return null;const r=new Date(t),i=new Date(n);if(Number.isNaN(r.getTime())||Number.isNaN(i.getTime()))return null;const o=i.getTime()-r.getTime();return o<0?0:Math.max(1,Math.round(o/(1e3*60*60*24)))},Ji=({students:t,loans:n=[],books:r=[],resetSearch:i=!1,filterVariant:o="full",onRefresh:l,classes:s=[],branches:u=[],onAddStudent:d,personelName:h="",onAddNotification:C,onShowInfo:k})=>{var Bn,bn;const S="__OTHER__",[B,m]=a.useState(100),I=w=>n&&n.length>0?Yg(w,n):Wl(w);a.useEffect(()=>{(async()=>{try{const Y=await xe.get("/system-settings");console.log("[StudentList] Sistem ayarlar yklendi:",Y),console.log("[StudentList] Max Penalty Points:",Y.maxPenaltyPoints),m(Y.maxPenaltyPoints)}catch(Y){console.error("Sistem ayarlar yklenemedi:",Y)}})()},[]);const[F,y]=a.useState(""),[f,b]=a.useState(!1),[D,q]=a.useState(!1),[V,ie]=a.useState({name:"",surname:"",class:"",classOther:"",branch:"",branchOther:"",studentNumber:""}),[M,re]=a.useState(null),[ce,Oe]=a.useState(!1),[Re,_e]=a.useState(null),[xt,De]=a.useState(new Map),ft=a.useMemo(()=>{if(s.length>0)return s;const w=new Set(t.map(Y=>Y.class).filter(Boolean));return Array.from(w).sort((Y,ee)=>(Y||0)-(ee||0))},[t,s]),ze=a.useMemo(()=>{if(u.length>0)return u;const w=new Set(t.map(Y=>Y.branch).filter(Boolean));return Array.from(w).sort()},[t,u]),[P,se]=a.useState(""),[fe,ve]=a.useState(""),[Pe,bt]=a.useState("none"),[lt,be]=a.useState("all"),[Me,et]=a.useState(null),[Qe,Z]=a.useState("asc"),[$e,Xe]=a.useState(1),[Ge]=a.useState(20),[mt,kt]=a.useState(""),[ot,We]=a.useState(null),[st,Bt]=a.useState(null),[Ee,Et]=a.useState(!1),[c,N]=a.useState(null),[oe,Ae]=a.useState(new Set);a.useEffect(()=>{if(!t.length)return;const w=t.slice(0,15).map(Y=>({name:`${Y.name??""} ${Y.surname??""}`.trim()||"(ad yok)",borrowed:Yl(Y),returned:Gl(Y),active:Wl(Y)}));console.debug("[StudentList][Counters]",w)},[t]),a.useEffect(()=>{ot&&console.debug("[StudentList][DetailCounters]",{name:`${ot.name??""} ${ot.surname??""}`.trim()||"(ad yok)",borrowed:Yl(ot),returned:Gl(ot),active:Wl(ot),late:of(ot)})},[ot]),a.useEffect(()=>{if(!ot){Bt(null),N(null),Et(!1);return}const w=`${ot.name} ${ot.surname}`.trim()||ot.name,Y={studentNumber:ot.studentNumber,borrower:w||void 0};let ee=!1;return Et(!0),N(null),xe.get("/statistics/student-history",Y).then(g=>{ee||Bt(g)}).catch(g=>{ee||(N(g instanceof Error?g.message:"Gemi istatistikler yklenemedi"),Bt(null))}).finally(()=>{ee||Et(!1)}),()=>{ee=!0}},[ot]),a.useEffect(()=>{if(!ot)return;const w=zu(ot),Y=t.find(R=>zu(R)===w);if(!Y)return;const ee=Y.borrowed!==ot.borrowed||Y.returned!==ot.returned||Y.late!==ot.late||(Y.penaltyPoints||0)!==(ot.penaltyPoints||0)||!!Y.isBanned!=!!ot.isBanned,g=Y.name!==ot.name||Y.surname!==ot.surname||Y.class!==ot.class||Y.branch!==ot.branch||Y.studentNumber!==ot.studentNumber;(ee||g)&&We(Y)},[t,ot]);const[Be,ye]=a.useState(null),[Ve,jt]=a.useState(null),[zt,nn]=a.useState(7),[Te,wt]=a.useState(!1),[_,ne]=a.useState(null),[ue,He]=a.useState(!1),[Se,gt]=a.useState(new Set),[de,Ce]=a.useState(null),[me,Ct]=a.useState(!1),[tt,Lt]=a.useState(!1),Ht=async()=>{const w=V.name.trim(),Y=V.surname.trim(),ee=V.studentNumber?parseInt(V.studentNumber,10):null,g=V.class===S?V.classOther:V.class,R=V.branch===S?V.branchOther:V.branch,J=g?parseInt(g,10):null,te=(R==null?void 0:R.trim())||null;if(!w||!Y){re("Ad ve soyad zorunludur");return}if(!ee){re("renci numaras zorunludur");return}if(!g){re("Snf zorunludur");return}if(g&&Number.isNaN(J)){re("Snf saysal olmaldr");return}if(!R){re("ube zorunludur");return}wt(!0),re(null);try{d?await d({name:w,surname:Y,class:J,branch:te,studentNumber:ee}):(await xe.post("/admin/students",{name:w,surname:Y,class:J,branch:te,studentNumber:ee,personelName:h||""}),l&&await l()),q(!1),ie({name:"",surname:"",class:"",classOther:"",branch:"",branchOther:"",studentNumber:""}),re(null)}catch(ge){re(ge instanceof Error?ge.message:"renci eklenemedi")}finally{wt(!1)}},Ft=o==="search-only",nt=o==="compact"||Ft;a.useEffect(()=>{i&&(y(""),se(""),ve(""),bt("none"),be("all"))},[i]);const At=a.useMemo(()=>{let w=[...t];return F&&F.trim()&&(w=w.filter(Y=>G(Y.name,F)||G(Y.surname,F)||G(`${Y.name} ${Y.surname}`.trim(),F)||G(Y.studentNumber,F)||G(Y.class,F)||G(Y.branch,F)||Y.class&&Y.branch&&G(`${Y.class}-${Y.branch}`,F)||Y.class&&Y.branch&&G(`${Y.class}${Y.branch}`,F)||G(Y.borrowed,F)||G(Y.returned,F)||G(Y.late,F)||Y.borrowed!==void 0&&Y.returned!==void 0&&G((Y.borrowed-Y.returned).toString(),F))),!nt&&P&&(w=w.filter(Y=>{var ee;return((ee=Y.class)==null?void 0:ee.toString())===P})),!nt&&fe&&(w=w.filter(Y=>Y.branch===fe)),nt&&!Ft&&lt!=="all"&&(w=w.filter(Y=>{const ee=I(Y),g=ko(Y);return lt==="active"?ee>0:lt==="late"?g>0:ee===0&&g===0})),Pe!=="none"&&(w=[...w].sort((Y,ee)=>{switch(Pe){case"name-asc":const g=(Y.name||"").localeCompare(ee.name||"","tr");return g!==0?g:(Y.surname||"").localeCompare(ee.surname||"","tr");case"name-desc":const R=(ee.name||"").localeCompare(Y.name||"","tr");return R!==0?R:(ee.surname||"").localeCompare(Y.surname||"","tr");case"class-asc":return(Y.class||0)-(ee.class||0);case"class-desc":return(ee.class||0)-(Y.class||0);case"borrowed-asc":return Y.borrowed-ee.borrowed;case"borrowed-desc":return ee.borrowed-Y.borrowed;default:return 0}})),Me?w=[...w].sort((Y,ee)=>{let g=0;switch(Me){case"name":g=(Y.name||"").localeCompare(ee.name||"","tr"),g===0&&(g=(Y.surname||"").localeCompare(ee.surname||"","tr"));break;case"surname":g=(Y.surname||"").localeCompare(ee.surname||"","tr"),g===0&&(g=(Y.name||"").localeCompare(ee.name||"","tr"));break;case"studentNumber":g=(Y.studentNumber||0)-(ee.studentNumber||0);break;case"class":const R=(Y.class||0)-(ee.class||0);R!==0?g=R:g=(Y.branch||"").localeCompare(ee.branch||"","tr");break;case"branch":g=(Y.branch||"").localeCompare(ee.branch||"","tr");break;case"late":g=ko(Y)-ko(ee);break;case"activeLoans":const J=I(Y),te=I(ee);g=J-te;break;case"status":const ge=v=>{const $=v.penaltyPoints||0,le=ko(v),Le=Wl(v);return $>=B||le>0?3:Le>0?1:0};g=ge(Y)-ge(ee);break;default:g=0}return g===0&&Me!=="name"&&Me!=="surname"&&(g=(Y.name||"").localeCompare(ee.name||"","tr"),g===0&&(g=(Y.surname||"").localeCompare(ee.surname||"","tr"))),Qe==="asc"?g:-g}):Pe==="none"&&(w=[...w].sort((Y,ee)=>{const g=(Y.name||"").localeCompare(ee.name||"","tr");if(g!==0)return g;const R=(Y.surname||"").localeCompare(ee.surname||"","tr");return R!==0?R:(Y.studentNumber||0)-(ee.studentNumber||0)})),w},[t,F,P,fe,Pe,lt,nt,Ft,Me,Qe,n,r]),T=Math.max(1,Math.ceil(At.length/Ge)),H=Math.min($e,T),A=(H-1)*Ge,Ne=At.slice(A,A+Ge);a.useEffect(()=>{$e>T&&T>0&&Xe(1)},[$e,T,F,P,fe,Pe,lt,Me,Qe]);const he=()=>{const w=[];if(T<=7)for(let ee=1;ee<=T;ee++)w.push(ee);else if(w.push(1),H<=4){for(let ee=2;ee<=5;ee++)w.push(ee);w.push("..."),w.push(T)}else if(H>=T-3){w.push("...");for(let ee=T-4;ee<=T;ee++)w.push(ee)}else{w.push("...");for(let ee=H-1;ee<=H+1;ee++)w.push(ee);w.push("..."),w.push(T)}return w},it=()=>{const w=he();return e.jsxs("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center",marginTop:"16px",flexWrap:"wrap",gap:"8px"},children:[e.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"4px",flexWrap:"wrap"},children:[e.jsx("button",{onClick:()=>Xe(Math.max(1,H-1)),disabled:H===1,style:{padding:"8px 12px",borderRadius:"6px",border:"1px solid #e5e7eb",background:H===1?"#f1f5f9":"#fff",cursor:H===1?"not-allowed":"pointer",color:H===1?"#94a3b8":"#475569",fontWeight:500,fontSize:"14px"},children:"nceki"}),w.map((Y,ee)=>{if(Y==="...")return e.jsx("span",{style:{padding:"0 8px",color:"#94a3b8",fontSize:"14px"},children:"..."},`ellipsis-${ee}`);const g=Y,R=g===H;return e.jsx("span",{onClick:()=>Xe(g),style:{padding:"0 8px",color:R?"#1d4ed8":"#475569",cursor:"pointer",fontWeight:R?700:400,fontSize:"14px",textDecoration:R?"underline":"none",textUnderlineOffset:"2px"},children:g},g)}),e.jsx("button",{onClick:()=>Xe(Math.min(T,H+1)),disabled:H===T,style:{padding:"8px 12px",borderRadius:"6px",border:"1px solid #e5e7eb",background:H===T?"#f1f5f9":"#fff",cursor:H===T?"not-allowed":"pointer",color:H===T?"#94a3b8":"#475569",fontWeight:500,fontSize:"14px"},children:"Sonraki"}),e.jsx("input",{type:"number",value:mt,onChange:Y=>kt(Y.target.value),onKeyDown:Y=>{if(Y.key==="Enter"){const ee=parseInt(mt,10);ee>=1&&ee<=T?(Xe(ee),kt("")):(alert(`Ltfen 1 ile ${T} arasnda bir say girin.`),kt(""))}},placeholder:H.toString(),min:1,max:T,style:{width:"60px",padding:"6px 8px",borderRadius:"6px",border:"1px solid #e5e7eb",fontSize:"14px",textAlign:"center",marginLeft:"4px"}})]}),e.jsx("div",{style:{display:"flex",alignItems:"center",gap:"8px"},children:e.jsx("span",{style:{fontSize:"14px",color:"#64748b"},children:At.length>0?`${A+1}-${Math.min(A+Ge,At.length)} / ${At.length}`:"0"})})]})},Ue=(st==null?void 0:st.entries)??[];a.useMemo(()=>{const w=new Map;return Ue.forEach(Y=>{const ee=w.get(Y.bookId)??[];ee.push(Y),w.set(Y.bookId,ee)}),w.forEach(Y=>{Y.sort((ee,g)=>new Date(g.borrowedAt).getTime()-new Date(ee.borrowedAt).getTime())}),w},[Ue]);const Nt=a.useMemo(()=>Ue.filter(w=>{var ee;return(((ee=w.status)==null?void 0:ee.toUpperCase())??"")==="RETURNED"&&(typeof w.durationDays=="number"||w.borrowedAt&&w.returnedAt)}),[Ue]),rt=a.useMemo(()=>Nt.map(w=>w.durationDays??Gg(w.borrowedAt,w.returnedAt)).filter(w=>typeof w=="number"&&!Number.isNaN(w)),[Nt]),yt=a.useMemo(()=>{if(!rt.length)return null;const w=rt.reduce((Y,ee)=>Y+ee,0);return Math.round(w/rt.length)},[rt]),Dt=a.useMemo(()=>{var w;return((w=st==null?void 0:st.books)==null?void 0:w.reduce((Y,ee)=>Y+(ee.totalLateDays??0),0))??0},[st]),Zt=a.useMemo(()=>{if(!Ue.length)return null;let w=null;return Ue.forEach(Y=>{const ee=Y.returnedAt??Y.borrowedAt;if(!ee)return;const g=new Date(ee);Number.isNaN(g.getTime())||(!w||g.getTime()>w.getTime())&&(w=g)}),w},[Ue]),Ut=a.useMemo(()=>{if(!st)return null;const w=st.totalBorrowed??0;if(!w)return null;const Y=st.totalReturned??0;return Math.round(Y/w*100)},[st]);a.useMemo(()=>{if(!st)return[];const w=st.totalBorrowed??0,Y=st.totalReturned??0;return[{key:"avg",label:"Ortalama Okuma",value:yt!==null?`${yt} gn`:"",subLabel:rt.length>0?`${rt.length} tamamlanan kitap`:void 0,accent:"#0ea5e9"},{key:"completion",label:"Tamamlama Oran",value:Ut!==null?`%${Ut}`:"",subLabel:w>0?`${Y}/${w} kitap`:void 0,accent:"#10b981"},{key:"late-days",label:"Gecikme Gnleri",value:Dt>0?`${Dt} gn`:"Yok",subLabel:`${st.lateReturns??0} gecikme`,accent:"#ef4444"},{key:"last-activity",label:"Son Aktivite",value:Zt?Zt.toLocaleDateString("tr-TR"):"",subLabel:Zt?Zt.toLocaleTimeString("tr-TR",{hour:"2-digit",minute:"2-digit"}):void 0,accent:"#475569"}]},[st,yt,Ut,Dt,Zt,rt.length]),st&&((st.totalBorrowed??0)>0||Ue.length>0||(((Bn=st.books)==null?void 0:Bn.length)??0)>0);const[$t,Tt]=a.useState(new Set);return a.useEffect(()=>{i&&(b(!1),Tt(new Set),y(""))},[i]),a.useEffect(()=>{f||Tt(new Set)},[f]),a.useEffect(()=>{if(tt){const w=Y=>{const ee=Y.target;!ee.closest("[data-info-popover]")&&!ee.closest("[data-info-button]")&&Lt(!1)};return document.addEventListener("mousedown",w),()=>{document.removeEventListener("mousedown",w)}}},[tt]),e.jsxs("div",{className:"card",style:{position:"relative"},children:[e.jsxs("div",{style:{position:"absolute",top:"16px",right:"16px",zIndex:100},children:[e.jsx("button",{"data-info-button":!0,onClick:()=>Lt(!tt),style:{width:"32px",height:"32px",borderRadius:"50%",border:"2px solid",borderColor:tt?"#3b82f6":"#fbbf24",background:tt?"#eff6ff":"#fef9e7",cursor:"pointer",display:"flex",alignItems:"center",justifyContent:"center",fontSize:"20px",color:tt?"#1d4ed8":"#d97706",transition:"all 0.2s",fontWeight:700,boxShadow:"0 2px 4px rgba(0, 0, 0, 0.1)",position:"relative",padding:0},onMouseEnter:w=>{tt||(w.currentTarget.style.backgroundColor="#fef3c7",w.currentTarget.style.borderColor="#f59e0b")},onMouseLeave:w=>{tt||(w.currentTarget.style.backgroundColor="#fef9e7",w.currentTarget.style.borderColor="#fbbf24")},children:e.jsxs("svg",{width:"18",height:"18",viewBox:"0 0 24 24",fill:"none",stroke:tt?"#1d4ed8":"#d97706",strokeWidth:"2.5",strokeLinecap:"round",strokeLinejoin:"round",style:{display:"block"},children:[e.jsx("path",{d:"M21 15a2 2 0 0 1-2 2H7l-4 4V5a2 2 0 0 1 2-2h14a2 2 0 0 1 2 2z"}),e.jsx("line",{x1:"9",y1:"10",x2:"15",y2:"10"}),e.jsx("line",{x1:"9",y1:"14",x2:"15",y2:"14"})]})}),tt&&e.jsxs("div",{"data-info-popover":!0,style:{position:"absolute",top:"40px",right:"0",width:"400px",maxWidth:"90vw",backgroundColor:"#fef9e7",borderRadius:"12px",border:"1px solid #fbbf24",boxShadow:"0 10px 25px rgba(0, 0, 0, 0.15)",padding:"20px",zIndex:1001,fontSize:"14px"},onClick:w=>w.stopPropagation(),children:[e.jsx("div",{style:{position:"absolute",top:"-8px",right:"20px",width:"16px",height:"16px",backgroundColor:"#fef9e7",borderLeft:"1px solid #fbbf24",borderTop:"1px solid #fbbf24",transform:"rotate(45deg)"}}),e.jsxs("div",{style:{display:"flex",flexDirection:"column",gap:"20px"},children:[e.jsxs("div",{children:[e.jsxs("h3",{style:{marginTop:0,marginBottom:"10px",fontSize:"16px",fontWeight:600,color:"#1e293b",display:"flex",alignItems:"center",gap:"6px"},children:[e.jsxs("svg",{width:"18",height:"18",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:[e.jsx("path",{d:"M10.29 3.86L1.82 18a2 2 0 0 0 1.71 3h16.94a2 2 0 0 0 1.71-3L13.71 3.86a2 2 0 0 0-3.42 0z"}),e.jsx("line",{x1:"12",y1:"9",x2:"12",y2:"13"}),e.jsx("line",{x1:"12",y1:"17",x2:"12.01",y2:"17"})]}),"Ceza Puan Sistemi"]}),e.jsxs("div",{style:{display:"flex",flexDirection:"column",gap:"8px",fontSize:"13px",color:"#475569",lineHeight:"1.5"},children:[e.jsxs("p",{style:{margin:0},children:[e.jsx("strong",{style:{color:"#1e293b"},children:"Otomatik Hesaplama:"})," Geciken kitaplarn toplam gecikme gn says kadar otomatik hesaplanr."]}),e.jsxs("p",{style:{margin:0},children:[e.jsx("strong",{style:{color:"#1e293b"},children:"Maksimum Deer:"})," Hesaplanan deer mevcut deerden bykse gncellenir. Kitaplar teslim edilse bile maksimum deer korunur."]}),e.jsxs("p",{style:{margin:0},children:[e.jsx("strong",{style:{color:"#1e293b"},children:"Manuel Gncelleme:"}),' Personeller "Gncelle" butonu ile manuel deitirebilir.']}),e.jsxs("p",{style:{margin:0},children:[e.jsx("strong",{style:{color:"#ef4444"},children:"Ceza Durumu:"})," Ceza puan ",B," veya zeri olan renciler kitap alamaz."]})]})]}),e.jsxs("div",{children:[e.jsxs("h3",{style:{marginTop:0,marginBottom:"10px",fontSize:"16px",fontWeight:600,color:"#1e293b",display:"flex",alignItems:"center",gap:"6px"},children:[e.jsxs("svg",{width:"18",height:"18",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:[e.jsx("line",{x1:"18",y1:"20",x2:"18",y2:"10"}),e.jsx("line",{x1:"12",y1:"20",x2:"12",y2:"4"}),e.jsx("line",{x1:"6",y1:"20",x2:"6",y2:"14"})]}),"Durum Stunu"]}),e.jsxs("div",{style:{display:"flex",flexDirection:"column",gap:"8px",fontSize:"13px",color:"#475569",lineHeight:"1.5"},children:[e.jsxs("div",{style:{display:"flex",alignItems:"flex-start",gap:"8px"},children:[e.jsx("span",{style:{fontSize:"16px"},children:""}),e.jsxs("div",{children:[e.jsx("strong",{style:{color:"#ef4444"},children:"Ceza:"})," Ceza puan ",B," veya geciken kitap varsa."]})]}),e.jsxs("div",{style:{display:"flex",alignItems:"flex-start",gap:"8px"},children:[e.jsx("span",{style:{fontSize:"16px"},children:""}),e.jsxs("div",{children:[e.jsx("strong",{style:{color:"#3b82f6"},children:"Aktif:"})," Aktif dn alnan kitap varsa."]})]}),e.jsxs("div",{style:{display:"flex",alignItems:"flex-start",gap:"8px"},children:[e.jsx("span",{style:{fontSize:"16px"},children:""}),e.jsxs("div",{children:[e.jsx("strong",{style:{color:"#64748b"},children:"Pasif:"})," Aktif dn yoksa ve ceza durumunda deilse."]})]})]})]})]})]})]}),e.jsxs("div",{className:"toolbar",style:{display:"flex",flexDirection:"column",gap:"12px"},children:[e.jsx("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center",flexWrap:"wrap",gap:"12px"},children:e.jsx("h2",{style:{margin:0},children:"renci Listesi"})}),e.jsxs("div",{style:{display:"flex",gap:"8px",flexWrap:"wrap",alignItems:"center",width:"100%"},children:[e.jsx("input",{placeholder:"renci ad veya numara ile ara...",value:F,onChange:w=>y(w.target.value),style:{flex:1,minWidth:"200px",padding:"10px"}}),e.jsx("button",{className:"primary",onClick:()=>q(!D),children:"+ Yeni renci"}),e.jsx("button",{onClick:()=>{b(!f),f&&Tt(new Set)},style:{padding:"10px 20px",borderRadius:"8px",border:f?"2px solid #3b82f6":"1px solid #e5e7eb",background:f?"#eff6ff":"#fff",color:f?"#1d4ed8":"#374151",cursor:"pointer",fontWeight:600,fontSize:"14px"},children:f?" Seimi ptal":" Se"})]}),D&&e.jsxs("div",{style:{padding:"20px",backgroundColor:"#f8fafc",borderRadius:"12px",border:"1px solid #e2e8f0",marginBottom:"20px"},children:[e.jsx("h3",{style:{marginTop:0,marginBottom:"16px"},children:"Yeni renci Ekle"}),e.jsxs("div",{style:{display:"grid",gridTemplateColumns:"repeat(6, 1fr)",gap:"12px"},children:[e.jsxs("div",{children:[e.jsxs("label",{style:{display:"block",marginBottom:"4px",fontWeight:600,fontSize:"14px"},children:["Ad ",e.jsx("span",{style:{color:"#ef4444"},children:"*"})]}),e.jsx("input",{type:"text",value:V.name,onChange:w=>ie({...V,name:w.target.value}),placeholder:"Ahmet",style:{width:"100%",padding:"10px",borderRadius:"6px",border:"1px solid #d1d5db",fontSize:"14px"}})]}),e.jsxs("div",{children:[e.jsxs("label",{style:{display:"block",marginBottom:"4px",fontWeight:600,fontSize:"14px"},children:["Soyad ",e.jsx("span",{style:{color:"#ef4444"},children:"*"})]}),e.jsx("input",{type:"text",value:V.surname,onChange:w=>ie({...V,surname:w.target.value}),placeholder:"Ylmaz",style:{width:"100%",padding:"10px",borderRadius:"6px",border:"1px solid #d1d5db",fontSize:"14px"}})]}),e.jsxs("div",{children:[e.jsxs("label",{style:{display:"block",marginBottom:"4px",fontWeight:600,fontSize:"14px"},children:["renci Numaras ",e.jsx("span",{style:{color:"#ef4444"},children:"*"})]}),e.jsx("div",{style:{display:"flex",flexDirection:"column",gap:"8px",maxWidth:"180px"},children:e.jsx("input",{type:"number",value:V.studentNumber,onChange:w=>ie({...V,studentNumber:w.target.value}),placeholder:"rn: 1234",min:"1",required:!0,style:{width:"100%",padding:"10px",borderRadius:"6px",border:"1px solid #d1d5db",fontSize:"14px"}})})]}),e.jsxs("div",{children:[e.jsxs("label",{style:{display:"block",marginBottom:"4px",fontWeight:600,fontSize:"14px"},children:["Snf ",e.jsx("span",{style:{color:"#ef4444"},children:"*"})]}),V.class===S?e.jsx("div",{style:{display:"flex",flexDirection:"column",gap:"8px",maxWidth:"180px"},children:e.jsx("input",{type:"number",value:V.classOther,onChange:w=>ie({...V,classOther:w.target.value}),placeholder:"rn: 5",min:"1",style:{width:"100%",padding:"10px",borderRadius:"6px",border:"1px solid #d1d5db",fontSize:"14px"}})}):e.jsxs("select",{value:V.class,onChange:w=>{const Y=w.target.value;ie({...V,class:Y,classOther:""})},required:!0,style:{width:"100%",maxWidth:"180px",padding:"10px",borderRadius:"6px",border:"1px solid #d1d5db",fontSize:"14px"},children:[e.jsx("option",{value:"",children:"Snf Sein"}),ft.map(w=>e.jsxs("option",{value:w,children:[w,". Snf"]},w)),e.jsx("option",{value:S,children:"Dier (manuel giri)"})]})]}),e.jsxs("div",{children:[e.jsxs("label",{style:{display:"block",marginBottom:"4px",fontWeight:600,fontSize:"14px"},children:["ube ",e.jsx("span",{style:{color:"#ef4444"},children:"*"})]}),V.branch===S?e.jsx("div",{style:{display:"flex",flexDirection:"column",gap:"8px",maxWidth:"180px"},children:e.jsx("input",{type:"text",value:V.branchOther,onChange:w=>ie({...V,branchOther:w.target.value}),placeholder:"rn: A",style:{width:"100%",padding:"10px",borderRadius:"6px",border:"1px solid #d1d5db",fontSize:"14px"}})}):e.jsxs("select",{value:V.branch,onChange:w=>{const Y=w.target.value;ie({...V,branch:Y,branchOther:""})},required:!0,style:{width:"100%",maxWidth:"180px",padding:"10px",borderRadius:"6px",border:"1px solid #d1d5db",fontSize:"14px"},children:[e.jsx("option",{value:"",children:"ube Sein"}),ze.map(w=>e.jsx("option",{value:w,children:w},w)),e.jsx("option",{value:S,children:"Dier (manuel giri)"})]})]})]}),M&&e.jsx("p",{style:{color:"#ef4444",margin:"16px 0 0 0"},children:M}),e.jsxs("div",{style:{display:"flex",gap:"12px",justifyContent:"flex-end",marginTop:"16px"},children:[e.jsx("button",{onClick:()=>{q(!1),ie({name:"",surname:"",class:"",classOther:"",branch:"",branchOther:"",studentNumber:""}),re(null)},style:{padding:"10px 20px"},children:"ptal"}),e.jsx("button",{className:"primary",onClick:Ht,disabled:Te,style:{padding:"10px 20px"},children:Te?"Ekleniyor...":"Ekle"})]})]}),f&&$t.size>0&&e.jsxs("div",{style:{display:"flex",gap:"8px",alignItems:"center",padding:"12px",backgroundColor:"#f0f9ff",borderRadius:"8px",border:"1px solid #bae6fd"},children:[e.jsxs("span",{style:{fontWeight:600,color:"#0369a1"},children:[$t.size," renci seildi"]}),e.jsx("button",{onClick:()=>Oe(!0),style:{padding:"8px 16px",borderRadius:"6px",border:"1px solid #3b82f6",background:"#3b82f6",color:"white",cursor:"pointer",fontWeight:600,fontSize:"14px"},children:"Seilenleri Dzenle"}),e.jsx("button",{onClick:async()=>{try{const w=Array.from($t).map(R=>t.find(J=>`${J.name} ${J.surname}`.trim()===R)).filter(R=>!!R);if(w.length===0){alert("Silinecek renciler bulunamad");return}const Y=await xe.get("/books/loans"),ee=new Map;Y.forEach(R=>{const J=R.borrower?Ni(R.borrower):"";J&&(ee.has(J)||ee.set(J,[]),ee.get(J).push(R))}),Ce({students:w,loansByStudent:ee});const g=w.map((R,J)=>ca(R,J));gt(new Set(g)),He(!0)}catch(w){alert(w instanceof Error?w.message:"renciler silinirken bir hata olutu")}},disabled:Te,style:{padding:"8px 16px",borderRadius:"6px",border:"1px solid #ef4444",background:Te?"#94a3b8":"#ef4444",color:"white",cursor:Te?"not-allowed":"pointer",fontWeight:600,fontSize:"14px"},children:Te?"Siliniyor...":"Seilenleri Sil"})]})]}),nt&&Ft?e.jsx("div",{style:{display:"flex",flexDirection:"column",gap:"10px",marginBottom:"16px",width:"100%"},children:e.jsxs("div",{style:{display:"flex",flexDirection:"column",gap:"4px",width:"100%"},children:[e.jsx("label",{style:{fontSize:"12px",fontWeight:600,color:"#64748b"},children:"Ad veya Numara Ara"}),e.jsx("input",{type:"text",value:F,onChange:w=>y(w.target.value),placeholder:"renci ad veya numara ile ara...",style:{padding:"10px",borderRadius:"8px",border:"1px solid #e5e7eb",width:"100%",flex:"1 1 100%",minWidth:0}})]})}):nt?e.jsxs("div",{style:{display:"flex",flexDirection:"column",gap:"10px",marginBottom:"16px"},children:[e.jsxs("div",{style:{display:"flex",flexDirection:"column",gap:"4px",flex:1,minWidth:"200px"},children:[e.jsx("label",{style:{fontSize:"12px",fontWeight:600,color:"#64748b"},children:"Ad veya Numara Ara"}),e.jsx("input",{type:"text",value:F,onChange:w=>y(w.target.value),placeholder:"renci ad veya numara ile ara...",style:{padding:"10px",borderRadius:"8px",border:"1px solid #e5e7eb"}})]}),e.jsx("div",{style:{display:"grid",gridTemplateColumns:"repeat(auto-fit, minmax(160px, 1fr))",gap:"8px"},children:[{value:"all",label:"Tm"},{value:"active",label:"Aktif dn"},{value:"late",label:"Gecikmesi Olan"},{value:"passive",label:"Pasif"}].map(w=>e.jsx("button",{onClick:()=>be(w.value),style:{padding:"10px",borderRadius:"8px",border:lt===w.value?"2px solid #2563eb":"1px solid #e5e7eb",background:lt===w.value?"#eff6ff":"#fff",cursor:"pointer",fontWeight:700,color:lt===w.value?"#1d4ed8":"#475569",transition:"all 0.2s"},children:w.label},w.value))}),(F||lt!=="all")&&e.jsx("button",{onClick:()=>{y(""),be("all")},style:{alignSelf:"flex-start",padding:"8px 16px",backgroundColor:"#ef4444",color:"white",border:"none",borderRadius:"6px",cursor:"pointer",fontSize:"13px",fontWeight:600},children:"Filtreleri Temizle"})]}):e.jsxs("div",{style:{display:"grid",gridTemplateColumns:"repeat(4, 1fr)",gap:"12px",alignItems:"end",padding:"12px",backgroundColor:"#f8fafc",borderRadius:"8px",marginBottom:"16px"},children:[e.jsxs("div",{style:{display:"flex",flexDirection:"column",gap:"4px"},children:[e.jsx("label",{style:{fontSize:"12px",fontWeight:600,color:"#64748b"},children:"Snf"}),e.jsxs("select",{value:P,onChange:w=>se(w.target.value),style:{padding:"8px",borderRadius:"6px",border:"1px solid #e5e7eb",width:"100%"},children:[e.jsx("option",{value:"",children:"Tm"}),ft.map(w=>e.jsxs("option",{value:w,children:[w,". Snf"]},w))]})]}),e.jsxs("div",{style:{display:"flex",flexDirection:"column",gap:"4px"},children:[e.jsx("label",{style:{fontSize:"12px",fontWeight:600,color:"#64748b"},children:"ube"}),e.jsxs("select",{value:fe,onChange:w=>ve(w.target.value),style:{padding:"8px",borderRadius:"6px",border:"1px solid #e5e7eb",width:"100%"},children:[e.jsx("option",{value:"",children:"Tm"}),ze.map(w=>e.jsx("option",{value:w,children:w},w))]})]}),e.jsxs("div",{style:{display:"flex",flexDirection:"column",gap:"4px"},children:[e.jsx("label",{style:{fontSize:"12px",fontWeight:600,color:"#64748b"},children:"Sralama"}),e.jsxs("select",{value:Pe,onChange:w=>bt(w.target.value),style:{padding:"8px",borderRadius:"6px",border:"1px solid #e5e7eb",width:"100%"},children:[e.jsx("option",{value:"none",children:"Sralama Yok"}),e.jsx("option",{value:"name-asc",children:"Ad (A-Z)"}),e.jsx("option",{value:"name-desc",children:"Ad (Z-A)"}),e.jsx("option",{value:"class-asc",children:"Snf (9-12)"}),e.jsx("option",{value:"class-desc",children:"Snf (12-9)"}),e.jsx("option",{value:"borrowed-asc",children:"dn (Az-ok)"}),e.jsx("option",{value:"borrowed-desc",children:"dn (ok-Az)"})]})]}),e.jsx("div",{children:(F||P||fe||Pe!=="none")&&e.jsx("button",{onClick:()=>{y(""),se(""),ve(""),bt("none")},style:{padding:"8px 16px",backgroundColor:"#ef4444",color:"white",border:"none",borderRadius:"6px",cursor:"pointer",fontSize:"13px",fontWeight:600,width:"100%",whiteSpace:"nowrap"},children:"Filtreleri Temizle"})})]}),At.length===0?e.jsx("p",{style:{padding:"20px",textAlign:"center",color:"#64748b"},children:F||P||fe?"Arama kriterlerinize uygun renci bulunamad.":"Henz renci bulunmuyor."}):e.jsxs("div",{style:{overflowX:"auto"},children:[e.jsxs("div",{style:{marginBottom:"12px",fontSize:"14px",color:"#64748b"},children:["Toplam ",e.jsx("strong",{children:At.length})," renci gsteriliyor"]}),e.jsxs("table",{className:"book-table",style:{width:"100%",tableLayout:"auto"},children:[e.jsx("thead",{children:e.jsxs("tr",{children:[e.jsxs("th",{onClick:()=>{Me==="name"?Z(Qe==="asc"?"desc":"asc"):(et("name"),Z("asc"))},style:{cursor:"pointer",userSelect:"none",minWidth:"120px",width:"15%",fontWeight:600,textTransform:"none"},children:["Ad ",Me==="name"&&(Qe==="asc"?"":"")]}),e.jsxs("th",{onClick:()=>{Me==="surname"?Z(Qe==="asc"?"desc":"asc"):(et("surname"),Z("asc"))},style:{cursor:"pointer",userSelect:"none",minWidth:"120px",width:"15%",fontWeight:600,textTransform:"none"},children:["Soyad ",Me==="surname"&&(Qe==="asc"?"":"")]}),e.jsxs("th",{onClick:()=>{Me==="studentNumber"?Z(Qe==="asc"?"desc":"asc"):(et("studentNumber"),Z("asc"))},style:{cursor:"pointer",userSelect:"none",minWidth:"120px",width:"15%",textAlign:"center",fontWeight:600,textTransform:"none"},children:["Numara ",Me==="studentNumber"&&(Qe==="asc"?"":"")]}),e.jsxs("th",{onClick:()=>{Me==="class"?Z(Qe==="asc"?"desc":"asc"):(et("class"),Z("asc"))},style:{cursor:"pointer",userSelect:"none",minWidth:"140px",width:"18%",textAlign:"center",fontWeight:600,textTransform:"none"},children:["Snf/ube ",Me==="class"&&(Qe==="asc"?"":"")]}),e.jsxs("th",{onClick:()=>{Me==="activeLoans"?Z(Qe==="asc"?"desc":"asc"):(et("activeLoans"),Z("asc"))},style:{cursor:"pointer",userSelect:"none",minWidth:"120px",width:"15%",textAlign:"center",fontWeight:600,textTransform:"none"},children:["Aktif dn ",Me==="activeLoans"&&(Qe==="asc"?"":"")]}),e.jsxs("th",{onClick:()=>{Me==="late"?Z(Qe==="asc"?"desc":"asc"):(et("late"),Z("asc"))},style:{cursor:"pointer",userSelect:"none",minWidth:"120px",width:"15%",textAlign:"center",fontWeight:600,textTransform:"none"},children:["Geciken ",Me==="late"&&(Qe==="asc"?"":"")]}),e.jsxs("th",{onClick:()=>{Me==="status"?Z(Qe==="asc"?"desc":"asc"):(et("status"),Z("asc"))},style:{cursor:"pointer",userSelect:"none",minWidth:"140px",width:"17%",fontWeight:600,textTransform:"none"},children:["Durum ",Me==="status"&&(Qe==="asc"?"":"")]}),f&&e.jsx("th",{style:{width:"60px",textAlign:"center",textTransform:"none"},children:e.jsx("div",{onClick:()=>{if($t.size===Ne.length&&Ne.length>0)Tt(new Set);else{const w=new Set(Ne.map(Y=>`${Y.name} ${Y.surname}`.trim()).filter(Boolean));Tt(w)}},style:{width:"24px",height:"24px",borderRadius:"50%",border:$t.size===Ne.length&&Ne.length>0?"2px solid #3b82f6":"2px solid #cbd5e1",background:$t.size===Ne.length&&Ne.length>0?"#3b82f6":"white",cursor:"pointer",display:"inline-flex",alignItems:"center",justifyContent:"center",transition:"all 0.2s",margin:"0 auto"},children:$t.size===Ne.length&&Ne.length>0&&e.jsx("span",{style:{color:"white",fontSize:"14px",fontWeight:"bold"},children:""})})})]})}),e.jsx("tbody",{children:Ne.map((w,Y)=>{Yl(w),Gl(w);const ee=I(w),g=ko(w),R=`${w.name} ${w.surname}`.trim(),J=w.penaltyPoints||0,te=(w.name||"").trim(),ge=(w.surname||"").trim(),v=te||ge||`renci No: ${w.studentNumber??"-"}`;return e.jsxs("tr",{onClick:()=>{f||We(w)},style:{cursor:f?"default":"pointer"},onMouseEnter:$=>{f||($.currentTarget.style.backgroundColor="#f0f9ff")},onMouseLeave:$=>{f||($.currentTarget.style.backgroundColor="transparent")},children:[e.jsx("td",{children:e.jsx("strong",{children:v})}),e.jsx("td",{children:e.jsx("strong",{children:ge||""})}),e.jsx("td",{style:{textAlign:"center"},children:w.studentNumber||""}),e.jsx("td",{style:{textAlign:"center"},children:w.class&&w.branch?`${w.class}-${w.branch}`:w.class?`${w.class}. Snf`:""}),e.jsx("td",{style:{textAlign:"center"},children:e.jsx("span",{style:{color:ee>0?"#3b82f6":"#10b981",fontWeight:600},children:ee})}),e.jsx("td",{style:{textAlign:"center"},children:e.jsx("span",{style:{color:g>0?"#ef4444":"#10b981",fontWeight:600},children:g})}),e.jsx("td",{children:J>=B?e.jsxs("span",{style:{color:"#ef4444",fontWeight:600,display:"flex",alignItems:"center",gap:"6px"},children:[e.jsxs("svg",{width:"16",height:"16",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:[e.jsx("circle",{cx:"12",cy:"12",r:"10"}),e.jsx("line",{x1:"15",y1:"9",x2:"9",y2:"15"}),e.jsx("line",{x1:"9",y1:"9",x2:"15",y2:"15"})]}),"Ceza"]}):g>0?e.jsxs("span",{style:{color:"#ef4444",fontWeight:600,display:"flex",alignItems:"center",gap:"6px"},children:[e.jsxs("svg",{width:"16",height:"16",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:[e.jsx("circle",{cx:"12",cy:"12",r:"10"}),e.jsx("line",{x1:"15",y1:"9",x2:"9",y2:"15"}),e.jsx("line",{x1:"9",y1:"9",x2:"15",y2:"15"})]}),"Ceza"]}):ee>0?e.jsxs("span",{style:{color:"#3b82f6",fontWeight:600,display:"flex",alignItems:"center",gap:"6px"},children:[e.jsx("svg",{width:"16",height:"16",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:e.jsx("polyline",{points:"20 6 9 17 4 12"})}),"Aktif"]}):e.jsxs("span",{style:{color:"#64748b",fontWeight:600,display:"flex",alignItems:"center",gap:"6px"},children:[e.jsx("svg",{width:"16",height:"16",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:e.jsx("circle",{cx:"12",cy:"12",r:"10"})}),"Pasif"]})}),f&&e.jsx("td",{onClick:$=>$.stopPropagation(),style:{textAlign:"center"},children:e.jsx("div",{onClick:$=>{$.stopPropagation();const le=new Set($t);$t.has(R)?le.delete(R):le.add(R),Tt(le)},style:{width:"24px",height:"24px",borderRadius:"50%",border:$t.has(R)?"2px solid #3b82f6":"2px solid #cbd5e1",background:$t.has(R)?"#3b82f6":"white",cursor:"pointer",display:"inline-flex",alignItems:"center",justifyContent:"center",transition:"all 0.2s"},children:$t.has(R)&&e.jsx("span",{style:{color:"white",fontSize:"14px",fontWeight:"bold"},children:""})})})]},Y)})})]}),At.length>0&&it()]}),ce&&_t.createPortal(e.jsx("div",{style:{position:"fixed",top:0,left:0,right:0,bottom:0,backgroundColor:"rgba(0, 0, 0, 0.5)",display:"flex",alignItems:"center",justifyContent:"center",zIndex:10001},onClick:()=>{Oe(!1),_e(null),De(new Map)},children:e.jsxs("div",{className:"card",style:{maxWidth:"900px",width:"90%",maxHeight:"90vh",overflow:"auto",position:"relative"},onClick:w=>w.stopPropagation(),children:[e.jsxs("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center",marginBottom:"24px"},children:[e.jsx("h2",{style:{margin:0},children:"oklu renci Dzenleme"}),e.jsx("button",{onClick:()=>{Oe(!1),_e(null),De(new Map)},style:{background:"none",border:"none",fontSize:"24px",cursor:"pointer",color:"#64748b"},children:""})]}),Re?e.jsxs("div",{children:[e.jsxs("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center",marginBottom:"16px"},children:[e.jsxs("div",{children:[e.jsxs("strong",{style:{fontSize:"16px"},children:[Re==="name"?"Ad soyad":Re==="studentNumber"?"renci Numaras":Re==="class"?"Snf":"ube"," Dzenleme"]}),e.jsxs("p",{style:{margin:"4px 0 0 0",color:"#64748b",fontSize:"14px"},children:[$t.size," renci seildi"]})]}),e.jsx("button",{onClick:()=>{_e(null),De(new Map)},style:{padding:"6px 12px",borderRadius:"6px",border:"1px solid #e5e7eb",background:"#fff",cursor:"pointer",fontSize:"14px"},children:" Geri"})]}),e.jsx("div",{style:{maxHeight:"500px",overflowY:"auto",border:"1px solid #e5e7eb",borderRadius:"8px",padding:"12px"},children:t.filter(w=>$t.has(`${w.name} ${w.surname}`.trim())).map(w=>{var R,J;const Y=`${w.name} ${w.surname}`.trim(),ee=xt.get(Y)||"",g=Re==="name"?`${w.name} ${w.surname}`.trim():Re==="studentNumber"?(R=w.studentNumber)==null?void 0:R.toString():Re==="class"?(J=w.class)==null?void 0:J.toString():Re==="branch"?w.branch:"";return e.jsxs("div",{style:{padding:"16px",marginBottom:"12px",backgroundColor:"#f8fafc",borderRadius:"8px",border:"1px solid #e2e8f0"},children:[e.jsxs("div",{style:{marginBottom:"12px"},children:[e.jsxs("div",{style:{fontWeight:600,marginBottom:"4px",fontSize:"15px"},children:[w.name," ",w.surname]}),e.jsxs("div",{style:{fontSize:"12px",color:"#64748b"},children:[w.studentNumber?`Numara: ${w.studentNumber}`:""," ",w.class&&w.branch?` ${w.class}-${w.branch}`:""]}),e.jsxs("div",{style:{fontSize:"11px",color:"#94a3b8",marginTop:"4px"},children:["Mevcut: ",g||""]})]}),e.jsx("div",{children:Re==="class"?e.jsxs("select",{value:ee,onChange:te=>{const ge=new Map(xt);ge.set(Y,te.target.value),De(ge)},style:{width:"100%",padding:"10px",borderRadius:"6px",border:"1px solid #d1d5db"},children:[e.jsx("option",{value:"",children:"Snf sein"}),ft.map(te=>e.jsxs("option",{value:te,children:[te,". Snf"]},te))]}):Re==="branch"?e.jsxs("select",{value:ee,onChange:te=>{const ge=new Map(xt);ge.set(Y,te.target.value),De(ge)},style:{width:"100%",padding:"10px",borderRadius:"6px",border:"1px solid #d1d5db"},children:[e.jsx("option",{value:"",children:"ube sein"}),ze.map(te=>e.jsx("option",{value:te,children:te},te))]}):Re==="studentNumber"?e.jsx("input",{type:"number",value:ee,onChange:te=>{const ge=new Map(xt);ge.set(Y,te.target.value),De(ge)},placeholder:"Yeni renci numaras girin",style:{width:"100%",padding:"10px",borderRadius:"6px",border:"1px solid #d1d5db"},min:"1"}):e.jsx("input",{type:"text",value:ee,onChange:te=>{const ge=new Map(xt);ge.set(Y,te.target.value),De(ge)},placeholder:"Yeni ad soyad girin",style:{width:"100%",padding:"10px",borderRadius:"6px",border:"1px solid #d1d5db"}})})]},Y)})}),e.jsxs("div",{style:{display:"flex",gap:"12px",justifyContent:"flex-end",marginTop:"24px"},children:[e.jsx("button",{type:"button",onClick:()=>{Oe(!1),_e(null),De(new Map)},style:{padding:"10px 20px",borderRadius:"6px",border:"1px solid #e5e7eb",background:"#fff",cursor:"pointer",fontWeight:600},children:"ptal"}),e.jsx("button",{onClick:async()=>{const w=t.filter(ee=>$t.has(`${ee.name} ${ee.surname}`.trim()));if(w.filter(ee=>{const g=`${ee.name} ${ee.surname}`.trim(),R=xt.get(g);return!R||!R.trim()}).length>0){alert("Ltfen tm renciler iin deer girin.");return}if(window.confirm(`${$t.size} rencinin ${Re==="name"?"ad soyad":Re==="studentNumber"?"renci numaras":Re==="class"?"snf":"ube"} bilgisini gncellemek istediinize emin misiniz?`))try{const ee=w.map(R=>{const J=`${R.name} ${R.surname}`.trim();return{studentName:J,field:Re,newValue:xt.get(J)||""}}),g=await xe.put("/admin/students/bulk",{updates:ee,personelName:h||""});g.errors&&g.errors.length>0?alert(`Baz renciler gncellenemedi:
${g.errors.join(`
`)}

${g.updatedCount} renci baaryla gncellendi.`):alert(`${g.updatedCount} renci baaryla gncellendi.`),Oe(!1),_e(null),De(new Map),b(!1),Tt(new Set),l&&await l()}catch(ee){alert(ee instanceof Error?ee.message:"Dzenleme srasnda bir hata olutu")}},style:{padding:"10px 20px",borderRadius:"6px",border:"1px solid #3b82f6",background:"#3b82f6",color:"white",cursor:"pointer",fontWeight:600},children:"Kayt ve Onay"})]})]}):e.jsxs("div",{children:[e.jsx("label",{style:{display:"block",marginBottom:"8px",fontWeight:600,fontSize:"14px"},children:"Dzenlenecek Alan Sein"}),e.jsxs("select",{value:"",onChange:w=>{_e(w.target.value);const Y=new Map;t.filter(g=>$t.has(`${g.name} ${g.surname}`.trim())).forEach(g=>{var te,ge;const R=`${g.name} ${g.surname}`.trim(),J=w.target.value==="name"?`${g.name} ${g.surname}`.trim():w.target.value==="studentNumber"?(te=g.studentNumber)==null?void 0:te.toString():w.target.value==="class"?(ge=g.class)==null?void 0:ge.toString():w.target.value==="branch"?g.branch:"";Y.set(R,J||"")}),De(Y)},style:{width:"100%",padding:"10px",borderRadius:"6px",border:"1px solid #d1d5db",marginBottom:"24px"},children:[e.jsx("option",{value:"",children:"-- Seiniz --"}),e.jsx("option",{value:"name",children:"Ad soyad"}),e.jsx("option",{value:"studentNumber",children:"renci Numaras"}),e.jsx("option",{value:"class",children:"Snf"}),e.jsx("option",{value:"branch",children:"ube"})]})]})]})}),document.body),Be&&_t.createPortal(e.jsx("div",{style:{position:"fixed",top:0,left:0,right:0,bottom:0,backgroundColor:"rgba(0, 0, 0, 0.5)",display:"flex",alignItems:"center",justifyContent:"center",zIndex:10002},onClick:()=>ye(null),children:e.jsxs("div",{className:"card",style:{maxWidth:"700px",width:"90%",maxHeight:"90vh",overflow:"auto",position:"relative"},onClick:w=>w.stopPropagation(),children:[e.jsxs("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center",marginBottom:"24px"},children:[e.jsx("h2",{style:{margin:0,color:"#1e293b"},children:"renci Bilgilerini Dzenle"}),e.jsx("button",{onClick:()=>ye(null),style:{background:"none",border:"none",fontSize:"24px",cursor:"pointer",color:"#64748b",padding:0,width:"32px",height:"32px",display:"flex",alignItems:"center",justifyContent:"center"},children:""})]}),e.jsxs("form",{onSubmit:async w=>{var te,ge;w.preventDefault();const Y=new FormData(w.currentTarget),ee=Y.get("name"),g=Y.get("studentNumber"),R=Y.get("class"),J=Y.get("branch");if(!ee.trim()||!g||!R||!J){alert("Ltfen tm zorunlu alanlar doldurun.");return}try{wt(!0);const v=[],$=Be.name;if(ee.trim()!==$&&v.push({studentName:$,field:"name",newValue:ee.trim()}),g!==((te=Be.studentNumber)==null?void 0:te.toString())&&v.push({studentName:$,field:"studentNumber",newValue:g}),R!==((ge=Be.class)==null?void 0:ge.toString())&&v.push({studentName:$,field:"class",newValue:R}),J!==Be.branch&&v.push({studentName:$,field:"branch",newValue:J}),v.length===0){alert("Hibir deiiklik yaplmad."),wt(!1);return}const le=await xe.put("/admin/students/bulk",{updates:v,personelName:h||""});if(le.errors&&le.errors.length>0){alert(`Gncelleme srasnda hatalar olutu:
${le.errors.join(`
`)}`);return}ye(null),l&&await l()}catch(v){alert(v instanceof Error?v.message:"Dzenleme srasnda bir hata olutu")}finally{wt(!1)}},style:{display:"flex",flexDirection:"column",gap:"16px"},children:[e.jsxs("div",{style:{display:"grid",gridTemplateColumns:"repeat(auto-fit, minmax(250px, 1fr))",gap:"16px"},children:[e.jsxs("div",{children:[e.jsxs("label",{style:{display:"block",marginBottom:"4px",fontWeight:600,fontSize:"14px"},children:["Ad soyad ",e.jsx("span",{style:{color:"#ef4444"},children:"*"})]}),e.jsx("input",{type:"text",name:"name",defaultValue:Be.name,required:!0,style:{width:"100%",padding:"10px",borderRadius:"6px",border:"1px solid #d1d5db",fontSize:"14px"},placeholder:"Ahmet Ylmaz"})]}),e.jsxs("div",{children:[e.jsxs("label",{style:{display:"block",marginBottom:"4px",fontWeight:600,fontSize:"14px"},children:["renci Numaras ",e.jsx("span",{style:{color:"#ef4444"},children:"*"})]}),e.jsx("input",{type:"number",name:"studentNumber",defaultValue:Be.studentNumber||"",required:!0,min:"1",style:{width:"100%",padding:"10px",borderRadius:"6px",border:"1px solid #d1d5db",fontSize:"14px"},placeholder:"rn: 1234"})]}),e.jsxs("div",{children:[e.jsxs("label",{style:{display:"block",marginBottom:"4px",fontWeight:600,fontSize:"14px"},children:["Snf ",e.jsx("span",{style:{color:"#ef4444"},children:"*"})]}),e.jsxs("select",{name:"class",defaultValue:((bn=Be.class)==null?void 0:bn.toString())||"",required:!0,style:{width:"100%",padding:"10px",borderRadius:"6px",border:"1px solid #d1d5db",fontSize:"14px"},children:[e.jsx("option",{value:"",children:"Snf Sein"}),ft.map(w=>e.jsxs("option",{value:w,children:[w,". Snf"]},w))]})]}),e.jsxs("div",{children:[e.jsxs("label",{style:{display:"block",marginBottom:"4px",fontWeight:600,fontSize:"14px"},children:["ube ",e.jsx("span",{style:{color:"#ef4444"},children:"*"})]}),e.jsxs("select",{name:"branch",defaultValue:Be.branch||"",required:!0,style:{width:"100%",padding:"10px",borderRadius:"6px",border:"1px solid #d1d5db",fontSize:"14px"},children:[e.jsx("option",{value:"",children:"ube Sein"}),ze.map(w=>e.jsx("option",{value:w,children:w},w))]})]})]}),M&&e.jsx("p",{style:{color:"#ef4444",margin:0},children:M}),e.jsxs("div",{style:{display:"flex",gap:"12px",justifyContent:"flex-end"},children:[e.jsx("button",{type:"button",onClick:()=>ye(null),style:{padding:"10px 20px",borderRadius:"6px",border:"1px solid #e5e7eb",background:"#fff",cursor:"pointer",fontWeight:600},children:"ptal"}),e.jsx("button",{type:"submit",className:"primary",disabled:Te,style:{padding:"10px 20px",borderRadius:"6px",border:"1px solid #3b82f6",background:"#3b82f6",color:"white",cursor:"pointer",fontWeight:600},children:Te?"Gncelleniyor...":"Gncelle"})]})]})]})}),document.body),e.jsx(lc,{isOpen:!!ot,onClose:()=>We(null),student:ot,loans:n,books:r,personelName:h,onRefresh:l,onEdit:w=>{ye(w),We(null)},onBookClick:w=>{We(null)},loading:Te,historyEntries:(st==null?void 0:st.entries)??[],studentHistory:st}),Ve&&_t.createPortal(e.jsx("div",{style:{position:"fixed",top:0,left:0,right:0,bottom:0,backgroundColor:"rgba(0, 0, 0, 0.5)",display:"flex",alignItems:"center",justifyContent:"center",zIndex:10002},onClick:()=>jt(null),children:e.jsxs("div",{className:"card",style:{maxWidth:"500px",width:"90%",maxHeight:"90vh",overflow:"auto",position:"relative"},onClick:w=>w.stopPropagation(),children:[e.jsxs("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center",marginBottom:"24px"},children:[e.jsxs("h2",{style:{margin:0,color:"#1e293b",display:"flex",alignItems:"center",gap:"8px"},children:[e.jsxs("svg",{width:"20",height:"20",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:[e.jsx("circle",{cx:"12",cy:"12",r:"10"}),e.jsx("polyline",{points:"12 6 12 12 16 14"})]}),"Sre Uzat"]}),e.jsx("button",{onClick:()=>jt(null),style:{background:"none",border:"none",fontSize:"24px",cursor:"pointer",color:"#64748b",padding:0,width:"32px",height:"32px",display:"flex",alignItems:"center",justifyContent:"center"},children:""})]}),e.jsxs("div",{style:{display:"flex",flexDirection:"column",gap:"20px"},children:[e.jsxs("div",{style:{padding:"16px",backgroundColor:"#f8fafc",borderRadius:"8px",border:"1px solid #e2e8f0"},children:[e.jsx("div",{style:{fontWeight:600,marginBottom:"8px",fontSize:"16px"},children:Ve.title}),e.jsxs("div",{style:{fontSize:"14px",color:"#64748b"},children:[Ve.author,"  ",Ve.category]}),e.jsxs("div",{style:{fontSize:"13px",color:"#64748b",marginTop:"4px"},children:["Mevcut Teslim Tarihi: ",new Date(Ve.dueDate).toLocaleDateString("tr-TR")]})]}),e.jsxs("div",{style:{padding:"20px",backgroundColor:"#ffffff",borderRadius:"12px",border:"1px solid #e2e8f0"},children:[e.jsx("h3",{style:{marginTop:0,marginBottom:"16px",fontSize:"18px",fontWeight:600,color:"#1e293b"},children:"Yeni Sre Sein"}),e.jsxs("div",{style:{display:"flex",flexDirection:"column",gap:"12px"},children:[e.jsx("label",{style:{fontSize:"14px",fontWeight:600,color:"#64748b"},children:"Uzatma Sresi (Gn)"}),e.jsxs("select",{value:zt,onChange:w=>nn(parseInt(w.target.value)),style:{width:"100%",padding:"10px",borderRadius:"6px",border:"1px solid #d1d5db",fontSize:"14px"},children:[e.jsx("option",{value:7,children:"7 Gn"}),e.jsx("option",{value:14,children:"14 Gn"}),e.jsx("option",{value:21,children:"21 Gn"}),e.jsx("option",{value:30,children:"30 Gn"})]}),e.jsxs("div",{style:{fontSize:"12px",color:"#64748b",marginTop:"4px"},children:["Yeni teslim tarihi: ",new Date(Date.now()+zt*24*60*60*1e3).toLocaleDateString("tr-TR")]})]})]}),e.jsxs("div",{style:{display:"flex",gap:"12px",justifyContent:"flex-end"},children:[e.jsx("button",{onClick:()=>jt(null),style:{padding:"10px 20px",fontSize:"14px",backgroundColor:"#f3f4f6",color:"#374151",border:"none",borderRadius:"6px",cursor:"pointer",fontWeight:600},children:"ptal"}),e.jsx("button",{onClick:async()=>{if(!(!Ve||!h))try{wt(!0);const w=r==null?void 0:r.find(Y=>Y.id===Ve.bookId);await xe.post(`/books/${Ve.bookId}/return`,{borrower:Ve.borrower,personelName:h.trim()}),await xe.post(`/books/${Ve.bookId}/borrow`,{borrower:Ve.borrower,days:zt,personelName:h.trim()}),jt(null),l&&await l()}catch(w){alert(w instanceof Error?w.message:"Sre uzatma baarsz oldu")}finally{wt(!1)}},disabled:Te||!h,style:{padding:"10px 20px",fontSize:"14px",backgroundColor:Te||!h?"#9ca3af":"#3b82f6",color:"white",border:"none",borderRadius:"6px",cursor:Te||!h?"not-allowed":"pointer",fontWeight:600,display:"flex",alignItems:"center",justifyContent:"center",gap:"6px"},children:Te?"leniyor...":e.jsxs(e.Fragment,{children:[e.jsxs("svg",{width:"16",height:"16",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:[e.jsx("circle",{cx:"12",cy:"12",r:"10"}),e.jsx("polyline",{points:"12 6 12 12 16 14"})]}),"Sre Uzat"]})})]})]})]})}),document.body),_&&e.jsx(ao,{book:_,students:t,loans:n,books:r,personelName:h,onClose:()=>ne(null),onRefresh:l}),e.jsx(ur,{isOpen:ue,title:"renci Silme Onay",icon:"",onConfirm:async()=>{if(!de)return;const Y=de.students.map((J,te)=>{const ge=`${J.name} ${J.surname||""}`.trim()||`renci No: ${J.studentNumber??"-"}`,$=Ni(`${J.name} ${J.surname||""}`.trim())||Ni(J.name||J.surname||""),le=$?de.loansByStudent.get($)||[]:[];return{student:J,index:te,displayName:ge,loans:le,key:ca(J,te)}}).filter(J=>Se.has(J.key));if(Y.length===0){alert("Ltfen silmek istediiniz rencileri sein.");return}const ee=Y.map(J=>J.student.studentNumber).filter(J=>typeof J=="number"&&!Number.isNaN(J));if(ee.length===0){alert("Seilen rencilerde geerli renci numaras bulunamad");return}const g=Y.reduce((J,te)=>J+te.loans.length,0),R=Y.length===1?`${Y[0].displayName} silindi${g>0?`, ${g} dn kayd da silindi`:""}.`:`${Y.length} renci silindi${g>0?`, ${g} dn kayd da silindi`:""}.`;b(!1),Tt(new Set),He(!1),Ce(null),gt(new Set),Ct(!0);try{await xe.delete("/admin/students",{studentNumbers:ee}),l&&await l(),k&&k("Baarl",R,"success","")}catch(J){alert(J instanceof Error?J.message:"renciler silinirken bir hata olutu")}finally{Ct(!1)}},onCancel:()=>{He(!1),Ce(null),gt(new Set)},confirmText:"Sil",cancelText:"ptal",confirmButtonColor:"#ef4444",loading:me,disabled:Se.size===0,children:de&&(()=>{const w=de.students.map((R,J)=>{const te=`${R.name} ${R.surname||""}`.trim()||`renci No: ${R.studentNumber??"-"}`,v=Ni(`${R.name} ${R.surname||""}`.trim())||Ni(R.name||R.surname||""),$=v?de.loansByStudent.get(v)||[]:[];return{student:R,index:J,displayName:te,loans:$,key:ca(R,J)}});if(w.length===0)return e.jsx("div",{style:{fontSize:"14px",color:"#475569",lineHeight:"1.6"},children:"Seilen renci bulunamad."});const ee=w.filter(R=>Se.has(R.key)).reduce((R,J)=>R+J.loans.length,0),g=w.some(R=>R.loans.length>0);return e.jsxs(e.Fragment,{children:[e.jsx("div",{style:{fontSize:"14px",color:"#475569",marginBottom:"16px",lineHeight:"1.6"},children:g?"Baz rencilerin teslim edilmemi kitaplar bulunuyor. Ltfen silmek istediiniz rencileri iaretleyin.":w.length===1?e.jsxs(e.Fragment,{children:[e.jsx("strong",{children:w[0].displayName})," rencisini silmek istediinize emin misiniz? Bu ilem geri alnamaz."]}):e.jsxs(e.Fragment,{children:[e.jsxs("strong",{children:[w.length," renci"]})," silinecek. Bu ilem geri alnamaz."]})}),e.jsx("div",{style:{maxHeight:"360px",overflowY:"auto",marginBottom:"16px",display:"flex",flexDirection:"column",gap:"12px"},children:w.map(R=>{const J=Se.has(R.key);return e.jsxs("div",{style:{padding:"12px",borderRadius:"8px",border:"1px solid #fbbf24",backgroundColor:"#fef3c7",cursor:"pointer"},onClick:()=>{const te=new Set(Se);J?te.delete(R.key):te.add(R.key),gt(te)},children:[e.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"12px",marginBottom:R.loans.length>0?"8px":"0"},children:[e.jsx("div",{className:`selection-checkbox ${J?"selected":""}`,style:{cursor:"pointer",flexShrink:0},children:J&&e.jsx("span",{children:""})}),e.jsxs("div",{style:{flex:1},children:[e.jsx("div",{style:{fontSize:"14px",fontWeight:600,color:"#92400e"},children:R.displayName}),R.student.studentNumber&&e.jsxs("div",{style:{fontSize:"12px",color:"#475569"},children:["renci No: ",R.student.studentNumber]})]})]}),R.loans.length>0&&e.jsx("ul",{style:{margin:0,paddingLeft:"20px",fontSize:"13px",color:"#78350f"},children:R.loans.map((te,ge)=>{const v=te.dueDate?new Date(te.dueDate).toLocaleDateString("tr-TR"):"-";return e.jsxs("li",{style:{marginBottom:"6px"},children:[e.jsx("strong",{children:te.title})," (Teslim: ",v,")"]},`loan-${ge}`)})})]},R.key)})}),ee>0&&e.jsxs("div",{style:{fontSize:"13px",color:"#64748b",padding:"12px",backgroundColor:"#f1f5f9",borderRadius:"8px"},children:[e.jsxs("strong",{children:[ee," dn kayd"]})," bu ilemle birlikte silinecek."]})]})})()})]})},Bu="reports-visible-cards",wo=({data:t,title:n,color:r,maxValue:i,onBarClick:o,colors:l})=>{const s=a.useRef(null);a.useEffect(()=>{const d=s.current;if(!d)return;const h=d.getContext("2d");if(!h)return;const C=d.width,k=d.height,S=40,B=C-S*2,m=k-S*2,I=B/t.length-10,F=m;h.clearRect(0,0,C,k),h.fillStyle="#f8fafc",h.fillRect(0,0,C,k),t.forEach((y,f)=>{const b=i>0?y.value/i*F:0,D=S+f*(B/t.length),q=k-S-b;h.fillStyle=l&&l[f]?l[f]:r,h.fillRect(D,q,I,b)}),h.strokeStyle="#cbd5e1",h.lineWidth=1,h.beginPath(),h.moveTo(S,S),h.lineTo(S,k-S),h.lineTo(C-S,k-S),h.stroke()},[t,r,i,l]);const u=d=>{if(!o)return;const h=s.current;if(!h)return;const C=h.getBoundingClientRect(),k=d.clientX-C.left,S=d.clientY-C.top,B=h.width,m=h.height,I=40,F=B-I*2;if(F/t.length-10,k<I||k>B-I||S<I||S>m-I)return;const y=Math.floor((k-I)/(F/t.length));y>=0&&y<t.length&&o(t[y].label)};return e.jsxs("div",{style:{textAlign:"center"},children:[e.jsx("h4",{style:{marginBottom:"16px",color:"#1f2937"},children:n}),e.jsx("canvas",{ref:s,width:600,height:300,style:{maxWidth:"100%",height:"auto",cursor:o?"pointer":"default"},onClick:u})]})},Ug=({data:t,title:n,color:r})=>{const i=a.useRef(null);return a.useEffect(()=>{const o=i.current;if(!o)return;const l=o.getContext("2d");if(!l)return;const s=o.width,u=o.height,d=40,h=s-d*2,C=u-d*2,k=Math.max(...t.map(B=>B.value),1);l.clearRect(0,0,s,u),l.fillStyle="#f8fafc",l.fillRect(0,0,s,u),l.strokeStyle="#e2e8f0",l.lineWidth=1;const S=5;for(let B=0;B<=S;B++){const m=d+C/S*B;l.beginPath(),l.moveTo(d,m),l.lineTo(s-d,m),l.stroke()}l.strokeStyle=r,l.lineWidth=3,l.beginPath(),t.forEach((B,m)=>{const I=d+h/(t.length-1||1)*m,F=u-d-B.value/k*C;m===0?l.moveTo(I,F):l.lineTo(I,F)}),l.stroke(),t.forEach((B,m)=>{const I=d+h/(t.length-1||1)*m,F=u-d-B.value/k*C;l.fillStyle=r,l.beginPath(),l.arc(I,F,5,0,2*Math.PI),l.fill()}),l.strokeStyle="#cbd5e1",l.lineWidth=1,l.beginPath(),l.moveTo(d,d),l.lineTo(d,u-d),l.lineTo(s-d,u-d),l.stroke()},[t,r]),e.jsxs("div",{style:{textAlign:"center"},children:[e.jsx("h4",{style:{marginBottom:"16px",color:"#1f2937"},children:n}),e.jsx("canvas",{ref:i,width:600,height:300,style:{maxWidth:"100%",height:"auto"}})]})},qg=({books:t,bookStats:n,students:r,loans:i})=>{const[o,l]=a.useState(null),[s,u]=a.useState(100);a.useEffect(()=>{(async()=>{try{const N=await xe.get("/system-settings");u(N.maxPenaltyPoints)}catch(N){console.error("Sistem ayarlar yklenemedi:",N)}})()},[]);const[d,h]=a.useState(""),[C,k]=a.useState(""),[S,B]=a.useState(""),[m,I]=a.useState("none"),[F,y]=a.useState(""),[f,b]=a.useState(!1),[D,q]=a.useState(null),V=()=>{const c=localStorage.getItem(Bu);if(c)try{return JSON.parse(c)}catch{return null}return null},[ie,M]=a.useState(()=>V()||{"active-loans":!0,"late-loans":!0,"late-borrowers":!0,"total-borrowed":!0,"total-returned":!0,"total-books":!0,"total-book-quantity":!0,"total-students":!0,"stock-low":!0,"stock-out":!0,"active-borrowers":!0,"banned-students":!0,"due-soon-0-3":!0,"due-soon-4-7":!0,"due-soon-8-14":!0,"due-soon-15plus":!0}),re=c=>{localStorage.setItem(Bu,JSON.stringify(c)),M(c)},ce=c=>{const N={...ie,[c]:!ie[c]};re(N)};a.useEffect(()=>{(o==null?void 0:o.type)==="top-students"||(o==null?void 0:o.type)==="top-books"?I("borrowed-desc"):o!=null&&o.type&&I("none")},[o==null?void 0:o.type]);const Oe=a.useMemo(()=>[...n].sort((c,N)=>N.borrowed-c.borrowed).slice(0,10),[n]),Re=a.useMemo(()=>[...r].sort((c,N)=>N.borrowed-c.borrowed).slice(0,10),[r]),_e=a.useMemo(()=>{const c=i.reduce((Be,ye)=>{const Ve=t.find(jt=>jt.id===ye.bookId);return Ve&&Ve.category&&(Be[Ve.category]=(Be[Ve.category]||0)+1),Be},{}),N=n.reduce((Be,ye)=>(ye.category&&(Be[ye.category]=(Be[ye.category]||0)+ye.borrowed),Be),{}),oe=new Set([...Object.keys(c),...Object.keys(N)]),Ae={};return oe.forEach(Be=>{Ae[Be]=Math.max(c[Be]||0,N[Be]||0)}),Object.entries(Ae).map(([Be,ye])=>({label:Be,value:ye})).sort((Be,ye)=>ye.value-Be.value)},[n,i,t]),xt=a.useMemo(()=>{const c=r.reduce((N,oe)=>{if(oe.class){const Ae=`${oe.class}. Snf`;N[Ae]=(N[Ae]||0)+oe.borrowed}return N},{});return Object.entries(c).map(([N,oe])=>({label:N,value:oe})).sort((N,oe)=>N.label.localeCompare(oe.label))},[r]),De=c=>{const N=new Date(c);N.setHours(0,0,0,0);const oe=new Date;return oe.setHours(0,0,0,0),Math.ceil((N.getTime()-oe.getTime())/(1e3*60*60*24))},ft=a.useMemo(()=>i.filter(c=>De(c.dueDate)>=0),[i]),ze=a.useMemo(()=>i.filter(c=>De(c.dueDate)<0).sort((c,N)=>De(c.dueDate)-De(N.dueDate)),[i]),P=a.useMemo(()=>i.filter(c=>{const N=De(c.dueDate);return N>=0&&N<=3}).sort((c,N)=>De(c.dueDate)-De(N.dueDate)),[i]),se=a.useMemo(()=>i.filter(c=>{const N=De(c.dueDate);return N>3&&N<=7}).sort((c,N)=>De(c.dueDate)-De(N.dueDate)),[i]),fe=a.useMemo(()=>i.filter(c=>{const N=De(c.dueDate);return N>7&&N<=14}).sort((c,N)=>De(c.dueDate)-De(N.dueDate)),[i]),ve=a.useMemo(()=>i.filter(c=>De(c.dueDate)>14).sort((c,N)=>De(c.dueDate)-De(N.dueDate)),[i]);a.useMemo(()=>{const c=n.reduce((Ae,Be)=>Ae+Be.returned,0),N=ft.length,oe=ze.length;return[{label:"ade Edilmi",value:c},{label:"Aktif dn",value:N},{label:"Gecikmi",value:oe}].filter(Ae=>Ae.value>0)},[n,ft,ze]);const Pe=a.useMemo(()=>{const c=i.reduce((Be,ye)=>{const Ve=t.find(jt=>jt.id===ye.bookId);return Ve&&Ve.category&&(Be[Ve.category]||(Be[Ve.category]={borrowed:0,returned:0}),Be[Ve.category].borrowed+=1),Be},{}),N=n.reduce((Be,ye)=>(ye.category&&(Be[ye.category]||(Be[ye.category]={borrowed:0,returned:0}),Be[ye.category].borrowed+=ye.borrowed,Be[ye.category].returned+=ye.returned),Be),{}),oe=new Set([...Object.keys(c),...Object.keys(N)]),Ae={};return oe.forEach(Be=>{var ye,Ve,jt,zt;Ae[Be]={borrowed:Math.max(((ye=c[Be])==null?void 0:ye.borrowed)||0,((Ve=N[Be])==null?void 0:Ve.borrowed)||0),returned:Math.max(((jt=c[Be])==null?void 0:jt.returned)||0,((zt=N[Be])==null?void 0:zt.returned)||0)}}),Object.entries(Ae).map(([Be,ye])=>({label:Be,borrowed:ye.borrowed,returned:ye.returned})).sort((Be,ye)=>ye.borrowed-Be.borrowed).slice(0,8)},[n,i,t]),bt=Math.max(..._e.map(c=>c.value),1),lt=Math.max(...xt.map(c=>c.value),1),be=Math.max(...Oe.map(c=>c.borrowed),1),Me=i.length;n.reduce((c,N)=>c+N.borrowed,0);const et=n.reduce((c,N)=>c+N.returned,0);n.filter(c=>c.late>0).length;const Z=ze.length,$e=Me,Xe=et,Ge=ft.length,mt=new Set(ze.map(c=>c.borrower)).size,kt=t.filter(c=>c.quantity>0&&c.quantity<=2),ot=t.filter(c=>c.quantity===0),We=new Set(ft.map(c=>c.borrower)).size,st=r.filter(c=>(c.penaltyPoints||0)>=s),Bt=["#3b82f6","#10b981","#f59e0b","#ef4444","#8b5cf6","#ec4899","#06b6d4","#84cc16","#f97316","#14b8a6","#a855f7","#e11d48"],Ee={primary:"#3b82f6",success:"#10b981",warning:"#f59e0b",danger:"#ef4444",purple:"#8b5cf6",cyan:"#06b6d4",orange:"#f97316",teal:"#14b8a6",violet:"#a855f7",rose:"#e11d48"},Et=[{id:"active-loans",label:"Aktif dn",value:Ge,color:Ee.primary,modal:"active-loans"},{id:"late-loans",label:"Geciken Kitap",value:Z,color:"#374151",modal:"late-books"},{id:"late-borrowers",label:"Geciken renci",value:mt,color:"#111827",modal:"late-borrowers"},{id:"total-borrowed",label:"Toplam dn",value:$e,color:Ee.success,modal:"total-borrowed"},{id:"total-returned",label:"ade",value:Xe,color:Ee.success,modal:"total-returned"},{id:"total-books",label:"Kitap eidi",value:t.length,color:Ee.purple,modal:"total-books"},{id:"total-book-quantity",label:"Toplam Kitap Adeti",value:t.reduce((c,N)=>c+(N.quantity||0),0)+ft.length,color:Ee.purple,modal:"total-books"},{id:"total-students",label:"Toplam renci",value:r.length,color:Ee.cyan,modal:"total-students"},{id:"stock-low",label:"Azalan Adet (2)",value:kt.length,color:Ee.warning,modal:"stock-low"},{id:"stock-out",label:"Tkenen Adet",value:ot.length,color:Ee.danger,modal:"stock-out"},{id:"active-borrowers",label:"Aktif renci",value:We,color:"#2563eb",modal:"active-loans"},{id:"banned-students",label:"Cezal renciler",value:st.length,color:"#dc2626",modal:"banned-students"},{id:"due-soon-0-3",label:"0-3 Gn Kalan",value:P.length,color:Ee.danger,modal:"due-soon-0-3"},{id:"due-soon-4-7",label:"4-7 Gn Kalan",value:se.length,color:Ee.warning,modal:"due-soon-4-7"},{id:"due-soon-8-14",label:"8-14 Gn Kalan",value:fe.length,color:Ee.primary,modal:"due-soon-8-14"},{id:"due-soon-15plus",label:"15+ Gn Kalan",value:ve.length,color:Ee.success,modal:"due-soon-15plus"}];return e.jsxs("div",{style:{display:"grid",gap:"24px"},children:[e.jsx("div",{style:{display:"flex",justifyContent:"flex-end",marginBottom:"-16px"},children:e.jsx("button",{onClick:()=>b(!f),style:{padding:"8px 16px",borderRadius:"8px",border:"1px solid #e5e7eb",background:f?"linear-gradient(135deg, #eff6ff 0%, #dbeafe 50%, #bfdbfe 100%)":"#fff",color:f?"#1e40af":"#374151",cursor:"pointer",fontSize:"14px",fontWeight:600,transition:"all 0.2s",display:"flex",alignItems:"center",gap:"6px"},children:f?e.jsxs(e.Fragment,{children:[e.jsx("svg",{width:"16",height:"16",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:e.jsx("polyline",{points:"20 6 9 17 4 12"})}),"Ayarlar Kaydet"]}):e.jsxs(e.Fragment,{children:[e.jsxs("svg",{width:"16",height:"16",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:[e.jsx("path",{d:"M11 4H4a2 2 0 0 0-2 2v14a2 2 0 0 0 2 2h14a2 2 0 0 0 2-2v-7"}),e.jsx("path",{d:"M18.5 2.5a2.121 2.121 0 0 1 3 3L12 15l-4 1 1-4 9.5-9.5z"})]}),"Kartlar Dzenle"]})})}),f&&e.jsxs("div",{className:"card",style:{padding:"20px",background:"#f8fafc",border:"2px solid #e5e7eb"},children:[e.jsx("h3",{style:{marginTop:0,marginBottom:"16px",color:"#1f2937"},children:"Kartlar Dzenle"}),e.jsx("div",{style:{display:"grid",gridTemplateColumns:"repeat(auto-fit, minmax(200px, 1fr))",gap:"12px"},children:Et.map(c=>e.jsxs("label",{style:{display:"flex",alignItems:"center",gap:"8px",padding:"12px",background:"white",borderRadius:"8px",border:"1px solid #e5e7eb",cursor:"pointer",transition:"all 0.2s"},onMouseEnter:N=>{N.currentTarget.style.borderColor=c.color,N.currentTarget.style.boxShadow=`0 2px 8px ${c.color}33`},onMouseLeave:N=>{N.currentTarget.style.borderColor="#e5e7eb",N.currentTarget.style.boxShadow="none"},children:[e.jsx("input",{type:"checkbox",checked:ie[c.id]??!0,onChange:()=>ce(c.id),style:{width:"18px",height:"18px",cursor:"pointer"}}),e.jsx("span",{style:{fontWeight:600,color:"#334155"},children:c.label})]},c.id))})]}),e.jsx("div",{style:{display:"grid",gridTemplateColumns:"repeat(auto-fit, minmax(200px, 1fr))",gap:"16px"},children:Et.filter(c=>ie[c.id]!==!1).map(c=>e.jsxs("div",{className:"card",style:{textAlign:"center",cursor:"pointer",transition:"transform 0.2s, box-shadow 0.2s",padding:"20px",border:`2px solid ${c.color}33`},onClick:()=>l({type:c.modal}),onMouseEnter:N=>{N.currentTarget.style.transform="scale(1.05)",N.currentTarget.style.boxShadow=`0 4px 12px ${c.color}40`,N.currentTarget.style.borderColor=c.color},onMouseLeave:N=>{N.currentTarget.style.transform="scale(1)",N.currentTarget.style.boxShadow="none",N.currentTarget.style.borderColor=`${c.color}33`},children:[e.jsx("div",{style:{fontSize:"36px",fontWeight:700,color:c.color,marginBottom:"8px"},children:c.value}),e.jsx("div",{style:{color:"#64748b",fontSize:"14px",fontWeight:500},children:c.label})]},c.id))}),e.jsx("div",{style:{display:"grid",gridTemplateColumns:"repeat(auto-fit, minmax(400px, 1fr))",gap:"24px"}}),e.jsxs("div",{style:{display:"grid",gridTemplateColumns:"repeat(auto-fit, minmax(500px, 1fr))",gap:"24px"},children:[_e.length>0&&e.jsx("div",{className:"card",style:{transition:"transform 0.2s"},onMouseEnter:c=>c.currentTarget.style.transform="scale(1.02)",onMouseLeave:c=>c.currentTarget.style.transform="scale(1)",children:e.jsx(wo,{data:_e,title:"Kategori Baznda dn Saylar (ubua Tklayn)",color:Ee.primary,maxValue:bt,colors:Bt,onBarClick:c=>l({type:"category",category:c})})}),xt.length>0&&e.jsx("div",{className:"card",style:{transition:"transform 0.2s"},onMouseEnter:c=>c.currentTarget.style.transform="scale(1.02)",onMouseLeave:c=>c.currentTarget.style.transform="scale(1)",children:e.jsx(wo,{data:xt,title:"Snf Baznda dn Dalm (ubua Tklayn)",color:Ee.success,maxValue:lt,colors:[Ee.success,Ee.primary,Ee.purple,Ee.cyan,Ee.orange,Ee.teal,Ee.violet,Ee.rose],onBarClick:c=>{c.replace(". Snf","").trim(),l({type:"class-stats",classValue:c})}})})]}),e.jsxs("div",{style:{display:"grid",gridTemplateColumns:"repeat(auto-fit, minmax(500px, 1fr))",gap:"24px"},children:[Oe.length>0&&e.jsx("div",{className:"card",style:{transition:"transform 0.2s"},onMouseEnter:c=>c.currentTarget.style.transform="scale(1.02)",onMouseLeave:c=>c.currentTarget.style.transform="scale(1)",children:e.jsx(wo,{data:Oe.map(c=>({label:c.title.length>15?c.title.substring(0,15)+"...":c.title,value:c.borrowed})),title:"En ok dn Alnan Kitaplar (Top 10) (ubua Tklayn)",color:Ee.purple,maxValue:be,colors:Bt,onBarClick:c=>{Oe.find(oe=>oe.title.startsWith(c)||c.startsWith(oe.title.substring(0,15)))&&l({type:"top-books"})}})}),_e.length>0&&e.jsx("div",{className:"card",style:{cursor:"pointer",transition:"transform 0.2s"},onClick:()=>l({type:"category-trend"}),onMouseEnter:c=>c.currentTarget.style.transform="scale(1.02)",onMouseLeave:c=>c.currentTarget.style.transform="scale(1)",children:e.jsx(Ug,{data:_e.map(c=>({label:c.label,value:c.value})),title:"Kategori Baznda dn Trendi (Tklayn)",color:Ee.primary})})]}),e.jsxs("div",{style:{display:"grid",gridTemplateColumns:"repeat(auto-fit, minmax(500px, 1fr))",gap:"24px"},children:[P.length>0||se.length>0||fe.length>0||ve.length>0?e.jsx("div",{className:"card",style:{transition:"transform 0.2s"},onMouseEnter:c=>c.currentTarget.style.transform="scale(1.02)",onMouseLeave:c=>c.currentTarget.style.transform="scale(1)",children:e.jsx(wo,{data:[{label:"0-3 Gn",value:P.length},{label:"4-7 Gn",value:se.length},{label:"8-14 Gn",value:fe.length},{label:"15+ Gn",value:ve.length}],title:"Teslim Tarihi Yaklaanlar Dalm (ubua Tklayn)",color:Ee.warning,maxValue:Math.max(P.length,se.length,fe.length,ve.length,1),colors:[Ee.danger,Ee.warning,Ee.primary,Ee.success],onBarClick:c=>{c==="0-3 Gn"?l({type:"due-soon-0-3"}):c==="4-7 Gn"?l({type:"due-soon-4-7"}):c==="8-14 Gn"?l({type:"due-soon-8-14"}):c==="15+ Gn"&&l({type:"due-soon-15plus"})}})}):null,kt.length>0||ot.length>0?e.jsx("div",{className:"card",style:{transition:"transform 0.2s",cursor:"pointer"},onClick:()=>l({type:"stock-status"}),onMouseEnter:c=>c.currentTarget.style.transform="scale(1.02)",onMouseLeave:c=>c.currentTarget.style.transform="scale(1)",children:e.jsx(wo,{data:[{label:"Azalan Adet (2)",value:kt.length},{label:"Tkenen Adet",value:ot.length},{label:"Yeterli Adet",value:t.filter(c=>c.quantity>2).length}],title:"Adet Durumu Dalm (Tklayn)",color:Ee.danger,maxValue:Math.max(kt.length,ot.length,t.filter(c=>c.quantity>2).length,1),colors:[Ee.warning,Ee.danger,Ee.success]})}):null]}),Pe.length>0&&e.jsxs("div",{className:"card",style:{cursor:"pointer"},onClick:()=>l({type:"borrow-return-comparison"}),children:[e.jsx("h3",{style:{marginTop:0,marginBottom:"20px"},children:"Kategori Baznda dn/ade Karlatrmas - Tklayn"}),e.jsx("div",{style:{display:"grid",gridTemplateColumns:"repeat(3, 1fr)",gap:"16px"},children:Pe.slice(0,6).map((c,N)=>{const oe=c.borrowed+c.returned,Ae=oe>0?c.borrowed/oe*100:0,Be=oe>0?c.returned/oe*100:0;return e.jsxs("div",{style:{padding:"16px",backgroundColor:"#f8fafc",borderRadius:"8px",border:"1px solid #e2e8f0"},children:[e.jsx("div",{style:{fontWeight:600,marginBottom:"12px",color:"#1f2937"},children:c.label}),e.jsxs("div",{style:{marginBottom:"8px"},children:[e.jsxs("div",{style:{display:"flex",justifyContent:"space-between",marginBottom:"4px"},children:[e.jsx("span",{style:{fontSize:"12px",color:"#64748b"},children:"dn"}),e.jsx("span",{style:{fontSize:"12px",fontWeight:600,color:"#3b82f6"},children:c.borrowed})]}),e.jsx("div",{style:{height:"8px",backgroundColor:"#e2e8f0",borderRadius:"4px",overflow:"hidden"},children:e.jsx("div",{style:{height:"100%",width:`${Ae}%`,backgroundColor:"#3b82f6"}})})]}),e.jsxs("div",{children:[e.jsxs("div",{style:{display:"flex",justifyContent:"space-between",marginBottom:"4px"},children:[e.jsx("span",{style:{fontSize:"12px",color:"#64748b"},children:"ade"}),e.jsx("span",{style:{fontSize:"12px",fontWeight:600,color:"#10b981"},children:c.returned})]}),e.jsx("div",{style:{height:"8px",backgroundColor:"#e2e8f0",borderRadius:"4px",overflow:"hidden"},children:e.jsx("div",{style:{height:"100%",width:`${Be}%`,backgroundColor:"#10b981"}})})]})]},N)})})]}),Oe.length>0&&e.jsxs("div",{className:"card",style:{cursor:"pointer"},onClick:()=>l({type:"top-books"}),children:[e.jsx("h3",{style:{marginTop:0},children:"En ok dn Alnan Kitaplar (Detayl Liste) - Tklayn"}),e.jsx("div",{style:{display:"flex",flexDirection:"column",gap:"8px"},children:Oe.slice(0,5).map((c,N)=>e.jsxs("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center",padding:"12px",backgroundColor:N<3?"#f0f9ff":"#f8fafc",borderRadius:"8px"},children:[e.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"12px"},children:[e.jsx("div",{style:{width:"32px",height:"32px",borderRadius:"50%",backgroundColor:N<3?"#3b82f6":"#cbd5e1",color:"white",display:"flex",alignItems:"center",justifyContent:"center",fontWeight:700,fontSize:"14px"},children:N+1}),e.jsxs("div",{children:[e.jsx("div",{style:{fontWeight:600},children:c.title}),e.jsxs("div",{style:{fontSize:"12px",color:"#64748b"},children:[c.author,"  ",c.category]})]})]}),e.jsxs("div",{style:{display:"flex",gap:"24px",textAlign:"right"},children:[e.jsxs("div",{children:[e.jsx("div",{style:{fontWeight:700,color:"#3b82f6"},children:c.borrowed}),e.jsx("div",{style:{fontSize:"12px",color:"#64748b"},children:"dn"})]}),e.jsxs("div",{children:[e.jsx("div",{style:{fontWeight:700,color:"#10b981"},children:c.returned}),e.jsx("div",{style:{fontSize:"12px",color:"#64748b"},children:"ade"})]}),c.late>0&&e.jsxs("div",{children:[e.jsx("div",{style:{fontWeight:700,color:"#ef4444"},children:c.late}),e.jsx("div",{style:{fontSize:"12px",color:"#64748b"},children:"Gecikme"})]})]})]},N))})]}),Re.length>0&&e.jsxs("div",{className:"card",style:{cursor:"pointer"},onClick:()=>l({type:"top-students"}),children:[e.jsx("h3",{style:{marginTop:0},children:"En Aktif renciler (Detayl Liste) - Tklayn"}),e.jsx("div",{style:{display:"flex",flexDirection:"column",gap:"8px"},children:Re.slice(0,5).map((c,N)=>{const oe=c.borrowed-c.returned;return e.jsxs("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center",padding:"12px",backgroundColor:N<3?"#f0fdf4":"#f8fafc",borderRadius:"8px"},children:[e.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"12px"},children:[e.jsx("div",{style:{width:"32px",height:"32px",borderRadius:"50%",backgroundColor:N<3?"#10b981":"#cbd5e1",color:"white",display:"flex",alignItems:"center",justifyContent:"center",fontWeight:700,fontSize:"14px"},children:N+1}),e.jsxs("div",{children:[e.jsx("div",{style:{fontWeight:600},children:c.name}),e.jsxs("div",{style:{fontSize:"12px",color:"#64748b"},children:[c.class&&c.branch?`${c.class}-${c.branch}`:c.class?`${c.class}. Snf`:"",c.studentNumber&&`  No: ${c.studentNumber}`]})]})]}),e.jsxs("div",{style:{display:"flex",gap:"24px",textAlign:"right"},children:[e.jsxs("div",{children:[e.jsx("div",{style:{fontWeight:700,color:"#3b82f6"},children:c.borrowed}),e.jsx("div",{style:{fontSize:"12px",color:"#64748b"},children:"Toplam dn"})]}),e.jsxs("div",{children:[e.jsx("div",{style:{fontWeight:700,color:"#10b981"},children:c.returned}),e.jsx("div",{style:{fontSize:"12px",color:"#64748b"},children:"ade"})]}),e.jsxs("div",{children:[e.jsx("div",{style:{fontWeight:700,color:oe>0?"#f59e0b":"#10b981"},children:oe}),e.jsx("div",{style:{fontSize:"12px",color:"#64748b"},children:"Aktif"})]}),c.late>0&&e.jsxs("div",{children:[e.jsx("div",{style:{fontWeight:700,color:"#ef4444"},children:c.late}),e.jsx("div",{style:{fontSize:"12px",color:"#64748b"},children:"Gecikme"})]})]})]},N)})})]}),o&&_t.createPortal(e.jsx("div",{style:{position:"fixed",top:0,left:0,right:0,bottom:0,backgroundColor:"rgba(0, 0, 0, 0.5)",display:"flex",alignItems:"center",justifyContent:"center",zIndex:10001,cursor:"pointer"},onClick:()=>l(null),children:e.jsxs("div",{className:"card",style:{maxWidth:"1200px",width:"90%",maxHeight:"90vh",overflowY:"auto",overflowX:"hidden",position:"relative"},onClick:c=>c.stopPropagation(),children:[e.jsxs("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center",marginBottom:"16px",gap:"12px"},children:[e.jsxs("h2",{style:{margin:0,flex:1},children:[o.type==="active-loans"&&"Aktif dnler",o.type==="total-borrowed"&&"Toplam dn Detaylar",o.type==="total-returned"&&"ade Detaylar",o.type==="late-books"&&"Geciken Kitaplar",o.type==="late-borrowers"&&"Geciken renciler",o.type==="total-books"&&"Tm Kitaplar",o.type==="total-students"&&"Tm renciler",o.type==="category"&&"Kategorilere Gre Kitaplar",o.type==="loan-status"&&"dn Listesi Detaylar",o.type==="class-stats"&&"Snf Baznda dn Detaylar",o.type==="top-books"&&"En ok dn Alnan Kitaplar",o.type==="top-students"&&"En Aktif renciler",o.type==="category-comparison"&&"Kategori Karlatrmas",o.type==="category-trend"&&"Kategori Baznda dn Trendi",o.type==="borrow-return-comparison"&&"dn/ade Karlatrmas",o.type==="stock-low"&&"Azalan Adet Kitaplar (2)",o.type==="stock-out"&&"Tkenen Adet Kitaplar",o.type==="active-borrowers"&&"Aktif renciler",o.type==="banned-students"&&"Cezal renciler",o.type==="due-soon-0-3"&&"0-3 Gn inde Teslim Edilecekler",o.type==="due-soon-4-7"&&"4-7 Gn inde Teslim Edilecekler",o.type==="due-soon-8-14"&&"8-14 Gn inde Teslim Edilecekler",o.type==="due-soon-15plus"&&"15+ Gn inde Teslim Edilecekler"]}),e.jsx("button",{onClick:()=>{l(null),h(""),k(""),B(""),y(""),I("none")},style:{padding:"8px 12px",borderRadius:"6px",border:"1px solid #e5e7eb",background:"#fff",cursor:"pointer",fontWeight:600},children:"Kapat"})]}),o.type==="active-loans"&&e.jsx(On,{loans:ft,books:t,onRefresh:()=>{},personelName:"",resetSearch:!1}),o.type==="total-books"&&e.jsx(gr,{books:t,loans:i,onRefresh:()=>{},onSearch:()=>{}}),o.type==="category"&&e.jsxs("div",{children:[e.jsxs("div",{style:{marginBottom:"16px"},children:[e.jsx("label",{style:{display:"block",marginBottom:"12px",fontWeight:600,fontSize:"16px"},children:"Kategori Sein:"}),e.jsxs("div",{style:{display:"flex",flexWrap:"wrap",gap:"8px"},children:[e.jsx("button",{onClick:()=>l({type:"category",category:""}),style:{padding:"10px 16px",borderRadius:"8px",border:o.category?"1px solid #e5e7eb":"2px solid #3b82f6",background:o.category?"#fff":"#3b82f6",color:o.category?"#374151":"white",cursor:"pointer",fontWeight:600,fontSize:"14px",transition:"all 0.2s"},children:"Tm Kategoriler"}),_e.map(c=>e.jsxs("button",{onClick:()=>l({type:"category",category:c.label}),style:{padding:"10px 16px",borderRadius:"8px",border:o.category===c.label?"2px solid #3b82f6":"1px solid #e5e7eb",background:o.category===c.label?"#3b82f6":"#fff",color:o.category===c.label?"white":"#374151",cursor:"pointer",fontWeight:600,fontSize:"14px",transition:"all 0.2s"},onMouseEnter:N=>{o.category!==c.label&&(N.currentTarget.style.borderColor="#3b82f6",N.currentTarget.style.background="#eff6ff")},onMouseLeave:N=>{o.category!==c.label&&(N.currentTarget.style.borderColor="#e5e7eb",N.currentTarget.style.background="#fff")},children:[c.label," (",c.value,")"]},c.label))]})]}),o.category&&e.jsxs("div",{style:{marginBottom:"16px",display:"flex",gap:"12px",flexWrap:"wrap"},children:[e.jsxs("div",{style:{flex:1,minWidth:"200px"},children:[e.jsx("label",{style:{display:"block",marginBottom:"8px",fontWeight:600},children:"Arama:"}),e.jsx("input",{type:"text",value:d,onChange:c=>h(c.target.value),placeholder:"Kitap veya yazar ile ara...",style:{width:"100%",padding:"8px",borderRadius:"6px",border:"1px solid #e5e7eb"}})]}),e.jsxs("div",{style:{minWidth:"150px"},children:[e.jsx("label",{style:{display:"block",marginBottom:"8px",fontWeight:600},children:"Sralama:"}),e.jsxs("select",{value:m,onChange:c=>I(c.target.value),style:{width:"100%",padding:"8px",borderRadius:"6px",border:"1px solid #e5e7eb"},children:[e.jsx("option",{value:"none",children:"Sralama Yok"}),e.jsx("option",{value:"title-asc",children:"Kitap (A-Z)"}),e.jsx("option",{value:"title-desc",children:"Kitap (Z-A)"}),e.jsx("option",{value:"author-asc",children:"Yazar (A-Z)"}),e.jsx("option",{value:"author-desc",children:"Yazar (Z-A)"}),e.jsx("option",{value:"quantity-desc",children:"Adet (ok-Az)"}),e.jsx("option",{value:"quantity-asc",children:"Adet (Az-ok)"})]})]}),(d||m!=="none")&&e.jsx("div",{style:{display:"flex",alignItems:"flex-end"},children:e.jsx("button",{onClick:()=>{h(""),I("none")},style:{padding:"8px 16px",backgroundColor:"#ef4444",color:"white",border:"none",borderRadius:"6px",cursor:"pointer"},children:"Filtreleri Temizle"})})]}),o.category?e.jsx(gr,{books:t.filter(c=>c.category===o.category).filter(c=>d?G(c.title,d)||G(c.author,d)||G(c.category,d)||G(c.shelf,d)||G(c.publisher,d):!0).sort((c,N)=>m==="none"?0:m==="title-asc"?c.title.localeCompare(N.title,"tr"):m==="title-desc"?N.title.localeCompare(c.title,"tr"):m==="author-asc"?c.author.localeCompare(N.author,"tr"):m==="author-desc"?N.author.localeCompare(c.author,"tr"):m==="quantity-desc"?N.totalQuantity-c.totalQuantity:m==="quantity-asc"?c.totalQuantity-N.totalQuantity:0),loans:i.filter(c=>{const N=t.find(oe=>oe.id===c.bookId);return N&&N.category===o.category}),onRefresh:()=>{},onSearch:()=>{}}):e.jsx("div",{style:{padding:"24px",textAlign:"center",color:"#64748b"},children:"Ltfen bir kategori sein veya grafikten bir kategoriye tklayn"})]}),o.type==="total-students"&&e.jsxs("div",{children:[e.jsxs("div",{style:{marginBottom:"16px",display:"flex",gap:"12px",flexWrap:"wrap"},children:[e.jsx("input",{type:"text",value:d,onChange:c=>h(c.target.value),placeholder:"renci ad veya numara ile ara...",style:{flex:1,minWidth:"200px",padding:"8px",borderRadius:"6px",border:"1px solid #e5e7eb"}}),e.jsxs("select",{value:F,onChange:c=>y(c.target.value),style:{padding:"8px",borderRadius:"6px",border:"1px solid #e5e7eb",minWidth:"120px"},children:[e.jsx("option",{value:"",children:"Tm Snflar"}),Array.from(new Set(r.filter(c=>c.class).map(c=>c.class))).sort().map(c=>e.jsxs("option",{value:c==null?void 0:c.toString(),children:[c,". Snf"]},c))]}),e.jsxs("select",{value:m,onChange:c=>I(c.target.value),style:{padding:"8px",borderRadius:"6px",border:"1px solid #e5e7eb",minWidth:"150px"},children:[e.jsx("option",{value:"none",children:"Sralama Yok"}),e.jsx("option",{value:"name-asc",children:"Ad (A-Z)"}),e.jsx("option",{value:"name-desc",children:"Ad (Z-A)"}),e.jsx("option",{value:"borrowed-desc",children:"dn (ok-Az)"}),e.jsx("option",{value:"borrowed-asc",children:"dn (Az-ok)"}),e.jsx("option",{value:"returned-desc",children:"ade (ok-Az)"}),e.jsx("option",{value:"returned-asc",children:"ade (Az-ok)"}),e.jsx("option",{value:"active-desc",children:"Aktif dn (ok-Az)"}),e.jsx("option",{value:"active-asc",children:"Aktif dn (Az-ok)"}),e.jsx("option",{value:"class-asc",children:"Snf (Kk-Byk)"}),e.jsx("option",{value:"class-desc",children:"Snf (Byk-Kk)"})]}),(d||F||m!=="none")&&e.jsx("button",{onClick:()=>{h(""),y(""),I("none")},style:{padding:"8px 16px",backgroundColor:"#ef4444",color:"white",border:"none",borderRadius:"6px",cursor:"pointer"},children:"Filtreleri Temizle"})]}),e.jsx("div",{style:{display:"flex",flexDirection:"column",gap:"8px"},children:r.filter(c=>{var N;return!(d&&!G(c.name,d)&&!G(c.studentNumber,d)&&!G(c.class,d)&&!G(c.branch,d)||F&&((N=c.class)==null?void 0:N.toString())!==F)}).sort((c,N)=>m==="none"?o.type==="top-students"?N.borrowed-c.borrowed:0:m==="name-asc"?c.name.localeCompare(N.name,"tr"):m==="name-desc"?N.name.localeCompare(c.name,"tr"):m==="borrowed-desc"?N.borrowed-c.borrowed:m==="borrowed-asc"?c.borrowed-N.borrowed:m==="returned-desc"?N.returned-c.returned:m==="returned-asc"?c.returned-N.returned:m==="active-desc"?N.borrowed-N.returned-(c.borrowed-c.returned):m==="active-asc"?c.borrowed-c.returned-(N.borrowed-N.returned):m==="class-asc"?(c.class||0)-(N.class||0):m==="class-desc"?(N.class||0)-(c.class||0):0).map((c,N)=>{const oe=c.borrowed-c.returned;return e.jsxs("div",{style:{padding:"16px",backgroundColor:"#f8fafc",borderRadius:"12px",border:"1px solid #e2e8f0",display:"flex",justifyContent:"space-between",alignItems:"center",transition:"all 0.2s"},onMouseEnter:Ae=>{Ae.currentTarget.style.transform="translateY(-2px)",Ae.currentTarget.style.boxShadow="0 4px 12px rgba(0, 0, 0, 0.1)",Ae.currentTarget.style.borderColor="#3b82f6"},onMouseLeave:Ae=>{Ae.currentTarget.style.transform="translateY(0)",Ae.currentTarget.style.boxShadow="none",Ae.currentTarget.style.borderColor="#e2e8f0"},children:[e.jsxs("div",{children:[e.jsx("div",{style:{fontWeight:600,fontSize:"16px",color:"#1e293b"},children:c.name}),e.jsxs("div",{style:{fontSize:"13px",color:"#64748b",marginTop:"4px"},children:[c.class&&c.branch?`${c.class}-${c.branch}`:c.class?`${c.class}. Snf`:"",c.studentNumber&&`  No: ${c.studentNumber}`]})]}),e.jsxs("div",{style:{display:"flex",gap:"32px",textAlign:"right"},children:[e.jsxs("div",{children:[e.jsx("div",{style:{fontWeight:700,color:"#3b82f6",fontSize:"20px"},children:c.borrowed}),e.jsx("div",{style:{fontSize:"12px",color:"#64748b"},children:"Toplam dn"})]}),e.jsxs("div",{children:[e.jsx("div",{style:{fontWeight:700,color:"#10b981",fontSize:"20px"},children:c.returned}),e.jsx("div",{style:{fontSize:"12px",color:"#64748b"},children:"ade"})]}),e.jsxs("div",{children:[e.jsx("div",{style:{fontWeight:700,color:oe>0?"#f59e0b":"#10b981",fontSize:"20px"},children:oe}),e.jsx("div",{style:{fontSize:"12px",color:"#64748b"},children:"Aktif"})]}),c.late>0&&e.jsxs("div",{children:[e.jsx("div",{style:{fontWeight:700,color:"#ef4444",fontSize:"20px"},children:c.late}),e.jsx("div",{style:{fontSize:"12px",color:"#64748b"},children:"Gecikme"})]})]})]},N)})})]}),o.type==="loan-status"&&e.jsxs("div",{children:[e.jsxs("div",{style:{marginBottom:"16px",display:"flex",gap:"12px",flexWrap:"wrap"},children:[e.jsxs("select",{value:o.statusType||"",onChange:c=>l({...o,statusType:c.target.value}),style:{padding:"8px",borderRadius:"6px",border:"1px solid #e5e7eb",minWidth:"200px"},children:[e.jsx("option",{value:"",children:"Tm Durumlar"}),e.jsx("option",{value:"ok",children:"Normal (3+ gn kald)"}),e.jsx("option",{value:"warning",children:"Yaknda Dolacak (1-3 gn)"}),e.jsx("option",{value:"late",children:"Gecikmi (Sresi Doldu)"})]}),e.jsx("input",{type:"text",value:d,onChange:c=>h(c.target.value),placeholder:"Kitap, yazar veya renci ile ara...",style:{flex:1,minWidth:"200px",padding:"8px",borderRadius:"6px",border:"1px solid #e5e7eb"}}),(o.statusType||d)&&e.jsx("button",{onClick:()=>{l({...o,statusType:""}),h("")},style:{padding:"8px 16px",backgroundColor:"#ef4444",color:"white",border:"none",borderRadius:"6px",cursor:"pointer"},children:"Filtreleri Temizle"})]}),e.jsx(On,{loans:i.filter(c=>{const N=De(c.dueDate);return o.statusType==="ok"?N>3:o.statusType==="warning"?N>=0&&N<=3:o.statusType==="late"?N<0:!0}).filter(c=>d?G(c.title,d)||G(c.author,d)||G(c.borrower,d)||G(c.category,d)||G(c.personel,d):!0),books:t,onRefresh:()=>{},personelName:"",resetSearch:!1})]}),o.type==="class-stats"&&e.jsxs("div",{children:[e.jsxs("div",{style:{marginBottom:"16px",display:"flex",gap:"12px",flexWrap:"wrap"},children:[e.jsxs("select",{value:o.classValue||"",onChange:c=>l({...o,classValue:c.target.value}),style:{padding:"8px",borderRadius:"6px",border:"1px solid #e5e7eb",minWidth:"200px"},children:[e.jsx("option",{value:"",children:"Tm Snflar"}),xt.map(c=>e.jsxs("option",{value:c.label,children:[c.label," (",c.value," dn)"]},c.label))]}),o.classValue&&e.jsx("button",{onClick:()=>l({...o,classValue:""}),style:{padding:"8px 16px",backgroundColor:"#ef4444",color:"white",border:"none",borderRadius:"6px",cursor:"pointer"},children:"Filtreyi Temizle"})]}),o.classValue?e.jsx(Ji,{students:r.filter(c=>{var Ae;const oe=(o.classValue||"").replace(". Snf","").trim();return((Ae=c.class)==null?void 0:Ae.toString())===oe}),books:t,loans:i,resetSearch:!1}):e.jsx("div",{style:{display:"grid",gridTemplateColumns:"repeat(auto-fit, minmax(200px, 1fr))",gap:"16px"},children:xt.map((c,N)=>e.jsxs("div",{className:"card",style:{cursor:"pointer",textAlign:"center",padding:"20px",background:"linear-gradient(135deg, #10b981 0%, #059669 100%)",borderRadius:"12px",boxShadow:"0 4px 6px rgba(16, 185, 129, 0.2)",color:"white",transition:"all 0.2s"},onClick:()=>l({...o,classValue:c.label}),onMouseEnter:oe=>{oe.currentTarget.style.transform="translateY(-4px) scale(1.02)",oe.currentTarget.style.boxShadow="0 8px 16px rgba(16, 185, 129, 0.3)"},onMouseLeave:oe=>{oe.currentTarget.style.transform="translateY(0) scale(1)",oe.currentTarget.style.boxShadow="0 4px 6px rgba(16, 185, 129, 0.2)"},children:[e.jsx("div",{style:{fontSize:"36px",fontWeight:700,marginBottom:"8px"},children:c.value}),e.jsx("div",{style:{fontSize:"14px",fontWeight:500,opacity:.95},children:c.label})]},c.label))})]}),o.type==="category-comparison"&&e.jsx("div",{children:o.category?e.jsxs("div",{children:[e.jsxs("div",{style:{marginBottom:"16px",display:"flex",gap:"12px",flexWrap:"wrap",alignItems:"center"},children:[e.jsx("button",{onClick:()=>l({...o,category:""}),style:{padding:"8px 16px",backgroundColor:"#64748b",color:"white",border:"none",borderRadius:"6px",cursor:"pointer",fontWeight:600},children:" Geri"}),e.jsx("div",{style:{flex:1},children:e.jsxs("strong",{style:{fontSize:"16px"},children:[o.category," Kategorisi - Kitap Listesi"]})})]}),e.jsx(gr,{books:t.filter(c=>c.category===o.category),loans:i,onRefresh:()=>{},onSearch:()=>{},resetSearch:!1})]}):e.jsxs("div",{children:[e.jsxs("div",{style:{marginBottom:"16px",display:"flex",gap:"12px",flexWrap:"wrap"},children:[e.jsx("input",{type:"text",value:d,onChange:c=>h(c.target.value),placeholder:"Kategori ile ara...",style:{flex:1,minWidth:"200px",padding:"8px",borderRadius:"6px",border:"1px solid #e5e7eb"}}),d&&e.jsx("button",{onClick:()=>h(""),style:{padding:"8px 16px",backgroundColor:"#ef4444",color:"white",border:"none",borderRadius:"6px",cursor:"pointer"},children:"Filtreleri Temizle"})]}),e.jsx("div",{style:{display:"grid",gridTemplateColumns:"repeat(auto-fit, minmax(250px, 1fr))",gap:"16px"},children:Pe.filter(c=>d?G(c.label,d):!0).map((c,N)=>{const oe=c.borrowed+c.returned,Ae=oe>0?c.borrowed/oe*100:0,Be=oe>0?c.returned/oe*100:0;return e.jsxs("div",{className:"card",style:{cursor:"pointer",padding:"20px",border:"2px solid #e2e8f0",borderRadius:"12px",backgroundColor:"#ffffff",transition:"all 0.2s",boxShadow:"0 2px 4px rgba(0, 0, 0, 0.05)"},onClick:()=>l({...o,category:c.label}),onMouseEnter:ye=>{ye.currentTarget.style.transform="translateY(-4px)",ye.currentTarget.style.borderColor="#3b82f6",ye.currentTarget.style.boxShadow="0 8px 16px rgba(59, 130, 246, 0.2)"},onMouseLeave:ye=>{ye.currentTarget.style.transform="translateY(0)",ye.currentTarget.style.borderColor="#e2e8f0",ye.currentTarget.style.boxShadow="0 2px 4px rgba(0, 0, 0, 0.05)"},children:[e.jsx("div",{style:{fontWeight:600,marginBottom:"16px",color:"#1f2937",fontSize:"18px"},children:c.label}),e.jsxs("div",{style:{marginBottom:"12px"},children:[e.jsxs("div",{style:{display:"flex",justifyContent:"space-between",marginBottom:"6px"},children:[e.jsx("span",{style:{fontSize:"14px",color:"#64748b",fontWeight:600},children:"dn"}),e.jsx("span",{style:{fontSize:"20px",fontWeight:700,color:"#3b82f6"},children:c.borrowed})]}),e.jsx("div",{style:{height:"12px",backgroundColor:"#e2e8f0",borderRadius:"6px",overflow:"hidden"},children:e.jsx("div",{style:{height:"100%",width:`${Ae}%`,background:"linear-gradient(90deg, #3b82f6 0%, #2563eb 100%)",transition:"width 0.3s ease"}})})]}),e.jsxs("div",{children:[e.jsxs("div",{style:{display:"flex",justifyContent:"space-between",marginBottom:"6px"},children:[e.jsx("span",{style:{fontSize:"14px",color:"#64748b",fontWeight:600},children:"ade"}),e.jsx("span",{style:{fontSize:"20px",fontWeight:700,color:"#10b981"},children:c.returned})]}),e.jsx("div",{style:{height:"12px",backgroundColor:"#e2e8f0",borderRadius:"6px",overflow:"hidden"},children:e.jsx("div",{style:{height:"100%",width:`${Be}%`,background:"linear-gradient(90deg, #10b981 0%, #059669 100%)",transition:"width 0.3s ease"}})})]}),e.jsx("div",{style:{marginTop:"12px",paddingTop:"12px",borderTop:"1px solid #e2e8f0",textAlign:"center"},children:e.jsxs("span",{style:{fontSize:"14px",color:"#64748b"},children:["Toplam: ",e.jsx("strong",{style:{fontSize:"16px",color:"#1f2937"},children:oe})]})})]},N)})})]})}),o.type==="borrow-return-comparison"&&e.jsx("div",{children:o.category?e.jsxs("div",{children:[e.jsxs("div",{style:{marginBottom:"16px",display:"flex",gap:"12px",flexWrap:"wrap",alignItems:"center"},children:[e.jsx("button",{onClick:()=>l({...o,category:""}),style:{padding:"8px 16px",backgroundColor:"#64748b",color:"white",border:"none",borderRadius:"6px",cursor:"pointer",fontWeight:600},children:" Geri"}),e.jsx("div",{style:{flex:1},children:e.jsxs("strong",{style:{fontSize:"16px"},children:[o.category," Kategorisi - Kitap Listesi"]})})]}),e.jsx(gr,{books:t.filter(c=>c.category===o.category),loans:i,onRefresh:()=>{},onSearch:()=>{},resetSearch:!1})]}):e.jsxs("div",{children:[e.jsxs("div",{style:{marginBottom:"16px",display:"flex",gap:"12px",flexWrap:"wrap"},children:[e.jsx("input",{type:"text",value:d,onChange:c=>h(c.target.value),placeholder:"Kategori ile ara...",style:{flex:1,minWidth:"200px",padding:"8px",borderRadius:"6px",border:"1px solid #e5e7eb"}}),d&&e.jsx("button",{onClick:()=>h(""),style:{padding:"8px 16px",backgroundColor:"#ef4444",color:"white",border:"none",borderRadius:"6px",cursor:"pointer"},children:"Filtreleri Temizle"})]}),e.jsx("div",{style:{display:"grid",gridTemplateColumns:"repeat(auto-fit, minmax(250px, 1fr))",gap:"16px"},children:Pe.filter(c=>d?G(c.label,d):!0).map((c,N)=>{const oe=c.borrowed+c.returned,Ae=oe>0?c.borrowed/oe*100:0,Be=oe>0?c.returned/oe*100:0;return e.jsxs("div",{className:"card",style:{cursor:"pointer",padding:"20px",border:"2px solid #e2e8f0",borderRadius:"12px",backgroundColor:"#ffffff",transition:"all 0.2s",boxShadow:"0 2px 4px rgba(0, 0, 0, 0.05)"},onClick:()=>l({...o,category:c.label}),onMouseEnter:ye=>{ye.currentTarget.style.transform="translateY(-4px)",ye.currentTarget.style.borderColor="#3b82f6",ye.currentTarget.style.boxShadow="0 8px 16px rgba(59, 130, 246, 0.2)"},onMouseLeave:ye=>{ye.currentTarget.style.transform="translateY(0)",ye.currentTarget.style.borderColor="#e2e8f0",ye.currentTarget.style.boxShadow="0 2px 4px rgba(0, 0, 0, 0.05)"},children:[e.jsx("div",{style:{fontWeight:600,marginBottom:"16px",color:"#1f2937",fontSize:"18px"},children:c.label}),e.jsxs("div",{style:{marginBottom:"12px"},children:[e.jsxs("div",{style:{display:"flex",justifyContent:"space-between",marginBottom:"6px"},children:[e.jsx("span",{style:{fontSize:"14px",color:"#64748b",fontWeight:600},children:"dn"}),e.jsx("span",{style:{fontSize:"20px",fontWeight:700,color:"#3b82f6"},children:c.borrowed})]}),e.jsx("div",{style:{height:"12px",backgroundColor:"#e2e8f0",borderRadius:"6px",overflow:"hidden"},children:e.jsx("div",{style:{height:"100%",width:`${Ae}%`,background:"linear-gradient(90deg, #3b82f6 0%, #2563eb 100%)",transition:"width 0.3s ease"}})})]}),e.jsxs("div",{children:[e.jsxs("div",{style:{display:"flex",justifyContent:"space-between",marginBottom:"6px"},children:[e.jsx("span",{style:{fontSize:"14px",color:"#64748b",fontWeight:600},children:"ade"}),e.jsx("span",{style:{fontSize:"20px",fontWeight:700,color:"#10b981"},children:c.returned})]}),e.jsx("div",{style:{height:"12px",backgroundColor:"#e2e8f0",borderRadius:"6px",overflow:"hidden"},children:e.jsx("div",{style:{height:"100%",width:`${Be}%`,background:"linear-gradient(90deg, #10b981 0%, #059669 100%)",transition:"width 0.3s ease"}})})]}),e.jsx("div",{style:{marginTop:"12px",paddingTop:"12px",borderTop:"1px solid #e2e8f0",textAlign:"center"},children:e.jsxs("span",{style:{fontSize:"14px",color:"#64748b"},children:["Toplam: ",e.jsx("strong",{style:{fontSize:"16px",color:"#1f2937"},children:oe})]})})]},N)})})]})}),o.type==="top-books"&&e.jsxs("div",{children:[e.jsxs("div",{style:{marginBottom:"16px",padding:"12px",backgroundColor:"#eff6ff",borderRadius:"8px",border:"1px solid #3b82f6"},children:[e.jsx("div",{style:{fontWeight:600,color:"#1e40af",marginBottom:"4px"},children:"Toplam dn Says"}),e.jsx("div",{style:{fontSize:"24px",fontWeight:700,color:"#3b82f6"},children:n.reduce((c,N)=>c+(N.borrowed||0),0)})]}),e.jsxs("div",{style:{marginBottom:"16px",display:"flex",gap:"12px",flexWrap:"wrap"},children:[e.jsx("input",{type:"text",value:d,onChange:c=>h(c.target.value),placeholder:"Kitap ad, yazar veya kategori ile ara...",style:{flex:1,minWidth:"200px",padding:"8px",borderRadius:"6px",border:"1px solid #e5e7eb"}}),e.jsxs("select",{value:C,onChange:c=>k(c.target.value),style:{padding:"8px",borderRadius:"6px",border:"1px solid #e5e7eb",minWidth:"150px"},children:[e.jsx("option",{value:"",children:"Tm Kategoriler"}),Array.from(new Set(n.filter(c=>c.category).map(c=>c.category))).sort().map(c=>e.jsx("option",{value:c,children:c},c))]}),e.jsxs("select",{value:m,onChange:c=>I(c.target.value),style:{padding:"8px",borderRadius:"6px",border:"1px solid #e5e7eb",minWidth:"150px"},children:[e.jsx("option",{value:"borrowed-desc",children:"dn (Yksek  Dk)"}),e.jsx("option",{value:"borrowed-asc",children:"dn (Dk  Yksek)"}),e.jsx("option",{value:"returned-desc",children:"ade (Yksek  Dk)"}),e.jsx("option",{value:"returned-asc",children:"ade (Dk  Yksek)"}),e.jsx("option",{value:"title-asc",children:"Kitap Ad (A  Z)"}),e.jsx("option",{value:"title-desc",children:"Kitap Ad (Z  A)"})]}),(d||C||m!=="borrowed-desc")&&e.jsx("button",{onClick:()=>{h(""),k(""),I("borrowed-desc")},style:{padding:"8px 16px",backgroundColor:"#ef4444",color:"white",border:"none",borderRadius:"6px",cursor:"pointer"},children:"Filtreleri Temizle"})]}),e.jsx("div",{style:{display:"flex",flexDirection:"column",gap:"8px"},children:[...n].filter(c=>c.borrowed>0).filter(c=>!(d&&!G(c.title,d)&&!G(c.author,d)&&!G(c.category,d)||C&&c.category!==C)).sort((c,N)=>m==="borrowed-desc"?N.borrowed-c.borrowed:m==="borrowed-asc"?c.borrowed-N.borrowed:m==="returned-desc"?N.returned-c.returned:m==="returned-asc"?c.returned-N.returned:m==="title-asc"?c.title.localeCompare(N.title,"tr"):m==="title-desc"?N.title.localeCompare(c.title,"tr"):N.borrowed-c.borrowed).slice(0,50).map((c,N)=>{const oe=c.borrowed-c.returned;return e.jsxs("div",{style:{padding:"16px",backgroundColor:N<3?"#eff6ff":"#f8fafc",borderRadius:"12px",border:N<3?"2px solid #3b82f6":"1px solid #e2e8f0",display:"flex",justifyContent:"space-between",alignItems:"center",boxShadow:N<3?"0 2px 8px rgba(59, 130, 246, 0.15)":"none"},children:[e.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"16px"},children:[e.jsx("div",{style:{width:"40px",height:"40px",borderRadius:"50%",backgroundColor:N<3?"#3b82f6":"#cbd5e1",color:"white",display:"flex",alignItems:"center",justifyContent:"center",fontWeight:700,fontSize:"16px"},children:N+1}),e.jsxs("div",{children:[e.jsx("div",{style:{fontWeight:600,fontSize:"16px",color:"#1e293b"},children:c.title}),e.jsxs("div",{style:{fontSize:"13px",color:"#64748b",marginTop:"4px"},children:[c.author,"  ",c.category]})]})]}),e.jsxs("div",{style:{display:"flex",gap:"32px",textAlign:"right"},children:[e.jsxs("div",{children:[e.jsx("div",{style:{fontWeight:700,color:"#3b82f6",fontSize:"20px"},children:c.borrowed}),e.jsx("div",{style:{fontSize:"12px",color:"#64748b"},children:"Toplam dn"})]}),e.jsxs("div",{children:[e.jsx("div",{style:{fontWeight:700,color:"#10b981",fontSize:"20px"},children:c.returned}),e.jsx("div",{style:{fontSize:"12px",color:"#64748b"},children:"ade"})]}),e.jsxs("div",{children:[e.jsx("div",{style:{fontWeight:700,color:oe>0?"#f59e0b":"#10b981",fontSize:"20px"},children:oe}),e.jsx("div",{style:{fontSize:"12px",color:"#64748b"},children:"Aktif"})]}),c.late>0&&e.jsxs("div",{children:[e.jsx("div",{style:{fontWeight:700,color:"#ef4444",fontSize:"20px"},children:c.late}),e.jsx("div",{style:{fontSize:"12px",color:"#64748b"},children:"Gecikme"})]})]})]},N)})})]}),o.type==="top-students"&&e.jsxs("div",{children:[e.jsxs("div",{style:{marginBottom:"16px",padding:"12px",backgroundColor:"#f0fdf4",borderRadius:"8px",border:"1px solid #10b981"},children:[e.jsx("div",{style:{fontWeight:600,color:"#065f46",marginBottom:"4px"},children:"Aktif renci Says"}),e.jsx("div",{style:{fontSize:"24px",fontWeight:700,color:"#10b981"},children:new Set(i.filter(c=>De(c.dueDate)>=0).map(c=>c.borrower)).size})]}),e.jsxs("div",{style:{marginBottom:"16px",display:"flex",gap:"12px",flexWrap:"wrap"},children:[e.jsx("input",{type:"text",value:d,onChange:c=>h(c.target.value),placeholder:"renci ad veya numara ile ara...",style:{flex:1,minWidth:"200px",padding:"8px",borderRadius:"6px",border:"1px solid #e5e7eb"}}),e.jsxs("select",{value:F,onChange:c=>y(c.target.value),style:{padding:"8px",borderRadius:"6px",border:"1px solid #e5e7eb",minWidth:"120px"},children:[e.jsx("option",{value:"",children:"Tm Snflar"}),Array.from(new Set(r.filter(c=>c.class).map(c=>c.class))).sort().map(c=>e.jsxs("option",{value:c==null?void 0:c.toString(),children:[c,". Snf"]},c))]}),(d||F)&&e.jsx("button",{onClick:()=>{h(""),y("")},style:{padding:"8px 16px",backgroundColor:"#ef4444",color:"white",border:"none",borderRadius:"6px",cursor:"pointer"},children:"Filtreleri Temizle"})]}),e.jsx("div",{style:{display:"flex",flexDirection:"column",gap:"8px"},children:Re.filter(c=>{var N;return!(d&&!G(c.name,d)&&!G(c.studentNumber,d)&&!G(c.class,d)&&!G(c.branch,d)||F&&((N=c.class)==null?void 0:N.toString())!==F)}).slice(0,50).map((c,N)=>{const oe=c.borrowed-c.returned;return e.jsxs("div",{style:{padding:"16px",backgroundColor:N<3?"#f0fdf4":"#f8fafc",borderRadius:"12px",border:N<3?"2px solid #10b981":"1px solid #e2e8f0",display:"flex",justifyContent:"space-between",alignItems:"center",boxShadow:N<3?"0 2px 8px rgba(16, 185, 129, 0.15)":"none"},children:[e.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"16px"},children:[e.jsx("div",{style:{width:"40px",height:"40px",borderRadius:"50%",backgroundColor:N<3?"#10b981":"#cbd5e1",color:"white",display:"flex",alignItems:"center",justifyContent:"center",fontWeight:700,fontSize:"16px"},children:N+1}),e.jsxs("div",{children:[e.jsx("div",{style:{fontWeight:600,fontSize:"16px",color:"#1e293b"},children:c.name}),e.jsxs("div",{style:{fontSize:"13px",color:"#64748b",marginTop:"4px"},children:[c.class&&c.branch?`${c.class}-${c.branch}`:c.class?`${c.class}. Snf`:"",c.studentNumber&&`  No: ${c.studentNumber}`]})]})]}),e.jsxs("div",{style:{display:"flex",gap:"32px",textAlign:"right"},children:[e.jsxs("div",{children:[e.jsx("div",{style:{fontWeight:700,color:"#3b82f6",fontSize:"20px"},children:c.borrowed}),e.jsx("div",{style:{fontSize:"12px",color:"#64748b"},children:"Toplam dn"})]}),e.jsxs("div",{children:[e.jsx("div",{style:{fontWeight:700,color:"#10b981",fontSize:"20px"},children:c.returned}),e.jsx("div",{style:{fontSize:"12px",color:"#64748b"},children:"ade"})]}),e.jsxs("div",{children:[e.jsx("div",{style:{fontWeight:700,color:oe>0?"#f59e0b":"#10b981",fontSize:"20px"},children:oe}),e.jsx("div",{style:{fontSize:"12px",color:"#64748b"},children:"Aktif"})]}),c.late>0&&e.jsxs("div",{children:[e.jsx("div",{style:{fontWeight:700,color:"#ef4444",fontSize:"20px"},children:c.late}),e.jsx("div",{style:{fontSize:"12px",color:"#64748b"},children:"Gecikme"})]})]})]},N)})})]}),o.type==="category-trend"&&e.jsxs("div",{children:[e.jsxs("div",{style:{marginBottom:"16px",display:"flex",gap:"12px",flexWrap:"wrap"},children:[e.jsx("input",{type:"text",value:d,onChange:c=>h(c.target.value),placeholder:"Kategori ile ara...",style:{flex:1,minWidth:"200px",padding:"8px",borderRadius:"6px",border:"1px solid #e5e7eb"}}),d&&e.jsx("button",{onClick:()=>h(""),style:{padding:"8px 16px",backgroundColor:"#ef4444",color:"white",border:"none",borderRadius:"6px",cursor:"pointer"},children:"Filtreleri Temizle"})]}),e.jsx("div",{style:{display:"grid",gridTemplateColumns:"repeat(auto-fit, minmax(250px, 1fr))",gap:"16px"},children:_e.filter(c=>d?G(c.label,d):!0).map((c,N)=>{const oe=t.filter(Be=>Be.category===c.label),Ae=i.filter(Be=>{const ye=t.find(Ve=>Ve.id===Be.bookId);return ye&&ye.category===c.label});return e.jsxs("div",{className:"card",style:{cursor:"pointer",transition:"transform 0.2s",padding:"20px"},onClick:()=>l({type:"category",category:c.label}),onMouseEnter:Be=>Be.currentTarget.style.transform="scale(1.02)",onMouseLeave:Be=>Be.currentTarget.style.transform="scale(1)",children:[e.jsx("div",{style:{fontWeight:600,fontSize:"18px",color:"#1e293b",marginBottom:"12px"},children:c.label}),e.jsxs("div",{style:{display:"flex",flexDirection:"column",gap:"8px"},children:[e.jsxs("div",{children:[e.jsx("div",{style:{fontSize:"12px",color:"#64748b",marginBottom:"4px"},children:"Toplam dn"}),e.jsx("div",{style:{fontSize:"24px",fontWeight:700,color:"#3b82f6"},children:c.value})]}),e.jsxs("div",{children:[e.jsx("div",{style:{fontSize:"12px",color:"#64748b",marginBottom:"4px"},children:"Kitap Says"}),e.jsx("div",{style:{fontSize:"18px",fontWeight:600,color:"#64748b"},children:oe.length})]}),e.jsxs("div",{children:[e.jsx("div",{style:{fontSize:"12px",color:"#64748b",marginBottom:"4px"},children:"Aktif dn"}),e.jsx("div",{style:{fontSize:"18px",fontWeight:600,color:"#10b981"},children:Ae.filter(Be=>De(Be.dueDate)>=0).length})]})]})]},N)})})]}),o.type==="late-borrowers"&&e.jsxs("div",{children:[e.jsxs("div",{style:{marginBottom:"16px",display:"flex",gap:"12px",flexWrap:"wrap"},children:[e.jsx("input",{type:"text",value:d,onChange:c=>h(c.target.value),placeholder:"renci ad ile ara...",style:{flex:1,minWidth:"200px",padding:"8px",borderRadius:"6px",border:"1px solid #e5e7eb"}}),d&&e.jsx("button",{onClick:()=>h(""),style:{padding:"8px 16px",backgroundColor:"#ef4444",color:"white",border:"none",borderRadius:"6px",cursor:"pointer"},children:"Filtreleri Temizle"})]}),e.jsx(On,{loans:ze.filter(c=>d?G(c.borrower,d)||G(c.title,d)||G(c.author,d):!0),books:t,onRefresh:()=>{},personelName:"",resetSearch:!1})]}),o.type==="stock-low"&&e.jsx(gr,{books:kt,loans:i,onRefresh:()=>{},onSearch:()=>{}}),o.type==="stock-out"&&e.jsx(gr,{books:ot,loans:i,onRefresh:()=>{},onSearch:()=>{}}),o.type==="stock-status"&&e.jsxs("div",{children:[e.jsxs("div",{style:{marginBottom:"16px",display:"flex",gap:"12px",flexWrap:"wrap"},children:[e.jsx("input",{type:"text",value:d,onChange:c=>h(c.target.value),placeholder:"Kitap ad, yazar veya kategori ile ara...",style:{flex:1,minWidth:"200px",padding:"8px",borderRadius:"6px",border:"1px solid #e5e7eb"}}),e.jsxs("select",{value:C,onChange:c=>k(c.target.value),style:{padding:"8px",borderRadius:"6px",border:"1px solid #e5e7eb",minWidth:"150px"},children:[e.jsx("option",{value:"",children:"Tm Kategoriler"}),Array.from(new Set(t.filter(c=>c.category).map(c=>c.category))).sort().map(c=>e.jsx("option",{value:c,children:c},c))]}),(d||C)&&e.jsx("button",{onClick:()=>{h(""),k("")},style:{padding:"8px 16px",backgroundColor:"#ef4444",color:"white",border:"none",borderRadius:"6px",cursor:"pointer"},children:"Filtreleri Temizle"})]}),e.jsxs("div",{style:{marginBottom:"16px",display:"flex",gap:"8px",flexWrap:"wrap"},children:[e.jsxs("button",{onClick:()=>I(m==="stock-0"?"none":"stock-0"),style:{padding:"8px 16px",borderRadius:"6px",border:m==="stock-0"?"2px solid #ef4444":"1px solid #e5e7eb",background:m==="stock-0"?"#fef2f2":"#fff",color:m==="stock-0"?"#991b1b":"#374151",cursor:"pointer",fontWeight:600},children:["0 Adet (",ot.length,")"]}),e.jsxs("button",{onClick:()=>I(m==="stock-low"?"none":"stock-low"),style:{padding:"8px 16px",borderRadius:"6px",border:m==="stock-low"?"2px solid #f59e0b":"1px solid #e5e7eb",background:m==="stock-low"?"#fffbeb":"#fff",color:m==="stock-low"?"#92400e":"#374151",cursor:"pointer",fontWeight:600},children:["<2 Adet (",kt.length,")"]}),e.jsxs("button",{onClick:()=>I(m==="stock-2"?"none":"stock-2"),style:{padding:"8px 16px",borderRadius:"6px",border:m==="stock-2"?"2px solid #3b82f6":"1px solid #e5e7eb",background:m==="stock-2"?"#eff6ff":"#fff",color:m==="stock-2"?"#1e40af":"#374151",cursor:"pointer",fontWeight:600},children:["2 Adet (",t.filter(c=>c.quantity===2).length,")"]}),e.jsxs("button",{onClick:()=>I(m==="stock-3-5"?"none":"stock-3-5"),style:{padding:"8px 16px",borderRadius:"6px",border:m==="stock-3-5"?"2px solid #10b981":"1px solid #e5e7eb",background:m==="stock-3-5"?"#f0fdf4":"#fff",color:m==="stock-3-5"?"#065f46":"#374151",cursor:"pointer",fontWeight:600},children:["3-5 Adet (",t.filter(c=>c.quantity>=3&&c.quantity<=5).length,")"]}),e.jsxs("button",{onClick:()=>I(m==="stock-6plus"?"none":"stock-6plus"),style:{padding:"8px 16px",borderRadius:"6px",border:m==="stock-6plus"?"2px solid #10b981":"1px solid #e5e7eb",background:m==="stock-6plus"?"#f0fdf4":"#fff",color:m==="stock-6plus"?"#065f46":"#374151",cursor:"pointer",fontWeight:600},children:["6+ Adet (",t.filter(c=>c.quantity>=6).length,")"]})]}),e.jsx(gr,{books:t.filter(c=>!(d&&!G(c.title,d)&&!G(c.author||"",d)&&!G(c.category||"",d)||C&&c.category!==C||m==="stock-0"&&c.quantity!==0||m==="stock-low"&&(c.quantity===0||c.quantity>2)||m==="stock-2"&&c.quantity!==2||m==="stock-3-5"&&(c.quantity<3||c.quantity>5)||m==="stock-6plus"&&c.quantity<6)),loans:i,onRefresh:()=>{},onSearch:()=>{}})]}),o.type==="active-borrowers"&&e.jsxs("div",{children:[e.jsxs("div",{style:{marginBottom:"16px",display:"flex",gap:"12px",flexWrap:"wrap"},children:[e.jsx("input",{type:"text",value:d,onChange:c=>h(c.target.value),placeholder:"renci ad ile ara...",style:{flex:1,minWidth:"200px",padding:"8px",borderRadius:"6px",border:"1px solid #e5e7eb"}}),d&&e.jsx("button",{onClick:()=>h(""),style:{padding:"8px 16px",backgroundColor:"#ef4444",color:"white",border:"none",borderRadius:"6px",cursor:"pointer"},children:"Filtreleri Temizle"})]}),e.jsx(Ji,{students:r.filter(c=>i.filter(oe=>oe.borrower===c.name&&De(oe.dueDate)>=0).length===0?!1:d?G(c.name,d)||G(c.studentNumber,d)||G(c.class,d)||G(c.branch,d):!0),books:t,loans:i,resetSearch:!1})]}),o.type==="banned-students"&&e.jsx(Ji,{students:st,books:t,loans:i,resetSearch:!1}),o.type==="due-soon-0-3"&&e.jsx(On,{loans:P,books:t,onRefresh:()=>{},personelName:"",resetSearch:!1}),o.type==="due-soon-4-7"&&e.jsx(On,{loans:se,books:t,onRefresh:()=>{},personelName:"",resetSearch:!1}),o.type==="due-soon-8-14"&&e.jsx(On,{loans:fe,books:t,onRefresh:()=>{},personelName:"",resetSearch:!1}),o.type==="due-soon-15plus"&&e.jsx(On,{loans:ve,books:t,onRefresh:()=>{},personelName:"",resetSearch:!1}),(o.type==="total-borrowed"||o.type==="total-returned"||o.type==="late-books")&&e.jsxs("div",{children:[e.jsxs("div",{style:{marginBottom:"16px",display:"flex",gap:"12px",flexWrap:"wrap"},children:[e.jsx("input",{type:"text",value:d,onChange:c=>h(c.target.value),placeholder:"Kitap, yazar veya kategori ile ara...",style:{flex:1,minWidth:"200px",padding:"8px",borderRadius:"6px",border:"1px solid #e5e7eb"}}),e.jsxs("select",{value:C,onChange:c=>k(c.target.value),style:{padding:"8px",borderRadius:"6px",border:"1px solid #e5e7eb",minWidth:"150px"},children:[e.jsx("option",{value:"",children:"Tm Kategoriler"}),Array.from(new Set(t.map(c=>c.category).filter(Boolean))).sort().map(c=>e.jsx("option",{value:c,children:c},c))]}),e.jsxs("select",{value:S,onChange:c=>B(c.target.value),style:{padding:"8px",borderRadius:"6px",border:"1px solid #e5e7eb",minWidth:"150px"},children:[e.jsx("option",{value:"",children:"Tm Yazarlar"}),Array.from(new Set(t.map(c=>c.author).filter(Boolean))).sort().map(c=>e.jsx("option",{value:c,children:c},c))]}),e.jsxs("select",{value:m,onChange:c=>I(c.target.value),style:{padding:"8px",borderRadius:"6px",border:"1px solid #e5e7eb",minWidth:"150px"},children:[e.jsx("option",{value:"none",children:"Sralama Yok"}),e.jsx("option",{value:"title-asc",children:"Kitap (A-Z)"}),e.jsx("option",{value:"title-desc",children:"Kitap (Z-A)"}),o.type==="late-books"&&e.jsx("option",{value:"late-desc",children:"Gecikme (ok-Az)"}),o.type==="total-borrowed"&&e.jsx("option",{value:"borrowed-desc",children:"dn (ok-Az)"}),o.type==="total-returned"&&e.jsx("option",{value:"returned-desc",children:"ade (ok-Az)"})]}),(d||C||S||m!=="none")&&e.jsx("button",{onClick:()=>{h(""),k(""),B(""),I("none")},style:{padding:"8px 16px",backgroundColor:"#ef4444",color:"white",border:"none",borderRadius:"6px",cursor:"pointer"},children:"Filtreleri Temizle"})]}),e.jsx("div",{style:{display:"flex",flexDirection:"column",gap:"8px"},children:t.map(N=>{const oe=i.filter(nn=>{const Te=t.find(wt=>wt.id===nn.bookId);return Te&&Te.title===N.title&&Te.author===N.author}),Ae=oe.length,Be=oe.filter(nn=>De(nn.dueDate)<0).length,ye=n.find(nn=>nn.title===N.title&&nn.author===N.author),Ve=Ae||(ye==null?void 0:ye.borrowed)||0,jt=(ye==null?void 0:ye.returned)||0,zt=Be||(ye==null?void 0:ye.late)||0;return{...N,realBorrowed:Ae,realReturned:jt,realLate:Be,borrowed:Ve,returned:jt,late:zt}}).filter(N=>!(o.type==="late-books"&&N.late===0||o.type==="total-borrowed"&&N.borrowed===0||o.type==="total-returned"&&N.returned===0||d&&!G(N.title,d)&&!G(N.author,d)&&!G(N.category,d)&&!G(N.shelf,d)&&!G(N.publisher,d)||C&&N.category!==C||S&&N.author!==S)).sort((N,oe)=>m==="none"?o.type==="late-books"?oe.late-N.late:o.type==="total-borrowed"?oe.borrowed-N.borrowed:o.type==="total-returned"?oe.returned-N.returned:0:m==="title-asc"?N.title.localeCompare(oe.title,"tr"):m==="title-desc"?oe.title.localeCompare(N.title,"tr"):m==="late-desc"?oe.late-N.late:m==="borrowed-desc"?oe.borrowed-N.borrowed:m==="returned-desc"?oe.returned-N.returned:0).map((N,oe)=>e.jsxs("div",{style:{padding:"16px",backgroundColor:oe<5?"#f0f9ff":"#f8fafc",borderRadius:"12px",border:oe<5?"2px solid #3b82f6":"1px solid #e2e8f0",display:"flex",justifyContent:"space-between",alignItems:"center",boxShadow:oe<5?"0 2px 8px rgba(59, 130, 246, 0.15)":"none",transition:"all 0.2s"},onMouseEnter:Ae=>{Ae.currentTarget.style.transform="translateY(-2px)",Ae.currentTarget.style.boxShadow="0 4px 12px rgba(0, 0, 0, 0.1)"},onMouseLeave:Ae=>{Ae.currentTarget.style.transform="translateY(0)",Ae.currentTarget.style.boxShadow=oe<5?"0 2px 8px rgba(59, 130, 246, 0.15)":"none"},children:[e.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"16px"},children:[oe<5&&e.jsx("div",{style:{width:"36px",height:"36px",borderRadius:"50%",backgroundColor:"#3b82f6",color:"white",display:"flex",alignItems:"center",justifyContent:"center",fontWeight:700,fontSize:"14px"},children:oe+1}),e.jsxs("div",{children:[e.jsx("div",{style:{fontWeight:600,fontSize:"16px",color:"#1e293b"},children:N.title}),e.jsxs("div",{style:{fontSize:"13px",color:"#64748b",marginTop:"4px"},children:[N.author,"  ",N.category]})]})]}),e.jsxs("div",{style:{display:"flex",gap:"32px",textAlign:"right"},children:[o.type==="late-books"&&e.jsxs("div",{children:[e.jsx("div",{style:{fontWeight:700,color:"#ef4444",fontSize:"20px"},children:N.late}),e.jsx("div",{style:{fontSize:"12px",color:"#64748b"},children:"Gecikme"})]}),o.type==="total-borrowed"&&e.jsxs("div",{children:[e.jsx("div",{style:{fontWeight:700,color:"#3b82f6",fontSize:"20px"},children:N.borrowed}),e.jsx("div",{style:{fontSize:"12px",color:"#64748b"},children:"dn"})]}),o.type==="total-returned"&&e.jsxs("div",{children:[e.jsx("div",{style:{fontWeight:700,color:"#10b981",fontSize:"20px"},children:N.returned}),e.jsx("div",{style:{fontSize:"12px",color:"#64748b"},children:"ade"})]})]})]},oe))})]})]})}),document.body)]})},Qg=({books:t,bookStats:n,students:r,loans:i})=>e.jsx("div",{style:{display:"flex",flexDirection:"column",gap:"24px"},children:e.jsx(qg,{books:t,bookStats:n,students:r,loans:i})}),Zg=({onSyncStudents:t,onSyncpersonel:n,onSyncBooks:r})=>{const i=async(o,l)=>{try{const s=await o();alert(`${l} tamamland. ${s} kayt gncellendi.`)}catch(s){alert(s.message)}};return e.jsxs("div",{className:"card",children:[e.jsx("h2",{children:"Excel/CSV Senkronizasyonu"}),e.jsxs("div",{className:"toolbar",children:[e.jsx("button",{className:"primary",onClick:()=>i(t,"renci aktarm"),children:"rencileri e Aktar"}),e.jsx("button",{className:"primary",onClick:()=>i(n,"Personel aktarm"),children:"Personelleri e Aktar"}),e.jsx("button",{className:"primary",onClick:()=>i(r,"Kitap aktarm"),children:"Kitaplar e Aktar"})]}),e.jsx("p",{style:{color:"#475569"},children:"storage klasrndeki CSV dosyalar gncellendiinde bu butonlarla JSON veritabann senkronize edebilirsin."})]})},Xg=({students:t,loans:n=[],books:r=[],onRefresh:i,onSyncStudents:o,resetSearch:l=!1,personelName:s="",onAddNotification:u})=>{const[d,h]=a.useState(!1),C="__OTHER__",[k,S]=a.useState({name:"",surname:"",class:"",classOther:"",branch:"",branchOther:"",studentNumber:""}),[B,m]=a.useState(!1),[I,F]=a.useState(null),y=a.useMemo(()=>{const D=new Set(t.map(q=>q.class).filter(q=>q!=null));return Array.from(D).sort((q,V)=>q-V)},[t]),f=a.useMemo(()=>{const D=new Set(t.map(q=>q.branch).filter(q=>q!=null));return Array.from(D).sort()},[t]),b=async()=>{const D=k.name.trim(),q=k.surname.trim(),V=k.studentNumber?parseInt(k.studentNumber,10):null,ie=k.class===C?k.classOther:k.class,M=k.branch===C?k.branchOther:k.branch,re=ie?parseInt(ie,10):null,ce=(M==null?void 0:M.trim())||null;if(!D||!q){F("Ad ve soyad zorunludur");return}if(!V){F("renci numaras zorunludur");return}if(!ie){F("Snf zorunludur");return}if(ie&&Number.isNaN(re)){F("Snf saysal olmaldr");return}if(!M){F("ube zorunludur");return}m(!0),F(null);try{await xe.post("/admin/students",{name:D,surname:q,class:re,branch:ce,studentNumber:V,personelName:s||""}),h(!1),S({name:"",surname:"",class:"",classOther:"",branch:"",branchOther:"",studentNumber:""}),await i()}catch(Oe){F(Oe instanceof Error?Oe.message:"renci eklenemedi")}finally{m(!1)}};return e.jsxs("div",{children:[d&&e.jsxs("div",{className:"card",style:{marginBottom:"20px"},children:[e.jsx("h3",{style:{marginTop:0,marginBottom:"16px"},children:"Yeni renci Ekle"}),e.jsxs("div",{style:{display:"grid",gridTemplateColumns:"repeat(auto-fit, minmax(220px, 1fr))",gap:"16px"},children:[e.jsxs("div",{children:[e.jsxs("label",{style:{display:"block",marginBottom:"4px",fontWeight:600,fontSize:"14px"},children:["Ad ",e.jsx("span",{style:{color:"#ef4444"},children:"*"})]}),e.jsx("input",{type:"text",value:k.name,onChange:D=>S({...k,name:D.target.value}),placeholder:"Ahmet",style:{width:"100%",padding:"10px",borderRadius:"6px",border:"1px solid #d1d5db",fontSize:"14px"}})]}),e.jsxs("div",{children:[e.jsxs("label",{style:{display:"block",marginBottom:"4px",fontWeight:600,fontSize:"14px"},children:["soyad ",e.jsx("span",{style:{color:"#ef4444"},children:"*"})]}),e.jsx("input",{type:"text",value:k.surname,onChange:D=>S({...k,surname:D.target.value}),placeholder:"Ylmaz",style:{width:"100%",padding:"10px",borderRadius:"6px",border:"1px solid #d1d5db",fontSize:"14px"}})]}),e.jsxs("div",{children:[e.jsxs("label",{style:{display:"block",marginBottom:"4px",fontWeight:600,fontSize:"14px"},children:["renci Numaras ",e.jsx("span",{style:{color:"#ef4444"},children:"*"})]}),e.jsx("div",{style:{display:"flex",flexDirection:"column",gap:"8px",maxWidth:"180px"},children:e.jsx("input",{type:"number",value:k.studentNumber,onChange:D=>S({...k,studentNumber:D.target.value}),placeholder:"rn: 1234",min:"1",required:!0,style:{width:"100%",padding:"10px",borderRadius:"6px",border:"1px solid #d1d5db",fontSize:"14px"}})})]}),e.jsxs("div",{children:[e.jsxs("label",{style:{display:"block",marginBottom:"4px",fontWeight:600,fontSize:"14px"},children:["Snf ",e.jsx("span",{style:{color:"#ef4444"},children:"*"})]}),k.class===C?e.jsx("div",{style:{display:"flex",flexDirection:"column",gap:"8px",maxWidth:"180px"},children:e.jsx("input",{type:"number",value:k.classOther,onChange:D=>S({...k,classOther:D.target.value}),placeholder:"rn: 5",min:"1",style:{width:"100%",padding:"10px",borderRadius:"6px",border:"1px solid #d1d5db",fontSize:"14px"}})}):e.jsxs("select",{value:k.class,onChange:D=>{const q=D.target.value;S({...k,class:q,classOther:""})},required:!0,style:{width:"100%",maxWidth:"180px",padding:"10px",borderRadius:"6px",border:"1px solid #d1d5db",fontSize:"14px"},children:[e.jsx("option",{value:"",children:"Snf Sein"}),y.map(D=>e.jsxs("option",{value:D,children:[D,". Snf"]},D)),e.jsx("option",{value:C,children:"Dier (manuel giri)"})]})]}),e.jsxs("div",{children:[e.jsxs("label",{style:{display:"block",marginBottom:"4px",fontWeight:600,fontSize:"14px"},children:["ube ",e.jsx("span",{style:{color:"#ef4444"},children:"*"})]}),k.branch===C?e.jsx("div",{style:{display:"flex",flexDirection:"column",gap:"8px",maxWidth:"180px"},children:e.jsx("input",{type:"text",value:k.branchOther,onChange:D=>S({...k,branchOther:D.target.value}),placeholder:"rn: A",style:{width:"100%",padding:"10px",borderRadius:"6px",border:"1px solid #d1d5db",fontSize:"14px"}})}):e.jsxs("select",{value:k.branch,onChange:D=>{const q=D.target.value;S({...k,branch:q,branchOther:""})},required:!0,style:{width:"100%",maxWidth:"180px",padding:"10px",borderRadius:"6px",border:"1px solid #d1d5db",fontSize:"14px"},children:[e.jsx("option",{value:"",children:"ube Sein"}),f.map(D=>e.jsx("option",{value:D,children:D},D)),e.jsx("option",{value:C,children:"Dier (manuel giri)"})]})]})]}),I&&e.jsx("p",{style:{color:"#ef4444",margin:"16px 0 0 0"},children:I}),e.jsxs("div",{style:{display:"flex",gap:"12px",justifyContent:"flex-end",marginTop:"16px"},children:[e.jsx("button",{onClick:()=>{h(!1),S({name:"",surname:"",class:"",classOther:"",branch:"",branchOther:"",studentNumber:""}),F(null)},style:{padding:"10px 20px"},children:"ptal"}),e.jsx("button",{className:"primary",onClick:b,disabled:B,style:{padding:"10px 20px"},children:B?"Ekleniyor...":"Ekle"})]})]}),e.jsx(Ji,{students:t,loans:n,books:r,resetSearch:l,onRefresh:i,classes:y,branches:f,personelName:s,onAddNotification:u,onAddStudent:async D=>{try{await xe.post("/admin/students",{...D,personelName:s||""}),await i()}catch(q){throw q}}})]})},Jg=({books:t,loans:n,students:r,onRefresh:i,personelName:o,onAddNotification:l})=>{const[s,u]=a.useState([]),[d,h]=a.useState(""),[C,k]=a.useState(""),[S,B]=a.useState(""),[m,I]=a.useState(""),[F,y]=a.useState(""),[f,b]=a.useState(""),[D,q]=a.useState("default"),[V,ie]=a.useState("asc"),[M,re]=a.useState(14),[ce,Oe]=a.useState(!1),[Re,_e]=a.useState(null),[xt,De]=a.useState("borrow"),[ft,ze]=a.useState(!1),[P,se]=a.useState(null),[fe,ve]=a.useState(!1),[Pe,bt]=a.useState(null),[lt,be]=a.useState(!1),[Me,et]=a.useState(!1),[Qe,Z]=a.useState(5),[$e,Xe]=a.useState(100),[Ge,mt]=a.useState(null),[kt,ot]=a.useState(!1),We=t.filter(_=>_.quantity>0&&(_.healthyCount??0)>0),st=t.filter(_=>_.loans.length>0),Bt=s.some(_=>_.quantity<=0||(_.healthyCount??0)<=0),Ee=ce||s.length===0||!d||Bt,Et=_=>{De(_),be(!1),et(!1),_==="borrow"?(I(""),y(""),b(""),q("default"),ie("asc")):(k(""),B(""),u([]),h(""))};a.useEffect(()=>{(async()=>{try{const ne=await xe.get("/system-settings");Z(ne.maxBorrowLimit),Xe(ne.maxPenaltyPoints)}catch(ne){console.error("Sistem ayarlar yklenemedi:",ne)}})()},[]),a.useEffect(()=>{if(lt||Me){const _=ne=>{const ue=ne.target;!ue.closest("[data-info-popover-borrow]")&&!ue.closest("[data-info-button-borrow]")&&!ue.closest("[data-info-popover-return]")&&!ue.closest("[data-info-button-return]")&&(be(!1),et(!1))};return document.addEventListener("mousedown",_),()=>{document.removeEventListener("mousedown",_)}}},[lt,Me]);const c=a.useMemo(()=>{const _=new Set(st.flatMap(ne=>ne.loans.map(()=>ne.category)).filter(Boolean));return Array.from(_).sort()},[st]),N=a.useMemo(()=>!C||!C.trim()?We:We.filter(_=>G(_.title,C)||G(_.author,C)||G(_.category,C)||G(_.shelf,C)||G(_.publisher,C)||G(_.summary,C)||G(_.bookNumber,C)||G(_.year,C)||G(_.pageCount,C)),[We,C]),oe=a.useMemo(()=>!S||!S.trim()?r:r.filter(_=>G(_.name,S)||G(_.surname,S)||G(`${_.name} ${_.surname}`.trim(),S)||G(_.studentNumber,S)||G(_.class,S)||G(_.branch,S)||_.class&&_.branch&&G(`${_.class}-${_.branch}`,S)||_.class&&_.branch&&G(`${_.class}${_.branch}`,S)),[r,S]),Ae=a.useMemo(()=>{let _=st.flatMap(ne=>ne.loans.map(ue=>{const He=new Date(ue.dueDate),Se=Math.ceil((He.getTime()-Date.now())/(1e3*60*60*24)),gt=r.find(Ce=>Ce.name===ue.borrower||`${Ce.name} ${Ce.surname}`.trim()===ue.borrower||Ce.surname===ue.borrower),de=gt?`${gt.name} ${gt.surname}`.trim():ue.borrower;return{book:ne,loan:ue,remainingDays:Se,borrowerFullName:de}}));return m&&m.trim()&&(_=_.filter(({book:ne,loan:ue})=>G(ne.title,m)||G(ne.author,m)||G(ne.category,m)||G(ne.shelf,m)||G(ne.publisher,m)||G(ne.summary,m)||G(ne.bookNumber,m)||G(ne.year,m)||G(ne.pageCount,m)||G(ue.borrower,m)||G(ue.personel,m))),F&&(_=_.filter(({book:ne})=>ne.category===F)),f&&(_=_.filter(({remainingDays:ne})=>f==="gecikmis"?ne<0:f==="0-3"?ne>=0&&ne<=3:f==="4-7"?ne>=4&&ne<=7:f==="8-14"?ne>=8&&ne<=14:f==="15+"?ne>=15:!0)),D==="borrower"?_.sort((ne,ue)=>{const He=ne.borrowerFullName.toLowerCase(),Se=ue.borrowerFullName.toLowerCase();return V==="asc"?He.localeCompare(Se,"tr"):Se.localeCompare(He,"tr")}):_.sort((ne,ue)=>ne.remainingDays<0&&ue.remainingDays<0?ne.remainingDays-ue.remainingDays:ne.remainingDays<0?-1:ue.remainingDays<0?1:ne.remainingDays-ue.remainingDays),_},[st,m,F,f,D,V,r]),Be=async()=>{if(s.length===0||!d){_e("En az bir kitap ve renci seimi zorunludur");return}const _=r.find(de=>`${de.name} ${de.surname}`.trim()===d||de.name===d||de.surname===d||de.studentNumber&&`${de.studentNumber}`===d);if(!_){_e("Geerli bir renci sein");return}if(Bt){_e("Mevcut adedi 0 olan veya salam kopyas bulunmayan kitaplar dn veremezsiniz.");return}const ne=Rn(_);if(!ne){_e("Geerli bir renci sein");return}const ue=ye(s,d);if(ue.length===0){_e("Seilen kitaplarn hepsi renci tarafndan zaten dn alnm!");return}if(n.filter(de=>{var me;const Ce=(me=de.borrower)==null?void 0:me.trim();return(Ce===ne||Ce===_.name)&&t.some(Ct=>Ct.id===de.bookId)}).length+ue.length>Qe){se({books:ue,student:ne}),ze(!0);return}await zt(ue,_)},ye=(_,ne)=>{const ue=He=>He.quantity>0&&(He.healthyCount??0)>0;return ne?_.filter(He=>!n.some(gt=>gt.bookId===He.id&&gt.borrower===ne)&&ue(He)):_.filter(ue)},[Ve,jt]=a.useState(null),zt=async(_,ne)=>{Oe(!0),jt(null);try{const ue=Rn(ne);if(!ue){jt({type:"error",message:"Geerli bir renci sein"});return}const He=ye(_,ue);if(He.length===0){jt({type:"error",message:"Seilen kitaplarn hepsi renci tarafndan zaten dn alnm!"}),Oe(!1);return}for(const Se of He)await xe.post(`/books/${Se.id}/borrow`,{borrower:ue,days:M,personelName:o});u([]),h(""),re(14),ze(!1),se(null),await i(),jt({type:"success",message:`${He.length} kitap baaryla dn verildi.`})}catch(ue){const He=ue instanceof Error?ue.message:"dn verme baarsz oldu";if(jt({type:"error",message:He}),He.includes("cezal")||He.includes("Ceza Puan")||He.includes("cezal durumda")){const Se=r.find(gt=>gt.name===ne.name&&gt.surname===ne.surname);if(Se)bt(Se);else{const gt=He.match(/Ceza Puan:\s*(\d+)/),de=gt?parseInt(gt[1]):0;bt({name:ne.name,surname:ne.surname,borrowed:ne.borrowed||0,returned:ne.returned||0,late:ne.late||0,class:ne.class,branch:ne.branch,studentNumber:ne.studentNumber,penaltyPoints:de,isBanned:de>=$e})}}}finally{Oe(!1)}},nn=(_,ne,ue="Kitap")=>{mt({bookId:_,borrowerName:ne,bookTitle:ue}),ot(!0)},Te=async()=>{if(Ge){if(!o||o.trim()===""){jt({type:"error",message:"Personel ad gereklidir. Ltfen giri yapn veya Personel adnz girin."}),ot(!1);return}Oe(!0),jt(null);try{await xe.post(`/books/${Ge.bookId}/return`,{borrower:Ge.borrowerName,personelName:o.trim()}),await i(),jt({type:"success",message:"Kitap baaryla teslim alnd."}),ot(!1),mt(null)}catch(_){const ne=_ instanceof Error?_.message:"Teslim alma baarsz oldu";jt({type:"error",message:ne}),console.error("Teslim alma hatas:",_),ot(!1)}finally{Oe(!1)}}},wt=()=>{jt(null)};return e.jsxs("div",{children:[e.jsxs("div",{className:"card",style:{position:"relative"},children:[e.jsx("div",{style:{position:"absolute",top:"16px",right:"16px",zIndex:100},children:xt==="borrow"?e.jsx("div",{style:{position:"relative"},children:e.jsx("button",{"data-info-button-borrow":!0,onClick:()=>be(!0),style:{width:"32px",height:"32px",borderRadius:"50%",border:"2px solid",borderColor:"#fbbf24",background:"#fef9e7",cursor:"pointer",display:"flex",alignItems:"center",justifyContent:"center",fontSize:"20px",color:"#d97706",transition:"all 0.2s",fontWeight:700,boxShadow:"0 2px 4px rgba(0, 0, 0, 0.1)",padding:0},onMouseEnter:_=>{_.currentTarget.style.backgroundColor="#fef3c7",_.currentTarget.style.borderColor="#f59e0b"},onMouseLeave:_=>{_.currentTarget.style.backgroundColor="#fef9e7",_.currentTarget.style.borderColor="#fbbf24"},children:e.jsxs("svg",{width:"18",height:"18",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2.5",strokeLinecap:"round",strokeLinejoin:"round",style:{display:"block"},children:[e.jsx("path",{d:"M21 15a2 2 0 0 1-2 2H7l-4 4V5a2 2 0 0 1 2-2h14a2 2 0 0 1 2 2z"}),e.jsx("line",{x1:"9",y1:"10",x2:"15",y2:"10"}),e.jsx("line",{x1:"9",y1:"14",x2:"15",y2:"14"})]})})}):e.jsx("div",{style:{position:"relative"},children:e.jsx("button",{"data-info-button-return":!0,onClick:()=>et(!0),style:{width:"32px",height:"32px",borderRadius:"50%",border:"2px solid",borderColor:"#fbbf24",background:"#fef9e7",cursor:"pointer",display:"flex",alignItems:"center",justifyContent:"center",fontSize:"20px",color:"#d97706",transition:"all 0.2s",fontWeight:700,boxShadow:"0 2px 4px rgba(0, 0, 0, 0.1)",padding:0},onMouseEnter:_=>{_.currentTarget.style.backgroundColor="#fef3c7",_.currentTarget.style.borderColor="#f59e0b"},onMouseLeave:_=>{_.currentTarget.style.backgroundColor="#fef9e7",_.currentTarget.style.borderColor="#fbbf24"},children:e.jsxs("svg",{width:"18",height:"18",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2.5",strokeLinecap:"round",strokeLinejoin:"round",style:{display:"block"},children:[e.jsx("path",{d:"M21 15a2 2 0 0 1-2 2H7l-4 4V5a2 2 0 0 1 2-2h14a2 2 0 0 1 2 2z"}),e.jsx("line",{x1:"9",y1:"10",x2:"15",y2:"10"}),e.jsx("line",{x1:"9",y1:"14",x2:"15",y2:"14"})]})})})}),e.jsxs("div",{style:{display:"flex",gap:"8px",marginBottom:"20px",borderBottom:"2px solid #e5e7eb",paddingBottom:"12px"},children:[e.jsxs("button",{onClick:()=>Et("borrow"),className:xt==="borrow"?"primary":"",style:{padding:"10px 20px",border:"none",borderRadius:"8px",cursor:"pointer",backgroundColor:xt==="borrow"?"#2563eb":"#f3f4f6",color:xt==="borrow"?"white":"#374151",fontWeight:xt==="borrow"?600:400,display:"flex",alignItems:"center",justifyContent:"center"},children:[e.jsxs("svg",{width:"18",height:"18",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",style:{marginRight:"6px"},children:[e.jsx("path",{d:"M4 19.5A2.5 2.5 0 0 1 6.5 17H20"}),e.jsx("path",{d:"M6.5 2H20v20H6.5A2.5 2.5 0 0 1 4 19.5v-15A2.5 2.5 0 0 1 6.5 2z"}),e.jsx("path",{d:"M9 9l3 3 3-3"})]}),"dn Ver"]}),e.jsxs("button",{onClick:()=>Et("return"),className:xt==="return"?"primary":"",style:{padding:"10px 20px",border:"none",borderRadius:"8px",cursor:"pointer",backgroundColor:xt==="return"?"#2563eb":"#f3f4f6",color:xt==="return"?"white":"#374151",fontWeight:xt==="return"?600:400,display:"flex",alignItems:"center",justifyContent:"center"},children:[e.jsx("svg",{width:"18",height:"18",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",style:{marginRight:"6px"},children:e.jsx("polyline",{points:"20 6 9 17 4 12"})}),"Teslim Al"]})]}),Re&&e.jsxs("div",{style:{padding:"12px",backgroundColor:"#fee2e2",color:"#dc2626",borderRadius:"8px",marginBottom:"16px",display:"flex",flexDirection:"column",gap:"8px"},children:[e.jsx("div",{children:Re}),Pe&&(Re.includes("cezal")||Re.includes("Ceza Puan"))&&e.jsx("button",{onClick:()=>ve(!0),style:{padding:"8px 16px",fontSize:"14px",backgroundColor:"#3b82f6",color:"white",border:"none",borderRadius:"6px",cursor:"pointer",fontWeight:600,alignSelf:"flex-start"},children:" Ceza Puann Dzenlemek in Tklayn"})]}),xt==="borrow"&&e.jsxs("div",{children:[e.jsx("h3",{style:{marginTop:0,marginBottom:"16px"},children:"Kitap dn Verme"}),e.jsxs("div",{style:{display:"flex",flexDirection:"column",gap:"16px"},children:[e.jsxs("div",{children:[e.jsx("label",{style:{display:"block",marginBottom:"4px",fontWeight:600,fontSize:"14px"},children:"Kitap Ara ve Se *"}),e.jsx("div",{style:{fontSize:"12px",color:"#6b7280",marginBottom:"8px"},children:"Not: Salam kopyas olmayan kitaplar aramada listelenmez."}),e.jsx("input",{type:"text",value:C,onChange:_=>k(_.target.value),placeholder:"Kitap ad, yazar veya kategori ile ara...",style:{width:"100%",padding:"10px"}}),C&&e.jsx("div",{style:{marginTop:"8px",maxHeight:"300px",overflowY:"auto",border:"1px solid #e5e7eb",borderRadius:"8px",backgroundColor:"white"},children:N.length>0?N.filter(_=>!s.some(ne=>ne.id===_.id)).map(_=>{const ne=_.healthyCount??0,ue=ne>1?"#059669":ne===1?"#d97706":"#dc2626",He=d&&n.some(Se=>Se.bookId===_.id&&Se.borrower===d);return e.jsxs("div",{onClick:()=>{s.some(Se=>Se.id===_.id)||(u([...s,_]),k(""))},style:{padding:"12px",cursor:"pointer",borderBottom:"1px solid #f3f4f6",backgroundColor:He?"#f3f4f6":"white",opacity:He?.7:1,transition:"background-color 0.2s"},onMouseEnter:Se=>{Se.currentTarget.style.backgroundColor=He?"#e5e7eb":"#f9fafb"},onMouseLeave:Se=>{Se.currentTarget.style.backgroundColor=He?"#f3f4f6":"white"},children:[e.jsxs("div",{style:{fontWeight:600,marginBottom:"4px",color:He?"#6b7280":"#1f2937"},children:[_.title,He&&e.jsx("span",{style:{marginLeft:"8px",fontSize:"11px",color:"#dc2626",fontWeight:600},children:" Zaten dnte"})]}),e.jsxs("div",{style:{fontSize:"14px",color:He?"#9ca3af":"#6b7280",marginBottom:"4px"},children:[_.author,"  ",_.category]}),e.jsxs("div",{style:{fontSize:"12px",color:"#475569",display:"flex",gap:"12px",flexWrap:"wrap"},children:[e.jsxs("span",{children:["Mevcut Adet: ",_.quantity]}),e.jsxs("span",{style:{color:ue,fontWeight:600},children:["Salam Mevcut: ",ne]})]})]},_.id)}):e.jsx("div",{style:{padding:"20px",textAlign:"center",color:"#6b7280"},children:"Arama sonucu bulunamad"})}),s.length>0&&e.jsxs("div",{style:{marginTop:"8px",padding:"12px",backgroundColor:"#eff6ff",borderRadius:"8px",border:"1px solid #3b82f6"},children:[e.jsxs("div",{style:{fontWeight:600,marginBottom:"8px",fontSize:"14px"},children:["Seilen Kitaplar (",s.length,"):"]}),e.jsx("div",{style:{display:"flex",flexDirection:"column",gap:"8px"},children:s.map(_=>{const ne=_.healthyCount??0,ue=ne>1?"#059669":ne===1?"#d97706":"#dc2626",He=_.quantity<=0,Se=He||ne<=0,gt=d&&n.some(me=>me.bookId===_.id&&me.borrower===d),de=gt||Se?"#f3f4f6":"white",Ce=gt||Se?"1px solid #9ca3af":"1px solid #dbeafe";return e.jsxs("div",{style:{display:"flex",flexDirection:"column",gap:"8px",padding:"8px",backgroundColor:de,borderRadius:"6px",border:Ce,opacity:gt||Se?.8:1},children:[e.jsxs("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center"},children:[e.jsxs("div",{style:{flex:1},children:[e.jsx("div",{style:{fontWeight:600,fontSize:"13px",color:gt?"#6b7280":"#1f2937"},children:_.title}),e.jsxs("div",{style:{fontSize:"12px",color:gt?"#9ca3af":"#6b7280"},children:[_.author,"  ",_.category]}),e.jsxs("div",{style:{fontSize:"12px",color:"#475569",display:"flex",gap:"12px",flexWrap:"wrap"},children:[e.jsxs("span",{children:["Mevcut Adet: ",_.quantity]}),e.jsxs("span",{style:{color:ue,fontWeight:600},children:["Salam Mevcut: ",ne]})]})]}),e.jsx("button",{onClick:()=>{u(s.filter(me=>me.id!==_.id))},style:{padding:"4px 12px",fontSize:"12px",backgroundColor:"#ef4444",color:"white",border:"none",borderRadius:"4px",cursor:"pointer",fontWeight:600,marginLeft:"8px"},children:"Kaldr"})]}),gt&&e.jsxs("div",{style:{padding:"6px 10px",backgroundColor:"#fee2e2",borderRadius:"4px",fontSize:"12px",color:"#dc2626",fontWeight:600,display:"flex",alignItems:"center",gap:"6px"},children:[e.jsx("span",{children:""}),e.jsx("span",{children:"Bu renci zaten bu kitab dn alm!"})]}),Se&&e.jsxs("div",{style:{padding:"6px 10px",backgroundColor:"#fef2f2",borderRadius:"4px",fontSize:"12px",color:"#dc2626",fontWeight:600,display:"flex",alignItems:"center",gap:"6px"},children:[e.jsx("span",{children:""}),e.jsx("span",{children:He?"Mevcut adet 0 olduu iin dn verilemez.":"Salam kopya kalmad, dn verilemez."})]})]},_.id)})}),e.jsx("button",{onClick:()=>{u([])},style:{marginTop:"8px",padding:"6px 12px",fontSize:"12px",backgroundColor:"#ef4444",color:"white",border:"none",borderRadius:"4px",cursor:"pointer",fontWeight:600,width:"100%"},children:"Tmn Kaldr"})]})]}),e.jsxs("div",{children:[e.jsx("label",{style:{display:"block",marginBottom:"4px",fontWeight:600,fontSize:"14px"},children:"renci Ara ve Se *"}),e.jsx("input",{type:"text",value:S,onChange:_=>B(_.target.value),placeholder:"renci ad ile ara...",style:{width:"100%",padding:"10px"}}),S&&e.jsx("div",{style:{marginTop:"8px",maxHeight:"300px",overflowY:"auto",border:"1px solid #e5e7eb",borderRadius:"8px",backgroundColor:"white"},children:oe.length>0?oe.map(_=>{const ne=Rn(_),ue=n.filter(Se=>(Se.borrower===ne||Se.borrower===_.name)&&t.some(gt=>gt.id===Se.bookId)),He=so(_,ue.length);return e.jsxs("div",{onClick:()=>{h(ne),B("")},style:{padding:"12px",cursor:"pointer",borderBottom:"1px solid #f3f4f6",backgroundColor:d===ne?"#eff6ff":"white",transition:"background-color 0.2s"},onMouseEnter:Se=>{d!==ne&&(Se.currentTarget.style.backgroundColor="#f9fafb")},onMouseLeave:Se=>{d!==ne&&(Se.currentTarget.style.backgroundColor="white")},children:[e.jsxs("div",{style:{fontWeight:600,color:"#1f2937",marginBottom:"6px"},children:[_.name," ",_.surname]}),e.jsxs("div",{style:{fontSize:"12px",color:"#6b7280",display:"flex",gap:"12px",flexWrap:"wrap"},children:[e.jsxs("span",{children:[e.jsx("strong",{children:"dn:"})," ",He.borrowed]}),e.jsxs("span",{children:[e.jsx("strong",{children:"ade:"})," ",He.returned]}),e.jsxs("span",{children:[e.jsx("strong",{children:"Geciken:"})," ",e.jsx("span",{style:{color:_.late>0?"#ef4444":"#10b981",fontWeight:600},children:_.late})]}),e.jsxs("span",{children:[e.jsx("strong",{children:"Aktif dn:"})," ",ue.length]})]})]},ne)}):e.jsx("div",{style:{padding:"20px",textAlign:"center",color:"#6b7280"},children:"Arama sonucu bulunamad"})}),d&&e.jsxs("div",{style:{marginTop:"8px",padding:"16px",backgroundColor:"#eff6ff",borderRadius:"8px",border:"1px solid #3b82f6"},children:[e.jsxs("div",{style:{fontWeight:600,marginBottom:"12px",fontSize:"16px",color:"#1f2937"},children:["Seilen renci: ",d]}),(()=>{const _=r.find(Se=>Se.name===d||`${Se.name} ${Se.surname}`.trim()===d||Se.surname===d);if(!_)return null;const ue=n.filter(Se=>(Se.borrower===d||Se.borrower===_.name)&&t.some(gt=>gt.id===Se.bookId)).length,He=so(_,ue);return e.jsxs("div",{style:{display:"flex",flexDirection:"column",gap:"8px",marginBottom:"12px"},children:[e.jsxs("div",{style:{display:"flex",gap:"16px",flexWrap:"wrap"},children:[e.jsxs("div",{style:{fontSize:"14px"},children:[e.jsx("strong",{children:"Toplam dn:"})," ",He.borrowed]}),e.jsxs("div",{style:{fontSize:"14px"},children:[e.jsx("strong",{children:"ade:"})," ",He.returned]}),e.jsxs("div",{style:{fontSize:"14px"},children:[e.jsx("strong",{children:"Geciken Kitap:"})," ",e.jsx("span",{style:{color:_.late>0?"#ef4444":"#10b981",fontWeight:600},children:_.late})]}),e.jsxs("div",{style:{fontSize:"14px"},children:[e.jsx("strong",{children:"Aktif dn:"})," ",e.jsxs(e.Fragment,{children:[e.jsx("span",{style:{color:ue>0?"#3b82f6":"#10b981",fontWeight:600},children:ue}),e.jsxs("span",{style:{fontSize:"12px",color:"#64748b",marginLeft:"8px"},children:["/ ",Qe," (Limit)"]})]})]})]}),(()=>{const Se=ye(s,d),gt=ue+Se.length,de=Qe-ue,Ce=s.length-Se.length;return gt>Qe?e.jsxs("div",{style:{padding:"8px",backgroundColor:"#fee2e2",borderRadius:"6px",color:"#dc2626",fontSize:"13px",fontWeight:600,marginBottom:"8px"},children:[" Bu ilem sonras renci ",gt," kitap alacak (Limit: ",Qe,"). Onay gerekecek!",Ce>0&&e.jsxs("span",{style:{display:"block",fontSize:"12px",marginTop:"4px"},children:["(",Ce," kitap zaten dnte, verilemeyecek)"]})]}):de>0&&de<=2&&Se.length>0?e.jsxs("div",{style:{padding:"8px",backgroundColor:"#fef3c7",borderRadius:"6px",color:"#92400e",fontSize:"13px",fontWeight:600,marginBottom:"8px"},children:[" rencinin ",de," kitap daha alma hakk var.",Ce>0&&e.jsxs("span",{style:{display:"block",fontSize:"12px",marginTop:"4px"},children:["(",Ce," kitap zaten dnte, verilemeyecek)"]})]}):Ce>0?e.jsxs("div",{style:{padding:"8px",backgroundColor:"#fee2e2",borderRadius:"6px",color:"#dc2626",fontSize:"13px",fontWeight:600,marginBottom:"8px"},children:[" Seilen kitaplardan ",Ce," tanesi renci tarafndan zaten dn alnm. Bu kitaplar verilmeyecek."]}):null})(),_.late>0&&e.jsxs("div",{style:{padding:"8px",backgroundColor:"#fee2e2",borderRadius:"6px",color:"#dc2626",fontSize:"13px",fontWeight:600},children:[" Bu rencinin ",_.late," geciken kitab var!"]})]})})(),e.jsx("button",{onClick:()=>{h("")},style:{padding:"6px 16px",fontSize:"13px",backgroundColor:"#ef4444",color:"white",border:"none",borderRadius:"6px",cursor:"pointer",fontWeight:600},children:"Seimi Kaldr"})]})]}),e.jsxs("div",{children:[e.jsx("label",{style:{display:"block",marginBottom:"4px",fontWeight:600,fontSize:"14px"},children:"dn Sresi (Gn)"}),e.jsxs("select",{value:M,onChange:_=>re(parseInt(_.target.value)),style:{width:"100%",padding:"10px"},children:[e.jsx("option",{value:7,children:"7 Gn"}),e.jsx("option",{value:10,children:"10 Gn"}),e.jsx("option",{value:14,children:"14 Gn"}),e.jsx("option",{value:21,children:"21 Gn"}),e.jsx("option",{value:30,children:"30 Gn"})]})]}),Bt&&e.jsx("div",{style:{padding:"10px",backgroundColor:"#fee2e2",borderRadius:"6px",color:"#b91c1c",fontSize:"13px",fontWeight:600},children:" Mevcut adedi 0 olan veya salam kopyas kalmayan kitaplar seimde. Ltfen bu kitaplar kaldrn."}),e.jsx("button",{className:"primary",onClick:Be,disabled:Ee,style:{width:"100%",display:"flex",alignItems:"center",justifyContent:"center",gap:"6px",backgroundColor:Ee?"#94a3b8":void 0,cursor:Ee?"not-allowed":"pointer",opacity:Ee?.9:1},children:ce?"leniyor...":(()=>{const _=d?ye(s,d):s;return e.jsxs(e.Fragment,{children:[e.jsxs("svg",{width:"16",height:"16",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:[e.jsx("path",{d:"M4 19.5A2.5 2.5 0 0 1 6.5 17H20"}),e.jsx("path",{d:"M6.5 2H20v20H6.5A2.5 2.5 0 0 1 4 19.5v-15A2.5 2.5 0 0 1 6.5 2z"}),e.jsx("path",{d:"M9 9l3 3 3-3"})]}),"dn Ver (",_.length," kitap)"]})})()})]})]}),xt==="return"&&e.jsxs("div",{children:[e.jsx("h3",{style:{marginTop:0,marginBottom:"16px"},children:"Kitap Teslim Alma"}),st.length===0?e.jsx("p",{children:"u an dnte kitap bulunmuyor."}):e.jsxs(e.Fragment,{children:[e.jsxs("div",{style:{marginBottom:"16px"},children:[e.jsx("input",{type:"text",value:m,onChange:_=>I(_.target.value),placeholder:"Kitap ad, yazar veya renci ad ile ara...",style:{width:"100%",padding:"10px",marginBottom:"12px"}}),e.jsxs("div",{style:{marginBottom:"16px"},children:[e.jsx("div",{style:{fontSize:"12px",fontWeight:600,color:"#64748b",marginBottom:"8px"},children:"Teslim Tarihi Filtreleri"}),e.jsx("div",{style:{display:"grid",gridTemplateColumns:"repeat(auto-fit, minmax(120px, 1fr))",gap:"8px"},children:(()=>{const _=st.flatMap(de=>de.loans.map(Ce=>{const me=new Date(Ce.dueDate);return Math.ceil((me.getTime()-Date.now())/(1e3*60*60*24))})),ne=_.filter(de=>de<0).length,ue=_.filter(de=>de>=0&&de<=3).length,He=_.filter(de=>de>=4&&de<=7).length,Se=_.filter(de=>de>=8&&de<=14).length,gt=_.filter(de=>de>=15).length;return[{label:"Gecikmi",value:"gecikmis",color:"#6b7280",bgColor:"#f3f4f6",textColor:"#374151",count:ne},{label:"0-3 Gn",value:"0-3",color:"#ef4444",bgColor:"#fef2f2",textColor:"#991b1b",count:ue},{label:"4-7 Gn",value:"4-7",color:"#f59e0b",bgColor:"#fffbeb",textColor:"#92400e",count:He},{label:"8-14 Gn",value:"8-14",color:"#3b82f6",bgColor:"#eff6ff",textColor:"#1e40af",count:Se},{label:"15+ Gn",value:"15+",color:"#10b981",bgColor:"#f0fdf4",textColor:"#065f46",count:gt}].map(de=>e.jsxs("button",{onClick:()=>{b(f===de.value?"":de.value)},style:{padding:"10px",borderRadius:"8px",border:f===de.value?`2px solid ${de.color}`:"1px solid #e5e7eb",background:f===de.value?de.bgColor:"#fff",cursor:"pointer",fontWeight:700,color:f===de.value?de.textColor:"#374151",fontSize:"13px",transition:"all 0.2s"},onMouseEnter:Ce=>{f!==de.value&&(Ce.currentTarget.style.backgroundColor=de.bgColor,Ce.currentTarget.style.borderColor=de.color)},onMouseLeave:Ce=>{f!==de.value&&(Ce.currentTarget.style.backgroundColor="#fff",Ce.currentTarget.style.borderColor="#e5e7eb")},children:[e.jsx("div",{children:de.label}),e.jsxs("div",{style:{fontSize:"11px",opacity:.8,marginTop:"2px"},children:["(",de.count,")"]})]},de.value))})()})]}),e.jsxs("div",{style:{display:"flex",gap:"12px",flexWrap:"nowrap",overflowX:"auto"},children:[e.jsxs("div",{style:{display:"flex",flexDirection:"column",gap:"4px",flex:"0 0 160px",minWidth:"160px",maxWidth:"160px"},children:[e.jsx("label",{style:{fontSize:"12px",fontWeight:600,color:"#64748b"},children:"Kategori"}),e.jsx("div",{style:{width:"100%",maxWidth:"100%",overflow:"hidden"},children:e.jsxs("select",{value:F,onChange:_=>y(_.target.value),style:{width:"100%",padding:"8px",borderRadius:"6px",border:"1px solid #e5e7eb",backgroundColor:"#fff",whiteSpace:"nowrap",textOverflow:"ellipsis",overflow:"hidden"},title:F||"Tm",children:[e.jsx("option",{value:"",children:"Tm"}),c.map(_=>e.jsx("option",{value:_,children:_},_))]})})]}),e.jsxs("div",{style:{display:"flex",alignItems:"flex-end",gap:"8px"},children:[e.jsxs("button",{onClick:()=>{D==="borrower"?ie(V==="asc"?"desc":"asc"):(q("borrower"),ie("asc"))},style:{padding:"8px 16px",backgroundColor:D==="borrower"?"#3b82f6":"#f3f4f6",color:D==="borrower"?"white":"#374151",border:D==="borrower"?"2px solid #2563eb":"1px solid #e5e7eb",borderRadius:"6px",cursor:"pointer",fontSize:"13px",fontWeight:600,display:"flex",alignItems:"center",gap:"6px"},title:D==="borrower"?V==="asc"?"A-Z sralama (Z-A'ya gemek iin tklayn)":"Z-A sralama (A-Z'ye gemek iin tklayn)":"renci adna gre srala",children:[e.jsx("svg",{width:"14",height:"14",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:D==="borrower"&&V==="asc"?e.jsx("path",{d:"M3 6h18M7 12h10M11 18h2"}):D==="borrower"&&V==="desc"?e.jsx("path",{d:"M3 18h18M7 12h10M11 6h2"}):e.jsx("path",{d:"M3 6h18M7 12h10M11 18h2"})}),D==="borrower"?V==="asc"?"A-Z":"Z-A":"renciye Gre Srala"]}),(m||F||f)&&e.jsx("button",{onClick:()=>{I(""),y(""),b("")},style:{padding:"8px 16px",backgroundColor:"#ef4444",color:"white",border:"none",borderRadius:"6px",cursor:"pointer",fontSize:"13px",fontWeight:600},children:"Filtreleri Temizle"})]})]})]}),e.jsx("div",{style:{display:"flex",flexDirection:"column",gap:"12px"},children:Ae.length===0?e.jsx("div",{style:{padding:"20px",textAlign:"center",color:"#6b7280"},children:m?"Arama sonucu bulunamad":"u an dnte kitap bulunmuyor."}):Ae.map(({book:_,loan:ne,remainingDays:ue,borrowerFullName:He},Se)=>{const gt=ue<0,de=ue>=0&&ue<=3,Ce=new Date(ne.dueDate);return e.jsxs("div",{style:{padding:"16px",backgroundColor:"#f8fafc",borderRadius:"8px",border:"1px solid #e2e8f0",display:"flex",justifyContent:"space-between",alignItems:"center"},children:[e.jsxs("div",{style:{flex:1,display:"flex",flexDirection:"column",gap:"8px"},children:[e.jsx("div",{style:{fontWeight:600,marginBottom:"4px"},children:_.title}),e.jsxs("div",{style:{fontSize:"14px",color:"#1e293b",marginBottom:"4px",fontWeight:600,padding:"6px 10px",backgroundColor:"#eff6ff",borderRadius:"6px",display:"inline-block",width:"fit-content"},children:["renci: ",He]}),e.jsxs("div",{style:{fontSize:"12px",color:"#64748b"},children:["Teslim Tarihi: ",Ce.toLocaleDateString("tr-TR",{year:"numeric",month:"long",day:"numeric"})]})]}),e.jsxs("div",{style:{display:"flex",flexDirection:"column",alignItems:"flex-end",gap:"8px"},children:[e.jsx("span",{style:{padding:"4px 12px",borderRadius:"12px",fontSize:"12px",fontWeight:600,backgroundColor:gt?"#fee2e2":de?"#fef3c7":"#d1fae5",color:gt?"#dc2626":de?"#d97706":"#059669"},children:ue<0?`${Math.abs(ue)} gn geti`:ue===0?"Sresi Doldu":`${ue} gn kald`}),e.jsxs("button",{onClick:()=>nn(_.id,ne.borrower,_.title),disabled:ce,style:{padding:"8px 16px",backgroundColor:gt?"#ef4444":de?"#f59e0b":"#3b82f6",color:"white",border:"none",borderRadius:"6px",cursor:ce?"not-allowed":"pointer",opacity:ce?.7:1,fontWeight:600,fontSize:"13px",display:"flex",alignItems:"center",gap:"6px"},children:[e.jsx("svg",{width:"14",height:"14",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:e.jsx("polyline",{points:"20 6 9 17 4 12"})}),"Teslim Al"]})]})]},`${_.id}-${ne.borrower}-${Se}`)})})]})]})]}),ft&&P&&(()=>{const _=r.find(me=>me.name===P.student||`${me.name} ${me.surname}`.trim()===P.student||me.surname===P.student);if(!_)return null;const ne=Rn(_);if(!ne){_e("Geerli bir renci sein");return}const ue=ye(P.books,ne),Se=n.filter(me=>me.borrower===P.student&&t.some(Ct=>Ct.id===me.bookId)).length,gt=Se+ue.length,de=gt-Qe,Ce=P.books.length-ue.length;return e.jsx(ur,{isOpen:ft,title:"Kitap Limiti Uyars",icon:"",onConfirm:async()=>{_&&await zt(ue,_)},onCancel:()=>{ze(!1),se(null)},confirmText:"Devam Et",cancelText:"ptal",confirmButtonColor:"#ef4444",loading:ce,disabled:ue.length===0,children:e.jsxs("div",{style:{marginBottom:"20px"},children:[e.jsxs("div",{style:{fontSize:"14px",color:"#475569",marginBottom:"12px",lineHeight:"1.6"},children:[e.jsx("strong",{children:P.student})," rencisi u anda ",e.jsx("strong",{children:Se})," kitap dn alm durumda."]}),Ce>0&&e.jsxs("div",{style:{padding:"8px",backgroundColor:"#fee2e2",borderRadius:"6px",color:"#dc2626",fontSize:"13px",fontWeight:600,marginBottom:"12px"},children:[" Seilen kitaplardan ",e.jsx("strong",{children:Ce})," tanesi renci tarafndan zaten dn alnm. Bu kitaplar verilmeyecek."]}),e.jsxs("div",{style:{fontSize:"14px",color:"#475569",marginBottom:"12px",lineHeight:"1.6"},children:["Verilebilecek ",e.jsx("strong",{children:ue.length})," kitap eklendiinde toplam ",e.jsx("strong",{children:gt})," kitap olacak."]}),e.jsxs("div",{style:{padding:"12px",backgroundColor:"#fef3c7",borderRadius:"8px",border:"1px solid #fbbf24",marginBottom:"12px"},children:[e.jsx("div",{style:{fontSize:"14px",color:"#92400e",fontWeight:600,marginBottom:"4px"},children:" Limit Am"}),e.jsxs("div",{style:{fontSize:"13px",color:"#78350f"},children:["Bir renci en fazla ",e.jsxs("strong",{children:[Qe," kitap"]})," alabilir. Bu ilem sonras renci ",e.jsxs("strong",{children:[de," kitap fazla"]})," alacak.",Ce>0&&e.jsxs("span",{style:{display:"block",marginTop:"4px",fontSize:"12px"},children:["Not: ",Ce," kitap zaten dnte olduu iin verilmeyecek."]})]})]}),e.jsxs("div",{style:{fontSize:"13px",color:"#64748b",marginTop:"12px"},children:[e.jsxs("strong",{children:["Verilebilecek Kitaplar (",ue.length,"):"]}),e.jsx("ul",{style:{marginTop:"8px",paddingLeft:"20px",fontSize:"12px"},children:ue.map(me=>e.jsxs("li",{style:{marginBottom:"4px"},children:[me.title," - ",me.author]},me.id))}),Ce>0&&e.jsxs(e.Fragment,{children:[e.jsxs("strong",{style:{color:"#dc2626",marginTop:"12px",display:"block"},children:["Zaten dnte Olan Kitaplar (",Ce,"):"]}),e.jsx("ul",{style:{marginTop:"8px",paddingLeft:"20px",fontSize:"12px",color:"#9ca3af"},children:P.books.filter(me=>!ue.some(Ct=>Ct.id===me.id)).map(me=>e.jsxs("li",{style:{marginBottom:"4px",textDecoration:"line-through"},children:[me.title," - ",me.author]},me.id))})]})]})]})})})(),fe&&Pe&&_t.createPortal(e.jsx("div",{style:{position:"fixed",top:0,left:0,right:0,bottom:0,backgroundColor:"rgba(0, 0, 0, 0.5)",display:"flex",alignItems:"center",justifyContent:"center",zIndex:1e3},onClick:()=>{ve(!1),bt(null),_e(null)},children:e.jsxs("div",{className:"card",style:{maxWidth:"600px",width:"90%",maxHeight:"90vh",overflow:"auto",position:"relative"},onClick:_=>_.stopPropagation(),children:[e.jsxs("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center",marginBottom:"24px"},children:[e.jsx("h2",{style:{margin:0,color:"#1e293b"},children:"Ceza Puan Dzenle"}),e.jsx("button",{onClick:()=>{ve(!1),bt(null),_e(null)},style:{background:"none",border:"none",fontSize:"24px",cursor:"pointer",color:"#64748b",padding:0,width:"32px",height:"32px",display:"flex",alignItems:"center",justifyContent:"center"},children:""})]}),e.jsxs("div",{style:{display:"flex",flexDirection:"column",gap:"20px"},children:[e.jsxs("div",{style:{padding:"16px",backgroundColor:"#f8fafc",borderRadius:"8px",border:"1px solid #e2e8f0"},children:[e.jsx("div",{style:{fontWeight:600,marginBottom:"8px",fontSize:"16px"},children:Pe.name}),e.jsxs("div",{style:{fontSize:"14px",color:"#64748b"},children:[Pe.class&&Pe.branch?`${Pe.class}-${Pe.branch}`:Pe.class?`${Pe.class}. Snf`:"",Pe.studentNumber&&`  No: ${Pe.studentNumber}`]})]}),e.jsxs("div",{style:{padding:"20px",backgroundColor:"#ffffff",borderRadius:"12px",border:"1px solid #e2e8f0"},children:[e.jsx("h3",{style:{marginTop:0,marginBottom:"16px",fontSize:"18px",fontWeight:600,color:"#1e293b"},children:" Ceza Puan"}),e.jsxs("div",{style:{display:"flex",flexDirection:"column",gap:"12px"},children:[e.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"16px"},children:[e.jsxs("div",{style:{flex:1},children:[e.jsx("strong",{style:{color:"#64748b",fontSize:"14px",display:"block",marginBottom:"4px"},children:"Mevcut Ceza Puan"}),e.jsx("p",{style:{margin:0,fontSize:"24px",fontWeight:700,color:(Pe.penaltyPoints||0)>=$e?"#ef4444":(Pe.penaltyPoints||0)>0?"#f59e0b":"#10b981"},children:Pe.penaltyPoints||0})]}),(Pe.penaltyPoints||0)>=$e&&e.jsx("div",{style:{padding:"12px 20px",backgroundColor:"#fee2e2",borderRadius:"8px",border:"2px solid #ef4444",color:"#dc2626",fontWeight:600},children:" Ceza Durumunda - Kitap Alamaz"})]}),e.jsxs("div",{style:{display:"flex",gap:"8px",alignItems:"center"},children:[e.jsx("input",{type:"number",id:"penalty-points-edit-input",min:"0",defaultValue:Pe.penaltyPoints||0,style:{flex:1,padding:"10px",borderRadius:"6px",border:"1px solid #d1d5db",fontSize:"14px"},placeholder:"Ceza puan"}),e.jsx("button",{onClick:async()=>{const _=document.getElementById("penalty-points-edit-input");if(!_)return;const ne=parseInt(_.value)||0;if(ne<0){alert("Ceza puan negatif olamaz.");return}try{Oe(!0),await xe.put(`/admin/students/${encodeURIComponent(Pe.name)}/penalty`,{penaltyPoints:ne}),bt({...Pe,penaltyPoints:ne,isBanned:ne>=$e}),ve(!1),bt(null),_e(null),i&&await i(),alert("Ceza puan baaryla gncellendi.")}catch(ue){alert(ue instanceof Error?ue.message:"Ceza puan gncellenirken bir hata olutu")}finally{Oe(!1)}},disabled:ce,style:{padding:"10px 20px",fontSize:"14px",backgroundColor:ce?"#9ca3af":"#3b82f6",color:"white",border:"none",borderRadius:"6px",cursor:ce?"not-allowed":"pointer",fontWeight:600},children:ce?"Gncelleniyor...":"Gncelle"})]})]})]})]})]})}),document.body),lt&&_t.createPortal(e.jsx("div",{style:{position:"fixed",top:0,left:0,right:0,bottom:0,backgroundColor:"rgba(0, 0, 0, 0.5)",display:"flex",alignItems:"center",justifyContent:"center",zIndex:10005},onClick:()=>be(!1),children:e.jsxs("div",{className:"card",style:{maxWidth:"500px",width:"90%",padding:"24px",animation:"slideIn 0.3s ease-out",backgroundColor:"#fffbeb",border:"1px solid #fcd34d"},onClick:_=>_.stopPropagation(),children:[e.jsxs("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center",marginBottom:"16px"},children:[e.jsxs("h3",{style:{margin:0,fontSize:"20px",fontWeight:600,color:"#1e293b",display:"flex",alignItems:"center",gap:"8px"},children:[e.jsxs("svg",{width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",stroke:"#d97706",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:[e.jsx("path",{d:"M4 19.5A2.5 2.5 0 0 1 6.5 17H20"}),e.jsx("path",{d:"M6.5 2H20v20H6.5A2.5 2.5 0 0 1 4 19.5v-15A2.5 2.5 0 0 1 6.5 2z"}),e.jsx("path",{d:"M9 9l3 3 3-3"})]}),"dn Ver lemi"]}),e.jsx("button",{onClick:()=>be(!1),style:{background:"none",border:"none",fontSize:"24px",cursor:"pointer",color:"#9ca3af"},children:""})]}),e.jsxs("div",{style:{display:"flex",flexDirection:"column",gap:"12px",fontSize:"14px",color:"#475569",lineHeight:"1.6"},children:[e.jsxs("div",{style:{padding:"12px",backgroundColor:"white",borderRadius:"8px",border:"1px solid #fde68a"},children:[e.jsx("strong",{style:{color:"#d97706",display:"block",marginBottom:"4px"},children:"Nasl Yaplr?"}),e.jsxs("ol",{style:{margin:"0",paddingLeft:"20px"},children:[e.jsx("li",{children:"renci sein veya arama yapn."}),e.jsx("li",{children:"Verilecek kitaplar listeden sein."}),e.jsx("li",{children:"dn sresini belirleyin (Standart: 14 gn)."}),e.jsxs("li",{children:[e.jsx("strong",{children:'"dn Ver"'})," butonuna basarak ilemi tamamlayn."]})]})]}),e.jsxs("p",{style:{margin:0},children:[e.jsx("strong",{style:{color:"#1e293b"},children:"Uyar:"})," Ceza puan ",$e," ve zeri olan renciler kitap alamaz."]}),e.jsxs("p",{style:{margin:0},children:[e.jsx("strong",{style:{color:"#1e293b"},children:"Stok Kontrol:"})," Salam kopyas olmayan veya stou tkenen kitaplar aramada kmaz."]})]}),e.jsx("div",{style:{marginTop:"20px",display:"flex",justifyContent:"flex-end"},children:e.jsx("button",{onClick:()=>be(!1),style:{padding:"8px 24px",backgroundColor:"#d97706",color:"white",border:"none",borderRadius:"6px",fontWeight:600,cursor:"pointer"},children:"Anlald"})})]})}),document.body),Me&&_t.createPortal(e.jsx("div",{style:{position:"fixed",top:0,left:0,right:0,bottom:0,backgroundColor:"rgba(0, 0, 0, 0.5)",display:"flex",alignItems:"center",justifyContent:"center",zIndex:10005},onClick:()=>et(!1),children:e.jsxs("div",{className:"card",style:{maxWidth:"500px",width:"90%",padding:"24px",animation:"slideIn 0.3s ease-out",backgroundColor:"#fffbeb",border:"1px solid #fcd34d"},onClick:_=>_.stopPropagation(),children:[e.jsxs("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center",marginBottom:"16px"},children:[e.jsxs("h3",{style:{margin:0,fontSize:"20px",fontWeight:600,color:"#1e293b",display:"flex",alignItems:"center",gap:"8px"},children:[e.jsx("svg",{width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",stroke:"#d97706",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:e.jsx("polyline",{points:"20 6 9 17 4 12"})}),"Teslim Al lemi"]}),e.jsx("button",{onClick:()=>et(!1),style:{background:"none",border:"none",fontSize:"24px",cursor:"pointer",color:"#9ca3af"},children:""})]}),e.jsxs("div",{style:{display:"flex",flexDirection:"column",gap:"12px",fontSize:"14px",color:"#475569",lineHeight:"1.6"},children:[e.jsxs("div",{style:{padding:"12px",backgroundColor:"white",borderRadius:"8px",border:"1px solid #fde68a"},children:[e.jsx("strong",{style:{color:"#d97706",display:"block",marginBottom:"4px"},children:"Nasl Yaplr?"}),e.jsxs("ol",{style:{margin:"0",paddingLeft:"20px"},children:[e.jsx("li",{children:"Listeden iade edilecek kitab bulun (Arama yapabilirsiniz)."}),e.jsxs("li",{children:[e.jsx("strong",{children:'"Teslim Al"'})," butonuna tklayn."]}),e.jsx("li",{children:"Onay penceresinde ilemi dorulayn."})]})]}),e.jsxs("p",{style:{margin:0},children:[e.jsx("strong",{style:{color:"#1e293b"},children:"Gecikme Cezas:"})," Geciken kitaplar teslim alndnda sistem otomatik olarak ceza puan hesaplar ve renci siciline iler."]}),e.jsxs("p",{style:{margin:0},children:[e.jsx("strong",{style:{color:"#1e293b"},children:"Otomatik Gncelleme:"})," Teslim alnan kitabn stok adedi otomatik artrlr."]})]}),e.jsx("div",{style:{marginTop:"20px",display:"flex",justifyContent:"flex-end"},children:e.jsx("button",{onClick:()=>et(!1),style:{padding:"8px 24px",backgroundColor:"#d97706",color:"white",border:"none",borderRadius:"6px",fontWeight:600,cursor:"pointer"},children:"Anlald"})})]})}),document.body),e.jsx(zi,{isOpen:!!Ve,title:(Ve==null?void 0:Ve.type)==="success"?"lem Baarl":"Bir Hata Olutu",type:(Ve==null?void 0:Ve.type)||"info",onClose:wt,children:e.jsx("p",{children:Ve==null?void 0:Ve.message})}),kt&&Ge&&_t.createPortal(e.jsx("div",{style:{position:"fixed",top:0,left:0,right:0,bottom:0,backgroundColor:"rgba(0, 0, 0, 0.5)",display:"flex",alignItems:"center",justifyContent:"center",zIndex:10010},onClick:()=>ot(!1),children:e.jsxs("div",{className:"card",style:{maxWidth:"450px",width:"90%",padding:"24px",animation:"slideIn 0.3s ease-out",backgroundColor:"white",borderRadius:"16px",boxShadow:"0 20px 25px -5px rgba(0, 0, 0, 0.1), 0 10px 10px -5px rgba(0, 0, 0, 0.04)"},onClick:_=>_.stopPropagation(),children:[e.jsxs("div",{style:{textAlign:"center",marginBottom:"20px"},children:[e.jsx("div",{style:{width:"56px",height:"56px",borderRadius:"50%",backgroundColor:"#eff6ff",color:"#3b82f6",display:"flex",alignItems:"center",justifyContent:"center",margin:"0 auto 16px auto",boxShadow:"0 4px 6px -1px rgba(59, 130, 246, 0.1)"},children:e.jsx("svg",{width:"28",height:"28",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:e.jsx("path",{d:"M14 9V5a3 3 0 0 0-3-3l-4 9v11h11.28a2 2 0 0 0 2-1.7l1.38-9a2 2 0 0 0-2-2.3zM7 22H4a2 2 0 0 1-2-2v-7a2 2 0 0 1 2-2h3"})})}),e.jsx("h3",{style:{margin:"0 0 12px 0",fontSize:"20px",fontWeight:700,color:"#1e293b"},children:"Teslim Almay Onayla"}),e.jsxs("div",{style:{backgroundColor:"#f8fafc",padding:"16px",borderRadius:"12px",border:"1px solid #e2e8f0",marginBottom:"8px"},children:[e.jsx("p",{style:{margin:"0 0 8px 0",color:"#64748b",fontSize:"13px",textTransform:"uppercase",letterSpacing:"0.5px",fontWeight:600},children:"Kitap"}),e.jsx("p",{style:{margin:"0 0 16px 0",color:"#334155",fontWeight:700,fontSize:"16px"},children:Ge.bookTitle||"Kitap Bilgisi Yok"}),e.jsx("p",{style:{margin:"0 0 8px 0",color:"#64748b",fontSize:"13px",textTransform:"uppercase",letterSpacing:"0.5px",fontWeight:600,borderTop:"1px solid #e2e8f0",paddingTop:"12px"},children:"renci"}),e.jsx("p",{style:{margin:"0",color:"#334155",fontWeight:700,fontSize:"16px"},children:Ge.borrowerName})]}),e.jsx("p",{style:{margin:"16px 0 0 0",color:"#64748b",lineHeight:"1.5",fontSize:"14px"},children:"Bu kitab teslim almak ve stoklara geri eklemek istediinize emin misiniz?"})]}),e.jsxs("div",{style:{display:"flex",gap:"12px"},children:[e.jsx("button",{onClick:()=>ot(!1),style:{flex:1,padding:"12px",backgroundColor:"white",color:"#64748b",border:"1px solid #cbd5e1",borderRadius:"10px",fontWeight:600,cursor:"pointer",transition:"all 0.2s",fontSize:"15px"},onMouseEnter:_=>{_.currentTarget.style.backgroundColor="#f1f5f9",_.currentTarget.style.borderColor="#94a3b8"},onMouseLeave:_=>{_.currentTarget.style.backgroundColor="white",_.currentTarget.style.borderColor="#cbd5e1"},children:"Vazge"}),e.jsx("button",{onClick:Te,style:{flex:1,padding:"12px",backgroundColor:"#3b82f6",color:"white",border:"none",borderRadius:"10px",fontWeight:600,cursor:"pointer",transition:"all 0.2s",fontSize:"15px",boxShadow:"0 4px 6px -1px rgba(59, 130, 246, 0.2)"},onMouseEnter:_=>{_.currentTarget.style.backgroundColor="#2563eb",_.currentTarget.style.transform="translateY(-1px)"},onMouseLeave:_=>{_.currentTarget.style.backgroundColor="#3b82f6",_.currentTarget.style.transform="translateY(0)"},children:"Onayla ve Teslim Al"})]})]})}),document.body)]})},e0=({onRefresh:t,personelName:n})=>{const[r,i]=a.useState(""),[o,l]=a.useState("title"),[s,u]=a.useState([]),[d,h]=a.useState(new Set),[C,k]=a.useState(!1),[S,B]=a.useState(null),[m,I]=a.useState(""),[F,y]=a.useState(""),[f,b]=a.useState(""),[D,q]=a.useState(!1),[V,ie]=a.useState([]),M=async()=>{if(!r.trim()){B({type:"error",text:"Ltfen arama sorgusu girin"});return}k(!0),B(null),u([]),h(new Set);try{let P="";o==="title"?P=`intitle:"${r}"`:o==="author"?P=`inauthor:"${r}"`:o==="category"&&(P=`subject:"${r}"`);const se=await tf(P);u(se),se.length===0?B({type:"error",text:"Kitap bulunamad. Ltfen farkl bir arama terimi deneyin."}):B({type:"success",text:`${se.length} kitap bulundu`})}catch(P){const se=P instanceof Error?P.message:"Arama srasnda hata olutu";B({type:"error",text:se}),console.error("Arama hatas:",P)}finally{k(!1)}},re=P=>{const se=new Set(d);se.has(P)?se.delete(P):se.add(P),h(se)},ce=()=>{const P=Re();h(new Set(P.map((se,fe)=>fe)))},Oe=()=>{h(new Set)},Re=()=>{let P=s;if(m&&(P=P.filter(se=>se.category.toLowerCase()===m.toLowerCase())),F){const se=parseInt(F);isNaN(se)||(P=P.filter(fe=>fe.year>=se))}if(f){const se=parseInt(f);isNaN(se)||(P=P.filter(fe=>fe.year<=se))}return P},_e=()=>{const P=Re(),se=Array.from(d).map(ve=>P[ve]).filter(Boolean);if(se.length===0){B({type:"error",text:"Ltfen en az bir kitap sein"});return}const fe=se.map(ve=>({book:ve,quantity:1}));ie(fe),q(!0)},xt=(P,se)=>{se<1&&(se=1),se>100&&(se=100);const fe=[...V];fe[P].quantity=se,ie(fe)},De=async()=>{if(V.length===0){B({type:"error",text:"Eklenecek kitap yok"});return}k(!0),B(null),q(!1);try{const P=V.map(fe=>({title:fe.book.title,author:fe.book.author,category:fe.book.category,quantity:fe.quantity,shelf:"",publisher:fe.book.publisher,summary:fe.book.summary})),se=await ic(P,n);B({type:"success",text:`${se.addedToCsv} kitap CSV'ye eklendi, ${se.importedToSystem} kitap sisteme aktarld`}),h(new Set),ie([]),t()}catch{B({type:"error",text:"Kitap ekleme srasnda hata olutu"})}finally{k(!1)}},ft=()=>{q(!1),ie([])},ze=Re();return e.jsxs("div",{className:"card",children:[e.jsxs("h2",{style:{marginBottom:"24px",color:"#0f172a",fontWeight:700,display:"flex",alignItems:"center",gap:"8px"},children:[e.jsxs("svg",{width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",stroke:"#0f172a",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:[e.jsx("circle",{cx:"11",cy:"11",r:"8"}),e.jsx("path",{d:"M21 21l-4.35-4.35"})]}),"Google Books ile Kitap Ekle"]}),e.jsx("div",{style:{marginBottom:"24px",padding:"20px",background:"rgba(255, 255, 255, 0.6)",backdropFilter:"blur(10px)",borderRadius:"12px",border:"1px solid rgba(255, 255, 255, 0.3)"},children:e.jsxs("div",{style:{display:"flex",gap:"12px",marginBottom:"12px",flexWrap:"wrap"},children:[e.jsxs("div",{style:{flex:1,minWidth:"200px"},children:[e.jsx("label",{style:{display:"block",marginBottom:"6px",fontWeight:600,color:"#1e293b"},children:"Arama Tr"}),e.jsxs("select",{value:o,onChange:P=>l(P.target.value),style:{width:"100%",padding:"8px",borderRadius:"6px",border:"1px solid #d1d5db"},children:[e.jsx("option",{value:"title",children:"Kitap Bal"}),e.jsx("option",{value:"author",children:"Yazar Ad"}),e.jsx("option",{value:"category",children:"Kategori"})]})]}),e.jsxs("div",{style:{flex:2,minWidth:"250px"},children:[e.jsx("label",{style:{display:"block",marginBottom:"6px",fontWeight:600,color:"#1e293b"},children:"Arama Sorgusu"}),e.jsx("input",{type:"text",value:r,onChange:P=>i(P.target.value),onKeyPress:P=>P.key==="Enter"&&M(),placeholder:o==="title"?"rn: Kara Kitap":o==="author"?"rn: Orhan Pamuk":"rn: Roman, Tarih, Bilim Kurgu",style:{width:"100%",padding:"8px",borderRadius:"6px",border:"1px solid #d1d5db"}})]}),e.jsx("div",{style:{display:"flex",alignItems:"flex-end"},children:e.jsx("button",{onClick:M,disabled:C,style:{padding:"8px 24px",backgroundColor:"#2563eb",color:"white",border:"none",borderRadius:"6px",cursor:C?"not-allowed":"pointer",fontWeight:600,opacity:C?.6:1},children:C?"Aranyor...":" Ara"})})]})}),s.length>0&&e.jsxs("div",{style:{marginBottom:"24px",padding:"16px",background:"rgba(255, 255, 255, 0.6)",backdropFilter:"blur(10px)",borderRadius:"12px",border:"1px solid rgba(255, 255, 255, 0.3)"},children:[e.jsx("div",{style:{fontWeight:600,marginBottom:"12px",color:"#1e293b"},children:"Filtreler"}),e.jsxs("div",{style:{display:"flex",gap:"12px",flexWrap:"wrap"},children:[e.jsxs("div",{children:[e.jsx("label",{style:{display:"block",marginBottom:"4px",fontSize:"14px",fontWeight:600,color:"#1e293b"},children:"Kategori"}),e.jsx("input",{type:"text",value:m,onChange:P=>I(P.target.value),placeholder:"Roman, Tarih, vb.",style:{padding:"6px",borderRadius:"4px",border:"1px solid #d1d5db",width:"150px"}})]}),e.jsxs("div",{children:[e.jsx("label",{style:{display:"block",marginBottom:"4px",fontSize:"14px",fontWeight:600,color:"#1e293b"},children:"Min Yl"}),e.jsx("input",{type:"number",value:F,onChange:P=>y(P.target.value),placeholder:"1950",style:{padding:"6px",borderRadius:"4px",border:"1px solid #d1d5db",width:"100px"}})]}),e.jsxs("div",{children:[e.jsx("label",{style:{display:"block",marginBottom:"4px",fontSize:"14px",fontWeight:600,color:"#1e293b"},children:"Max Yl"}),e.jsx("input",{type:"number",value:f,onChange:P=>b(P.target.value),placeholder:"2024",style:{padding:"6px",borderRadius:"4px",border:"1px solid #d1d5db",width:"100px"}})]})]})]}),S&&e.jsx("div",{style:{padding:"16px",borderRadius:"12px",marginBottom:"16px",background:S.type==="success"?"linear-gradient(135deg, rgba(16, 185, 129, 0.9) 0%, rgba(5, 150, 105, 0.9) 100%)":"linear-gradient(135deg, rgba(239, 68, 68, 0.9) 0%, rgba(220, 38, 38, 0.9) 100%)",backdropFilter:"blur(10px)",border:`2px solid ${S.type==="success"?"rgba(16, 185, 129, 0.5)":"rgba(239, 68, 68, 0.5)"}`,color:"#ffffff",fontWeight:600,boxShadow:"0 4px 12px rgba(0, 0, 0, 0.2)"},children:S.text}),D&&_t.createPortal(e.jsx("div",{style:{position:"fixed",top:0,left:0,right:0,bottom:0,backgroundColor:"rgba(0, 0, 0, 0.5)",display:"flex",alignItems:"center",justifyContent:"center",zIndex:1e3},onClick:ft,children:e.jsxs("div",{className:"card",style:{maxWidth:"600px",width:"90%",maxHeight:"90vh",overflow:"auto",position:"relative"},onClick:P=>P.stopPropagation(),children:[e.jsxs("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center",marginBottom:"20px"},children:[e.jsxs("h2",{style:{margin:0,color:"#1e293b",fontWeight:700,display:"flex",alignItems:"center",gap:"8px"},children:[e.jsxs("svg",{width:"20",height:"20",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:[e.jsx("path",{d:"M11 4H4a2 2 0 0 0-2 2v14a2 2 0 0 0 2 2h14a2 2 0 0 0 2-2v-7"}),e.jsx("path",{d:"M18.5 2.5a2.121 2.121 0 0 1 3 3L12 15l-4 1 1-4 9.5-9.5z"})]}),"Kitap Adetlerini Dzenle"]}),e.jsx("button",{onClick:ft,style:{background:"none",border:"none",fontSize:"24px",cursor:"pointer",color:"#64748b",padding:0,width:"32px",height:"32px",display:"flex",alignItems:"center",justifyContent:"center"},children:""})]}),e.jsx("p",{style:{color:"#1e293b",marginBottom:"20px",fontSize:"14px",fontWeight:500},children:"Her kitap iin adet belirleyin (varsaylan: 1)"}),e.jsx("div",{style:{display:"flex",flexDirection:"column",gap:"12px",marginBottom:"24px"},children:V.map((P,se)=>e.jsxs("div",{style:{padding:"16px",border:"1px solid rgba(255, 255, 255, 0.3)",borderRadius:"12px",background:"rgba(255, 255, 255, 0.5)",backdropFilter:"blur(10px)",display:"flex",justifyContent:"space-between",alignItems:"center",gap:"16px"},children:[e.jsxs("div",{style:{flex:1,minWidth:0},children:[e.jsx("div",{style:{fontWeight:600,marginBottom:"4px",color:"#1e293b"},children:P.book.title}),e.jsxs("div",{style:{fontSize:"14px",color:"#475569",fontWeight:500},children:[P.book.author,"  ",P.book.category]})]}),e.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"8px"},children:[e.jsx("label",{style:{fontSize:"14px",fontWeight:600,color:"#1e293b"},children:"Adet:"}),e.jsx("input",{type:"number",min:"1",max:"100",value:P.quantity,onChange:fe=>{const ve=parseInt(fe.target.value)||1;xt(se,ve)},style:{width:"80px",padding:"8px",borderRadius:"6px",border:"1px solid #d1d5db",textAlign:"center",fontSize:"16px",fontWeight:600}}),e.jsxs("div",{style:{display:"flex",flexDirection:"column",gap:"2px"},children:[e.jsx("button",{onClick:()=>xt(se,P.quantity+1),style:{width:"24px",height:"24px",padding:0,border:"1px solid #d1d5db",borderRadius:"4px",backgroundColor:"#f9fafb",cursor:"pointer",fontSize:"14px",display:"flex",alignItems:"center",justifyContent:"center"},children:"+"}),e.jsx("button",{onClick:()=>xt(se,Math.max(1,P.quantity-1)),style:{width:"24px",height:"24px",padding:0,border:"1px solid #d1d5db",borderRadius:"4px",backgroundColor:"#f9fafb",cursor:"pointer",fontSize:"14px",display:"flex",alignItems:"center",justifyContent:"center"},children:""})]})]})]},se))}),e.jsxs("div",{style:{display:"flex",gap:"12px",justifyContent:"flex-end"},children:[e.jsx("button",{onClick:ft,style:{padding:"10px 20px",backgroundColor:"#f3f4f6",color:"#374151",border:"none",borderRadius:"6px",cursor:"pointer",fontWeight:600},children:"ptal"}),e.jsx("button",{onClick:De,disabled:C,style:{padding:"10px 20px",backgroundColor:C?"#9ca3af":"#2563eb",color:"white",border:"none",borderRadius:"6px",cursor:C?"not-allowed":"pointer",fontWeight:600},children:C?"Ekleniyor...":`Ekle (${V.reduce((P,se)=>P+se.quantity,0)} adet)`})]})]})}),document.body),ze.length>0&&e.jsxs(e.Fragment,{children:[e.jsxs("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center",marginBottom:"16px"},children:[e.jsxs("div",{children:[e.jsx("strong",{children:ze.length})," kitap bulundu (",d.size," seili)"]}),e.jsxs("div",{style:{display:"flex",gap:"8px"},children:[e.jsx("button",{onClick:ce,style:{padding:"6px 12px",backgroundColor:"#10b981",color:"white",border:"none",borderRadius:"4px",cursor:"pointer",fontSize:"14px"},children:"Tmn Se"}),e.jsx("button",{onClick:Oe,disabled:s.length===0||d.size===0,style:{padding:"6px 12px",backgroundColor:s.length===0||d.size===0?"#9ca3af":"#6b7280",color:"white",border:"none",borderRadius:"4px",cursor:s.length>0&&d.size>0?"pointer":"not-allowed",fontSize:"14px"},children:"Seimi Temizle"}),e.jsx("button",{onClick:_e,disabled:C||d.size===0,style:{padding:"6px 16px",backgroundColor:d.size>0?"#2563eb":"#9ca3af",color:"white",border:"none",borderRadius:"4px",cursor:d.size>0?"pointer":"not-allowed",fontWeight:600},children:C?"Ekleniyor...":e.jsxs(e.Fragment,{children:[e.jsxs("svg",{width:"18",height:"18",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",style:{marginRight:"8px"},children:[e.jsx("path",{d:"M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4"}),e.jsx("polyline",{points:"7 10 12 15 17 10"}),e.jsx("line",{x1:"12",y1:"15",x2:"12",y2:"3"})]}),"CSV'ye Ekle (",d.size,")"]})})]})]}),e.jsx("div",{style:{display:"grid",gap:"12px"},children:ze.map((P,se)=>{const fe=d.has(se);return e.jsx("div",{onClick:()=>re(se),style:{padding:"16px",border:`2px solid ${fe?"#2563eb":"#e5e7eb"}`,borderRadius:"8px",cursor:"pointer",backgroundColor:fe?"#eff6ff":"white",transition:"all 0.2s"},onMouseEnter:ve=>{fe||(ve.currentTarget.style.borderColor="#93c5fd")},onMouseLeave:ve=>{fe||(ve.currentTarget.style.borderColor="#e5e7eb")},children:e.jsxs("div",{style:{display:"flex",gap:"12px",alignItems:"flex-start"},children:[e.jsx("input",{type:"checkbox",checked:fe,onChange:()=>re(se),onClick:ve=>ve.stopPropagation(),style:{marginTop:"4px"}}),e.jsxs("div",{style:{flex:1},children:[e.jsxs("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"flex-start",marginBottom:"8px"},children:[e.jsx("h3",{style:{margin:0,fontSize:"18px",color:"#1f2937"},children:P.title}),fe&&e.jsx("span",{style:{color:"#2563eb",fontWeight:600},children:" Seildi"})]}),e.jsxs("div",{style:{color:"#6b7280",marginBottom:"8px"},children:[e.jsx("strong",{children:"Yazar:"})," ",P.author,"  ",e.jsx("strong",{children:"Kategori:"})," ",P.category]}),P.year>0&&e.jsxs("div",{style:{color:"#6b7280",marginBottom:"8px"},children:[e.jsx("strong",{children:"Yl:"})," ",P.year," ",P.pageCount>0&&` Sayfa: ${P.pageCount}`]}),e.jsxs("div",{style:{color:"#6b7280",marginBottom:"8px"},children:[e.jsx("strong",{children:"Yaynevi:"})," ",P.publisher]}),P.summary&&e.jsx("div",{style:{color:"#4b5563",fontSize:"14px",marginTop:"8px"},children:P.summary.length>200?P.summary.substring(0,200)+"...":P.summary})]})]})},se)})})]}),s.length===0&&!C&&e.jsx("div",{style:{textAlign:"center",padding:"40px",color:"#6b7280"},children:"Arama yapmak iin yukardaki formu kullann"})]})},t0=({onRefresh:t,personelName:n})=>{const[r,i]=a.useState("api"),[o,l]=a.useState({title:"",author:"",category:"Roman",quantity:1,shelf:"",publisher:"",summary:"",year:"",pageCount:"",bookNumber:""}),[s,u]=a.useState(!1),[d,h]=a.useState(null),[C,k]=a.useState(null),[S,B]=a.useState(!1),[m,I]=a.useState(!1),[F,y]=a.useState(!1),[f,b]=a.useState(!0),D=["Roman","Tarih","Deneme","Psikoloji","Fantastik","Bilim Kurgu","Macera","Biyografi","iir","ocuk","Eitim","Sanat"],q=M=>{var ce;const re=(ce=M.target.files)==null?void 0:ce[0];if(re){if(!["image/jpeg","image/png","image/jpg","application/pdf"].includes(re.type)){h({type:"error",text:"Ltfen geerli bir dosya sein (JPG, PNG, PDF)"});return}k(re),h({type:"success",text:`Dosya seildi: ${re.name}`})}},V=async()=>{if(!C){h({type:"error",text:"Ltfen bir dosya sein"});return}u(!0),h(null);try{await new Promise(M=>setTimeout(M,1e3)),h({type:"success",text:"Dosya ykleme zellii yaknda eklenecek. imdilik manuel ekleme veya API kullanabilirsiniz."}),k(null)}catch{h({type:"error",text:"Dosya ykleme baarsz oldu"})}finally{u(!1)}},ie=async M=>{if(M.preventDefault(),h(null),!o.title.trim()||!o.author.trim()){h({type:"error",text:"Kitap bal ve yazar alanlar zorunludur"});return}u(!0);try{const re={title:o.title.trim(),author:o.author.trim(),category:o.category||"Roman",quantity:o.quantity||1,shelf:o.shelf.trim()||"",publisher:o.publisher.trim()||"",summary:o.summary.trim()||""},ce=await ic([re],n);h({type:"success",text:`Kitap baaryla eklendi! CSV'ye ${ce.addedToCsv} kitap eklendi, sisteme ${ce.importedToSystem} kitap aktarld.`}),l({title:"",author:"",category:"Roman",quantity:1,shelf:"",publisher:"",summary:"",year:"",pageCount:"",bookNumber:""}),t()}catch(re){h({type:"error",text:re instanceof Error?re.message:"Kitap ekleme baarsz oldu"})}finally{u(!1)}};return a.useEffect(()=>{if(S){const M=re=>{const ce=re.target;!ce.closest("[data-info-popover-api]")&&!ce.closest("[data-info-button-api]")&&B(!1)};return document.addEventListener("mousedown",M),()=>{document.removeEventListener("mousedown",M)}}},[S]),a.useEffect(()=>{if(m){const M=re=>{const ce=re.target;!ce.closest("[data-info-popover-file]")&&!ce.closest("[data-info-button-file]")&&I(!1)};return document.addEventListener("mousedown",M),()=>{document.removeEventListener("mousedown",M)}}},[m]),a.useEffect(()=>{if(F){const M=re=>{const ce=re.target;!ce.closest("[data-info-popover-manual]")&&!ce.closest("[data-info-button-manual]")&&y(!1)};return document.addEventListener("mousedown",M),()=>{document.removeEventListener("mousedown",M)}}},[F]),e.jsxs("div",{children:[e.jsxs("div",{style:{display:"grid",gridTemplateColumns:"repeat(auto-fit, minmax(280px, 1fr))",gap:"20px",marginBottom:"24px"},children:[e.jsxs("div",{onClick:()=>{i("api"),b(!1)},style:{padding:"24px",borderRadius:"12px",border:`2px solid ${r==="api"?"rgba(255, 255, 255, 0.5)":"rgba(255, 255, 255, 0.3)"}`,background:r==="api"?"linear-gradient(135deg, rgba(59, 130, 246, 0.25) 0%, rgba(96, 165, 250, 0.25) 50%, rgba(147, 197, 253, 0.25) 100%)":"linear-gradient(135deg, rgba(59, 130, 246, 0.15) 0%, rgba(96, 165, 250, 0.15) 50%, rgba(147, 197, 253, 0.15) 100%)",backdropFilter:"blur(10px)",cursor:"pointer",transition:"all 0.3s ease",textAlign:"center",position:"relative",zIndex:1,boxShadow:r==="api"?"0 6px 16px rgba(30, 64, 175, 0.25)":"0 4px 12px rgba(30, 64, 175, 0.15)"},onMouseEnter:M=>{r!=="api"&&(M.currentTarget.style.borderColor="rgba(255, 255, 255, 0.4)",M.currentTarget.style.background="linear-gradient(135deg, rgba(59, 130, 246, 0.2) 0%, rgba(96, 165, 250, 0.2) 50%, rgba(147, 197, 253, 0.2) 100%)",M.currentTarget.style.boxShadow="0 6px 16px rgba(30, 64, 175, 0.2)")},onMouseLeave:M=>{r!=="api"&&(M.currentTarget.style.borderColor="rgba(255, 255, 255, 0.3)",M.currentTarget.style.background="linear-gradient(135deg, rgba(59, 130, 246, 0.15) 0%, rgba(96, 165, 250, 0.15) 50%, rgba(147, 197, 253, 0.15) 100%)",M.currentTarget.style.boxShadow="0 4px 12px rgba(30, 64, 175, 0.15)")},children:[e.jsxs("div",{style:{position:"absolute",top:"12px",right:"12px",zIndex:1e3},children:[e.jsx("button",{"data-info-button-api":!0,onClick:M=>{M.stopPropagation(),B(!S)},style:{width:"28px",height:"28px",borderRadius:"50%",border:"2px solid",borderColor:S?"#3b82f6":"#fbbf24",background:S?"#eff6ff":"#fef9e7",cursor:"pointer",display:"flex",alignItems:"center",justifyContent:"center",fontSize:"18px",color:S?"#1d4ed8":"#d97706",transition:"all 0.2s",fontWeight:700,boxShadow:"0 2px 4px rgba(0, 0, 0, 0.1)",position:"relative",padding:0,zIndex:1001},onMouseEnter:M=>{S||(M.currentTarget.style.backgroundColor="#fef3c7",M.currentTarget.style.borderColor="#f59e0b")},onMouseLeave:M=>{S||(M.currentTarget.style.backgroundColor="#fef9e7",M.currentTarget.style.borderColor="#fbbf24")},children:e.jsxs("svg",{width:"16",height:"16",viewBox:"0 0 24 24",fill:"none",stroke:S?"#1d4ed8":"#d97706",strokeWidth:"2.5",strokeLinecap:"round",strokeLinejoin:"round",style:{display:"block"},children:[e.jsx("path",{d:"M21 15a2 2 0 0 1-2 2H7l-4 4V5a2 2 0 0 1 2-2h14a2 2 0 0 1 2 2z"}),e.jsx("line",{x1:"9",y1:"10",x2:"15",y2:"10"}),e.jsx("line",{x1:"9",y1:"14",x2:"15",y2:"14"})]})}),S&&e.jsxs("div",{"data-info-popover-api":!0,style:{position:"absolute",top:"40px",right:"0",width:"400px",maxWidth:"90vw",backgroundColor:"#fef9e7",borderRadius:"12px",border:"1px solid #fbbf24",boxShadow:"0 10px 25px rgba(0, 0, 0, 0.15)",padding:"20px",zIndex:1001,fontSize:"14px"},onClick:M=>M.stopPropagation(),children:[e.jsx("div",{style:{position:"absolute",top:"-8px",right:"20px",width:"16px",height:"16px",backgroundColor:"#fef9e7",borderLeft:"1px solid #fbbf24",borderTop:"1px solid #fbbf24",transform:"rotate(45deg)"}}),e.jsx("div",{style:{display:"flex",flexDirection:"column",gap:"16px"},children:e.jsxs("div",{children:[e.jsxs("h3",{style:{marginTop:0,marginBottom:"10px",fontSize:"16px",fontWeight:600,color:"#1e293b",display:"flex",alignItems:"center",gap:"8px"},children:[e.jsxs("svg",{width:"18",height:"18",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:[e.jsx("circle",{cx:"11",cy:"11",r:"8"}),e.jsx("path",{d:"M21 21l-4.35-4.35"})]}),"Google Books API Kullanm"]}),e.jsxs("div",{style:{display:"flex",flexDirection:"column",gap:"8px",fontSize:"13px",color:"#475569",lineHeight:"1.5"},children:[e.jsxs("p",{style:{margin:0},children:[e.jsx("strong",{style:{color:"#1e293b"},children:"Arama:"})," Arama kutusuna kitap ad veya yazar ad yazarak Google Books API zerinden kitap arayabilirsiniz."]}),e.jsxs("p",{style:{margin:0},children:[e.jsx("strong",{style:{color:"#1e293b"},children:"Sonular:"})," Arama sonular otomatik olarak listelenir. Kitap kapak resmi, balk, yazar ve dier bilgiler grntlenir."]}),e.jsxs("p",{style:{margin:0},children:[e.jsx("strong",{style:{color:"#1e293b"},children:"oklu Seim:"})," Birden fazla kitap seebilirsiniz. Her kitabn yanndaki checkbox' iaretleyerek oklu seim yapabilirsiniz."]}),e.jsxs("p",{style:{margin:0},children:[e.jsx("strong",{style:{color:"#1e293b"},children:"Adet Belirleme:"})," Her kitap iin istediiniz kadar adet girebilirsiniz. Adet alanndan ka kopya eklemek istediinizi belirleyebilirsiniz."]}),e.jsxs("p",{style:{margin:0},children:[e.jsx("strong",{style:{color:"#1e293b"},children:"Ekleme:"}),' Setiiniz kitaplar "Ekle" butonuna tklayarak kataloa ekleyebilirsiniz. Seilen tm kitaplar belirlediiniz adet kadar eklenir.']})]})]})})]})]}),e.jsx("div",{style:{fontSize:"48px",marginBottom:"12px"},children:""}),e.jsx("h3",{style:{margin:"0 0 8px 0",color:"#0f172a",fontWeight:700},children:"Google Books API"}),e.jsx("p",{style:{margin:0,color:"#1e293b",fontSize:"14px",fontWeight:500},children:"API zerinden kitap arayp ekleyin"})]}),e.jsxs("div",{onClick:()=>{i("file"),b(!1)},style:{padding:"24px",borderRadius:"12px",border:`2px solid ${r==="file"?"rgba(255, 255, 255, 0.5)":"rgba(255, 255, 255, 0.3)"}`,background:r==="file"?"linear-gradient(135deg, rgba(59, 130, 246, 0.25) 0%, rgba(96, 165, 250, 0.25) 50%, rgba(147, 197, 253, 0.25) 100%)":"linear-gradient(135deg, rgba(59, 130, 246, 0.15) 0%, rgba(96, 165, 250, 0.15) 50%, rgba(147, 197, 253, 0.15) 100%)",backdropFilter:"blur(10px)",cursor:"pointer",transition:"all 0.3s ease",textAlign:"center",position:"relative",zIndex:1,boxShadow:r==="file"?"0 6px 16px rgba(30, 64, 175, 0.25)":"0 4px 12px rgba(30, 64, 175, 0.15)"},onMouseEnter:M=>{r!=="file"&&(M.currentTarget.style.borderColor="rgba(255, 255, 255, 0.4)",M.currentTarget.style.background="linear-gradient(135deg, rgba(59, 130, 246, 0.2) 0%, rgba(96, 165, 250, 0.2) 50%, rgba(147, 197, 253, 0.2) 100%)",M.currentTarget.style.boxShadow="0 6px 16px rgba(30, 64, 175, 0.2)")},onMouseLeave:M=>{r!=="file"&&(M.currentTarget.style.borderColor="rgba(255, 255, 255, 0.3)",M.currentTarget.style.background="linear-gradient(135deg, rgba(59, 130, 246, 0.15) 0%, rgba(96, 165, 250, 0.15) 50%, rgba(147, 197, 253, 0.15) 100%)",M.currentTarget.style.boxShadow="0 4px 12px rgba(30, 64, 175, 0.15)")},children:[e.jsxs("div",{style:{position:"absolute",top:"12px",right:"12px",zIndex:1e3},children:[e.jsx("button",{"data-info-button-file":!0,onClick:M=>{M.stopPropagation(),I(!m)},style:{width:"28px",height:"28px",borderRadius:"50%",border:"2px solid",borderColor:m?"#3b82f6":"#fbbf24",background:m?"#eff6ff":"#fef9e7",cursor:"pointer",display:"flex",alignItems:"center",justifyContent:"center",fontSize:"18px",color:m?"#1d4ed8":"#d97706",transition:"all 0.2s",fontWeight:700,boxShadow:"0 2px 4px rgba(0, 0, 0, 0.1)",position:"relative",padding:0,zIndex:1001},onMouseEnter:M=>{m||(M.currentTarget.style.backgroundColor="#fef3c7",M.currentTarget.style.borderColor="#f59e0b")},onMouseLeave:M=>{m||(M.currentTarget.style.backgroundColor="#fef9e7",M.currentTarget.style.borderColor="#fbbf24")},children:e.jsxs("svg",{width:"16",height:"16",viewBox:"0 0 24 24",fill:"none",stroke:m?"#1d4ed8":"#d97706",strokeWidth:"2.5",strokeLinecap:"round",strokeLinejoin:"round",style:{display:"block"},children:[e.jsx("path",{d:"M21 15a2 2 0 0 1-2 2H7l-4 4V5a2 2 0 0 1 2-2h14a2 2 0 0 1 2 2z"}),e.jsx("line",{x1:"9",y1:"10",x2:"15",y2:"10"}),e.jsx("line",{x1:"9",y1:"14",x2:"15",y2:"14"})]})}),m&&e.jsxs("div",{"data-info-popover-file":!0,style:{position:"absolute",top:"40px",right:"0",width:"400px",maxWidth:"90vw",backgroundColor:"#fef9e7",borderRadius:"12px",border:"1px solid #fbbf24",boxShadow:"0 10px 25px rgba(0, 0, 0, 0.15)",padding:"20px",zIndex:1001,fontSize:"14px"},onClick:M=>M.stopPropagation(),children:[e.jsx("div",{style:{position:"absolute",top:"-8px",right:"20px",width:"16px",height:"16px",backgroundColor:"#fef9e7",borderLeft:"1px solid #fbbf24",borderTop:"1px solid #fbbf24",transform:"rotate(45deg)"}}),e.jsx("div",{style:{display:"flex",flexDirection:"column",gap:"16px"},children:e.jsxs("div",{children:[e.jsxs("h3",{style:{marginTop:0,marginBottom:"10px",fontSize:"16px",fontWeight:600,color:"#1e293b",display:"flex",alignItems:"center",gap:"8px"},children:[e.jsxs("svg",{width:"18",height:"18",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:[e.jsx("path",{d:"M14 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V8z"}),e.jsx("polyline",{points:"14 2 14 8 20 8"}),e.jsx("line",{x1:"16",y1:"13",x2:"8",y2:"13"}),e.jsx("line",{x1:"16",y1:"17",x2:"8",y2:"17"}),e.jsx("polyline",{points:"10 9 9 9 8 9"})]}),"Dosya Ykleme Kullanm"]}),e.jsxs("div",{style:{display:"flex",flexDirection:"column",gap:"8px",fontSize:"13px",color:"#475569",lineHeight:"1.5"},children:[e.jsxs("p",{style:{margin:0},children:[e.jsx("strong",{style:{color:"#1e293b"},children:"Dosya Seimi:"}),' "Dosya Se" butonuna tklayarak kitap kapa grseli (JPG, PNG) veya PDF dosyas seebilirsiniz.']}),e.jsxs("p",{style:{margin:0},children:[e.jsx("strong",{style:{color:"#1e293b"},children:"Desteklenen Formatlar:"})," JPG, PNG (grsel) veya PDF dosyalar yklenebilir."]}),e.jsxs("p",{style:{margin:0},children:[e.jsx("strong",{style:{color:"#1e293b"},children:"Ykleme:"}),' Dosyay setikten sonra "Dosyay Ykle" butonuna tklayn. Sistem dosyay ileyecektir.']}),e.jsxs("p",{style:{margin:0,padding:"8px",backgroundColor:"#fef3c7",borderRadius:"6px",border:"1px solid #fcd34d"},children:[e.jsx("strong",{style:{color:"#92400e"},children:"Not:"})," Bu zellik yaknda eklenecektir. imdilik manuel ekleme veya Google Books API kullanabilirsiniz."]})]})]})})]})]}),e.jsx("div",{style:{fontSize:"48px",marginBottom:"12px"},children:""}),e.jsx("h3",{style:{margin:"0 0 8px 0",color:"#0f172a",fontWeight:700},children:"Dosya Ykle"}),e.jsx("p",{style:{margin:0,color:"#1e293b",fontSize:"14px",fontWeight:500},children:"Grsel veya PDF dosyas ykleyin"})]}),e.jsxs("div",{onClick:()=>{i("manual"),b(!1)},style:{padding:"24px",borderRadius:"12px",border:`2px solid ${r==="manual"?"rgba(255, 255, 255, 0.5)":"rgba(255, 255, 255, 0.3)"}`,background:r==="manual"?"linear-gradient(135deg, rgba(59, 130, 246, 0.25) 0%, rgba(96, 165, 250, 0.25) 50%, rgba(147, 197, 253, 0.25) 100%)":"linear-gradient(135deg, rgba(59, 130, 246, 0.15) 0%, rgba(96, 165, 250, 0.15) 50%, rgba(147, 197, 253, 0.15) 100%)",backdropFilter:"blur(10px)",cursor:"pointer",transition:"all 0.3s ease",textAlign:"center",position:"relative",zIndex:1,boxShadow:r==="manual"?"0 6px 16px rgba(30, 64, 175, 0.25)":"0 4px 12px rgba(30, 64, 175, 0.15)"},onMouseEnter:M=>{r!=="manual"&&(M.currentTarget.style.borderColor="rgba(255, 255, 255, 0.4)",M.currentTarget.style.background="linear-gradient(135deg, rgba(59, 130, 246, 0.2) 0%, rgba(96, 165, 250, 0.2) 50%, rgba(147, 197, 253, 0.2) 100%)",M.currentTarget.style.boxShadow="0 6px 16px rgba(30, 64, 175, 0.2)")},onMouseLeave:M=>{r!=="manual"&&(M.currentTarget.style.borderColor="rgba(255, 255, 255, 0.3)",M.currentTarget.style.background="linear-gradient(135deg, rgba(59, 130, 246, 0.15) 0%, rgba(96, 165, 250, 0.15) 50%, rgba(147, 197, 253, 0.15) 100%)",M.currentTarget.style.boxShadow="0 4px 12px rgba(30, 64, 175, 0.15)")},children:[e.jsxs("div",{style:{position:"absolute",top:"12px",right:"12px",zIndex:1e3},children:[e.jsx("button",{"data-info-button-manual":!0,onClick:M=>{M.stopPropagation(),y(!F)},style:{width:"28px",height:"28px",borderRadius:"50%",border:"2px solid",borderColor:F?"#3b82f6":"#fbbf24",background:F?"#eff6ff":"#fef9e7",cursor:"pointer",display:"flex",alignItems:"center",justifyContent:"center",fontSize:"18px",color:F?"#1d4ed8":"#d97706",transition:"all 0.2s",fontWeight:700,boxShadow:"0 2px 4px rgba(0, 0, 0, 0.1)",position:"relative",padding:0,zIndex:1001},onMouseEnter:M=>{F||(M.currentTarget.style.backgroundColor="#fef3c7",M.currentTarget.style.borderColor="#f59e0b")},onMouseLeave:M=>{F||(M.currentTarget.style.backgroundColor="#fef9e7",M.currentTarget.style.borderColor="#fbbf24")},children:e.jsxs("svg",{width:"16",height:"16",viewBox:"0 0 24 24",fill:"none",stroke:F?"#1d4ed8":"#d97706",strokeWidth:"2.5",strokeLinecap:"round",strokeLinejoin:"round",style:{display:"block"},children:[e.jsx("path",{d:"M21 15a2 2 0 0 1-2 2H7l-4 4V5a2 2 0 0 1 2-2h14a2 2 0 0 1 2 2z"}),e.jsx("line",{x1:"9",y1:"10",x2:"15",y2:"10"}),e.jsx("line",{x1:"9",y1:"14",x2:"15",y2:"14"})]})}),F&&e.jsxs("div",{"data-info-popover-manual":!0,style:{position:"absolute",top:"40px",right:"0",width:"400px",maxWidth:"90vw",backgroundColor:"#fef9e7",borderRadius:"12px",border:"1px solid #fbbf24",boxShadow:"0 10px 25px rgba(0, 0, 0, 0.15)",padding:"20px",zIndex:1001,fontSize:"14px"},onClick:M=>M.stopPropagation(),children:[e.jsx("div",{style:{position:"absolute",top:"-8px",right:"20px",width:"16px",height:"16px",backgroundColor:"#fef9e7",borderLeft:"1px solid #fbbf24",borderTop:"1px solid #fbbf24",transform:"rotate(45deg)"}}),e.jsx("div",{style:{display:"flex",flexDirection:"column",gap:"16px"},children:e.jsxs("div",{children:[e.jsxs("h3",{style:{marginTop:0,marginBottom:"10px",fontSize:"16px",fontWeight:600,color:"#1e293b",display:"flex",alignItems:"center",gap:"8px"},children:[e.jsxs("svg",{width:"18",height:"18",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:[e.jsx("path",{d:"M11 4H4a2 2 0 0 0-2 2v14a2 2 0 0 0 2 2h14a2 2 0 0 0 2-2v-7"}),e.jsx("path",{d:"M18.5 2.5a2.121 2.121 0 0 1 3 3L12 15l-4 1 1-4 9.5-9.5z"})]}),"Manuel Kitap Ekleme Kullanm"]}),e.jsxs("div",{style:{display:"flex",flexDirection:"column",gap:"8px",fontSize:"13px",color:"#0f172a",lineHeight:"1.5"},children:[e.jsxs("p",{style:{margin:0},children:[e.jsx("strong",{style:{color:"#0f172a"},children:"Zorunlu Alanlar:"})," Kitap bal ve yazar ad mutlaka doldurulmaldr (krmz yldz ile iaretli)."]}),e.jsxs("p",{style:{margin:0},children:[e.jsx("strong",{style:{color:"#0f172a"},children:"Opsiyonel Alanlar:"})," Kategori, adet, raf numaras, yaynevi, yayn yl, sayfa says, kitap numaras ve zet alanlar istee baldr."]}),e.jsxs("p",{style:{margin:0},children:[e.jsx("strong",{style:{color:"#0f172a"},children:"Form Doldurma:"}),' Tm bilgileri doldurduktan sonra "Kitap Ekle" butonuna tklayn. Kitap otomatik olarak kataloa eklenir.']}),e.jsxs("p",{style:{margin:0},children:[e.jsx("strong",{style:{color:"#0f172a"},children:"Temizleme:"}),' Formu sfrlamak iin "Temizle" butonunu kullanabilirsiniz.']}),e.jsxs("p",{style:{margin:0},children:[e.jsx("strong",{style:{color:"#0f172a"},children:"Avantajlar:"})," Tam kontrol salar. Tm knye bilgilerini detayl ekilde girebilirsiniz."]})]})]})})]})]}),e.jsx("div",{style:{fontSize:"48px",marginBottom:"12px"},children:""}),e.jsx("h3",{style:{margin:"0 0 8px 0",color:"#0f172a",fontWeight:700},children:"Manuel Ekle"}),e.jsx("p",{style:{margin:0,color:"#1e293b",fontSize:"14px",fontWeight:500},children:"Knye bilgilerini manuel olarak girin"})]})]}),f&&e.jsxs("div",{style:{marginTop:"20px",marginBottom:"20px",padding:"16px",background:"rgba(254, 243, 199, 0.7)",backdropFilter:"blur(10px)",borderRadius:"8px",border:"1px solid rgba(252, 211, 77, 0.5)"},children:[e.jsx("strong",{style:{color:"#92400e"},children:"Not:"})," Excel ve CSV formatlarnda kitap listesi kaytlar iin ",e.jsx("strong",{style:{color:"#92400e"},children:'"Veri Ykle"'})," sekmesinden toplu halde kitap ekleme, gncelleme ve ynetim ilemlerini yapabilirsiniz."]}),d&&e.jsx("div",{style:{padding:"16px",borderRadius:"12px",marginBottom:"16px",background:d.type==="success"?"linear-gradient(135deg, rgba(16, 185, 129, 0.9) 0%, rgba(5, 150, 105, 0.9) 100%)":"linear-gradient(135deg, rgba(239, 68, 68, 0.9) 0%, rgba(220, 38, 38, 0.9) 100%)",backdropFilter:"blur(10px)",border:`2px solid ${d.type==="success"?"rgba(16, 185, 129, 0.5)":"rgba(239, 68, 68, 0.5)"}`,color:"#ffffff",fontWeight:600,boxShadow:"0 4px 12px rgba(0, 0, 0, 0.2)"},children:d.text}),r==="api"&&e.jsx(e0,{onRefresh:t,personelName:n}),r==="file"&&e.jsxs("div",{className:"card",children:[e.jsx("h2",{style:{marginBottom:"24px",color:"#0f172a",fontWeight:700},children:" Dosya Ykleme"}),e.jsxs("div",{style:{padding:"24px",background:"rgba(255, 255, 255, 0.5)",backdropFilter:"blur(10px)",borderRadius:"12px",border:"1px solid rgba(255, 255, 255, 0.3)"},children:[e.jsxs("div",{style:{marginBottom:"20px"},children:[e.jsxs("label",{htmlFor:"file-upload",style:{display:"inline-block",padding:"12px 24px",backgroundColor:"#2563eb",color:"white",borderRadius:"8px",cursor:"pointer",fontWeight:600,textAlign:"center",transition:"background-color 0.2s"},onMouseEnter:M=>{M.currentTarget.style.backgroundColor="#1d4ed8"},onMouseLeave:M=>{M.currentTarget.style.backgroundColor="#2563eb"},children:[e.jsxs("svg",{width:"18",height:"18",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",style:{marginRight:"8px",verticalAlign:"middle",display:"inline-block"},children:[e.jsx("path",{d:"M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4"}),e.jsx("polyline",{points:"7 10 12 15 17 10"}),e.jsx("line",{x1:"12",y1:"15",x2:"12",y2:"3"})]}),"Dosya Se"]}),e.jsx("input",{id:"file-upload",type:"file",accept:"image/jpeg,image/png,image/jpg,application/pdf",onChange:q,style:{display:"none"}}),C&&e.jsx("div",{style:{marginTop:"16px",padding:"12px",background:"rgba(255, 255, 255, 0.7)",backdropFilter:"blur(10px)",borderRadius:"8px",border:"1px solid rgba(255, 255, 255, 0.3)"},children:e.jsxs("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center"},children:[e.jsxs("div",{children:[e.jsx("div",{style:{fontWeight:600,marginBottom:"4px"},children:C.name}),e.jsxs("div",{style:{fontSize:"14px",color:"#6b7280"},children:[(C.size/1024).toFixed(2)," KB"]})]}),e.jsx("button",{onClick:()=>k(null),style:{padding:"6px 12px",backgroundColor:"#ef4444",color:"white",border:"none",borderRadius:"6px",cursor:"pointer",fontSize:"12px"},children:"Kaldr"})]})})]}),e.jsxs("div",{style:{marginTop:"20px",padding:"16px",background:"rgba(254, 243, 199, 0.7)",backdropFilter:"blur(10px)",borderRadius:"8px",border:"1px solid rgba(252, 211, 77, 0.5)"},children:[e.jsx("strong",{children:"Not:"})," Dosya ykleme zellii yaknda eklenecektir. imdilik manuel ekleme veya Google Books API kullanabilirsiniz."]}),e.jsx("button",{onClick:V,disabled:s||!C,style:{marginTop:"20px",padding:"12px 24px",backgroundColor:s||!C?"#9ca3af":"#10b981",color:"white",border:"none",borderRadius:"8px",cursor:s||!C?"not-allowed":"pointer",fontWeight:600,width:"100%"},children:s?"Ykleniyor...":e.jsxs(e.Fragment,{children:[e.jsxs("svg",{width:"16",height:"16",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",style:{marginRight:"6px",verticalAlign:"middle",display:"inline-block"},children:[e.jsx("path",{d:"M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4"}),e.jsx("polyline",{points:"7 10 12 15 17 10"}),e.jsx("line",{x1:"12",y1:"15",x2:"12",y2:"3"})]}),"Dosyay Ykle"]})})]})]}),r==="manual"&&e.jsxs("div",{className:"card",children:[e.jsx("h2",{style:{marginBottom:"24px",color:"#0f172a",fontWeight:700},children:" Manuel Kitap Ekleme"}),e.jsxs("form",{onSubmit:ie,style:{display:"flex",flexDirection:"column",gap:"20px"},children:[e.jsxs("div",{style:{display:"grid",gridTemplateColumns:"repeat(auto-fit, minmax(300px, 1fr))",gap:"20px"},children:[e.jsxs("div",{children:[e.jsxs("label",{style:{display:"block",marginBottom:"6px",fontWeight:600,fontSize:"14px",color:"#1e293b"},children:["Kitap Bal ",e.jsx("span",{style:{color:"#ef4444"},children:"*"})]}),e.jsx("input",{type:"text",value:o.title,onChange:M=>l({...o,title:M.target.value}),required:!0,placeholder:"Kitap baln girin",style:{width:"100%",padding:"10px",borderRadius:"6px",border:"1px solid #d1d5db"}})]}),e.jsxs("div",{children:[e.jsxs("label",{style:{display:"block",marginBottom:"6px",fontWeight:600,fontSize:"14px",color:"#1e293b"},children:["Yazar ",e.jsx("span",{style:{color:"#ef4444"},children:"*"})]}),e.jsx("input",{type:"text",value:o.author,onChange:M=>l({...o,author:M.target.value}),required:!0,placeholder:"Yazar adn girin",style:{width:"100%",padding:"10px",borderRadius:"6px",border:"1px solid #d1d5db"}})]}),e.jsxs("div",{children:[e.jsx("label",{style:{display:"block",marginBottom:"6px",fontWeight:600,fontSize:"14px",color:"#1e293b"},children:"Kategori"}),e.jsx("select",{value:o.category,onChange:M=>l({...o,category:M.target.value}),style:{width:"100%",padding:"10px",borderRadius:"6px",border:"1px solid #d1d5db"},children:D.map(M=>e.jsx("option",{value:M,children:M},M))})]}),e.jsxs("div",{children:[e.jsx("label",{style:{display:"block",marginBottom:"6px",fontWeight:600,fontSize:"14px",color:"#1e293b"},children:"Adet"}),e.jsx("input",{type:"number",value:o.quantity,onChange:M=>l({...o,quantity:Math.max(1,parseInt(M.target.value)||1)}),min:"1",style:{width:"100%",padding:"10px",borderRadius:"6px",border:"1px solid #d1d5db"}})]}),e.jsxs("div",{children:[e.jsx("label",{style:{display:"block",marginBottom:"6px",fontWeight:600,fontSize:"14px",color:"#1e293b"},children:"Raf Numaras"}),e.jsx("input",{type:"text",value:o.shelf,onChange:M=>l({...o,shelf:M.target.value}),placeholder:"rn: Raf-ROM-A01-01",style:{width:"100%",padding:"10px",borderRadius:"6px",border:"1px solid #d1d5db"}})]}),e.jsxs("div",{children:[e.jsx("label",{style:{display:"block",marginBottom:"6px",fontWeight:600,fontSize:"14px",color:"#1e293b"},children:"Yaynevi"}),e.jsx("input",{type:"text",value:o.publisher,onChange:M=>l({...o,publisher:M.target.value}),placeholder:"Yaynevi adn girin",style:{width:"100%",padding:"10px",borderRadius:"6px",border:"1px solid #d1d5db"}})]}),e.jsxs("div",{children:[e.jsx("label",{style:{display:"block",marginBottom:"6px",fontWeight:600,fontSize:"14px",color:"#1e293b"},children:"Yayn Yl"}),e.jsx("input",{type:"number",value:o.year,onChange:M=>l({...o,year:M.target.value}),placeholder:"rn: 2020",min:"1800",max:"2024",style:{width:"100%",padding:"10px",borderRadius:"6px",border:"1px solid #d1d5db"}})]}),e.jsxs("div",{children:[e.jsx("label",{style:{display:"block",marginBottom:"6px",fontWeight:600,fontSize:"14px",color:"#1e293b"},children:"Sayfa Says"}),e.jsx("input",{type:"number",value:o.pageCount,onChange:M=>l({...o,pageCount:M.target.value}),placeholder:"rn: 350",min:"1",style:{width:"100%",padding:"10px",borderRadius:"6px",border:"1px solid #d1d5db"}})]}),e.jsxs("div",{children:[e.jsx("label",{style:{display:"block",marginBottom:"6px",fontWeight:600,fontSize:"14px",color:"#1e293b"},children:"Kitap Numaras"}),e.jsx("input",{type:"number",value:o.bookNumber,onChange:M=>l({...o,bookNumber:M.target.value}),placeholder:"rn: 1234",min:"1",style:{width:"100%",padding:"10px",borderRadius:"6px",border:"1px solid #d1d5db"}})]})]}),e.jsxs("div",{children:[e.jsx("label",{style:{display:"block",marginBottom:"6px",fontWeight:600,fontSize:"14px",color:"#1e293b"},children:"zet"}),e.jsx("textarea",{value:o.summary,onChange:M=>l({...o,summary:M.target.value}),placeholder:"Kitap zetini girin (opsiyonel)",rows:4,style:{width:"100%",padding:"10px",borderRadius:"6px",border:"1px solid #d1d5db",resize:"vertical"}})]}),e.jsxs("div",{style:{display:"flex",gap:"12px",justifyContent:"flex-end",marginTop:"12px"},children:[e.jsx("button",{type:"button",onClick:()=>{l({title:"",author:"",category:"Roman",quantity:1,shelf:"",publisher:"",summary:"",year:"",pageCount:"",bookNumber:""}),h(null)},style:{padding:"12px 24px",backgroundColor:"#f3f4f6",color:"#374151",border:"none",borderRadius:"6px",cursor:"pointer",fontWeight:600},children:"Temizle"}),e.jsx("button",{type:"submit",disabled:s,style:{padding:"12px 24px",backgroundColor:s?"#9ca3af":"#2563eb",color:"white",border:"none",borderRadius:"6px",cursor:s?"not-allowed":"pointer",fontWeight:600},children:s?"Ekleniyor...":e.jsxs(e.Fragment,{children:[e.jsxs("svg",{width:"16",height:"16",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",style:{marginRight:"6px",verticalAlign:"middle"},children:[e.jsx("path",{d:"M4 19.5A2.5 2.5 0 0 1 6.5 17H20"}),e.jsx("path",{d:"M6.5 2H20v20H6.5A2.5 2.5 0 0 1 4 19.5v-15A2.5 2.5 0 0 1 6.5 2z"})]}),"Kitap Ekle"]})})]})]})]})]})},Tu=()=>e.jsxs("svg",{width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:[e.jsx("path",{d:"M4 19.5A2.5 2.5 0 0 1 6.5 17H20"}),e.jsx("path",{d:"M6.5 2H20v20H6.5A2.5 2.5 0 0 1 4 19.5v-15A2.5 2.5 0 0 1 6.5 2z"})]}),Lu=()=>e.jsxs("svg",{width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:[e.jsx("path",{d:"M17 21v-2a4 4 0 0 0-4-4H5a4 4 0 0 0-4 4v2"}),e.jsx("circle",{cx:"9",cy:"7",r:"4"}),e.jsx("path",{d:"M23 21v-2a4 4 0 0 0-3-3.87"}),e.jsx("path",{d:"M16 3.13a4 4 0 0 1 0 7.75"})]}),Wu=()=>e.jsxs("svg",{width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:[e.jsx("path",{d:"M4 19.5A2.5 2.5 0 0 1 6.5 17H20"}),e.jsx("path",{d:"M6.5 2H20v20H6.5A2.5 2.5 0 0 1 4 19.5v-15A2.5 2.5 0 0 1 6.5 2z"}),e.jsx("path",{d:"M9 9l3 3 3-3"})]}),n0=({onRefresh:t,bookCount:n,studentCount:r,onNotify:i})=>{const[o,l]=a.useState(null),[s,u]=a.useState(""),[d,h]=a.useState(!1),[C,k]=a.useState(null),[S,B]=a.useState(!0),[m,I]=a.useState(!1),F=async f=>{var ie;const b=(ie=f.target.files)==null?void 0:ie[0];if(!b)return;const D=["application/vnd.openxmlformats-officedocument.spreadsheetml.sheet","application/vnd.ms-excel","text/csv"],q=[".xlsx",".xls",".csv"],V=b.name.toLowerCase().substring(b.name.lastIndexOf("."));if(!D.includes(b.type)&&!q.includes(V)){k({type:"error",text:"Ltfen geerli bir Excel dosyas sein (.xlsx, .xls, .csv)"});return}l(b),k(null),u("")},y=async()=>{if(!o){k({type:"error",text:"Ltfen bir dosya sein"}),i==null||i("error","Hata","Ltfen bir dosya sein");return}if(!s){k({type:"error",text:"Ltfen tablo tipini sein"}),i==null||i("error","Hata","Ltfen tablo tipini sein");return}h(!0),k(null);try{const f=new FormData;f.append("file",o),f.append("tableType",s);const b=await xe.post("/admin/upload-excel",f);k({type:"success",text:`${b.added} kayt eklendi, ${b.skipped} kayt atland (duplicate). Toplam: ${b.total} kayt ilendi.`}),i==null||i("success","Baarl",`${b.added} kayt eklendi, ${b.skipped} kayt atland (duplicate). Toplam: ${b.total} kayt ilendi.`),l(null),u("");const D=document.getElementById("excel-file-input");D&&(D.value=""),await t()}catch(f){k({type:"error",text:f instanceof Error?f.message:"Dosya ykleme baarsz oldu"}),i==null||i("error","Hata",f instanceof Error?f.message:"Dosya ykleme baarsz oldu")}finally{h(!1)}};return e.jsxs(e.Fragment,{children:[e.jsxs("div",{className:"card",style:{position:"relative"},children:[e.jsxs("h2",{style:{marginBottom:"24px",display:"flex",alignItems:"center",gap:"10px",paddingRight:"50px"},children:[e.jsxs("svg",{width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:[e.jsx("path",{d:"M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4"}),e.jsx("polyline",{points:"7 10 12 15 17 10"}),e.jsx("line",{x1:"12",y1:"15",x2:"12",y2:"3"})]}),"Veri Ykle"]}),C&&e.jsx("div",{style:{padding:"12px",borderRadius:"6px",marginBottom:"16px",backgroundColor:C.type==="success"?"#d1fae5":"#fee2e2",color:C.type==="success"?"#065f46":"#991b1b"},children:C.text}),e.jsxs("div",{style:{display:"flex",flexDirection:"column",gap:"20px"},children:[e.jsxs("div",{children:[e.jsxs("label",{htmlFor:"excel-file-input",style:{display:"inline-block",padding:"12px 24px",backgroundColor:"#2563eb",color:"white",borderRadius:"8px",cursor:"pointer",fontWeight:600,textAlign:"center",transition:"background-color 0.2s",marginBottom:"12px"},onMouseEnter:f=>{f.currentTarget.style.backgroundColor="#1d4ed8"},onMouseLeave:f=>{f.currentTarget.style.backgroundColor="#2563eb"},children:[e.jsxs("svg",{width:"18",height:"18",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",style:{marginRight:"8px"},children:[e.jsx("path",{d:"M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4"}),e.jsx("polyline",{points:"7 10 12 15 17 10"}),e.jsx("line",{x1:"12",y1:"15",x2:"12",y2:"3"})]}),"Excel Dosyas Se (.xlsx, .xls, .csv)"]}),e.jsx("input",{id:"excel-file-input",type:"file",accept:".xlsx,.xls,.csv,application/vnd.openxmlformats-officedocument.spreadsheetml.sheet,application/vnd.ms-excel,text/csv",onChange:F,style:{display:"none"}}),o&&e.jsx("div",{style:{marginTop:"12px",padding:"12px",backgroundColor:"#f8fafc",borderRadius:"8px",border:"1px solid #e5e7eb"},children:e.jsxs("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center"},children:[e.jsxs("div",{children:[e.jsx("div",{style:{fontWeight:600,marginBottom:"4px"},children:o.name}),e.jsxs("div",{style:{fontSize:"14px",color:"#6b7280"},children:[(o.size/1024).toFixed(2)," KB"]})]}),e.jsx("button",{onClick:()=>{l(null),u(""),k(null);const f=document.getElementById("excel-file-input");f&&(f.value="")},style:{padding:"6px 12px",backgroundColor:"#ef4444",color:"white",border:"none",borderRadius:"6px",cursor:"pointer",fontSize:"12px"},children:"Kaldr"})]})})]}),o&&e.jsxs("div",{children:[e.jsxs("label",{style:{display:"block",marginBottom:"8px",fontWeight:600,fontSize:"14px"},children:["Hangi tabloya veri eklenecek?",e.jsx("span",{style:{color:"#ef4444"},children:" *"})]}),e.jsxs("div",{style:{display:"grid",gridTemplateColumns:"repeat(auto-fit, minmax(200px, 1fr))",gap:"12px"},children:[e.jsxs("div",{onClick:()=>u("books"),style:{padding:"16px",borderRadius:"8px",border:`2px solid ${s==="books"?"#2563eb":"#e5e7eb"}`,backgroundColor:s==="books"?"#eff6ff":"white",cursor:"pointer",transition:"all 0.2s"},onMouseEnter:f=>{s!=="books"&&(f.currentTarget.style.borderColor="#93c5fd",f.currentTarget.style.backgroundColor="#f8fafc")},onMouseLeave:f=>{s!=="books"&&(f.currentTarget.style.borderColor="#e5e7eb",f.currentTarget.style.backgroundColor="white")},children:[e.jsx("div",{style:{marginBottom:"8px",color:s==="books"?"#2563eb":"#64748b"},children:e.jsx(Tu,{})}),e.jsx("div",{style:{fontWeight:600,marginBottom:"4px"},children:"Kitaplar"}),s==="books"?e.jsxs("div",{style:{fontSize:"12px",color:"#64748b",marginTop:"8px"},children:[e.jsxs("div",{style:{marginBottom:"4px"},children:[e.jsx("strong",{style:{color:"#dc2626"},children:"Zorunlu:"})," Balk, Yazar"]}),e.jsxs("div",{children:[e.jsx("strong",{style:{color:"#059669"},children:"Opsiyonel:"})," Kategori, Miktar, Raf, Yaynevi, zet, Numara, Yl, Sayfa Says"]})]}):e.jsx("div",{style:{fontSize:"12px",color:"#64748b"},children:"Balk, Yazar, Kategori, Miktar, Raf, Yaynevi, zet, Numara, Yl, Sayfa Says"})]}),e.jsxs("div",{onClick:()=>u("students"),style:{padding:"16px",borderRadius:"8px",border:`2px solid ${s==="students"?"#2563eb":"#e5e7eb"}`,backgroundColor:s==="students"?"#eff6ff":"white",cursor:"pointer",transition:"all 0.2s"},onMouseEnter:f=>{s!=="students"&&(f.currentTarget.style.borderColor="#93c5fd",f.currentTarget.style.backgroundColor="#f8fafc")},onMouseLeave:f=>{s!=="students"&&(f.currentTarget.style.borderColor="#e5e7eb",f.currentTarget.style.backgroundColor="white")},children:[e.jsx("div",{style:{marginBottom:"8px",color:s==="students"?"#2563eb":"#64748b"},children:e.jsx(Lu,{})}),e.jsx("div",{style:{fontWeight:600,marginBottom:"4px"},children:"renciler"}),s==="students"?e.jsxs("div",{style:{fontSize:"12px",color:"#64748b",marginTop:"8px"},children:[e.jsxs("div",{style:{marginBottom:"4px"},children:[e.jsx("strong",{style:{color:"#dc2626"},children:"Zorunlu:"})," Ad, Soyad, Numara"]}),e.jsxs("div",{children:[e.jsx("strong",{style:{color:"#059669"},children:"Opsiyonel:"})," Kullanc Ad, ifre, Snf, ube, Ceza Puan"]})]}):e.jsx("div",{style:{fontSize:"12px",color:"#64748b"},children:"Kullanc Ad, ifre, Ad, Soyad, Snf, ube, Numara"})]}),e.jsxs("div",{onClick:()=>u("loans"),style:{padding:"16px",borderRadius:"8px",border:`2px solid ${s==="loans"?"#2563eb":"#e5e7eb"}`,backgroundColor:s==="loans"?"#eff6ff":"white",cursor:"pointer",transition:"all 0.2s"},onMouseEnter:f=>{s!=="loans"&&(f.currentTarget.style.borderColor="#93c5fd",f.currentTarget.style.backgroundColor="#f8fafc")},onMouseLeave:f=>{s!=="loans"&&(f.currentTarget.style.borderColor="#e5e7eb",f.currentTarget.style.backgroundColor="white")},children:[e.jsx("div",{style:{marginBottom:"8px",color:s==="loans"?"#2563eb":"#64748b"},children:e.jsx(Wu,{})}),e.jsx("div",{style:{fontWeight:600,marginBottom:"4px"},children:"dn Listesi"}),s==="loans"?e.jsxs("div",{style:{fontSize:"12px",color:"#64748b",marginTop:"8px"},children:[e.jsxs("div",{style:{marginBottom:"4px"},children:[e.jsx("strong",{style:{color:"#dc2626"},children:"Zorunlu:"})," Kitap Balk, Yazar, Ad, Soyad, Teslim Tarihi"]}),e.jsxs("div",{children:[e.jsx("strong",{style:{color:"#059669"},children:"Opsiyonel:"})," Personel"]})]}):e.jsx("div",{style:{fontSize:"12px",color:"#64748b"},children:"Kitap Balk, Yazar, Ad, Soyad, Teslim Tarihi (Opsiyonel: Personel)"})]})]})]}),o&&s&&e.jsxs("div",{style:{padding:"16px",backgroundColor:"#fef3c7",borderRadius:"8px",border:"1px solid #fcd34d"},children:[e.jsxs("div",{style:{fontWeight:600,marginBottom:"8px",color:"#92400e",display:"flex",alignItems:"center",gap:"8px"},children:[e.jsxs("svg",{width:"18",height:"18",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:[e.jsx("circle",{cx:"12",cy:"12",r:"10"}),e.jsx("line",{x1:"12",y1:"16",x2:"12",y2:"12"}),e.jsx("line",{x1:"12",y1:"8",x2:"12.01",y2:"8"})]}),"Bilgi"]}),e.jsxs("ul",{style:{margin:0,paddingLeft:"20px",color:"#78350f",fontSize:"14px"},children:[e.jsx("li",{children:"Yeni veriler mevcut verilerin altna eklenecektir"}),e.jsx("li",{children:"Ayn veriler (tm stunlar eleiyorsa) otomatik olarak atlanacaktr"}),e.jsx("li",{children:"Excel dosyasnda header satr olmaldr"}),e.jsx("li",{children:"Zorunlu stunlar doldurulmaldr"})]})]}),o&&s&&e.jsx("button",{onClick:y,disabled:d,style:{padding:"12px 24px",backgroundColor:d?"#9ca3af":"#10b981",color:"white",border:"none",borderRadius:"8px",cursor:d?"not-allowed":"pointer",fontWeight:600,fontSize:"16px"},children:d?"Ykleniyor...":e.jsxs(e.Fragment,{children:[e.jsxs("svg",{width:"18",height:"18",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",style:{marginRight:"8px"},children:[e.jsx("path",{d:"M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4"}),e.jsx("polyline",{points:"7 10 12 15 17 10"}),e.jsx("line",{x1:"12",y1:"15",x2:"12",y2:"3"})]}),"Dosyay Ykle ve Ekle"]})})]})]}),e.jsx("div",{className:"card",style:{marginTop:"20px",backgroundColor:"#ffffff",padding:"16px",transition:"all 0.3s ease"},children:e.jsxs("div",{style:{background:"rgba(254, 243, 199, 0.7)",backdropFilter:"blur(10px)",borderRadius:"8px",border:"1px solid rgba(252, 211, 77, 0.5)",overflow:"hidden",transition:"all 0.3s ease"},children:[e.jsx("div",{onClick:()=>B(!S),style:{padding:"16px",cursor:"pointer",transition:"all 0.3s ease"},onMouseEnter:f=>{f.currentTarget.style.background="rgba(254, 243, 199, 0.9)"},onMouseLeave:f=>{f.currentTarget.style.background="transparent"},children:e.jsxs("div",{style:{display:"flex",alignItems:"center",justifyContent:"space-between",gap:"12px"},children:[e.jsxs("div",{style:{flex:1,display:"flex",alignItems:"flex-start",gap:"8px"},children:[e.jsxs("svg",{width:"18",height:"18",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",style:{marginTop:"2px",flexShrink:0,color:"#92400e"},children:[e.jsx("circle",{cx:"12",cy:"12",r:"10"}),e.jsx("line",{x1:"12",y1:"16",x2:"12",y2:"12"}),e.jsx("line",{x1:"12",y1:"8",x2:"12.01",y2:"8"})]}),e.jsxs("div",{style:{flex:1},children:[e.jsx("strong",{style:{color:"#92400e"},children:"Nasl alr?"})," Excel veya CSV dosyanz setikten sonra verilerin eklenecei tabloyu belirleyin. Sistem dosyanzdaki verileri otomatik olarak okuyup, mevcut verilerle karlatrarak yeni kaytlar ekler. Ayn veriler otomatik olarak atlanr ve zorunlu alanlar kontrol edilir."]})]}),e.jsx("button",{onClick:f=>{f.stopPropagation(),I(!m),S||B(!0)},style:{padding:"6px 12px",backgroundColor:"#f59e0b",color:"white",border:"none",borderRadius:"6px",cursor:"pointer",fontSize:"12px",fontWeight:600,whiteSpace:"nowrap",transition:"background-color 0.2s",flexShrink:0},onMouseEnter:f=>{f.currentTarget.style.backgroundColor="#d97706"},onMouseLeave:f=>{f.currentTarget.style.backgroundColor="#f59e0b"},children:"Detayl Bilgi"})]})}),S&&m&&e.jsxs("div",{onClick:f=>f.stopPropagation(),style:{padding:"16px",backgroundColor:"#ffffff",borderTop:"2px solid #f59e0b",boxShadow:"0 4px 12px rgba(0, 0, 0, 0.15)"},children:[e.jsxs("h3",{style:{marginTop:0,marginBottom:"12px",fontSize:"16px",fontWeight:600,color:"#92400e",display:"flex",alignItems:"center",gap:"8px"},children:[e.jsxs("svg",{width:"18",height:"18",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:[e.jsx("path",{d:"M14 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V8z"}),e.jsx("polyline",{points:"14 2 14 8 20 8"}),e.jsx("line",{x1:"16",y1:"13",x2:"8",y2:"13"}),e.jsx("line",{x1:"16",y1:"17",x2:"8",y2:"17"})]}),"Excel/CSV Veri Ykleme Rehberi"]}),e.jsxs("div",{style:{display:"flex",flexDirection:"column",gap:"12px",fontSize:"14px"},children:[e.jsxs("div",{children:[e.jsxs("h4",{style:{margin:"0 0 8px 0",color:"#1e293b",fontWeight:600,fontSize:"15px",display:"flex",alignItems:"center",gap:"6px"},children:[e.jsxs("svg",{width:"16",height:"16",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:[e.jsx("path",{d:"M14 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V8z"}),e.jsx("polyline",{points:"14 2 14 8 20 8"}),e.jsx("line",{x1:"16",y1:"13",x2:"8",y2:"13"}),e.jsx("line",{x1:"16",y1:"17",x2:"8",y2:"17"})]}),"Veri Seimi Nasl Yaplr?"]}),e.jsxs("ul",{style:{margin:0,paddingLeft:"20px",color:"#475569",lineHeight:"1.8"},children:[e.jsxs("li",{children:[e.jsx("strong",{style:{color:"#1e293b"},children:"Dosya Format:"})," Excel (.xlsx, .xls) veya CSV dosyas seebilirsiniz."]}),e.jsxs("li",{children:[e.jsx("strong",{style:{color:"#1e293b"},children:"Balk Satr:"})," Dosyanzn ilk satrnda mutlaka kolon balklar (header) olmaldr."]}),e.jsxs("li",{children:[e.jsx("strong",{style:{color:"#1e293b"},children:"Tablo Seimi:"})," Verilerin eklenecei tabloyu sein (Kitaplar, renciler veya Personeller)."]})]})]}),e.jsxs("div",{children:[e.jsxs("h4",{style:{margin:"0 0 8px 0",color:"#1e293b",fontWeight:600,fontSize:"15px",display:"flex",alignItems:"center",gap:"6px"},children:[e.jsxs("svg",{width:"16",height:"16",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:[e.jsx("polyline",{points:"9 11 12 14 22 4"}),e.jsx("path",{d:"M21 12v7a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h11"})]}),"Veri Uyumu ve Balk Eletirme"]}),e.jsxs("ul",{style:{margin:0,paddingLeft:"20px",color:"#475569",lineHeight:"1.8"},children:[e.jsxs("li",{children:[e.jsx("strong",{style:{color:"#1e293b"},children:"Trke/ngilizce:"})," Kolon balklar Trke veya ngilizce olabilir. Sistem otomatik olarak eletirir."]}),e.jsxs("li",{children:[e.jsx("strong",{style:{color:"#1e293b"},children:"Byk/Kk Harf:"})," Balklar byk-kk harf duyarl deildir."]}),e.jsxs("li",{children:[e.jsx("strong",{style:{color:"#1e293b"},children:"Boluklar:"})," Balklardaki boluklar otomatik olarak temizlenir."]})]})]}),e.jsxs("div",{children:[e.jsxs("h4",{style:{margin:"0 0 8px 0",color:"#1e293b",fontWeight:600,fontSize:"15px",display:"flex",alignItems:"center",gap:"6px"},children:[e.jsxs("svg",{width:"16",height:"16",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:[e.jsx("path",{d:"M4 4h16c1.1 0 2 .9 2 2v12c0 1.1-.9 2-2 2H4c-1.1 0-2-.9-2-2V6c0-1.1.9-2 2-2z"}),e.jsx("line",{x1:"4",y1:"10",x2:"20",y2:"10"})]}),"Hangi Veriler Yklenebilir?"]}),e.jsxs("div",{style:{marginBottom:"12px",padding:"12px",backgroundColor:"#eff6ff",borderRadius:"6px",border:"1px solid #93c5fd",display:"flex",alignItems:"flex-start",gap:"8px"},children:[e.jsx("div",{style:{flexShrink:0,marginTop:"2px"},children:e.jsx(Tu,{})}),e.jsxs("div",{style:{flex:1},children:[e.jsx("strong",{style:{color:"#1e40af",display:"block",marginBottom:"6px"},children:"Kitaplar in:"}),e.jsxs("div",{style:{fontSize:"13px",color:"#1e40af",lineHeight:"1.6"},children:[e.jsx("strong",{children:"Zorunlu:"})," Balk, Yazar",e.jsx("br",{}),e.jsx("strong",{children:"Alternatif balklar:"}),' "Balk" / "Baslik" / "Title" / "Kitap Balk" / "Kitap Bal" / "Yazar" / "Author" / "Yazar Ad"',e.jsx("br",{}),e.jsx("strong",{children:"Opsiyonel:"})," Kategori, Miktar, Raf, Yaynevi, zet, Numara, Yl, Sayfa Says",e.jsx("br",{})]})]})]}),e.jsxs("div",{style:{marginBottom:"12px",padding:"12px",backgroundColor:"#f0fdf4",borderRadius:"6px",border:"1px solid #86efac",display:"flex",alignItems:"flex-start",gap:"8px"},children:[e.jsx("div",{style:{flexShrink:0,marginTop:"2px"},children:e.jsx(Lu,{})}),e.jsxs("div",{style:{flex:1},children:[e.jsx("strong",{style:{color:"#166534",display:"block",marginBottom:"6px"},children:"renciler in:"}),e.jsxs("div",{style:{fontSize:"13px",color:"#166534",lineHeight:"1.6"},children:[e.jsx("strong",{children:"Zorunlu:"})," Ad, Soyad, Numara",e.jsx("br",{}),e.jsx("strong",{children:"Alternatif balklar:"}),' "Ad" / "Name", "Soyad" / "Surname", "Numara" / "No" / "StudentNumber"',e.jsx("br",{}),e.jsx("strong",{children:"Opsiyonel:"})," Kullanc Ad, ifre, Snf, ube, Ceza Puan",e.jsx("br",{})]})]})]}),e.jsxs("div",{style:{padding:"12px",backgroundColor:"#fef3c7",borderRadius:"6px",border:"1px solid #fcd34d",display:"flex",alignItems:"flex-start",gap:"8px"},children:[e.jsx("div",{style:{flexShrink:0,marginTop:"2px"},children:e.jsx(Wu,{})}),e.jsxs("div",{style:{flex:1},children:[e.jsx("strong",{style:{color:"#92400e",display:"block",marginBottom:"6px"},children:"dn Listesi in:"}),e.jsxs("div",{style:{fontSize:"13px",color:"#92400e",lineHeight:"1.6"},children:[e.jsx("strong",{children:"Zorunlu:"})," Kitap Balk, Yazar, Ad, Soyad, Teslim Tarihi",e.jsx("br",{}),e.jsx("strong",{children:"Alternatif balklar:"}),' "Kitap Balk" / "Kitap Bal" / "Balk" / "Title", "Ad" / "Name", "Soyad" / "Surname", "Teslim Tarihi" / "Teslim_Tarihi" / "DueDate" / "Teslim Tarihi"',e.jsx("br",{}),e.jsx("strong",{children:"Opsiyonel:"})," Personel",e.jsx("br",{})]})]})]})]}),e.jsxs("div",{children:[e.jsxs("h4",{style:{margin:"0 0 8px 0",color:"#1e293b",fontWeight:600,fontSize:"15px",display:"flex",alignItems:"center",gap:"6px"},children:[e.jsx("svg",{width:"16",height:"16",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:e.jsx("path",{d:"M12 2l3.09 6.26L22 9.27l-5 4.87 1.18 6.88L12 17.77l-6.18 3.25L7 14.14 2 9.27l6.91-1.01L12 2z"})}),"Veri Balklar Nasl Olmal?"]}),e.jsx("div",{style:{padding:"12px",backgroundColor:"#f8fafc",borderRadius:"6px",border:"1px solid #e2e8f0"},children:e.jsxs("div",{style:{fontSize:"13px",color:"#475569",lineHeight:"1.8"},children:[e.jsx("strong",{style:{color:"#1e293b"},children:"rnek Balk Formatlar:"}),e.jsx("br",{}),' Trke (kayt dosyas ile uyumlu): "Balk", "Yazar", "Kategori", "Miktar", "Ad", "Numara", "Teslim Tarihi"',e.jsx("br",{}),' ngilizce: "Title", "Author", "Category", "Quantity"',e.jsx("br",{}),' Kark: "Kitap Bal", "Book Title", "Yazar Ad", "Author Name"',e.jsx("br",{}),e.jsx("br",{}),e.jsx("strong",{style:{color:"#1e293b"},children:"Not:"})," Sistem esnek eletirme yapar (boluk/altizgi/tire ve Trke karakterler sorun olmaz), ancak zorunlu alanlar mutlaka doldurulmaldr."]})})]}),e.jsxs("div",{style:{padding:"12px",backgroundColor:"#fee2e2",borderRadius:"6px",border:"1px solid #fca5a5"},children:[e.jsxs("strong",{style:{color:"#991b1b",display:"flex",alignItems:"center",gap:"6px",marginBottom:"6px"},children:[e.jsxs("svg",{width:"16",height:"16",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:[e.jsx("path",{d:"M10.29 3.86L1.82 18a2 2 0 0 0 1.71 3h16.94a2 2 0 0 0 1.71-3L13.71 3.86a2 2 0 0 0-3.42 0z"}),e.jsx("line",{x1:"12",y1:"9",x2:"12",y2:"13"}),e.jsx("line",{x1:"12",y1:"17",x2:"12.01",y2:"17"})]}),"nemli Uyarlar"]}),e.jsxs("ul",{style:{margin:"6px 0 0 0",paddingLeft:"20px",fontSize:"13px",color:"#991b1b",lineHeight:"1.6"},children:[e.jsx("li",{children:"Zorunlu alanlar bo braklamaz, aksi halde o satr atlanr."}),e.jsx("li",{children:"Alternatif balklar, zorunlu alanlarn alternatifidir. Tablonuzda zorunlu alanlar balklar mevcut deilse, alternatif balklar kullanabilirsiniz."}),e.jsx("li",{children:"Ayn veriler (tm kolonlar eleiyorsa) otomatik olarak atlanr."}),e.jsx("li",{children:"Yeni veriler mevcut verilerin altna eklenir, mevcut veriler silinmez."}),e.jsx("li",{children:"Dosya ykleme ilemi tamamlandktan sonra sonu raporu gsterilir."})]})]})]})]})]})})]})},r0=({loans:t,books:n,onLoanClick:r})=>{const[i,o]=a.useState(new Date),l=new Date,s=i.getMonth(),u=i.getFullYear(),d=(D,q)=>new Date(D,q+1,0).getDate(),h=(D,q)=>{const V=new Date(D,q,1).getDay();return V===0?6:V-1},C=d(u,s),k=h(u,s),S=["Pzt","Sal","ar","Per","Cum","Cmt","Paz"],B=["Ocak","ubat","Mart","Nisan","Mays","Haziran","Temmuz","Austos","Eyll","Ekim","Kasm","Aralk"],m=a.useMemo(()=>{const D=new Map;return t.forEach(q=>{const V=new Date(q.dueDate);if(V.getMonth()===s&&V.getFullYear()===u){const ie=V.getDate(),M=D.get(ie)||[];M.push(q),D.set(ie,M)}}),D},[t,s,u]),I=D=>{const q=new Date;q.setHours(0,0,0,0);const V=new Date(D);return V.setHours(0,0,0,0),V<q},F=()=>{o(new Date(u,s-1,1))},y=()=>{o(new Date(u,s+1,1))},f=D=>{const q=new Date(u,s,D);o(q)},b=a.useMemo(()=>{const D=i.getDate();return i.getMonth()!==s||i.getFullYear()!==u?[]:m.get(D)||[]},[i,m,s,u]);return e.jsxs("div",{className:"card",style:{padding:"0",overflow:"hidden",display:"flex",flexDirection:"row",height:"500px",transition:"transform 0.2s, box-shadow 0.2s",cursor:"default"},onMouseEnter:D=>{D.currentTarget.style.transform="scale(1.01)",D.currentTarget.style.boxShadow="0 20px 25px -5px rgba(0, 0, 0, 0.1), 0 10px 10px -5px rgba(0, 0, 0, 0.04)"},onMouseLeave:D=>{D.currentTarget.style.transform="scale(1)",D.currentTarget.style.boxShadow=""},children:[e.jsxs("div",{style:{flex:1,padding:"24px",borderRight:"1px solid #e2e8f0",display:"flex",flexDirection:"column"},children:[e.jsxs("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center",marginBottom:"20px"},children:[e.jsxs("h3",{style:{margin:0,fontSize:"18px",fontWeight:700,color:"#1e293b",display:"flex",alignItems:"center",gap:"8px"},children:[e.jsxs("svg",{width:"20",height:"20",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:[e.jsx("rect",{x:"3",y:"4",width:"18",height:"18",rx:"2",ry:"2"}),e.jsx("line",{x1:"16",y1:"2",x2:"16",y2:"6"}),e.jsx("line",{x1:"8",y1:"2",x2:"8",y2:"6"}),e.jsx("line",{x1:"3",y1:"10",x2:"21",y2:"10"})]}),B[s]," ",u]}),e.jsxs("div",{style:{display:"flex",gap:"4px"},children:[e.jsx("button",{onClick:F,style:{padding:"4px 8px",background:"none",border:"1px solid #e2e8f0",borderRadius:"4px",cursor:"pointer"},children:"<"}),e.jsx("button",{onClick:()=>o(new Date),style:{padding:"4px 8px",background:"none",border:"1px solid #e2e8f0",borderRadius:"4px",cursor:"pointer",fontSize:"12px"},children:"Bugn"}),e.jsx("button",{onClick:y,style:{padding:"4px 8px",background:"none",border:"1px solid #e2e8f0",borderRadius:"4px",cursor:"pointer"},children:">"})]})]}),e.jsx("div",{style:{display:"grid",gridTemplateColumns:"repeat(7, 1fr)",gap:"4px",marginBottom:"8px"},children:S.map(D=>e.jsx("div",{style:{textAlign:"center",fontWeight:600,color:"#94a3b8",fontSize:"12px"},children:D},D))}),e.jsxs("div",{style:{display:"grid",gridTemplateColumns:"repeat(7, 1fr)",gap:"4px",flex:1},children:[Array.from({length:k}).map((D,q)=>e.jsx("div",{style:{aspectRatio:"1"}},`empty - ${q} `)),Array.from({length:C},(D,q)=>q+1).map(D=>{const q=new Date(u,s,D),V=q.toDateString()===l.toDateString(),ie=q.toDateString()===i.toDateString(),re=(m.get(D)||[]).length>0,ce=I(q);return e.jsxs("div",{onClick:()=>f(D),style:{aspectRatio:"1",borderRadius:"8px",display:"flex",flexDirection:"column",alignItems:"center",justifyContent:"center",cursor:"pointer",position:"relative",backgroundColor:ie?"#3b82f6":V?"#eff6ff":"transparent",color:ie?"white":V?"#3b82f6":"#1e293b",border:V&&!ie?"1px solid #3b82f6":"1px solid transparent",transition:"all 0.2s"},children:[e.jsx("span",{style:{fontWeight:ie||V?700:500,fontSize:"14px"},children:D}),re&&e.jsx("div",{style:{display:"flex",gap:"2px",marginTop:"2px"},children:e.jsx("div",{style:{width:"4px",height:"4px",borderRadius:"50%",backgroundColor:ie?"white":ce?"#ef4444":"#3b82f6"}})})]},D)})]}),e.jsxs("div",{style:{display:"flex",gap:"12px",marginTop:"16px",fontSize:"11px",color:"#64748b",justifyContent:"center"},children:[e.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"4px"},children:[e.jsx("div",{style:{width:"8px",height:"8px",borderRadius:"50%",backgroundColor:"#3b82f6"}}),e.jsx("span",{children:"Teslim (Normal)"})]}),e.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"4px"},children:[e.jsx("div",{style:{width:"8px",height:"8px",borderRadius:"50%",backgroundColor:"#ef4444"}}),e.jsx("span",{children:"Teslim (Gecikmi)"})]})]})]}),e.jsxs("div",{style:{width:"350px",background:"#f8fafc",padding:"24px",display:"flex",flexDirection:"column",borderLeft:"1px solid #e2e8f0"},children:[e.jsxs("h4",{style:{margin:"0 0 16px 0",color:"#1e293b",fontSize:"16px",fontWeight:700,borderBottom:"1px solid #e2e8f0",paddingBottom:"12px",flexShrink:0},children:[i.getDate()," ",B[i.getMonth()]," ",i.getFullYear(),e.jsx("span",{style:{display:"block",fontSize:"12px",color:"#64748b",fontWeight:400,marginTop:"4px"},children:"Teslim Edilmesi Gereken Kitaplar"})]}),e.jsx("div",{className:"custom-scrollbar",style:{flex:1,overflowY:"auto",paddingRight:"4px"},children:b.length>0?e.jsx("div",{style:{display:"flex",flexDirection:"column",gap:"12px"},children:b.map((D,q)=>{const V=n.find(M=>M.id===D.bookId),ie=I(new Date(D.dueDate));return e.jsxs("div",{onClick:()=>r&&r(D),style:{padding:"16px",background:"white",borderRadius:"12px",border:"1px solid",borderColor:ie?"#fca5a5":"#e2e8f0",boxShadow:"0 1px 3px rgba(0,0,0,0.05)",cursor:"pointer",transition:"all 0.2s",position:"relative",overflow:"hidden"},onMouseEnter:M=>{M.currentTarget.style.transform="translateY(-2px)",M.currentTarget.style.boxShadow="0 4px 6px -1px rgba(0, 0, 0, 0.1)",M.currentTarget.style.borderColor="#3b82f6"},onMouseLeave:M=>{M.currentTarget.style.transform="translateY(0)",M.currentTarget.style.boxShadow="0 1px 3px rgba(0,0,0,0.05)",M.currentTarget.style.borderColor=ie?"#fca5a5":"#e2e8f0"},children:[e.jsx("div",{style:{fontWeight:600,color:"#1e293b",fontSize:"15px",marginBottom:"8px",lineHeight:"1.4"},children:(V==null?void 0:V.title)||D.title}),e.jsx("div",{style:{fontSize:"13px",color:"#64748b",display:"flex",flexDirection:"column",gap:"4px"},children:e.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"6px"},children:[e.jsx("span",{style:{width:"20px",height:"20px",borderRadius:"50%",background:"#e0f2fe",color:"#0ea5e9",display:"flex",alignItems:"center",justifyContent:"center",fontSize:"12px"},children:""}),e.jsx("span",{style:{fontWeight:500},children:D.borrower})]})}),ie&&e.jsxs("div",{style:{marginTop:"12px",paddingTop:"12px",borderTop:"1px dashed #fee2e2",fontSize:"12px",color:"#ef4444",fontWeight:600,display:"flex",alignItems:"center",gap:"4px"},children:[e.jsxs("svg",{width:"14",height:"14",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:[e.jsx("circle",{cx:"12",cy:"12",r:"10"}),e.jsx("line",{x1:"12",y1:"8",x2:"12",y2:"12"}),e.jsx("line",{x1:"12",y1:"16",x2:"12.01",y2:"16"})]}),"Teslim Tarihi Gecikti"]}),e.jsx("div",{style:{position:"absolute",top:"12px",right:"12px",opacity:.5},children:e.jsx("svg",{width:"16",height:"16",viewBox:"0 0 24 24",fill:"none",stroke:"#94a3b8",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:e.jsx("polyline",{points:"9 18 15 12 9 6"})})})]},q)})}):e.jsxs("div",{style:{textAlign:"center",color:"#94a3b8",marginTop:"40px",display:"flex",flexDirection:"column",alignItems:"center",gap:"12px"},children:[e.jsx("div",{style:{width:"48px",height:"48px",borderRadius:"50%",background:"#f1f5f9",display:"flex",alignItems:"center",justifyContent:"center"},children:e.jsxs("svg",{width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",stroke:"#cbd5e1",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:[e.jsx("rect",{x:"3",y:"4",width:"18",height:"18",rx:"2",ry:"2"}),e.jsx("line",{x1:"16",y1:"2",x2:"16",y2:"6"}),e.jsx("line",{x1:"8",y1:"2",x2:"8",y2:"6"}),e.jsx("line",{x1:"3",y1:"10",x2:"21",y2:"10"})]})}),e.jsx("p",{style:{margin:0,fontSize:"14px"},children:"Bu tarihte teslim edilecek kitap yok."})]})})]})]})},i0=({loan:t,book:n,onReturn:r,showReturnButton:i=!0,onClick:o,loading:l=!1})=>{const u=(S=>{const B=new Date(S);B.setHours(0,0,0,0);const m=new Date;return m.setHours(0,0,0,0),Math.ceil((B.getTime()-m.getTime())/864e5)})(t.dueDate),d=u<0,h=u>=0&&u<=3,C=new Date(t.dueDate),k=(n==null?void 0:n.title)||t.title;return e.jsxs("div",{onClick:o,style:{padding:"10px 14px",backgroundColor:"#fff",borderRadius:"6px",border:"1px solid #e2e8f0",display:"flex",justifyContent:"space-between",alignItems:"center",cursor:o?"pointer":"default",transition:"all 0.15s",gap:"12px"},onMouseEnter:S=>{o&&(S.currentTarget.style.transform="translateY(-1px)",S.currentTarget.style.boxShadow="0 2px 8px rgba(0, 0, 0, 0.08)",S.currentTarget.style.borderColor="#3b82f6",S.currentTarget.style.backgroundColor="#f8fafc")},onMouseLeave:S=>{o&&(S.currentTarget.style.transform="translateY(0)",S.currentTarget.style.boxShadow="none",S.currentTarget.style.borderColor="#e2e8f0",S.currentTarget.style.backgroundColor="#fff")},children:[e.jsx("div",{style:{flex:1,display:"flex",alignItems:"center",gap:"10px",minWidth:0},children:e.jsxs("div",{style:{flex:1,minWidth:0},children:[e.jsx("div",{style:{fontWeight:600,fontSize:"13px",color:"#1e293b",whiteSpace:"nowrap",overflow:"hidden",textOverflow:"ellipsis"},children:k}),e.jsxs("div",{style:{fontSize:"12px",color:"#64748b",marginTop:"2px",display:"flex",alignItems:"center",gap:"8px"},children:[e.jsx("span",{children:t.borrower}),e.jsx("span",{style:{color:"#cbd5e1"},children:""}),e.jsx("span",{children:C.toLocaleDateString("tr-TR")})]})]})}),e.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"8px",flexShrink:0},children:[e.jsx("span",{style:{padding:"3px 10px",borderRadius:"10px",fontSize:"11px",fontWeight:600,backgroundColor:d?"#fee2e2":h?"#fef3c7":"#d1fae5",color:d?"#dc2626":h?"#d97706":"#059669",whiteSpace:"nowrap"},children:u<0?`${Math.abs(u)} gn geti`:u===0?"Bugn":`${u} gn`}),i&&r&&e.jsxs("button",{onClick:S=>{S.stopPropagation(),!l&&t.bookId&&r(t.bookId,t.borrower,k)},disabled:l,style:{padding:"6px 12px",backgroundColor:d?"#ef4444":h?"#f59e0b":"#3b82f6",color:"white",border:"none",borderRadius:"5px",cursor:l?"not-allowed":"pointer",opacity:l?.7:1,fontWeight:600,fontSize:"11px",display:"flex",alignItems:"center",gap:"4px",whiteSpace:"nowrap"},children:[e.jsx("svg",{width:"12",height:"12",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:e.jsx("polyline",{points:"20 6 9 17 4 12"})}),"Teslim Al"]})]})]})},o0=({loan:t,books:n,onClose:r,onReturn:i})=>{if(!t)return null;const o=n.find(s=>s.id===t.bookId),l=new Date(t.dueDate)<new Date;return _t.createPortal(e.jsx("div",{style:{position:"fixed",top:0,left:0,right:0,bottom:0,backgroundColor:"rgba(0, 0, 0, 0.5)",display:"flex",alignItems:"center",justifyContent:"center",zIndex:10009},onClick:r,children:e.jsxs("div",{className:"card",style:{maxWidth:"500px",width:"90%",padding:"24px",animation:"slideIn 0.3s ease-out",backgroundColor:"white",position:"relative"},onClick:s=>s.stopPropagation(),children:[e.jsx("button",{onClick:r,style:{position:"absolute",top:"16px",right:"16px",background:"none",border:"none",fontSize:"24px",cursor:"pointer",color:"#9ca3af"},children:""}),e.jsx("h3",{style:{margin:"0 0 20px 0",fontSize:"20px",fontWeight:700,color:"#1e293b",borderBottom:"1px solid #e2e8f0",paddingBottom:"12px"},children:"dn Detay"}),e.jsxs("div",{style:{display:"flex",flexDirection:"column",gap:"16px"},children:[e.jsxs("div",{style:{display:"flex",gap:"16px"},children:[e.jsx("div",{style:{width:"80px",height:"120px",backgroundColor:"#f1f5f9",borderRadius:"8px",display:"flex",alignItems:"center",justifyContent:"center",color:"#cbd5e1",flexShrink:0},children:e.jsxs("svg",{width:"32",height:"32",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"1.5",strokeLinecap:"round",strokeLinejoin:"round",children:[e.jsx("path",{d:"M4 19.5A2.5 2.5 0 0 1 6.5 17H20"}),e.jsx("path",{d:"M6.5 2H20v20H6.5A2.5 2.5 0 0 1 4 19.5v-15A2.5 2.5 0 0 1 6.5 2z"})]})}),e.jsxs("div",{style:{flex:1},children:[e.jsx("div",{style:{fontSize:"13px",color:"#64748b",fontWeight:600,textTransform:"uppercase",letterSpacing:"0.5px"},children:"KTAP"}),e.jsx("div",{style:{fontSize:"16px",fontWeight:700,color:"#1e293b",marginBottom:"8px"},children:(o==null?void 0:o.title)||t.title}),e.jsx("div",{style:{fontSize:"13px",color:"#64748b"},children:(o==null?void 0:o.author)||t.author})]})]}),e.jsxs("div",{style:{padding:"16px",backgroundColor:"#f8fafc",borderRadius:"8px",border:"1px solid #e2e8f0"},children:[e.jsxs("div",{style:{marginBottom:"12px",display:"flex",alignItems:"center",gap:"10px"},children:[e.jsx("div",{style:{width:"32px",height:"32px",borderRadius:"50%",backgroundColor:"#e0f2fe",color:"#0284c7",display:"flex",alignItems:"center",justifyContent:"center",fontWeight:600},children:t.borrower.charAt(0)}),e.jsxs("div",{children:[e.jsx("div",{style:{fontSize:"12px",color:"#64748b"},children:"RENC"}),e.jsx("div",{style:{fontWeight:600,color:"#334155"},children:t.borrower})]})]}),e.jsx("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center"},children:e.jsxs("div",{children:[e.jsx("div",{style:{fontSize:"12px",color:"#64748b"},children:"TESLM TARH"}),e.jsxs("div",{style:{fontWeight:600,color:l?"#dc2626":"#374151"},children:[new Date(t.dueDate).toLocaleDateString("tr-TR"),l&&e.jsx("span",{style:{marginLeft:"8px",padding:"2px 6px",backgroundColor:"#fee2e2",color:"#ef4444",borderRadius:"4px",fontSize:"11px"},children:"GECKT"})]})]})})]}),i&&e.jsxs("button",{onClick:()=>i(t),style:{width:"100%",padding:"12px",backgroundColor:"#3b82f6",color:"white",border:"none",borderRadius:"8px",fontWeight:600,cursor:"pointer",fontSize:"15px",display:"flex",alignItems:"center",justifyContent:"center",gap:"8px",transition:"background 0.2s"},onMouseEnter:s=>s.currentTarget.style.backgroundColor="#2563eb",onMouseLeave:s=>s.currentTarget.style.backgroundColor="#3b82f6",children:[e.jsxs("svg",{width:"18",height:"18",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:[e.jsx("polyline",{points:"9 11 12 14 22 4"}),e.jsx("path",{d:"M21 12v7a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h11"})]}),"Teslim Al"]})]})]})}),document.body)},l0=({books:t,loans:n,bookStats:r,studentStats:i,onRefresh:o,onSearch:l,onSyncStudents:s,onSyncpersonel:u,onSyncBooks:d,onAddBook:h,onDeleteBook:C,onBulkDeleteBooksSuccess:k,userRole:S,userName:B,onAddNotification:m,onShowInfo:I})=>{var sc,ac,dc,cc;const F=W=>{const j=new Date(W);j.setHours(0,0,0,0);const we=new Date;return we.setHours(0,0,0,0),Math.ceil((j.getTime()-we.getTime())/864e5)},[y,f]=a.useState("ana"),[b,D]=a.useState(!1),[q,V]=a.useState(!1),[ie,M]=a.useState(!1),[re,ce]=a.useState(null),[Oe,Re]=a.useState(null),[_e,xt]=a.useState(null),[De,ft]=a.useState(null),[ze,P]=a.useState(null),[se,fe]=a.useState(null),[ve,Pe]=a.useState(!1),[bt,lt]=a.useState(null),[be,Me]=a.useState(null),[et,Qe]=a.useState(!1),Z=a.useRef(null);a.useEffect(()=>(Z.current&&(clearTimeout(Z.current),Z.current=null),Oe&&!et&&(Z.current=setTimeout(()=>{Re(null)},1e4)),()=>{Z.current&&(clearTimeout(Z.current),Z.current=null)}),[Oe,et]);const[$e,Xe]=a.useState(""),[Ge,mt]=a.useState(""),[kt,ot]=a.useState(""),[We,st]=a.useState(1),[Bt,Ee]=a.useState(null),[Et,c]=a.useState(""),[N,oe]=a.useState(null),[Ae,Be]=a.useState(""),[ye,Ve]=a.useState(""),[jt,zt]=a.useState(""),[nn,Te]=a.useState(14),[wt,_]=a.useState(null),[ne,ue]=a.useState(null),[He,Se]=a.useState(!1),gt=W=>{ue(W),Se(!1)},de=()=>{ne&&Se(!0)},Ce=async()=>{if(ne)try{await xe.post(`/books/${ne.bookId}/return`,{personelName:B,borrower:ne.borrower}),lt({type:"success",message:"Kitap baaryla teslim alnd."}),Se(!1),ue(null),await o()}catch(W){console.error("Teslim alma hatas:",W),lt({type:"error",message:"Teslim alma ilemi baarsz oldu."}),Se(!1)}},me=()=>{se&&Pe(!0)},Ct=async()=>{if(se)try{await xe.post(`/books/${se.bookId}/return`,{personelName:B,borrower:se.borrower}),lt({type:"success",message:"Kitap baaryla teslim alnd."}),Pe(!1),fe(null),await o()}catch(W){console.error("Teslim alma hatas:",W),lt({type:"error",message:"Teslim alma ilemi baarsz oldu."}),Pe(!1)}},[tt,Lt]=a.useState("all"),[Ht,Ft]=a.useState(null),[nt,At]=a.useState(""),[T,H]=a.useState(null),[A,Ne]=a.useState(!1),[he,it]=a.useState(null),[Ue,Nt]=a.useState("asc"),[rt,yt]=a.useState(""),[Dt,Zt]=a.useState("title"),[Ut,$t]=a.useState([]),[Tt,Bn]=a.useState(!1),[bn,w]=a.useState(null),[Y,ee]=a.useState(new Set),[g,R]=a.useState(null),[J,te]=a.useState(!1),[ge,v]=a.useState(null),[$,le]=a.useState(!1),[Le,Ke]=a.useState(!1),[Ze,Mt]=a.useState(null),[en,tn]=a.useState(null),[_n,Ln]=a.useState(5),[Kt,cn]=a.useState(100),[pn,nr]=a.useState(!1),[Gt,Zn]=a.useState(null),Cn=S==="ADMIN";a.useEffect(()=>{(async()=>{try{const j=await xe.get("/system-settings");Ln(j.maxBorrowLimit),cn(j.maxPenaltyPoints)}catch(j){console.error("Sistem ayarlar yklenemedi:",j)}})()},[]);const z=()=>{const W=localStorage.getItem("homepage-visible-cards");if(W)try{return JSON.parse(W)}catch{return null}return null},[U,pe]=a.useState(()=>z()||{"active-loans":!0,"late-loans":!0,"due-soon-list":!0,"total-borrowed":!0,"total-books":!0,"total-book-quantity":!0,"total-students":!0,"due-soon-14":!0,"stock-low":!0,"stock-out":!0,"top-borrowed":!0,"banned-students":!0}),Fe=W=>{localStorage.setItem("homepage-visible-cards",JSON.stringify(W)),pe(W)},Je=W=>{const j={...U,[W]:!U[W]};Fe(j)},Vt=a.useMemo(()=>n.filter(W=>F(W.dueDate)>=0),[n]),rn=a.useMemo(()=>n.filter(W=>F(W.dueDate)<0).sort((W,j)=>F(W.dueDate)-F(j.dueDate)),[n]),Xt=a.useMemo(()=>n.filter(W=>{const j=F(W.dueDate);return j>=0&&j<=3}).sort((W,j)=>F(W.dueDate)-F(j.dueDate)),[n]),vt=a.useMemo(()=>n.filter(W=>{const j=F(W.dueDate);return j>3&&j<=7}).sort((W,j)=>F(W.dueDate)-F(j.dueDate)),[n]),ln=a.useMemo(()=>n.filter(W=>{const j=F(W.dueDate);return j>7&&j<=14}).sort((W,j)=>F(W.dueDate)-F(j.dueDate)),[n]),Mn=a.useMemo(()=>n.filter(W=>F(W.dueDate)>14).sort((W,j)=>F(W.dueDate)-F(j.dueDate)),[n]),qt=a.useMemo(()=>n.reduce((W,j)=>{const we=`${j.title}|||${j.author}`;return W[we]=(W[we]||0)+1,W},{}),[n]),x=a.useMemo(()=>Object.entries(qt).map(([W,j])=>{const[we,X]=W.split("|||");return{title:we,author:X,count:j}}).sort((W,j)=>j.count-W.count).slice(0,10),[qt]),K=a.useMemo(()=>t.filter(W=>x.some(j=>j.title===W.title&&j.author===W.author)).map(W=>{const j=x.find(we=>we.title===W.title&&we.author===W.author);return{...W,borrowed:(j==null?void 0:j.count)??0}}).sort((W,j)=>j.borrowed-W.borrowed),[t,x]),Q=n.length,ke=Vt.length,Ye=rn.length;Xt.length,Xt.length+vt.length+ln.length;const ae=a.useMemo(()=>t.filter(W=>W.quantity>0&&W.quantity<=2),[t]),ct=a.useMemo(()=>t.filter(W=>W.quantity===0),[t]);a.useEffect(()=>{(async()=>{try{const j=await xe.get("/system-settings");cn(j.maxPenaltyPoints)}catch(j){console.error("Sistem ayarlar yklenemedi:",j)}})()},[]);const Wt=a.useMemo(()=>i.filter(W=>(W.penaltyPoints||0)>=Kt),[i,Kt]),ht=a.useMemo(()=>{let j=[...tt==="low"?ae:tt==="out"?ct:tt==="all"?t:[...ae,...ct]];return nt.trim()&&(j=j.filter(we=>{var mn;const X=we.quantity??0,pt=we.totalQuantity??0,qe=((mn=we.loans)==null?void 0:mn.length)??0;return G(we.title,nt)||G(we.author,nt)||G(we.category,nt)||G(we.shelf,nt)||G(we.publisher,nt)||G(we.summary,nt)||G(we.bookNumber,nt)||G(we.year,nt)||G(we.pageCount,nt)||G(X,nt)||G(pt,nt)||G(qe,nt)})),he?j=[...j].sort((we,X)=>{var qe,mn;let pt=0;switch(he){case"title":pt=(we.title||"").localeCompare(X.title||"","tr");break;case"author":pt=(we.author||"").localeCompare(X.author||"","tr");break;case"category":pt=(we.category||"").localeCompare(X.category||"","tr");break;case"quantity":pt=(we.quantity??0)-(X.quantity??0);break;case"loans":pt=(((qe=we.loans)==null?void 0:qe.length)??0)-(((mn=X.loans)==null?void 0:mn.length)??0);break;case"totalQuantity":pt=(we.totalQuantity??0)-(X.totalQuantity??0);break;default:pt=0}return pt===0&&he!=="title"&&(pt=(we.title||"").localeCompare(X.title||"","tr")),Ue==="asc"?pt:-pt}):j=[...j].sort((we,X)=>{const pt=(we.title||"").localeCompare(X.title||"","tr");return pt!==0?pt:(we.id||"").localeCompare(X.id||"","tr")}),j},[tt,nt,he,Ue,ae,ct,t]),Jt=async(W,j)=>{var Hn;if(!h||A)return;const we=t.find(Pt=>Pt.id===W);if(!we)return;const X=((Hn=we.loans)==null?void 0:Hn.length)??0,pt=we.quantity||0,mn=Math.max(0,pt+j)+X;Ne(!0),H(W);try{await h({id:we.id,title:we.title,author:we.author,category:we.category,quantity:mn}),await o()}catch(Pt){console.error("Adet gncellenemedi",Pt),alert("Adet gncellenirken bir hata olutu: "+(Pt instanceof Error?Pt.message:"Bilinmeyen hata"))}finally{Ne(!1),H(null)}},sn=a.useMemo(()=>new Set(n.filter(W=>F(W.dueDate)>=0).map(W=>W.borrower)).size,[n]);x[0];const dn=a.useMemo(()=>t.filter(W=>W.quantity>0),[t]),It=a.useMemo(()=>Ae.trim()?dn.filter(W=>G(W.title,Ae)||G(W.author,Ae)||G(W.category,Ae)||G(W.shelf,Ae)||G(W.publisher,Ae)||G(W.summary,Ae)||G(W.bookNumber,Ae)||G(W.year,Ae)||G(W.pageCount,Ae)):dn,[dn,Ae]),hn=a.useMemo(()=>ye.trim()?i.filter(W=>G(W.name,ye)||G(W.studentNumber,ye)||G(W.class,ye)||G(W.branch,ye)||W.class&&W.branch&&G(`${W.class}-${W.branch}`,ye)||W.class&&W.branch&&G(`${W.class}${W.branch}`,ye)):i,[i,ye]),$n=a.useMemo(()=>jt.trim()?n.filter(W=>{const j=F(W.dueDate),X=j<0?"gecikmi gecikme sresi doldu":j>=0&&j<=3?"yaknda uyar":"normal";return G(W.title,jt)||G(W.author,jt)||G(W.category,jt)||G(W.borrower,jt)||G(W.personel,jt)||G(X,jt)}):[],[n,jt]);a.useEffect(()=>{wt==="quick-return"&&be!=="quick-return"&&(oe(null),zt("")),_(be)},[be,wt]);const Wn=W=>{f(W),l(""),W==="katalog"?(D(!0),setTimeout(()=>D(!1),0)):W==="odunc"?(V(!0),setTimeout(()=>V(!1),0)):W==="ogrenci"&&(M(!0),setTimeout(()=>M(!1),0))},jn=async()=>{if(!rt.trim()){w({type:"error",text:"Ltfen arama sorgusu girin"});return}Bn(!0),w(null),$t([]),ee(new Set);try{let W="";Dt==="title"?W=`intitle:"${rt}"`:W=`inauthor:"${rt}"`;const we=(await tf(W)).slice(0,3);$t(we),we.length===0?w({type:"error",text:"Kitap bulunamad. Ltfen farkl bir arama terimi deneyin."}):w({type:"success",text:`${we.length} kitap bulundu`})}catch(W){const j=W instanceof Error?W.message:"Arama srasnda hata olutu";w({type:"error",text:j}),console.error("Arama hatas:",W)}finally{Bn(!1)}},dt=W=>{const j=new Set(Y);j.has(W)?j.delete(W):j.add(W),ee(j)},on=async()=>{if(Y.size===0){w({type:"error",text:"Ltfen en az bir kitap sein"});return}Bn(!0),w(null);try{const j=Array.from(Y).map(X=>Ut[X]).filter(Boolean).map(X=>({title:X.title,author:X.author,category:X.category,quantity:1,shelf:"",publisher:X.publisher,summary:X.summary})),we=await ic(j,B);w({type:"success",text:`${we.addedToCsv} kitap CSV'ye eklendi, ${we.importedToSystem} kitap sisteme aktarld`}),ee(new Set),yt(""),$t([]),await o()}catch{w({type:"error",text:"Kitap ekleme srasnda hata olutu"})}finally{Bn(!1)}},at=W=>{var we;const j=(we=W.target.files)==null?void 0:we[0];if(j){if(!["image/jpeg","image/png","image/jpg","application/pdf"].includes(j.type)){v({type:"error",text:"Ltfen geerli bir dosya sein (JPG, PNG, PDF)"});return}R(j),v({type:"success",text:`Dosya seildi: ${j.name}`})}},p=async()=>{if(!g){v({type:"error",text:"Ltfen bir dosya sein"});return}te(!0),v(null);try{await new Promise(W=>setTimeout(W,1e3)),v({type:"success",text:"Dosya ykleme zellii yaknda eklenecek. imdilik manuel ekleme veya API kullanabilirsiniz."}),R(null),await o()}catch{v({type:"error",text:"Dosya ykleme baarsz oldu"})}finally{te(!1)}},O=async()=>{if(!(!$e.trim()||!Ge.trim()||!h))try{await h({title:$e.trim(),author:Ge.trim(),category:kt.trim()||"Genel",quantity:We,healthyCount:We,damagedCount:0,lostCount:0}),Xe(""),mt(""),ot(""),st(1),Me(null),Ft(null),await o()}catch(W){console.error("Kitap ekleme hatas:",W)}},L=(W,j)=>{const we=X=>X.quantity>0&&(X.healthyCount??0)>0;return j?W.filter(X=>!n.some(qe=>qe.bookId===X.id&&qe.borrower===j)&&we(X)):W.filter(we)},E=async()=>{if(!Bt||!Et.trim())return;const W=t.find(Pt=>Pt.id===Bt);if(!W){alert("Kitap bulunamad!");return}if((W.healthyCount??0)===0){alert("Salam kitap adedi mevcut deil!");return}const j=Et.trim(),we=i.find(Pt=>`${Pt.name} ${Pt.surname}`.trim()===j||Pt.name===j||Pt.surname===j||Pt.studentNumber&&`${Pt.studentNumber}`===j);if(!we){alert("Geerli bir renci sein");return}const X=Rn(we);if(!X){I==null||I("Hata","Geerli bir renci sein","error","");return}const pt=L([W],X);if(pt.length===0){alert("Bu kitap renci tarafndan zaten dn alnm!");return}if(n.filter(Pt=>{var wr;const Yt=(wr=Pt.borrower)==null?void 0:wr.trim();return(Yt===X||Yt===we.name)&&t.some(cf=>cf.id===Pt.bookId)}).length+pt.length>_n){Zn({books:pt,student:X}),nr(!0);return}await St(pt,we)},je=async()=>{if(!Gt)return;const W=i.find(j=>j.name===Gt.student||`${j.name} ${j.surname}`.trim()===Gt.student||j.surname===Gt.student);W&&(nr(!1),await St(Gt.books,W))},St=async(W,j)=>{const we=Rn(j);if(!we){I==null||I("Hata","Geerli bir renci sein","error","");return}const X=L(W,we);if(X.length===0){alert("Seilen kitaplarn hepsi renci tarafndan zaten dn alnm!");return}try{for(const pt of X)await xe.post(`/books/${pt.id}/borrow`,{borrower:we,days:nn,personelName:B});Ee(null),c(""),Be(""),Ve(""),Te(14),nr(!1),Zn(null),lt({type:"success",message:"Kitap baaryla dn verildi."}),await o()}catch(pt){const qe=pt instanceof Error?pt.message:"dn verme ilemi baarsz oldu.";if(console.error("dn verme hatas:",pt),qe.includes("cezal")||qe.includes("Ceza Puan")||qe.includes("cezal durumda")){const mn=i.find(Hn=>Hn.name===j.name&&Hn.surname===j.surname);if(mn)Mt(mn),tn(qe),Ke(!0);else{const Hn=qe.match(/Ceza Puan:\s*(\d+)/),Pt=Hn?parseInt(Hn[1]):0;Mt({name:j.name,surname:j.surname,borrowed:j.borrowed||0,returned:j.returned||0,late:j.late||0,class:j.class,branch:j.branch,studentNumber:j.studentNumber,penaltyPoints:Pt,isBanned:Pt>=Kt}),tn(qe),Ke(!0)}}else alert(qe)}},Rt=async()=>{if(N)try{const W=n.find(j=>`${j.bookId}-${j.borrower}`===N);if(!W)return;await xe.post(`/books/${W.bookId}/return`,{personelName:B,borrower:W.borrower}),oe(null),lt({type:"success",message:"Kitap baaryla teslim alnd."}),await o()}catch(W){console.error("Teslim alma hatas:",W),alert("Teslim alma ilemi baarsz oldu.")}},ar=()=>e.jsxs("svg",{width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:[e.jsx("path",{d:"M3 9l9-7 9 7v11a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2z"}),e.jsx("polyline",{points:"9 22 9 12 15 12 15 22"})]}),pi=()=>e.jsxs("svg",{width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:[e.jsx("path",{d:"M4 19.5A2.5 2.5 0 0 1 6.5 17H20"}),e.jsx("path",{d:"M6.5 2H20v20H6.5A2.5 2.5 0 0 1 4 19.5v-15A2.5 2.5 0 0 1 6.5 2z"})]}),Li=()=>e.jsxs("svg",{width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:[e.jsx("line",{x1:"12",y1:"5",x2:"12",y2:"19"}),e.jsx("line",{x1:"5",y1:"12",x2:"19",y2:"12"}),e.jsx("path",{d:"M4 19.5A2.5 2.5 0 0 1 6.5 17H20"}),e.jsx("path",{d:"M6.5 2H20v20H6.5A2.5 2.5 0 0 1 4 19.5v-15A2.5 2.5 0 0 1 6.5 2z"})]}),sl=()=>e.jsxs("svg",{width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:[e.jsx("path",{d:"M17 21v-2a4 4 0 0 0-4-4H5a4 4 0 0 0-4 4v2"}),e.jsx("circle",{cx:"9",cy:"7",r:"4"}),e.jsx("path",{d:"M23 21v-2a4 4 0 0 0-3-3.87"}),e.jsx("path",{d:"M16 3.13a4 4 0 0 1 0 7.75"})]}),al=()=>e.jsxs("svg",{width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:[e.jsx("path",{d:"M4 19.5A2.5 2.5 0 0 1 6.5 17H20"}),e.jsx("path",{d:"M6.5 2H20v20H6.5A2.5 2.5 0 0 1 4 19.5v-15A2.5 2.5 0 0 1 6.5 2z"}),e.jsx("path",{d:"M9 9l3 3 3-3"})]}),dl=()=>e.jsxs("svg",{width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:[e.jsx("path",{d:"M4 19.5A2.5 2.5 0 0 1 6.5 17H20"}),e.jsx("path",{d:"M6.5 2H20v20H6.5A2.5 2.5 0 0 1 4 19.5v-15A2.5 2.5 0 0 1 6.5 2z"}),e.jsx("line",{x1:"8",y1:"8",x2:"16",y2:"8"}),e.jsx("line",{x1:"8",y1:"12",x2:"16",y2:"12"}),e.jsx("line",{x1:"8",y1:"16",x2:"16",y2:"16"})]}),cl=()=>e.jsxs("svg",{width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:[e.jsx("path",{d:"M14 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V8z"}),e.jsx("polyline",{points:"14 2 14 8 20 8"}),e.jsx("line",{x1:"16",y1:"13",x2:"8",y2:"13"}),e.jsx("line",{x1:"16",y1:"17",x2:"8",y2:"17"}),e.jsx("polyline",{points:"10 9 9 9 8 9"})]}),In=()=>e.jsxs("svg",{width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:[e.jsx("path",{d:"M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4"}),e.jsx("polyline",{points:"7 10 12 15 17 10"}),e.jsx("line",{x1:"12",y1:"15",x2:"12",y2:"3"})]}),Nn=()=>e.jsxs("svg",{width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:[e.jsx("polyline",{points:"23 4 23 10 17 10"}),e.jsx("polyline",{points:"1 20 1 14 7 14"}),e.jsx("path",{d:"M3.51 9a9 9 0 0 1 14.85-3.36L23 10M1 14l4.64 4.36A9 9 0 0 0 20.49 15"})]}),gn=[{id:"ana",label:"Ana Sayfa",icon:e.jsx(ar,{}),title:"Ana Sayfa",description:"Genel Bak"},{id:"katalog",label:"Kitap Katalou",icon:e.jsx(pi,{}),title:"Kitap Katalou",description:"Tm Kitaplar"},{id:"kitap-ekle",label:"Kitap Ekle",icon:e.jsx(Li,{}),title:"Kitap Ekle",description:"Yeni Kitap"},{id:"ogrenci",label:"renci Listesi",icon:e.jsx(sl,{}),title:"renci Listesi",description:"renci lemleri"},{id:"odunc-islem",label:"dn lemleri",icon:e.jsx(al,{}),title:"dn lemleri",description:"dn Ver/Al"},{id:"odunc",label:"dn Listesi",icon:e.jsx(dl,{}),title:"dn Listesi",description:"Tm dnler"},{id:"raporlar",label:"Raporlar",icon:e.jsx(cl,{}),title:"Raporlar",description:"statistikler"}],vn=[{id:"veri-yukle",label:"Veri Ykle",icon:e.jsx(In,{}),title:"Veri Ykle",description:"Dosya Ykle"}],xi=[...gn,{id:"senkronizasyon",label:"Senkronizasyon",icon:e.jsx(Nn,{}),title:"Senkronizasyon",description:"Veri Senkron"}],xo=Cn?xi:gn,Ms=()=>{switch(y){case"ana":{const W=rn.slice(0,5),j=x.slice(0,5),we=[{id:"active-loans",label:"Aktif dn",value:ke,color:"#3b82f6",modal:"active-loans"},{id:"late-loans",label:"Geciken Kitap",value:Ye,color:"#374151",modal:"late-loans"},{id:"late-borrowers",label:"Geciken renci",value:new Set(rn.map(X=>X.borrower)).size,color:"#111827",modal:"late-loans"},{id:"total-borrowed",label:"Toplam dn",value:Q,color:"#10b981",modal:"total-borrowed"},{id:"total-books",label:"Kitap eidi",value:t.length,color:"#8b5cf6",modal:"total-books"},{id:"total-book-quantity",label:"Toplam Kitap Adeti",value:t.reduce((X,pt)=>X+(pt.quantity||0),0)+n.filter(X=>F(X.dueDate)>=0).length,color:"#8b5cf6",modal:"total-books"},{id:"total-students",label:"Toplam renci",value:i.length,color:"#06b6d4",modal:"total-students"},{id:"stock-low",label:"Azalan Adet (2)",value:ae.length,color:"#f59e0b",modal:"stock-low"},{id:"stock-out",label:"Tkenen Adet",value:ct.length,color:"#ef4444",modal:"stock-out"},{id:"top-borrowed",label:"En ok dnlenen",value:x.length>0?x[0].count:0,color:"#10b981",modal:"top-borrowed"},{id:"active-borrowers",label:"Aktif renci",value:sn,color:"#2563eb",modal:"active-loans"},{id:"banned-students",label:"Cezal renciler",value:Wt.length,color:"#dc2626",modal:"banned-students"}];return e.jsxs("div",{style:{display:"flex",flexDirection:"column",gap:"24px"},children:[e.jsx("div",{style:{display:"flex",justifyContent:"flex-end",marginBottom:"-16px"},children:e.jsx("button",{onClick:()=>le(!$),style:{padding:"8px 16px",borderRadius:"8px",border:"1px solid #e5e7eb",background:$?"linear-gradient(135deg, #eff6ff 0%, #dbeafe 50%, #bfdbfe 100%)":"#fff",color:$?"#1e40af":"#374151",cursor:"pointer",fontSize:"14px",fontWeight:600,display:"flex",alignItems:"center",gap:"6px",transition:"all 0.2s"},children:$?e.jsxs(e.Fragment,{children:[e.jsx("svg",{width:"16",height:"16",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:e.jsx("polyline",{points:"20 6 9 17 4 12"})}),"Ayarlar Kaydet"]}):e.jsxs(e.Fragment,{children:[e.jsxs("svg",{width:"16",height:"16",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:[e.jsx("path",{d:"M11 4H4a2 2 0 0 0-2 2v14a2 2 0 0 0 2 2h14a2 2 0 0 0 2-2v-7"}),e.jsx("path",{d:"M18.5 2.5a2.121 2.121 0 0 1 3 3L12 15l-4 1 1-4 9.5-9.5z"})]}),"Kartlar Dzenle"]})})}),$&&e.jsxs("div",{className:"card",style:{padding:"20px"},children:[e.jsx("h3",{style:{marginTop:0,marginBottom:"16px",color:"#1e293b",fontWeight:700},children:"Kartlar Dzenle"}),e.jsx("div",{style:{display:"grid",gridTemplateColumns:"repeat(auto-fit, minmax(200px, 1fr))",gap:"12px"},children:we.map(X=>e.jsxs("label",{style:{display:"flex",alignItems:"center",gap:"8px",padding:"12px",background:"rgba(255, 255, 255, 0.5)",backdropFilter:"blur(10px)",borderRadius:"8px",border:"1px solid rgba(255, 255, 255, 0.3)",cursor:"pointer"},children:[e.jsx("input",{type:"checkbox",checked:U[X.id]??!0,onChange:()=>Je(X.id),style:{width:"18px",height:"18px",cursor:"pointer"}}),e.jsx("span",{style:{fontWeight:600,color:"#1e293b"},children:X.label})]},X.id))})]}),e.jsx("div",{style:{display:"grid",gridTemplateColumns:"repeat(auto-fit, minmax(200px, 1fr))",gap:"16px"},children:we.filter(X=>U[X.id]!==!1).map(X=>{const qe=(Yt=>{const wr=/^#?([a-f\d]{2})([a-f\d]{2})([a-f\d]{2})$/i.exec(Yt);return wr?{r:parseInt(wr[1],16),g:parseInt(wr[2],16),b:parseInt(wr[3],16)}:null})(X.color),mn=qe?`rgba(${qe.r}, ${qe.g}, ${qe.b}, 0.15)`:"rgba(59, 130, 246, 0.15)",Hn=qe?`rgba(${qe.r}, ${qe.g}, ${qe.b}, 0.4)`:"rgba(59, 130, 246, 0.4)",Pt=qe?`rgba(${qe.r}, ${qe.g}, ${qe.b}, 0.3)`:"rgba(59, 130, 246, 0.3)";return e.jsxs("div",{className:"card",style:{textAlign:"center",cursor:"pointer",transition:"all 0.4s cubic-bezier(0.4, 0, 0.2, 1)",padding:"20px",position:"relative",overflow:"hidden",borderColor:`rgba(${(qe==null?void 0:qe.r)||59}, ${(qe==null?void 0:qe.g)||130}, ${(qe==null?void 0:qe.b)||246}, 0.2)`},onClick:()=>ce(X.modal),onMouseEnter:Yt=>{Yt.currentTarget.style.transform="translateY(-4px) scale(1.02)",Yt.currentTarget.style.boxShadow=`0 12px 32px ${Pt}`,Yt.currentTarget.style.borderColor=Hn,Yt.currentTarget.style.background=`linear-gradient(135deg, ${mn} 0%, rgba(255, 255, 255, 0.95) 100%)`},onMouseLeave:Yt=>{Yt.currentTarget.style.transform="translateY(0) scale(1)",Yt.currentTarget.style.boxShadow="0 4px 12px rgba(30, 64, 175, 0.15)",Yt.currentTarget.style.borderColor=`rgba(${(qe==null?void 0:qe.r)||59}, ${(qe==null?void 0:qe.g)||130}, ${(qe==null?void 0:qe.b)||246}, 0.2)`,Yt.currentTarget.style.background="linear-gradient(135deg, rgba(255, 255, 255, 0.95) 0%, rgba(248, 250, 252, 0.95) 50%, rgba(241, 245, 249, 0.95) 100%)"},children:[e.jsx("div",{style:{fontSize:"36px",fontWeight:700,color:X.color,marginBottom:"8px",transition:"transform 0.4s ease"},onMouseEnter:Yt=>{Yt.currentTarget.style.transform="scale(1.1)"},onMouseLeave:Yt=>{Yt.currentTarget.style.transform="scale(1)"},children:X.value}),e.jsx("div",{style:{color:"#1e293b",fontSize:"14px",fontWeight:600},children:X.label})]},X.id)})}),e.jsx(r0,{loans:n,books:t,onLoanClick:gt}),e.jsxs("div",{className:"card",style:{padding:"20px",marginTop:"24px"},onMouseEnter:()=>Qe(!0),onMouseLeave:()=>Qe(!1),children:[e.jsx("h3",{style:{marginTop:0,marginBottom:"16px",color:"#1e293b",fontWeight:700},children:"Teslim Tarihi Yaklaanlar"}),e.jsx("div",{style:{display:"grid",gridTemplateColumns:"repeat(auto-fit, minmax(150px, 1fr))",gap:"16px"},children:[{title:"0-3 Gn",color:"#ef4444",bucket:"0-3",data:Xt},{title:"4-7 Gn",color:"#f59e0b",bucket:"4-7",data:vt},{title:"8-14 Gn",color:"#3b82f6",bucket:"8-14",data:ln},{title:"15+ Gn",color:"#10b981",bucket:"15+",data:Mn}].map((X,pt)=>{const qe=Oe===X.bucket,mn=X.color==="#ef4444"?"#fef2f2":X.color==="#f59e0b"?"#fffbeb":X.color==="#3b82f6"?"#eff6ff":"#f0fdf4",Hn=X.color==="#ef4444"?"#991b1b":X.color==="#f59e0b"?"#92400e":X.color==="#3b82f6"?"#1e40af":"#065f46";return e.jsxs("div",{className:"card",style:{textAlign:"center",cursor:"pointer",transition:"all 0.4s cubic-bezier(0.4, 0, 0.2, 1)",padding:"20px",border:qe?`3px solid ${X.color}`:`2px solid ${X.color}`,backgroundColor:mn,transform:qe?"translateY(-4px) scale(1.05)":"scale(1)",boxShadow:qe?`0 12px 32px ${X.color}40`:"0 2px 4px rgba(0, 0, 0, 0.1)",position:"relative",overflow:"hidden"},onClick:()=>Re(qe?null:X.bucket),onMouseEnter:Pt=>{qe||(Pt.currentTarget.style.transform="translateY(-4px) scale(1.05)",Pt.currentTarget.style.boxShadow=`0 12px 32px ${X.color}40`,Pt.currentTarget.style.borderWidth="3px")},onMouseLeave:Pt=>{qe||(Pt.currentTarget.style.transform="translateY(0) scale(1)",Pt.currentTarget.style.boxShadow="0 2px 4px rgba(0, 0, 0, 0.1)",Pt.currentTarget.style.borderWidth="2px")},children:[e.jsx("div",{style:{fontSize:"36px",fontWeight:700,color:X.color,marginBottom:"8px"},children:X.data.length}),e.jsx("div",{style:{color:Hn,fontSize:"14px",fontWeight:600},children:X.title})]},X.title+pt)})}),Oe&&(()=>{const X=Oe==="0-3"?Xt:Oe==="4-7"?vt:Oe==="8-14"?ln:Mn,pt=Oe==="0-3"?"0-3 Gn":Oe==="4-7"?"4-7 Gn":Oe==="8-14"?"8-14 Gn":"15+ Gn";return e.jsxs("div",{style:{marginTop:"24px",padding:"20px",background:"rgba(255, 255, 255, 0.5)",backdropFilter:"blur(10px)",borderRadius:"12px",border:"2px solid rgba(255, 255, 255, 0.3)"},children:[e.jsxs("h4",{style:{marginTop:0,marginBottom:"16px",color:"#1e293b",fontWeight:700},children:[pt," in Detayl Liste (",X.length," kayt)"]}),X.length===0?e.jsx("p",{style:{color:"#64748b",margin:0},children:"Bu kategoride dn bulunmuyor."}):e.jsx("div",{style:{maxHeight:"600px",overflowY:"auto",display:"flex",flexDirection:"column",gap:"8px"},children:X.map((qe,mn)=>{const Hn=t.find(Pt=>Pt.id===qe.bookId);return e.jsx(i0,{loan:qe,book:Hn,showReturnButton:!1,onClick:()=>{fe(qe)}},`${qe.bookId}-${qe.borrower}-${mn}`)})})]})})()]}),e.jsxs("div",{style:{display:"grid",gridTemplateColumns:"repeat(auto-fit, minmax(400px, 1fr))",gap:"24px"},children:[e.jsxs("div",{className:"card",style:{cursor:"pointer",transition:"all 0.4s cubic-bezier(0.4, 0, 0.2, 1)",padding:"20px",position:"relative",overflow:"hidden",borderColor:"rgba(107, 114, 128, 0.3)"},onClick:()=>ce("late-loans"),onMouseEnter:X=>{X.currentTarget.style.transform="translateY(-4px) scale(1.02)",X.currentTarget.style.boxShadow="0 12px 32px rgba(107, 114, 128, 0.3)",X.currentTarget.style.borderColor="rgba(107, 114, 128, 0.5)",X.currentTarget.style.background="linear-gradient(135deg, rgba(107, 114, 128, 0.15) 0%, rgba(255, 255, 255, 0.95) 100%)"},onMouseLeave:X=>{X.currentTarget.style.transform="translateY(0) scale(1)",X.currentTarget.style.boxShadow="0 4px 12px rgba(30, 64, 175, 0.15)",X.currentTarget.style.borderColor="rgba(107, 114, 128, 0.3)",X.currentTarget.style.background="linear-gradient(135deg, rgba(255, 255, 255, 0.95) 0%, rgba(248, 250, 252, 0.95) 50%, rgba(241, 245, 249, 0.95) 100%)"},children:[e.jsx("h3",{style:{marginTop:0,marginBottom:"16px",color:"#1e293b",fontWeight:700},children:"Gecikenler"}),rn.length===0?e.jsx("p",{style:{margin:0,color:"#64748b"},children:"Geciken dn yok."}):e.jsxs("div",{children:[e.jsxs("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center",marginBottom:"12px",padding:"12px",background:"rgba(107, 114, 128, 0.2)",backdropFilter:"blur(10px)",borderRadius:"8px",color:"white",border:"1px solid rgba(255, 255, 255, 0.2)"},children:[e.jsx("span",{style:{fontWeight:700},children:"Toplam Geciken:"}),e.jsx("span",{style:{fontSize:"24px",fontWeight:800},children:rn.length})]}),e.jsx("div",{style:{maxHeight:"200px",overflowY:"auto"},children:W.map((X,pt)=>{const qe=Math.floor((new Date().getTime()-new Date(X.dueDate).getTime())/864e5);return e.jsxs("div",{style:{marginBottom:"8px",padding:"12px",background:"rgba(255, 255, 255, 0.5)",backdropFilter:"blur(10px)",borderRadius:"8px",border:"1px solid rgba(255, 255, 255, 0.3)"},children:[e.jsx("div",{style:{fontWeight:600,color:"#1e293b"},children:X.title}),e.jsxs("div",{style:{fontSize:"12px",color:"#64748b",marginTop:"4px"},children:[X.borrower,"  ",qe," gn gecikmi"]})]},`${X.bookId}-${pt}`)})})]})]}),e.jsxs("div",{className:"card",style:{cursor:"pointer",transition:"all 0.4s cubic-bezier(0.4, 0, 0.2, 1)",padding:"20px",position:"relative",overflow:"hidden",borderColor:"rgba(14, 165, 233, 0.3)"},onClick:()=>ce("top-borrowed"),onMouseEnter:X=>{X.currentTarget.style.transform="translateY(-4px) scale(1.02)",X.currentTarget.style.boxShadow="0 12px 32px rgba(14, 165, 233, 0.3)",X.currentTarget.style.borderColor="rgba(14, 165, 233, 0.5)",X.currentTarget.style.background="linear-gradient(135deg, rgba(14, 165, 233, 0.15) 0%, rgba(255, 255, 255, 0.95) 100%)"},onMouseLeave:X=>{X.currentTarget.style.transform="translateY(0) scale(1)",X.currentTarget.style.boxShadow="0 4px 12px rgba(30, 64, 175, 0.15)",X.currentTarget.style.borderColor="rgba(14, 165, 233, 0.3)",X.currentTarget.style.background="linear-gradient(135deg, rgba(255, 255, 255, 0.95) 0%, rgba(248, 250, 252, 0.95) 50%, rgba(241, 245, 249, 0.95) 100%)"},children:[e.jsx("h3",{style:{marginTop:0,marginBottom:"16px",color:"#1e293b",fontWeight:700},children:"En ok dn Alnanlar"}),x.length===0?e.jsx("p",{style:{margin:0,color:"#64748b"},children:"Veri yok."}):e.jsxs("div",{children:[e.jsxs("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center",marginBottom:"12px",padding:"12px",background:"rgba(14, 165, 233, 0.2)",backdropFilter:"blur(10px)",borderRadius:"8px",border:"1px solid rgba(255, 255, 255, 0.3)"},children:[e.jsx("span",{style:{fontWeight:600,color:"#0ea5e9"},children:"Toplam dn:"}),e.jsx("span",{style:{fontSize:"24px",fontWeight:700,color:"#0ea5e9"},children:x.reduce((X,pt)=>X+pt.count,0)})]}),e.jsx("div",{style:{maxHeight:"200px",overflowY:"auto"},children:j.map((X,pt)=>e.jsxs("div",{style:{marginBottom:"8px",padding:"12px",background:"rgba(255, 255, 255, 0.5)",backdropFilter:"blur(10px)",borderRadius:"8px",border:"1px solid rgba(255, 255, 255, 0.3)"},children:[e.jsx("div",{style:{fontWeight:600,color:"#1e293b"},children:X.title}),e.jsxs("div",{style:{fontSize:"12px",color:"#64748b",marginTop:"4px"},children:[X.author,"  ",e.jsxs("strong",{style:{color:"#0ea5e9"},children:[X.count," dn"]})]})]},`${X.title}-${X.author}-${pt}`))})]})]})]}),e.jsxs("div",{className:"card",style:{padding:"20px",background:"linear-gradient(135deg, rgba(239, 246, 255, 0.95) 0%, rgba(219, 234, 254, 0.95) 50%, rgba(191, 219, 254, 0.95) 100%)"},children:[e.jsx("h3",{style:{marginTop:0,marginBottom:"16px",color:"#1e293b",fontWeight:700},children:"Hzl lemler"}),e.jsxs("div",{style:{display:"grid",gridTemplateColumns:"repeat(auto-fit, minmax(240px, 1fr))",gap:"12px"},children:[e.jsxs("div",{style:{border:"2px solid rgba(59, 130, 246, 0.2)",borderRadius:"10px",padding:"12px",background:"rgba(255, 255, 255, 0.9)",backdropFilter:"blur(10px)",boxShadow:"0 2px 8px rgba(0, 0, 0, 0.08)"},children:[e.jsx("p",{style:{margin:"0 0 8px 0",fontWeight:600,color:"#1e293b"},children:"Hzl Kitap Ekle"}),e.jsxs("button",{onClick:()=>Me("quick-add-book"),style:{width:"100%",padding:"8px 12px",borderRadius:"8px",border:"1px solid #3b82f6",background:"#3b82f6",color:"white",cursor:"pointer",fontWeight:600,display:"flex",alignItems:"center",justifyContent:"center",gap:"6px"},children:[e.jsxs("svg",{width:"16",height:"16",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:[e.jsx("path",{d:"M4 19.5A2.5 2.5 0 0 1 6.5 17H20"}),e.jsx("path",{d:"M6.5 2H20v20H6.5A2.5 2.5 0 0 1 4 19.5v-15A2.5 2.5 0 0 1 6.5 2z"}),e.jsx("line",{x1:"12",y1:"8",x2:"12",y2:"16"}),e.jsx("line",{x1:"8",y1:"12",x2:"16",y2:"12"})]}),"Kitap Ekle"]})]}),e.jsxs("div",{style:{border:"2px solid rgba(59, 130, 246, 0.2)",borderRadius:"10px",padding:"12px",background:"rgba(255, 255, 255, 0.9)",backdropFilter:"blur(10px)",boxShadow:"0 2px 8px rgba(0, 0, 0, 0.08)"},children:[e.jsx("p",{style:{margin:"0 0 8px 0",fontWeight:600,color:"#1e293b"},children:"Hzl dn Ver"}),e.jsxs("button",{onClick:()=>Me("quick-borrow"),style:{width:"100%",padding:"8px 12px",borderRadius:"8px",border:"1px solid #10b981",background:"#10b981",color:"white",cursor:"pointer",fontWeight:600,display:"flex",alignItems:"center",justifyContent:"center",gap:"6px"},children:[e.jsxs("svg",{width:"16",height:"16",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:[e.jsx("path",{d:"M4 19.5A2.5 2.5 0 0 1 6.5 17H20"}),e.jsx("path",{d:"M6.5 2H20v20H6.5A2.5 2.5 0 0 1 4 19.5v-15A2.5 2.5 0 0 1 6.5 2z"}),e.jsx("path",{d:"M9 9l3 3 3-3"})]}),"dn Ver"]})]}),e.jsxs("div",{style:{border:"2px solid rgba(59, 130, 246, 0.2)",borderRadius:"10px",padding:"12px",background:"rgba(255, 255, 255, 0.9)",backdropFilter:"blur(10px)",boxShadow:"0 2px 8px rgba(0, 0, 0, 0.08)"},children:[e.jsx("p",{style:{margin:"0 0 8px 0",fontWeight:600,color:"#1e293b"},children:"Hzl Teslim Al"}),e.jsxs("button",{onClick:()=>Me("quick-return"),style:{width:"100%",padding:"8px 12px",borderRadius:"8px",border:"1px solid #f59e0b",background:"#f59e0b",color:"white",cursor:"pointer",fontWeight:600,display:"flex",alignItems:"center",justifyContent:"center",gap:"6px"},children:[e.jsx("svg",{width:"16",height:"16",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:e.jsx("polyline",{points:"20 6 9 17 4 12"})}),"Teslim Al"]})]}),e.jsxs("div",{style:{border:"2px solid rgba(59, 130, 246, 0.2)",borderRadius:"10px",padding:"12px",background:"rgba(255, 255, 255, 0.9)",backdropFilter:"blur(10px)",boxShadow:"0 2px 8px rgba(0, 0, 0, 0.08)"},children:[e.jsx("p",{style:{margin:"0 0 8px 0",fontWeight:600,color:"#1e293b"},children:"Hzl Adet Kontrol"}),e.jsxs("button",{onClick:()=>Me("quick-stock"),style:{width:"100%",padding:"8px 12px",borderRadius:"8px",border:"1px solid #6366f1",background:"#6366f1",color:"white",cursor:"pointer",fontWeight:600,display:"flex",alignItems:"center",justifyContent:"center",gap:"6px"},children:[e.jsxs("svg",{width:"16",height:"16",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:[e.jsx("path",{d:"M21 16V8a2 2 0 0 0-1-1.73l-7-4a2 2 0 0 0-2 0l-7 4A2 2 0 0 0 3 8v8a2 2 0 0 0 1 1.73l7 4a2 2 0 0 0 2 0l7-4A2 2 0 0 0 21 16z"}),e.jsx("polyline",{points:"3.27 6.96 12 12.01 20.73 6.96"}),e.jsx("line",{x1:"12",y1:"22.08",x2:"12",y2:"12"})]}),"Adet Kontrol"]})]})]})]})]})}case"katalog":return e.jsx(gr,{books:t,loans:n,students:i,personelName:B,onRefresh:o,onSearch:l,onAdd:h,onDelete:C,onBulkDeleteSuccess:k,canEdit:!0,resetSearch:b});case"ogrenci":return e.jsx(Xg,{students:i,loans:n,books:t,onRefresh:o,onSyncStudents:s,resetSearch:ie,personelName:B,onAddNotification:m});case"odunc-islem":return e.jsx(Jg,{books:t,loans:n,students:i,onRefresh:o,personelName:B,onAddNotification:m});case"odunc":return e.jsx(On,{loans:n,books:t,students:i,onRefresh:o,personelName:B,resetSearch:q,onAddNotification:m});case"raporlar":return e.jsx(Qg,{books:t,bookStats:r,students:i,loans:n});case"kitap-ekle":return e.jsx(t0,{onRefresh:o,personelName:B});case"veri-yukle":return e.jsx(n0,{onRefresh:o,bookCount:t.length,studentCount:i.length,onNotify:m});case"senkronizasyon":return Cn?e.jsx(Zg,{onSyncStudents:s,onSyncpersonel:u,onSyncBooks:d}):null;default:return null}},af=()=>{switch(re){case"active-loans":return e.jsx(On,{loans:Vt,books:t,onRefresh:o,personelName:B,resetSearch:!1,filterVariant:"search-only",onAddNotification:m});case"late-loans":return e.jsx(On,{loans:rn,books:t,onRefresh:o,personelName:B,resetSearch:!1,filterVariant:"search-only",onAddNotification:m});case"due-soon":return e.jsx(On,{loans:Xt,books:t,onRefresh:o,personelName:B,resetSearch:!1,filterVariant:"search-only",onAddNotification:m});case"due-soon-0-3":return e.jsx(On,{loans:Xt,books:t,onRefresh:o,personelName:B,resetSearch:!1,filterVariant:"search-only",onAddNotification:m});case"due-soon-4-7":return e.jsx(On,{loans:vt,books:t,onRefresh:o,personelName:B,resetSearch:!1,filterVariant:"search-only",onAddNotification:m});case"due-soon-8-14":return e.jsx(On,{loans:ln,books:t,onRefresh:o,personelName:B,resetSearch:!1,filterVariant:"search-only",onAddNotification:m});case"due-soon-15plus":return e.jsx(On,{loans:Mn,books:t,onRefresh:o,personelName:B,resetSearch:!1,filterVariant:"search-only",onAddNotification:m});case"due-soon-14":return e.jsx(On,{loans:[...Xt,...vt,...ln],books:t,onRefresh:o,personelName:B,resetSearch:!1,filterVariant:"search-only",onAddNotification:m});case"due-soon-list":return e.jsxs("div",{children:[e.jsx("h3",{style:{marginBottom:"16px"},children:"Teslim Tarihi Yaklaanlar (0-3 Gn)"}),e.jsx("div",{style:{maxHeight:"60vh",overflowY:"auto"},children:Xt.length===0?e.jsx("p",{style:{color:"#94a3b8"},children:"Yaklaan teslim tarihi yok."}):e.jsxs("table",{className:"book-table",style:{width:"100%"},children:[e.jsx("thead",{children:e.jsxs("tr",{children:[e.jsx("th",{children:"Kitap"}),e.jsx("th",{children:"renci"}),e.jsx("th",{children:"Biti Tarihi"}),e.jsx("th",{children:"Kalan Gn"})]})}),e.jsx("tbody",{children:Xt.map((W,j)=>e.jsxs("tr",{children:[e.jsx("td",{children:e.jsx("strong",{children:W.title})}),e.jsx("td",{children:W.borrower}),e.jsx("td",{children:new Date(W.dueDate).toLocaleDateString("tr-TR")}),e.jsx("td",{children:(()=>{const we=F(W.dueDate);return e.jsxs("span",{style:{color:we<=1?"#ef4444":"#f59e0b",fontWeight:600},children:[we," gn"]})})()})]},`${W.bookId}-${j}`))})]})})]});case"banned-students":return e.jsx(Ji,{students:Wt,books:t,loans:n,resetSearch:!1,filterVariant:"search-only",personelName:B,onAddNotification:m,onShowInfo:I});case"top-borrowed":return e.jsx(gr,{books:K,loans:n,onRefresh:o,onSearch:()=>{},canEdit:!1,resetSearch:!1,filterVariant:"search-only"});case"total-borrowed":return e.jsx(On,{loans:n,books:t,onRefresh:o,personelName:B,resetSearch:!1,filterVariant:"search-only",onAddNotification:m});case"total-books":return e.jsx(gr,{books:t,loans:n,onRefresh:o,onSearch:()=>{},canEdit:!1,resetSearch:!1,filterVariant:"search-only"});case"total-students":return e.jsx(Ji,{students:i,books:t,loans:n,resetSearch:!1,filterVariant:"search-only",personelName:B,onAddNotification:m,onShowInfo:I});case"stock-low":return e.jsxs("div",{children:[e.jsx("h3",{style:{marginBottom:"16px"},children:"Azalan Adet (2)"}),e.jsx(gr,{books:ae,loans:n,onRefresh:o,onSearch:()=>{},canEdit:!0,resetSearch:!1,filterVariant:"search-only"})]});case"stock-out":return e.jsxs("div",{children:[e.jsx("h3",{style:{marginBottom:"16px"},children:"Tkenen Adet"}),e.jsx(gr,{books:ct,loans:n,onRefresh:o,onSearch:()=>{},canEdit:!0,resetSearch:!1,filterVariant:"search-only"})]});default:return null}},df=()=>{if(!be)return null;const W=()=>{Me(null),oe(null),zt(""),Ft(null),yt(""),$t([]),ee(new Set),w(null),R(null),v(null),it(null),Nt("asc"),Ee(null),c(""),Be(""),Ve(""),Te(14),nr(!1),Zn(null),lt(null)};return _t.createPortal(e.jsx("div",{style:{position:"fixed",top:0,left:0,right:0,bottom:0,backgroundColor:"rgba(0, 0, 0, 0.5)",display:"flex",alignItems:"center",justifyContent:"center",zIndex:10001,cursor:"pointer"},onClick:W,children:e.jsx("div",{className:"card",style:{maxWidth:"800px",width:"90%",maxHeight:"90vh",overflowY:"auto",overflowX:"hidden",position:"relative"},onClick:j=>j.stopPropagation(),children:bt?e.jsxs("div",{style:{textAlign:"center",padding:"40px 20px"},children:[e.jsx("div",{style:{width:"80px",height:"80px",borderRadius:"50%",backgroundColor:bt.type==="success"?"#d1fae5":"#fee2e2",color:bt.type==="success"?"#059669":"#dc2626",display:"flex",alignItems:"center",justifyContent:"center",margin:"0 auto 20px"},children:bt.type==="success"?e.jsx("svg",{width:"40",height:"40",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"3",strokeLinecap:"round",strokeLinejoin:"round",children:e.jsx("polyline",{points:"20 6 9 17 4 12"})}):e.jsxs("svg",{width:"40",height:"40",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"3",strokeLinecap:"round",strokeLinejoin:"round",children:[e.jsx("line",{x1:"18",y1:"6",x2:"6",y2:"18"}),e.jsx("line",{x1:"6",y1:"6",x2:"18",y2:"18"})]})}),e.jsx("h2",{style:{color:"#1f2937",marginBottom:"8px"},children:bt.type==="success"?"lem Baarl!":"Hata Olutu"}),e.jsx("p",{style:{color:"#6b7280",fontSize:"16px",marginBottom:"32px"},children:bt.message}),e.jsxs("div",{style:{display:"flex",justifyContent:"center",gap:"16px"},children:[e.jsx("button",{onClick:()=>lt(null),style:{padding:"10px 24px",backgroundColor:"#3b82f6",color:"white",border:"none",borderRadius:"8px",fontWeight:600,cursor:"pointer",fontSize:"14px",boxShadow:"0 2px 4px rgba(59, 130, 246, 0.3)"},children:"Yeni lem Yap"}),e.jsx("button",{onClick:W,style:{padding:"10px 24px",backgroundColor:"#f3f4f6",color:"#4b5563",border:"1px solid #e5e7eb",borderRadius:"8px",fontWeight:600,cursor:"pointer",fontSize:"14px"},children:"Kapat"})]})]}):e.jsxs(e.Fragment,{children:[e.jsxs("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center",marginBottom:"16px"},children:[e.jsxs("h3",{style:{margin:0},children:[be==="quick-add-book"&&"Hzl Kitap Ekle",be==="quick-borrow"&&"Hzl dn Ver",be==="quick-return"&&"Hzl Teslim Al",be==="quick-stock"&&"Hzl Adet Kontrol"]}),e.jsx("button",{onClick:W,style:{padding:"4px 8px",borderRadius:"4px",border:"1px solid #e5e7eb",background:"#fff",cursor:"pointer"},children:""})]}),be==="quick-add-book"&&!Ht&&e.jsxs("div",{style:{display:"grid",gridTemplateColumns:"repeat(auto-fit, minmax(200px, 1fr))",gap:"16px"},children:[e.jsxs("div",{onClick:()=>Ft("api"),style:{padding:"24px",borderRadius:"12px",border:"2px solid #e5e7eb",backgroundColor:"white",cursor:"pointer",transition:"all 0.2s",textAlign:"center"},onMouseEnter:j=>{j.currentTarget.style.borderColor="#93c5fd",j.currentTarget.style.backgroundColor="#f8fafc"},onMouseLeave:j=>{j.currentTarget.style.borderColor="#e5e7eb",j.currentTarget.style.backgroundColor="white"},children:[e.jsx("div",{style:{fontSize:"48px",marginBottom:"12px"},children:""}),e.jsx("h3",{style:{margin:"0 0 8px 0",color:"#1f2937",fontSize:"18px"},children:"Google Books API"}),e.jsx("p",{style:{margin:0,color:"#6b7280",fontSize:"14px"},children:"API zerinden kitap arayp ekleyin"})]}),e.jsxs("div",{onClick:()=>Ft("file"),style:{padding:"24px",borderRadius:"12px",border:"2px solid #e5e7eb",backgroundColor:"white",cursor:"pointer",transition:"all 0.2s",textAlign:"center"},onMouseEnter:j=>{j.currentTarget.style.borderColor="#93c5fd",j.currentTarget.style.backgroundColor="#f8fafc"},onMouseLeave:j=>{j.currentTarget.style.borderColor="#e5e7eb",j.currentTarget.style.backgroundColor="white"},children:[e.jsx("div",{style:{fontSize:"48px",marginBottom:"12px"},children:""}),e.jsx("h3",{style:{margin:"0 0 8px 0",color:"#1f2937",fontSize:"18px"},children:"Dosya Ykle"}),e.jsx("p",{style:{margin:0,color:"#6b7280",fontSize:"14px"},children:"Grsel veya PDF dosyas ykleyin"})]}),e.jsxs("div",{onClick:()=>Ft("manual"),style:{padding:"24px",borderRadius:"12px",border:"2px solid #e5e7eb",backgroundColor:"white",cursor:"pointer",transition:"all 0.2s",textAlign:"center"},onMouseEnter:j=>{j.currentTarget.style.borderColor="#93c5fd",j.currentTarget.style.backgroundColor="#f8fafc"},onMouseLeave:j=>{j.currentTarget.style.borderColor="#e5e7eb",j.currentTarget.style.backgroundColor="white"},children:[e.jsx("div",{style:{fontSize:"48px",marginBottom:"12px"},children:""}),e.jsx("h3",{style:{margin:"0 0 8px 0",color:"#1f2937",fontSize:"18px"},children:"Manuel Ekle"}),e.jsx("p",{style:{margin:0,color:"#6b7280",fontSize:"14px"},children:"Knye bilgilerini manuel olarak girin"})]})]}),be==="quick-add-book"&&Ht&&e.jsxs("div",{children:[e.jsx("button",{onClick:()=>Ft(null),style:{marginBottom:"16px",padding:"8px 16px",borderRadius:"6px",border:"1px solid #e5e7eb",background:"#f3f4f6",cursor:"pointer",fontWeight:600},children:" Geri"}),Ht==="api"&&e.jsxs("div",{style:{display:"flex",flexDirection:"column",gap:"16px"},children:[e.jsxs("div",{style:{display:"flex",gap:"12px",flexWrap:"wrap"},children:[e.jsxs("div",{style:{flex:1,minWidth:"120px"},children:[e.jsx("label",{style:{display:"block",marginBottom:"6px",fontWeight:600,fontSize:"14px"},children:"Arama Tr"}),e.jsxs("select",{value:Dt,onChange:j=>Zt(j.target.value),style:{width:"100%",padding:"8px",borderRadius:"6px",border:"1px solid #e5e7eb"},children:[e.jsx("option",{value:"title",children:"Kitap Bal"}),e.jsx("option",{value:"author",children:"Yazar Ad"})]})]}),e.jsxs("div",{style:{flex:2,minWidth:"200px"},children:[e.jsx("label",{style:{display:"block",marginBottom:"6px",fontWeight:600,fontSize:"14px"},children:"Arama Sorgusu"}),e.jsxs("div",{style:{display:"flex",gap:"8px"},children:[e.jsx("input",{type:"text",value:rt,onChange:j=>yt(j.target.value),onKeyPress:j=>j.key==="Enter"&&jn(),placeholder:Dt==="title"?"rn: Kara Kitap":"rn: Orhan Pamuk",style:{flex:1,padding:"8px",borderRadius:"6px",border:"1px solid #e5e7eb"}}),e.jsx("button",{onClick:jn,disabled:Tt,style:{padding:"8px 16px",backgroundColor:"#2563eb",color:"white",border:"none",borderRadius:"6px",cursor:Tt?"not-allowed":"pointer",fontWeight:600},children:Tt?"Aranyor...":""})]})]})]}),bn&&e.jsx("div",{style:{padding:"10px",borderRadius:"6px",backgroundColor:bn.type==="success"?"#d1fae5":"#fee2e2",color:bn.type==="success"?"#065f46":"#991b1b",fontSize:"14px"},children:bn.text}),Ut.length>0&&e.jsx("div",{style:{display:"flex",flexDirection:"column",gap:"12px",maxHeight:"300px",overflowY:"auto"},children:Ut.map((j,we)=>{const X=Y.has(we);return e.jsx("div",{onClick:()=>dt(we),style:{padding:"12px",border:`2px solid ${X?"#2563eb":"#e5e7eb"}`,borderRadius:"8px",cursor:"pointer",backgroundColor:X?"#eff6ff":"white"},children:e.jsxs("div",{style:{display:"flex",gap:"8px",alignItems:"flex-start"},children:[e.jsx("input",{type:"checkbox",checked:X,onChange:()=>dt(we),onClick:pt=>pt.stopPropagation(),style:{marginTop:"4px"}}),e.jsxs("div",{style:{flex:1},children:[e.jsx("div",{style:{fontWeight:600,color:"#1f2937",marginBottom:"4px"},children:j.title}),e.jsxs("div",{style:{fontSize:"13px",color:"#6b7280"},children:[j.author,"  ",j.category]}),j.publisher&&e.jsxs("div",{style:{fontSize:"12px",color:"#9ca3af",marginTop:"4px"},children:["Yaynevi: ",j.publisher]})]})]})},we)})}),Y.size>0&&e.jsxs("button",{onClick:on,disabled:Tt,style:{width:"100%",padding:"10px",borderRadius:"6px",border:"none",background:Tt?"#94a3b8":"#10b981",color:"white",cursor:Tt?"not-allowed":"pointer",fontWeight:600},children:[e.jsxs("svg",{width:"18",height:"18",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",style:{marginRight:"8px"},children:[e.jsx("path",{d:"M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4"}),e.jsx("polyline",{points:"7 10 12 15 17 10"}),e.jsx("line",{x1:"12",y1:"15",x2:"12",y2:"3"})]}),Tt?"Ekleniyor...":` Seili Kitaplar Ekle (${Y.size})`]})]}),Ht==="file"&&e.jsxs("div",{style:{display:"flex",flexDirection:"column",gap:"16px"},children:[e.jsxs("div",{children:[e.jsx("label",{style:{display:"block",marginBottom:"6px",fontWeight:600,fontSize:"14px"},children:"Dosya Se"}),e.jsxs("div",{style:{padding:"16px",backgroundColor:"#f9fafb",borderRadius:"8px",border:"2px dashed #e5e7eb"},children:[e.jsx("label",{htmlFor:"quick-file-upload",style:{display:"inline-block",padding:"10px 20px",backgroundColor:"#2563eb",color:"white",borderRadius:"6px",cursor:"pointer",fontWeight:600,fontSize:"14px"},children:" Dosya Se"}),e.jsx("input",{id:"quick-file-upload",type:"file",accept:"image/jpeg,image/png,image/jpg,application/pdf",onChange:at,style:{display:"none"}}),g&&e.jsx("div",{style:{marginTop:"12px",padding:"12px",backgroundColor:"white",borderRadius:"6px",border:"1px solid #e5e7eb"},children:e.jsxs("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center"},children:[e.jsxs("div",{children:[e.jsx("div",{style:{fontWeight:600,marginBottom:"4px"},children:g.name}),e.jsxs("div",{style:{fontSize:"12px",color:"#6b7280"},children:[(g.size/1024).toFixed(2)," KB"]})]}),e.jsx("button",{onClick:()=>R(null),style:{padding:"4px 12px",backgroundColor:"#ef4444",color:"white",border:"none",borderRadius:"4px",cursor:"pointer",fontSize:"12px"},children:"Kaldr"})]})})]}),e.jsxs("div",{style:{marginTop:"12px",padding:"12px",backgroundColor:"#fef3c7",borderRadius:"6px",border:"1px solid #fcd34d",fontSize:"13px",color:"#92400e"},children:[e.jsx("strong",{children:"Kabul edilen formatlar:"})," JPG, PNG, PDF"]})]}),ge&&e.jsx("div",{style:{padding:"10px",borderRadius:"6px",backgroundColor:ge.type==="success"?"#d1fae5":"#fee2e2",color:ge.type==="success"?"#065f46":"#991b1b",fontSize:"14px"},children:ge.text}),g&&e.jsx("button",{onClick:p,disabled:J,style:{width:"100%",padding:"10px",borderRadius:"6px",border:"none",background:J?"#94a3b8":"#10b981",color:"white",cursor:J?"not-allowed":"pointer",fontWeight:600},children:J?"Ykleniyor...":" Dosyay Ykle"})]}),Ht==="manual"&&e.jsxs("div",{style:{display:"flex",flexDirection:"column",gap:"12px"},children:[e.jsxs("div",{children:[e.jsx("label",{style:{display:"block",marginBottom:"4px",fontWeight:600},children:"Kitap Ad *"}),e.jsx("input",{type:"text",value:$e,onChange:j=>Xe(j.target.value),placeholder:"Kitap ad",style:{width:"100%",padding:"8px",borderRadius:"6px",border:"1px solid #e5e7eb"}})]}),e.jsxs("div",{children:[e.jsx("label",{style:{display:"block",marginBottom:"4px",fontWeight:600},children:"Yazar *"}),e.jsx("input",{type:"text",value:Ge,onChange:j=>mt(j.target.value),placeholder:"Yazar ad",style:{width:"100%",padding:"8px",borderRadius:"6px",border:"1px solid #e5e7eb"}})]}),e.jsxs("div",{children:[e.jsx("label",{style:{display:"block",marginBottom:"4px",fontWeight:600},children:"Kategori"}),e.jsx("input",{type:"text",value:kt,onChange:j=>ot(j.target.value),placeholder:"Kategori (opsiyonel)",style:{width:"100%",padding:"8px",borderRadius:"6px",border:"1px solid #e5e7eb"}})]}),e.jsxs("div",{children:[e.jsx("label",{style:{display:"block",marginBottom:"4px",fontWeight:600},children:"Adet"}),e.jsx("input",{type:"number",value:We,onChange:j=>st(parseInt(j.target.value)||1),min:"1",style:{width:"100%",padding:"8px",borderRadius:"6px",border:"1px solid #e5e7eb"}})]}),e.jsxs("button",{onClick:O,disabled:!$e.trim()||!Ge.trim(),style:{width:"100%",padding:"10px",borderRadius:"6px",border:"none",background:$e.trim()&&Ge.trim()?"#3b82f6":"#94a3b8",color:"white",cursor:$e.trim()&&Ge.trim()?"pointer":"not-allowed",fontWeight:600},children:[e.jsxs("svg",{width:"18",height:"18",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",style:{marginRight:"8px"},children:[e.jsx("path",{d:"M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4"}),e.jsx("polyline",{points:"7 10 12 15 17 10"}),e.jsx("line",{x1:"12",y1:"15",x2:"12",y2:"3"})]}),"Kitap Ekle"]})]})]}),be==="quick-borrow"&&e.jsxs("div",{style:{display:"flex",flexDirection:"column",gap:"16px"},children:[e.jsxs("div",{children:[e.jsx("label",{style:{display:"block",marginBottom:"4px",fontWeight:600},children:"Kitap Ara ve Se *"}),e.jsx("input",{type:"text",value:Ae,onChange:j=>Be(j.target.value),placeholder:"Kitap ad, yazar veya kategori ile ara...",style:{width:"100%",padding:"10px"}}),Ae&&e.jsx("div",{style:{marginTop:"8px",maxHeight:"260px",overflowY:"auto",border:"1px solid #e5e7eb",borderRadius:"8px",background:"white"},children:It.length===0?e.jsx("div",{style:{padding:"12px",textAlign:"center",color:"#6b7280"},children:"Kayt bulunamad"}):It.map(j=>e.jsxs("div",{onClick:()=>{Ee(j.id||null),Be(j.title||"")},style:{padding:"12px",borderBottom:"1px solid #f3f4f6",cursor:"pointer",background:Bt===j.id?"#eff6ff":"white"},children:[e.jsx("div",{style:{fontWeight:600,color:"#1f2937"},children:j.title}),e.jsxs("div",{style:{fontSize:"13px",color:"#6b7280"},children:[j.author,"  ",j.category]}),e.jsxs("div",{style:{fontSize:"12px",color:"#9ca3af"},children:["Adet: ",j.quantity,"/",j.totalQuantity]})]},j.id))})]}),e.jsxs("div",{children:[e.jsx("label",{style:{display:"block",marginBottom:"4px",fontWeight:600,fontSize:"14px"},children:"renci Ara ve Se *"}),e.jsx("input",{type:"text",value:ye,onChange:j=>Ve(j.target.value),placeholder:"renci ad ile ara...",style:{width:"100%",padding:"10px"}}),ye&&e.jsx("div",{style:{marginTop:"8px",maxHeight:"300px",overflowY:"auto",border:"1px solid #e5e7eb",borderRadius:"8px",backgroundColor:"white"},children:hn.length>0?hn.map(j=>{const we=Rn(j);return e.jsxs("div",{onClick:()=>{c(we),Ve("")},style:{padding:"12px",cursor:"pointer",borderBottom:"1px solid #f3f4f6",backgroundColor:Et===we?"#eff6ff":"white",transition:"background-color 0.2s"},onMouseEnter:X=>{Et!==we&&(X.currentTarget.style.backgroundColor="#f9fafb")},onMouseLeave:X=>{Et!==we&&(X.currentTarget.style.backgroundColor="white")},children:[e.jsxs("div",{style:{fontWeight:600,color:"#1f2937",marginBottom:"6px"},children:[j.name," ",j.surname]}),e.jsxs("div",{style:{fontSize:"12px",color:"#6b7280",display:"flex",gap:"12px",flexWrap:"wrap"},children:[e.jsxs("span",{children:[e.jsx("strong",{children:"dn:"})," ",j.borrowed]}),e.jsxs("span",{children:[e.jsx("strong",{children:"ade:"})," ",j.returned]}),e.jsxs("span",{children:[e.jsx("strong",{children:"Geciken:"})," ",e.jsx("span",{style:{color:j.late>0?"#ef4444":"#10b981",fontWeight:600},children:j.late})]}),e.jsxs("span",{children:[e.jsx("strong",{children:"Aktif dn:"})," ",n.filter(pt=>(pt.borrower===we||pt.borrower===j.name)&&t.some(qe=>qe.id===pt.bookId)).length]})]})]},we)}):e.jsx("div",{style:{padding:"20px",textAlign:"center",color:"#6b7280"},children:"Arama sonucu bulunamad"})}),Et&&e.jsxs("div",{style:{marginTop:"8px",padding:"16px",backgroundColor:"#eff6ff",borderRadius:"8px",border:"1px solid #3b82f6"},children:[e.jsxs("div",{style:{fontWeight:600,marginBottom:"12px",fontSize:"16px",color:"#1f2937"},children:["Seilen renci: ",Et]}),(()=>{const j=i.find(we=>we.name===Et||`${we.name} ${we.surname}`.trim()===Et||we.surname===Et);return j?e.jsxs("div",{style:{display:"flex",flexDirection:"column",gap:"8px",marginBottom:"12px"},children:[e.jsxs("div",{style:{display:"flex",gap:"16px",flexWrap:"wrap"},children:[e.jsxs("div",{style:{fontSize:"14px"},children:[e.jsx("strong",{children:"Toplam dn:"})," ",j.borrowed]}),e.jsxs("div",{style:{fontSize:"14px"},children:[e.jsx("strong",{children:"ade:"})," ",j.returned]}),e.jsxs("div",{style:{fontSize:"14px"},children:[e.jsx("strong",{children:"Geciken Kitap:"})," ",e.jsx("span",{style:{color:j.late>0?"#ef4444":"#10b981",fontWeight:600},children:j.late})]}),e.jsxs("div",{style:{fontSize:"14px"},children:[e.jsx("strong",{children:"Aktif dn:"})," ",(()=>{const X=n.filter(pt=>pt.borrower===Et&&t.some(qe=>qe.id===pt.bookId)).length;return e.jsxs(e.Fragment,{children:[e.jsx("span",{style:{color:X>0?"#3b82f6":"#10b981",fontWeight:600},children:X}),e.jsxs("span",{style:{fontSize:"12px",color:"#64748b",marginLeft:"8px"},children:["/ ",_n," (Limit)"]})]})})()]})]}),j.late>0&&e.jsxs("div",{style:{padding:"8px",backgroundColor:"#fee2e2",borderRadius:"6px",color:"#dc2626",fontSize:"13px",fontWeight:600},children:[" Bu rencinin ",j.late," geciken kitab var!"]})]}):null})(),e.jsx("button",{onClick:()=>{c("")},style:{padding:"6px 16px",fontSize:"13px",backgroundColor:"#ef4444",color:"white",border:"none",borderRadius:"6px",cursor:"pointer",fontWeight:600},children:"Seimi Kaldr"})]})]}),e.jsxs("div",{children:[e.jsx("label",{style:{display:"block",marginBottom:"4px",fontWeight:600},children:"dn Sresi"}),e.jsx("select",{value:nn,onChange:j=>Te(parseInt(j.target.value)||14),style:{width:"100%",padding:"10px",borderRadius:"6px",border:"1px solid #e5e7eb"},children:[7,10,14,21,30].map(j=>e.jsxs("option",{value:j,children:[j," gn"]},j))})]}),e.jsxs("button",{onClick:E,disabled:!Bt||!Et.trim(),style:{width:"100%",padding:"10px",borderRadius:"6px",border:"none",background:Bt&&Et.trim()?"#10b981":"#94a3b8",color:"white",cursor:Bt&&Et.trim()?"pointer":"not-allowed",fontWeight:600,display:"flex",alignItems:"center",justifyContent:"center",gap:"6px"},children:[e.jsxs("svg",{width:"16",height:"16",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:[e.jsx("path",{d:"M4 19.5A2.5 2.5 0 0 1 6.5 17H20"}),e.jsx("path",{d:"M6.5 2H20v20H6.5A2.5 2.5 0 0 1 4 19.5v-15A2.5 2.5 0 0 1 6.5 2z"}),e.jsx("path",{d:"M9 9l3 3 3-3"})]}),"dn Ver"]})]}),pn&&Gt&&_t.createPortal(e.jsx("div",{style:{position:"fixed",top:0,left:0,right:0,bottom:0,backgroundColor:"rgba(0, 0, 0, 0.5)",display:"flex",alignItems:"center",justifyContent:"center",zIndex:10002},onClick:j=>{j.target===j.currentTarget&&(nr(!1),Zn(null))},children:e.jsxs("div",{style:{backgroundColor:"white",borderRadius:"12px",padding:"24px",maxWidth:"500px",width:"90%",boxShadow:"0 20px 25px -5px rgba(0, 0, 0, 0.1), 0 10px 10px -5px rgba(0, 0, 0, 0.04)"},onClick:j=>j.stopPropagation(),children:[e.jsxs("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center",marginBottom:"20px"},children:[e.jsx("h2",{style:{margin:0,color:"#1e293b",fontSize:"20px",fontWeight:600},children:" Kitap Limiti Uyars"}),e.jsx("button",{onClick:()=>{nr(!1),Zn(null)},style:{background:"none",border:"none",fontSize:"24px",cursor:"pointer",color:"#64748b",padding:0,width:"32px",height:"32px",display:"flex",alignItems:"center",justifyContent:"center"},children:""})]}),(()=>{const j=i.find(Yt=>Yt.name===Gt.student||`${Yt.name} ${Yt.surname}`.trim()===Gt.student||Yt.surname===Gt.student);if(!j)return null;const we=Rn(j),X=L(Gt.books,we),qe=n.filter(Yt=>Yt.borrower===Gt.student&&t.some(wr=>wr.id===Yt.bookId)).length,mn=qe+X.length,Hn=mn-_n,Pt=Gt.books.length-X.length;return e.jsxs(e.Fragment,{children:[e.jsxs("div",{style:{marginBottom:"20px"},children:[e.jsxs("div",{style:{fontSize:"14px",color:"#475569",marginBottom:"12px",lineHeight:"1.6"},children:[e.jsx("strong",{children:Gt.student})," rencisi u anda ",e.jsx("strong",{children:qe})," kitap dn alm durumda."]}),Pt>0&&e.jsxs("div",{style:{padding:"8px",backgroundColor:"#fee2e2",borderRadius:"6px",color:"#dc2626",fontSize:"13px",fontWeight:600,marginBottom:"12px"},children:[" Seilen kitaplardan ",e.jsx("strong",{children:Pt})," tanesi renci tarafndan zaten dn alnm. Bu kitaplar verilmeyecek."]}),e.jsxs("div",{style:{fontSize:"14px",color:"#475569",marginBottom:"12px",lineHeight:"1.6"},children:["Verilebilecek ",e.jsx("strong",{children:X.length})," kitap eklendiinde toplam ",e.jsx("strong",{children:mn})," kitap olacak."]}),e.jsxs("div",{style:{padding:"12px",backgroundColor:"#fef3c7",borderRadius:"8px",border:"1px solid #fbbf24",marginBottom:"12px"},children:[e.jsx("div",{style:{fontSize:"14px",color:"#92400e",fontWeight:600,marginBottom:"4px"},children:" Limit Am"}),e.jsxs("div",{style:{fontSize:"13px",color:"#78350f"},children:["Bir renci en fazla ",e.jsxs("strong",{children:[_n," kitap"]})," alabilir. Bu ilem sonras renci ",e.jsxs("strong",{children:[Hn," kitap fazla"]})," alacak.",Pt>0&&e.jsxs("span",{style:{display:"block",marginTop:"4px",fontSize:"12px"},children:["Not: ",Pt," kitap zaten dnte olduu iin verilmeyecek."]})]})]}),e.jsxs("div",{style:{fontSize:"13px",color:"#64748b",marginTop:"12px"},children:[e.jsxs("strong",{children:["Verilebilecek Kitaplar (",X.length,"):"]}),e.jsx("ul",{style:{marginTop:"8px",paddingLeft:"20px",fontSize:"12px"},children:X.map(Yt=>e.jsxs("li",{style:{marginBottom:"4px"},children:[Yt.title," - ",Yt.author]},Yt.id))}),Pt>0&&e.jsxs(e.Fragment,{children:[e.jsxs("strong",{style:{color:"#dc2626",marginTop:"12px",display:"block"},children:["Zaten dnte Olan Kitaplar (",Pt,"):"]}),e.jsx("ul",{style:{marginTop:"8px",paddingLeft:"20px",fontSize:"12px",color:"#9ca3af"},children:Gt.books.filter(Yt=>!X.some(wr=>wr.id===Yt.id)).map(Yt=>e.jsxs("li",{style:{marginBottom:"4px",textDecoration:"line-through"},children:[Yt.title," - ",Yt.author]},Yt.id))})]})]})]}),e.jsxs("div",{style:{display:"flex",gap:"12px",justifyContent:"flex-end"},children:[e.jsx("button",{onClick:()=>{nr(!1),Zn(null)},style:{padding:"10px 20px",fontSize:"14px",backgroundColor:"#f3f4f6",color:"#374151",border:"none",borderRadius:"6px",cursor:"pointer",fontWeight:600},children:"ptal"}),e.jsxs("button",{onClick:je,disabled:X.length===0,style:{padding:"10px 20px",fontSize:"14px",backgroundColor:X.length===0?"#94a3b8":"#ef4444",color:"white",border:"none",borderRadius:"6px",cursor:X.length===0?"not-allowed":"pointer",fontWeight:600,display:"flex",alignItems:"center",justifyContent:"center",gap:"6px"},children:[e.jsxs("svg",{width:"16",height:"16",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:[e.jsx("path",{d:"M4 19.5A2.5 2.5 0 0 1 6.5 17H20"}),e.jsx("path",{d:"M6.5 2H20v20H6.5A2.5 2.5 0 0 1 4 19.5v-15A2.5 2.5 0 0 1 6.5 2z"}),e.jsx("path",{d:"M9 9l3 3 3-3"})]}),"Yine de dn Ver (",X.length," kitap)"]})]})]})})()]})}),document.body),be==="quick-return"&&e.jsxs("div",{style:{display:"flex",flexDirection:"column",gap:"12px"},children:[e.jsxs("div",{children:[e.jsx("label",{style:{display:"block",marginBottom:"4px",fontWeight:600},children:"dn Ara ve Se"}),e.jsx("input",{type:"text",value:jt,onChange:j=>{zt(j.target.value),N&&oe(null)},placeholder:"Kitap ad, yazar veya renci ile ara...",style:{width:"100%",padding:"10px"}}),N?(()=>{const j=n.find(qe=>`${qe.bookId}-${qe.borrower}`===N);if(!j)return null;const we=F(j.dueDate),X=we<0,pt=X?`Gecikmi (${Math.abs(we)} gn)`:we===0?"Bugn Son Gn":`${we} gn kald`;return e.jsx("div",{style:{marginTop:"8px",padding:"16px",border:"2px solid #3b82f6",borderRadius:"8px",background:"#eff6ff"},children:e.jsxs("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"flex-start",marginBottom:"12px"},children:[e.jsxs("div",{style:{flex:1},children:[e.jsx("div",{style:{fontWeight:700,color:"#1f2937",fontSize:"16px",marginBottom:"8px"},children:j.title}),e.jsxs("div",{style:{fontSize:"14px",color:"#6b7280",marginBottom:"4px"},children:[e.jsx("strong",{children:"Yazar:"})," ",j.author]}),e.jsxs("div",{style:{fontSize:"14px",color:"#6b7280",marginBottom:"4px"},children:[e.jsx("strong",{children:"renci:"})," ",j.borrower]}),e.jsxs("div",{style:{fontSize:"14px",color:"#6b7280",marginBottom:"4px"},children:[e.jsx("strong",{children:"Kategori:"})," ",j.category]}),e.jsxs("div",{style:{fontSize:"14px",color:"#6b7280",marginBottom:"4px"},children:[e.jsx("strong",{children:"Biti Tarihi:"})," ",new Date(j.dueDate).toLocaleDateString("tr-TR",{year:"numeric",month:"long",day:"numeric"})]}),e.jsxs("div",{style:{fontSize:"14px",color:X?"#dc2626":"#f59e0b",fontWeight:700},children:[e.jsx("strong",{children:"Durum:"})," ",pt]})]}),e.jsx("button",{onClick:()=>{oe(null),zt("")},style:{padding:"4px 12px",backgroundColor:"#ef4444",color:"white",border:"none",borderRadius:"4px",cursor:"pointer",fontSize:"12px",fontWeight:600},children:""})]})})})():jt.trim().length>0?e.jsx("div",{style:{marginTop:"8px",maxHeight:"260px",overflowY:"auto",border:"1px solid #e5e7eb",borderRadius:"8px",background:"white"},children:$n.length===0?e.jsx("div",{style:{padding:"12px",textAlign:"center",color:"#6b7280"},children:"Arama kriterlerinize uygun kayt bulunamad"}):$n.map((j,we)=>{const X=F(j.dueDate),pt=X<0,qe=pt?`Gecikmi (${Math.abs(X)} gn)`:X===0?"Bugn Son Gn":`${X} gn kald`;return e.jsxs("div",{onClick:()=>{oe(`${j.bookId}-${j.borrower}`),zt(`${j.title} - ${j.borrower}`)},style:{padding:"12px",borderBottom:"1px solid #f3f4f6",cursor:"pointer",background:"white"},onMouseEnter:mn=>{mn.currentTarget.style.backgroundColor="#f9fafb"},onMouseLeave:mn=>{mn.currentTarget.style.backgroundColor="white"},children:[e.jsx("div",{style:{fontWeight:600,color:"#1f2937"},children:j.title}),e.jsxs("div",{style:{fontSize:"13px",color:"#6b7280"},children:[j.borrower,"  ",j.author]}),e.jsx("div",{style:{fontSize:"12px",color:pt?"#dc2626":"#f59e0b",fontWeight:600},children:qe})]},`${j.bookId}-${j.borrower}-${we}`)})}):null]}),e.jsxs("button",{onClick:Rt,disabled:!N,style:{width:"100%",padding:"10px",borderRadius:"6px",border:"none",background:N?"#f59e0b":"#94a3b8",color:"white",cursor:N?"pointer":"not-allowed",fontWeight:600,display:"flex",alignItems:"center",justifyContent:"center",gap:"6px"},children:[e.jsx("svg",{width:"16",height:"16",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:e.jsx("polyline",{points:"20 6 9 17 4 12"})}),"Teslim Al"]})]}),be==="quick-stock"&&e.jsxs("div",{style:{display:"flex",flexDirection:"column",gap:"12px",maxHeight:"70vh",overflow:"hidden"},children:[e.jsxs("div",{style:{display:"flex",gap:"12px",marginBottom:"8px"},children:[e.jsxs("button",{onClick:()=>Lt("low"),style:{flex:1,padding:"10px",borderRadius:"8px",border:tt==="low"?"2px solid #f59e0b":"1px solid #e5e7eb",background:tt==="low"?"#fffbeb":"#fff",cursor:"pointer",fontWeight:700,color:"#d97706"},children:["2 Adet (",ae.length,")"]}),e.jsxs("button",{onClick:()=>Lt("out"),style:{flex:1,padding:"10px",borderRadius:"8px",border:tt==="out"?"2px solid #ef4444":"1px solid #e5e7eb",background:tt==="out"?"#fef2f2":"#fff",cursor:"pointer",fontWeight:700,color:"#b91c1c"},children:["Tkenen (",ct.length,")"]}),e.jsxs("button",{onClick:()=>Lt("all"),style:{flex:1,padding:"10px",borderRadius:"8px",border:tt==="all"?"2px solid #3b82f6":"1px solid #e5e7eb",background:tt==="all"?"#eff6ff":"#fff",cursor:"pointer",fontWeight:700,color:"#1d4ed8"},children:["Tm (",t.length,")"]})]}),e.jsx("div",{style:{marginBottom:"8px"},children:e.jsx("input",{type:"text",value:nt,onChange:j=>At(j.target.value),placeholder:"Adet listesinde ara (kitap, yazar, kategori)",style:{width:"100%",padding:"10px",borderRadius:"8px",border:"1px solid #e5e7eb"}})}),e.jsx("div",{style:{flex:1,overflow:"auto",maxHeight:"calc(70vh - 140px)"},children:ht.length===0?e.jsx("p",{style:{color:"#94a3b8",margin:0},children:"Kayt bulunamad."}):e.jsxs("table",{className:"book-table",style:{width:"100%"},children:[e.jsx("thead",{children:e.jsxs("tr",{children:[e.jsxs("th",{onClick:()=>{he==="title"?Nt(Ue==="asc"?"desc":"asc"):(it("title"),Nt("asc"))},style:{cursor:"pointer",userSelect:"none"},children:["Kitap ",he==="title"&&(Ue==="asc"?"":"")]}),e.jsxs("th",{onClick:()=>{he==="author"?Nt(Ue==="asc"?"desc":"asc"):(it("author"),Nt("asc"))},style:{cursor:"pointer",userSelect:"none"},children:["Yazar ",he==="author"&&(Ue==="asc"?"":"")]}),e.jsxs("th",{onClick:()=>{he==="category"?Nt(Ue==="asc"?"desc":"asc"):(it("category"),Nt("asc"))},style:{cursor:"pointer",userSelect:"none"},children:["Kategori ",he==="category"&&(Ue==="asc"?"":"")]}),e.jsxs("th",{onClick:()=>{he==="quantity"?Nt(Ue==="asc"?"desc":"asc"):(it("quantity"),Nt("asc"))},style:{cursor:"pointer",userSelect:"none"},children:["Adet ",he==="quantity"&&(Ue==="asc"?"":"")]}),e.jsxs("th",{onClick:()=>{he==="loans"?Nt(Ue==="asc"?"desc":"asc"):(it("loans"),Nt("asc"))},style:{cursor:"pointer",userSelect:"none"},children:["dnte ",he==="loans"&&(Ue==="asc"?"":"")]}),e.jsxs("th",{onClick:()=>{he==="totalQuantity"?Nt(Ue==="asc"?"desc":"asc"):(it("totalQuantity"),Nt("asc"))},style:{cursor:"pointer",userSelect:"none"},children:["Toplam ",he==="totalQuantity"&&(Ue==="asc"?"":"")]}),e.jsx("th",{children:"Adet lem"})]})}),e.jsx("tbody",{children:ht.map(j=>{var we;return e.jsxs("tr",{children:[e.jsx("td",{children:j.title}),e.jsx("td",{children:j.author}),e.jsx("td",{children:j.category}),e.jsx("td",{style:{fontWeight:700,color:j.quantity===0?"#b91c1c":"#d97706"},children:j.quantity}),e.jsx("td",{children:((we=j.loans)==null?void 0:we.length)??0}),e.jsx("td",{children:j.totalQuantity}),e.jsx("td",{children:e.jsxs("div",{style:{display:"flex",gap:"6px",alignItems:"center",justifyContent:"center"},children:[e.jsx("button",{onClick:X=>{X.stopPropagation(),!A&&(j.quantity||0)>0&&T!==j.id&&Jt(j.id,-1)},disabled:A||(j.quantity||0)<=0||T===j.id,style:{width:"32px",height:"32px",padding:0,borderRadius:"999px",border:"1px solid #e5e7eb",background:A||(j.quantity||0)<=0||T===j.id?"#f3f4f6":"#fff",cursor:A||(j.quantity||0)<=0||T===j.id?"not-allowed":"pointer",fontWeight:700,fontSize:"18px",display:"flex",alignItems:"center",justifyContent:"center",lineHeight:1,color:A||(j.quantity||0)<=0||T===j.id?"#9ca3af":"#374151"},children:T===j.id?"...":"-"}),e.jsx("button",{onClick:X=>{X.stopPropagation(),!A&&T!==j.id&&Jt(j.id,1)},disabled:A||T===j.id,style:{width:"32px",height:"32px",padding:0,borderRadius:"999px",border:"1px solid #e5e7eb",background:A||T===j.id?"#f3f4f6":"#fff",cursor:A||T===j.id?"not-allowed":"pointer",fontWeight:700,fontSize:"18px",display:"flex",alignItems:"center",justifyContent:"center",lineHeight:1,color:A||T===j.id?"#9ca3af":"#374151"},children:T===j.id?"...":"+"})]})})]},j.id||j.title)})})]})})]})]})})}),document.body)};return e.jsxs("div",{style:{display:"flex",gap:"24px",alignItems:"flex-start",color:"#1e293b"},children:[e.jsx("div",{style:{width:"280px",position:"sticky",top:"24px",maxHeight:"calc(100vh - 48px)",overflowY:"auto"},children:e.jsx("div",{className:"card",style:{padding:"16px",background:"linear-gradient(135deg, #dbeafe 0%, #bfdbfe 50%, #93c5fd 100%)",border:"1px solid rgba(59, 130, 246, 0.3)",boxShadow:"0 8px 24px rgba(30, 64, 175, 0.15)"},children:e.jsxs("div",{style:{display:"flex",flexDirection:"column",gap:"12px"},children:[xo.map(W=>e.jsx("div",{onClick:()=>Wn(W.id),style:{backgroundColor:y===W.id?"rgba(255, 255, 255, 0.7)":"rgba(255, 255, 255, 0.5)",backdropFilter:"blur(10px)",color:y===W.id?"#1e40af":"#475569",padding:"16px 20px",borderRadius:"12px",cursor:"pointer",boxShadow:y===W.id?"0 6px 16px rgba(30, 64, 175, 0.2)":"0 4px 6px rgba(0, 0, 0, 0.05)",transition:"all 0.3s ease",border:y===W.id?"2px solid rgba(59, 130, 246, 0.4)":"2px solid rgba(59, 130, 246, 0.2)",fontWeight:y===W.id?700:600},onMouseEnter:j=>{y!==W.id&&(j.currentTarget.style.backgroundColor="rgba(255, 255, 255, 0.6)",j.currentTarget.style.borderColor="rgba(59, 130, 246, 0.3)",j.currentTarget.style.color="#1e40af",j.currentTarget.style.transform="translateY(-2px)",j.currentTarget.style.boxShadow="0 6px 16px rgba(30, 64, 175, 0.15)")},onMouseLeave:j=>{y!==W.id&&(j.currentTarget.style.backgroundColor="rgba(255, 255, 255, 0.5)",j.currentTarget.style.borderColor="rgba(59, 130, 246, 0.2)",j.currentTarget.style.color="#475569",j.currentTarget.style.transform="translateY(0)",j.currentTarget.style.boxShadow="0 4px 6px rgba(0, 0, 0, 0.05)")},children:e.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"12px"},children:[e.jsx("span",{style:{display:"flex",alignItems:"center",justifyContent:"center",width:"32px",height:"32px",color:y===W.id?"#1e40af":"#475569",transition:"all 0.3s ease"},children:W.icon}),e.jsxs("div",{style:{flex:1},children:[e.jsx("div",{style:{fontWeight:y===W.id?700:600,fontSize:"15px",color:y===W.id?"#1e40af":"#475569"},children:W.title}),e.jsx("div",{style:{fontSize:"12px",opacity:.8,marginTop:"2px",color:y===W.id?"#334155":"#64748b"},children:W.description})]})]})},W.id)),vn.map(W=>e.jsx("div",{onClick:()=>Wn(W.id),style:{backgroundColor:y===W.id?"rgba(255, 255, 255, 0.7)":"rgba(255, 255, 255, 0.5)",backdropFilter:"blur(10px)",color:y===W.id?"#1e40af":"#475569",padding:"16px 20px",borderRadius:"12px",cursor:"pointer",boxShadow:y===W.id?"0 6px 16px rgba(30, 64, 175, 0.2)":"0 4px 6px rgba(0, 0, 0, 0.05)",transition:"all 0.3s ease",border:y===W.id?"2px solid rgba(59, 130, 246, 0.4)":"2px solid rgba(59, 130, 246, 0.2)",fontWeight:y===W.id?700:600},onMouseEnter:j=>{y!==W.id&&(j.currentTarget.style.backgroundColor="rgba(255, 255, 255, 0.6)",j.currentTarget.style.borderColor="rgba(59, 130, 246, 0.3)",j.currentTarget.style.color="#1e40af",j.currentTarget.style.transform="translateY(-2px)",j.currentTarget.style.boxShadow="0 6px 16px rgba(30, 64, 175, 0.15)")},onMouseLeave:j=>{y!==W.id&&(j.currentTarget.style.backgroundColor="rgba(255, 255, 255, 0.5)",j.currentTarget.style.borderColor="rgba(59, 130, 246, 0.2)",j.currentTarget.style.color="#475569",j.currentTarget.style.transform="translateY(0)",j.currentTarget.style.boxShadow="0 4px 6px rgba(0, 0, 0, 0.05)")},children:e.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"12px"},children:[e.jsx("span",{style:{display:"flex",alignItems:"center",justifyContent:"center",width:"32px",height:"32px",color:y===W.id?"#1e40af":"#475569",transition:"all 0.3s ease"},children:W.icon}),e.jsxs("div",{style:{flex:1},children:[e.jsx("div",{style:{fontWeight:y===W.id?700:600,fontSize:"15px",color:y===W.id?"#1e40af":"#475569"},children:W.title}),e.jsx("div",{style:{fontSize:"12px",opacity:.8,marginTop:"2px",color:y===W.id?"#334155":"#64748b"},children:W.description})]})]})},W.id))]})})}),e.jsx("div",{style:{flex:1,minWidth:0},children:Ms()}),re&&_t.createPortal(e.jsx("div",{style:{position:"fixed",top:0,left:0,right:0,bottom:0,backgroundColor:"rgba(0, 0, 0, 0.5)",display:"flex",alignItems:"center",justifyContent:"center",zIndex:10001,cursor:"pointer"},onClick:()=>ce(null),children:e.jsxs("div",{className:"card",style:{maxWidth:"1200px",width:"90%",maxHeight:"90vh",overflowY:"auto",overflowX:"hidden",position:"relative"},onClick:W=>W.stopPropagation(),children:[e.jsxs("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center",marginBottom:"16px",gap:"12px"},children:[e.jsxs("h2",{style:{margin:0,flex:1},children:[re==="active-loans"&&"Aktif dnler",re==="late-loans"&&"Geciken dnler",re==="due-soon"&&"Teslim Tarihi Yaklaanlar",re==="due-soon-0-3"&&"Teslim Tarihi Yaklaanlar",re==="due-soon-4-7"&&"Teslim Tarihi Yaklaanlar",re==="due-soon-8-14"&&"Teslim Tarihi Yaklaanlar",re==="due-soon-15plus"&&"Teslim Tarihi Yaklaanlar",re==="due-soon-list"&&"Teslim Tarihi Yaklaanlar",re==="top-borrowed"&&"En ok dn Alnan Kitaplar",re==="total-borrowed"&&`Tm dnler (${Q} kayt)`,re==="total-books"&&`Tm Kitaplar (${t.length} kitap)`,re==="total-students"&&`Tm renciler (${i.length} renci)`,re==="stock-low"&&`Azalan Adet (2) - ${ae.length} kitap`,re==="stock-out"&&`Tkenen Adet - ${ct.length} kitap`,re==="banned-students"&&`Cezal renciler (${Wt.length} renci)`]}),e.jsxs("div",{style:{display:"flex",gap:"8px",alignItems:"center"},children:[e.jsx("button",{onClick:()=>{const W=re==="total-students"||re==="banned-students"?"ogrenci":re==="total-books"||re==="top-borrowed"||re==="stock-low"||re==="stock-out"?"katalog":"odunc";ce(null),Wn(W)},style:{padding:"8px 12px",borderRadius:"6px",border:"1px solid #e5e7eb",background:"#2563eb",color:"white",cursor:"pointer",fontWeight:600},children:"Sayfaya Git"}),e.jsx("button",{onClick:()=>ce(null),style:{padding:"8px 12px",borderRadius:"6px",border:"1px solid #e5e7eb",background:"#fff",cursor:"pointer"},children:"Kapat"})]})]}),af()]})}),document.body),df(),De&&e.jsx(ao,{book:De,students:i,loans:n,books:t,personelName:B,onClose:()=>ft(null),onRefresh:o,onAddNotification:m}),e.jsx(o0,{loan:se,books:t,onClose:()=>fe(null),onReturn:me}),ze&&_t.createPortal(e.jsx("div",{style:{position:"fixed",top:0,left:0,right:0,bottom:0,background:"rgba(0, 0, 0, 0.5)",display:"flex",alignItems:"center",justifyContent:"center",zIndex:1e4,animation:"fadeIn 0.2s ease-out"},onClick:()=>P(null),children:e.jsxs("div",{style:{background:"linear-gradient(135deg, #3b82f6 0%, #60a5fa 50%, #93c5fd 100%)",borderRadius:"20px",padding:"32px",maxWidth:"600px",width:"90%",maxHeight:"90vh",overflowY:"auto",boxShadow:"0 20px 25px -5px rgba(30, 64, 175, 0.3)",border:"1px solid rgba(255, 255, 255, 0.2)",animation:"slideUp 0.3s ease-out"},onClick:W=>W.stopPropagation(),children:[e.jsxs("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center",marginBottom:"24px"},children:[e.jsx("h2",{style:{margin:0,color:"white",fontSize:"24px",fontWeight:800},children:"renci Detaylar"}),e.jsx("button",{onClick:()=>P(null),style:{background:"rgba(255, 255, 255, 0.15)",border:"2px solid rgba(255, 255, 255, 0.3)",borderRadius:"10px",cursor:"pointer",padding:"8px",color:"white",width:"36px",height:"36px",display:"flex",alignItems:"center",justifyContent:"center"},children:e.jsxs("svg",{width:"20",height:"20",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",children:[e.jsx("line",{x1:"18",y1:"6",x2:"6",y2:"18"}),e.jsx("line",{x1:"6",y1:"6",x2:"18",y2:"18"})]})})]}),e.jsxs("div",{style:{display:"flex",flexDirection:"column",gap:"20px"},children:[e.jsx("div",{style:{padding:"20px",background:"rgba(255, 255, 255, 0.15)",backdropFilter:"blur(10px)",borderRadius:"12px",border:"1px solid rgba(255, 255, 255, 0.2)"},children:e.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"16px",marginBottom:"16px"},children:[e.jsx("div",{style:{width:"60px",height:"60px",borderRadius:"50%",background:"rgba(255, 255, 255, 0.25)",display:"flex",alignItems:"center",justifyContent:"center",fontSize:"24px",fontWeight:700,color:"white"},children:ze.name.charAt(0).toUpperCase()}),e.jsxs("div",{children:[e.jsx("h3",{style:{margin:0,color:"white",fontSize:"20px",fontWeight:700},children:ze.name}),ze.studentNumber&&e.jsxs("p",{style:{margin:"4px 0 0 0",color:"rgba(255, 255, 255, 0.9)",fontSize:"14px"},children:["renci No: ",ze.studentNumber]})]})]})}),e.jsxs("div",{style:{display:"grid",gridTemplateColumns:"repeat(2, 1fr)",gap:"16px"},children:[e.jsxs("div",{style:{padding:"16px",background:"rgba(255, 255, 255, 0.15)",backdropFilter:"blur(10px)",borderRadius:"12px",border:"1px solid rgba(255, 255, 255, 0.2)"},children:[e.jsx("div",{style:{fontSize:"12px",color:"rgba(255, 255, 255, 0.8)",marginBottom:"8px",fontWeight:600,textTransform:"uppercase",letterSpacing:"0.5px"},children:"dn Alnan"}),e.jsx("div",{style:{fontSize:"28px",fontWeight:800,color:"white"},children:ze.borrowed||0})]}),e.jsxs("div",{style:{padding:"16px",background:"rgba(255, 255, 255, 0.15)",backdropFilter:"blur(10px)",borderRadius:"12px",border:"1px solid rgba(255, 255, 255, 0.2)"},children:[e.jsx("div",{style:{fontSize:"12px",color:"rgba(255, 255, 255, 0.8)",marginBottom:"8px",fontWeight:600,textTransform:"uppercase",letterSpacing:"0.5px"},children:"ade Edilen"}),e.jsx("div",{style:{fontSize:"28px",fontWeight:800,color:"white"},children:ze.returned||0})]}),e.jsxs("div",{style:{padding:"16px",background:"rgba(255, 255, 255, 0.15)",backdropFilter:"blur(10px)",borderRadius:"12px",border:"1px solid rgba(255, 255, 255, 0.2)"},children:[e.jsx("div",{style:{fontSize:"12px",color:"rgba(255, 255, 255, 0.8)",marginBottom:"8px",fontWeight:600,textTransform:"uppercase",letterSpacing:"0.5px"},children:"Aktif dn"}),e.jsx("div",{style:{fontSize:"28px",fontWeight:800,color:"white"},children:(ze.borrowed||0)-(ze.returned||0)})]}),e.jsxs("div",{style:{padding:"16px",background:"rgba(255, 255, 255, 0.15)",backdropFilter:"blur(10px)",borderRadius:"12px",border:"1px solid rgba(255, 255, 255, 0.2)"},children:[e.jsx("div",{style:{fontSize:"12px",color:"rgba(255, 255, 255, 0.8)",marginBottom:"8px",fontWeight:600,textTransform:"uppercase",letterSpacing:"0.5px"},children:"Ceza Puan"}),e.jsx("div",{style:{fontSize:"28px",fontWeight:800,color:(ze.penaltyPoints||0)>=Kt?"#ef4444":(ze.penaltyPoints||0)>0?"#f59e0b":"#10b981"},children:ze.penaltyPoints||0})]})]}),(()=>{const W=n.filter(j=>j.borrower===ze.name);return W.length===0?null:e.jsxs("div",{style:{marginTop:"8px"},children:[e.jsx("h4",{style:{margin:"0 0 16px 0",color:"white",fontSize:"18px",fontWeight:700},children:"Aktif dnler"}),e.jsx("div",{style:{maxHeight:"300px",overflowY:"auto",display:"flex",flexDirection:"column",gap:"12px"},children:W.map((j,we)=>{const X=t.find(pt=>pt.id===j.bookId);return e.jsxs("div",{style:{padding:"16px",background:"rgba(255, 255, 255, 0.15)",backdropFilter:"blur(10px)",borderRadius:"12px",border:"1px solid rgba(255, 255, 255, 0.2)"},children:[e.jsx("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"flex-start",marginBottom:"8px"},children:e.jsxs("div",{style:{flex:1},children:[e.jsx("div",{style:{fontWeight:700,color:"white",fontSize:"16px",marginBottom:"4px"},children:j.title}),X&&e.jsxs("div",{style:{fontSize:"13px",color:"rgba(255, 255, 255, 0.8)",marginBottom:"4px"},children:[X.author," ",X.category&&` ${X.category}`]})]})}),e.jsxs("div",{style:{display:"flex",gap:"16px",fontSize:"13px",color:"rgba(255, 255, 255, 0.9)"},children:[e.jsxs("span",{children:[e.jsx("strong",{children:"Biti:"})," ",new Date(j.dueDate).toLocaleDateString("tr-TR")]}),(()=>{const pt=F(j.dueDate);return e.jsxs("span",{style:{color:pt<=3?"#ef4444":pt<=7?"#f59e0b":"#10b981",fontWeight:600},children:[e.jsx("strong",{children:"Kalan:"})," ",pt===0?"Bugn Son Gn":`${pt} gn`]})})()]})]},`${j.bookId}-${we}`)})})]})})()]})]})}),document.body),Le&&Ze&&_t.createPortal(e.jsx("div",{style:{position:"fixed",top:0,left:0,right:0,bottom:0,backgroundColor:"rgba(0, 0, 0, 0.5)",display:"flex",alignItems:"center",justifyContent:"center",zIndex:10003},onClick:()=>{Ke(!1),Mt(null),tn(null)},children:e.jsxs("div",{className:"card",style:{maxWidth:"600px",width:"90%",maxHeight:"90vh",overflow:"auto",position:"relative"},onClick:W=>W.stopPropagation(),children:[e.jsxs("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center",marginBottom:"24px"},children:[e.jsx("h2",{style:{margin:0,color:"#1e293b"},children:"Ceza Puan Dzenle"}),e.jsx("button",{onClick:()=>{Ke(!1),Mt(null),tn(null)},style:{background:"none",border:"none",fontSize:"24px",cursor:"pointer",color:"#64748b",padding:0,width:"32px",height:"32px",display:"flex",alignItems:"center",justifyContent:"center"},children:""})]}),en&&e.jsx("div",{style:{padding:"12px",backgroundColor:"#fee2e2",color:"#dc2626",borderRadius:"8px",marginBottom:"16px"},children:en}),e.jsxs("div",{style:{display:"flex",flexDirection:"column",gap:"20px"},children:[e.jsxs("div",{style:{padding:"16px",backgroundColor:"#f8fafc",borderRadius:"8px",border:"1px solid #e2e8f0"},children:[e.jsx("div",{style:{fontWeight:600,marginBottom:"8px",fontSize:"16px"},children:Ze.name}),e.jsxs("div",{style:{fontSize:"14px",color:"#64748b"},children:[Ze.class&&Ze.branch?`${Ze.class}-${Ze.branch}`:Ze.class?`${Ze.class}. Snf`:"",Ze.studentNumber&&`  No: ${Ze.studentNumber}`]})]}),e.jsxs("div",{style:{padding:"20px",backgroundColor:"#ffffff",borderRadius:"12px",border:"1px solid #e2e8f0"},children:[e.jsx("h3",{style:{marginTop:0,marginBottom:"16px",fontSize:"18px",fontWeight:600,color:"#1e293b"},children:" Ceza Puan"}),e.jsxs("div",{style:{display:"flex",flexDirection:"column",gap:"12px"},children:[e.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"16px"},children:[e.jsxs("div",{style:{flex:1},children:[e.jsx("strong",{style:{color:"#64748b",fontSize:"14px",display:"block",marginBottom:"4px"},children:"Mevcut Ceza Puan"}),e.jsx("p",{style:{margin:0,fontSize:"24px",fontWeight:700,color:(Ze.penaltyPoints||0)>=Kt?"#ef4444":(Ze.penaltyPoints||0)>0?"#f59e0b":"#10b981"},children:Ze.penaltyPoints||0})]}),(Ze.penaltyPoints||0)>=Kt&&e.jsx("div",{style:{padding:"12px 20px",backgroundColor:"#fee2e2",borderRadius:"8px",border:"2px solid #ef4444",color:"#dc2626",fontWeight:600},children:" Ceza Durumunda - Kitap Alamaz"})]}),e.jsxs("div",{style:{display:"flex",gap:"8px",alignItems:"center"},children:[e.jsx("input",{type:"number",id:"penalty-points-personel-modal-input",min:"0",defaultValue:Ze.penaltyPoints||0,style:{flex:1,padding:"10px",borderRadius:"6px",border:"1px solid #d1d5db",fontSize:"14px"},placeholder:"Ceza puan"}),e.jsx("button",{onClick:async()=>{const W=document.getElementById("penalty-points-personel-modal-input");if(!W)return;const j=parseInt(W.value)||0;if(j<0){I==null||I("Hata","Ceza puan negatif olamaz.","error","");return}try{await xe.put(`/admin/students/${encodeURIComponent(Ze.name)}/penalty`,{penaltyPoints:j}),Mt({...Ze,penaltyPoints:j,isBanned:j>=Kt}),Ke(!1),Mt(null),tn(null),o&&await o(),I==null||I("Baarl","Ceza puan baaryla gncellendi.","success","")}catch(we){I==null||I("Hata",we instanceof Error?we.message:"Ceza puan gncellenirken bir hata olutu","error","")}},style:{padding:"10px 20px",fontSize:"14px",backgroundColor:"#3b82f6",color:"white",border:"none",borderRadius:"6px",cursor:"pointer",fontWeight:600},children:"Gncelle"})]})]})]})]})]})}),document.body),ne&&_t.createPortal(e.jsx("div",{style:{position:"fixed",top:0,left:0,right:0,bottom:0,backgroundColor:"rgba(0, 0, 0, 0.5)",display:"flex",alignItems:"center",justifyContent:"center",zIndex:10005},onClick:()=>ue(null),children:e.jsxs("div",{className:"card",style:{maxWidth:"500px",width:"90%",padding:"24px",animation:"slideIn 0.3s ease-out",backgroundColor:"white",position:"relative"},onClick:W=>W.stopPropagation(),children:[e.jsx("button",{onClick:()=>ue(null),style:{position:"absolute",top:"16px",right:"16px",background:"none",border:"none",fontSize:"24px",cursor:"pointer",color:"#9ca3af"},children:""}),e.jsx("h3",{style:{margin:"0 0 20px 0",fontSize:"20px",fontWeight:700,color:"#1e293b",borderBottom:"1px solid #e2e8f0",paddingBottom:"12px"},children:"dn Detay"}),e.jsxs("div",{style:{display:"flex",flexDirection:"column",gap:"16px"},children:[e.jsxs("div",{style:{display:"flex",gap:"16px"},children:[e.jsx("div",{style:{width:"80px",height:"120px",backgroundColor:"#f1f5f9",borderRadius:"8px",display:"flex",alignItems:"center",justifyContent:"center",color:"#cbd5e1",flexShrink:0},children:e.jsxs("svg",{width:"32",height:"32",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"1.5",strokeLinecap:"round",strokeLinejoin:"round",children:[e.jsx("path",{d:"M4 19.5A2.5 2.5 0 0 1 6.5 17H20"}),e.jsx("path",{d:"M6.5 2H20v20H6.5A2.5 2.5 0 0 1 4 19.5v-15A2.5 2.5 0 0 1 6.5 2z"})]})}),e.jsxs("div",{style:{flex:1},children:[e.jsx("div",{style:{fontSize:"13px",color:"#64748b",fontWeight:600,textTransform:"uppercase",letterSpacing:"0.5px"},children:"KTAP"}),e.jsx("div",{style:{fontSize:"16px",fontWeight:700,color:"#1e293b",marginBottom:"8px"},children:((sc=t.find(W=>W.id===ne.bookId))==null?void 0:sc.title)||ne.title}),e.jsx("div",{style:{fontSize:"13px",color:"#64748b"},children:(ac=t.find(W=>W.id===ne.bookId))==null?void 0:ac.author})]})]}),e.jsxs("div",{style:{padding:"16px",backgroundColor:"#f8fafc",borderRadius:"8px",border:"1px solid #e2e8f0"},children:[e.jsxs("div",{style:{marginBottom:"12px",display:"flex",alignItems:"center",gap:"10px"},children:[e.jsx("div",{style:{width:"32px",height:"32px",borderRadius:"50%",backgroundColor:"#e0f2fe",color:"#0284c7",display:"flex",alignItems:"center",justifyContent:"center",fontWeight:600},children:ne.borrower.charAt(0)}),e.jsxs("div",{children:[e.jsx("div",{style:{fontSize:"12px",color:"#64748b"},children:"RENC"}),e.jsx("div",{style:{fontWeight:600,color:"#334155"},children:ne.borrower})]})]}),e.jsx("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center"},children:e.jsxs("div",{children:[e.jsx("div",{style:{fontSize:"12px",color:"#64748b"},children:"TESLM TARH"}),e.jsxs("div",{style:{fontWeight:600},className:new Date(ne.dueDate)<new Date?"text-red-600":"text-gray-700",children:[new Date(ne.dueDate).toLocaleDateString("tr-TR"),new Date(ne.dueDate)<new Date&&e.jsx("span",{style:{marginLeft:"8px",padding:"2px 6px",backgroundColor:"#fee2e2",color:"#ef4444",borderRadius:"4px",fontSize:"11px"},children:"GECKT"})]})]})})]}),e.jsxs("button",{onClick:de,style:{width:"100%",padding:"12px",backgroundColor:"#3b82f6",color:"white",border:"none",borderRadius:"8px",fontWeight:600,cursor:"pointer",fontSize:"15px",display:"flex",alignItems:"center",justifyContent:"center",gap:"8px",transition:"background 0.2s"},onMouseEnter:W=>W.currentTarget.style.backgroundColor="#2563eb",onMouseLeave:W=>W.currentTarget.style.backgroundColor="#3b82f6",children:[e.jsxs("svg",{width:"18",height:"18",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:[e.jsx("polyline",{points:"9 11 12 14 22 4"}),e.jsx("path",{d:"M21 12v7a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h11"})]}),"Teslim Al"]})]})]})}),document.body),He&&ne&&_t.createPortal(e.jsx("div",{style:{position:"fixed",top:0,left:0,right:0,bottom:0,backgroundColor:"rgba(0, 0, 0, 0.5)",display:"flex",alignItems:"center",justifyContent:"center",zIndex:10010},onClick:()=>Se(!1),children:e.jsxs("div",{className:"card",style:{maxWidth:"400px",width:"90%",padding:"24px",animation:"slideIn 0.3s ease-out",backgroundColor:"white",borderRadius:"12px",boxShadow:"0 20px 25px -5px rgba(0, 0, 0, 0.1), 0 10px 10px -5px rgba(0, 0, 0, 0.04)"},onClick:W=>W.stopPropagation(),children:[e.jsxs("div",{style:{textAlign:"center",marginBottom:"20px"},children:[e.jsx("div",{style:{width:"48px",height:"48px",borderRadius:"50%",backgroundColor:"#eff6ff",color:"#3b82f6",display:"flex",alignItems:"center",justifyContent:"center",margin:"0 auto 16px auto"},children:e.jsx("svg",{width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:e.jsx("path",{d:"M14 9V5a3 3 0 0 0-3-3l-4 9v11h11.28a2 2 0 0 0 2-1.7l1.38-9a2 2 0 0 0-2-2.3zM7 22H4a2 2 0 0 1-2-2v-7a2 2 0 0 1 2-2h3"})})}),e.jsx("h3",{style:{margin:"0 0 8px 0",fontSize:"18px",fontWeight:700,color:"#1e293b"},children:"Teslim Almay Onayla"}),e.jsxs("p",{style:{margin:0,color:"#64748b",lineHeight:"1.5"},children:[e.jsx("strong",{style:{color:"#334155"},children:ne.borrower})," adl rencinin",e.jsx("br",{}),e.jsx("strong",{style:{color:"#334155"},children:((dc=t.find(W=>W.id===ne.bookId))==null?void 0:dc.title)||ne.title}),e.jsx("br",{}),"kitabn teslim almak istiyor musunuz?"]})]}),e.jsxs("div",{style:{display:"flex",gap:"12px"},children:[e.jsx("button",{onClick:()=>Se(!1),style:{flex:1,padding:"10px",backgroundColor:"white",color:"#64748b",border:"1px solid #cbd5e1",borderRadius:"8px",fontWeight:600,cursor:"pointer",transition:"background 0.2s"},onMouseEnter:W=>W.currentTarget.style.backgroundColor="#f1f5f9",onMouseLeave:W=>W.currentTarget.style.backgroundColor="white",children:"Vazge"}),e.jsx("button",{onClick:Ce,style:{flex:1,padding:"10px",backgroundColor:"#3b82f6",color:"white",border:"none",borderRadius:"8px",fontWeight:600,cursor:"pointer",transition:"background 0.2s"},onMouseEnter:W=>W.currentTarget.style.backgroundColor="#2563eb",onMouseLeave:W=>W.currentTarget.style.backgroundColor="#3b82f6",children:"Onayla"})]})]})}),document.body),ve&&se&&_t.createPortal(e.jsx("div",{style:{position:"fixed",top:0,left:0,right:0,bottom:0,backgroundColor:"rgba(0, 0, 0, 0.5)",display:"flex",alignItems:"center",justifyContent:"center",zIndex:10010},onClick:()=>Pe(!1),children:e.jsxs("div",{className:"card",style:{maxWidth:"400px",width:"90%",padding:"24px",animation:"slideIn 0.3s ease-out",backgroundColor:"white",borderRadius:"12px",boxShadow:"0 20px 25px -5px rgba(0, 0, 0, 0.1), 0 10px 10px -5px rgba(0, 0, 0, 0.04)"},onClick:W=>W.stopPropagation(),children:[e.jsxs("div",{style:{textAlign:"center",marginBottom:"20px"},children:[e.jsx("div",{style:{width:"48px",height:"48px",borderRadius:"50%",backgroundColor:"#eff6ff",color:"#3b82f6",display:"flex",alignItems:"center",justifyContent:"center",margin:"0 auto 16px auto"},children:e.jsx("svg",{width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:e.jsx("path",{d:"M14 9V5a3 3 0 0 0-3-3l-4 9v11h11.28a2 2 0 0 0 2-1.7l1.38-9a2 2 0 0 0-2-2.3zM7 22H4a2 2 0 0 1-2-2v-7a2 2 0 0 1 2-2h3"})})}),e.jsx("h3",{style:{margin:"0 0 8px 0",fontSize:"18px",fontWeight:700,color:"#1e293b"},children:"Teslim Almay Onayla"}),e.jsxs("p",{style:{margin:0,color:"#64748b",lineHeight:"1.5"},children:[e.jsx("strong",{style:{color:"#334155"},children:se.borrower})," adl rencinin",e.jsx("br",{}),e.jsx("strong",{style:{color:"#334155"},children:((cc=t.find(W=>W.id===se.bookId))==null?void 0:cc.title)||se.title}),e.jsx("br",{}),"kitabn teslim almak istiyor musunuz?"]})]}),e.jsxs("div",{style:{display:"flex",gap:"12px"},children:[e.jsx("button",{onClick:()=>Pe(!1),style:{flex:1,padding:"10px",backgroundColor:"white",color:"#64748b",border:"1px solid #cbd5e1",borderRadius:"8px",fontWeight:600,cursor:"pointer",transition:"background 0.2s"},onMouseEnter:W=>W.currentTarget.style.backgroundColor="#f1f5f9",onMouseLeave:W=>W.currentTarget.style.backgroundColor="white",children:"Vazge"}),e.jsx("button",{onClick:Ct,style:{flex:1,padding:"10px",backgroundColor:"#3b82f6",color:"white",border:"none",borderRadius:"8px",fontWeight:600,cursor:"pointer",transition:"background 0.2s"},onMouseEnter:W=>W.currentTarget.style.backgroundColor="#2563eb",onMouseLeave:W=>W.currentTarget.style.backgroundColor="#3b82f6",children:"Onayla"})]})]})}),document.body)]})},s0=()=>e.jsxs("svg",{width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:[e.jsx("path",{d:"M20 21v-2a4 4 0 0 0-4-4H8a4 4 0 0 0-4 4v2"}),e.jsx("circle",{cx:"12",cy:"7",r:"4"})]}),Nu=()=>e.jsxs("svg",{width:"20",height:"20",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:[e.jsx("path",{d:"M3 7v10a2 2 0 0 0 2 2h14a2 2 0 0 0 2-2V7"}),e.jsx("polyline",{points:"7 12 12 17 17 12"}),e.jsx("line",{x1:"12",y1:"17",x2:"12",y2:"3"})]}),a0=["application/vnd.openxmlformats-officedocument.spreadsheetml.sheet","application/vnd.ms-excel","text/csv"],d0=[".xlsx",".xls",".csv"],c0=({isOpen:t,onClose:n,onSuccess:r})=>{const[i,o]=a.useState(null),[l,s]=a.useState(null),[u,d]=a.useState(!1),[h,C]=a.useState(!1),[k,S]=a.useState(null);if(!t)return null;const B=()=>{o(null),s(null),C(!1),S(null)},m=F=>{var b;const y=(b=F.target.files)==null?void 0:b[0];if(!y)return;const f=y.name.toLowerCase().substring(y.name.lastIndexOf("."));if(!a0.includes(y.type)&&!d0.includes(f)){s({type:"error",text:"Ltfen geerli bir Excel/CSV dosyas sein (.xlsx, .xls, .csv)"});return}o(y),s(null)},I=async()=>{if(!i){s({type:"error",text:"Ltfen bir dosya sein"});return}d(!0),s(null);try{const F=new FormData;F.append("file",i),F.append("tableType","personel");const y=await xe.post("/admin/upload-excel",F);s({type:"success",text:`Ykleme tamamland. ${y.added} kayt eklendi, ${y.skipped} kayt atland (Toplam: ${y.total}).`}),S(y),o(null),C(!1);const f=document.getElementById("personel-excel-input");f&&(f.value=""),r==null||r(y)}catch(F){s({type:"error",text:F instanceof Error?F.message:"Dosya yklenemedi, ltfen tekrar deneyin."})}finally{d(!1)}};return _t.createPortal(e.jsx("div",{style:{position:"fixed",inset:0,backgroundColor:"rgba(15, 23, 42, 0.55)",display:"flex",alignItems:"center",justifyContent:"center",zIndex:1100,padding:"16px"},onClick:()=>{n(),B()},children:e.jsxs("div",{className:"card",style:{maxWidth:"620px",width:"100%",borderRadius:"16px",padding:"28px",position:"relative"},onClick:F=>F.stopPropagation(),children:[e.jsxs("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center",marginBottom:"16px"},children:[e.jsxs("div",{children:[e.jsxs("h2",{style:{margin:0,display:"flex",alignItems:"center",gap:"10px"},children:[e.jsx(s0,{}),"Excel/CSV ile Personel Ekle"]}),e.jsx("p",{style:{margin:"6px 0 0",color:"#475569",fontSize:"14px"},children:"Admin panelinden ayrlmadan personel listesini toplu olarak ie aktarn."})]}),e.jsx("button",{onClick:()=>{n(),B()},style:{background:"none",border:"none",fontSize:"24px",cursor:"pointer",color:"#94a3b8"},"aria-label":"Modal kapat",children:""})]}),l&&e.jsx("div",{style:{padding:"12px",borderRadius:"8px",marginBottom:"16px",backgroundColor:l.type==="success"?"#dcfce7":"#fee2e2",color:l.type==="success"?"#14532d":"#991b1b",fontSize:"14px"},children:l.text}),k&&e.jsx("div",{style:{display:"grid",gridTemplateColumns:"repeat(auto-fit, minmax(140px, 1fr))",gap:"12px",marginBottom:"16px"},children:[{label:"Eklenen",value:k.added,color:"#10b981"},{label:"Atlanan",value:k.skipped,color:"#f97316"},{label:"Toplam",value:k.total,color:"#2563eb"}].map(F=>e.jsxs("div",{style:{border:`1px solid ${F.color}`,borderRadius:"12px",padding:"14px",backgroundColor:"white",boxShadow:"0 4px 12px rgba(15, 23, 42, 0.08)"},children:[e.jsx("div",{style:{color:"#64748b",fontSize:"12px",textTransform:"uppercase",letterSpacing:"0.08em"},children:F.label}),e.jsx("div",{style:{fontSize:"24px",fontWeight:700,color:F.color},children:F.value})]},F.label))}),e.jsxs("div",{style:{display:"flex",flexDirection:"column",gap:"18px"},children:[e.jsx("label",{htmlFor:"personel-excel-input",style:{border:"2px dashed #cbd5f5",borderRadius:"12px",padding:"24px",textAlign:"center",cursor:"pointer",background:"#f8fafc",transition:"all 0.2s"},children:e.jsxs("div",{style:{display:"flex",flexDirection:"column",alignItems:"center",gap:"12px"},children:[e.jsx("div",{style:{width:"56px",height:"56px",borderRadius:"50%",backgroundColor:"#e0f2fe",display:"flex",alignItems:"center",justifyContent:"center",color:"#0f172a"},children:e.jsx(Nu,{})}),e.jsxs("div",{children:[e.jsx("strong",{style:{fontSize:"15px",color:"#0f172a"},children:"Dosyanz srkleyip brakn"}),e.jsx("div",{style:{fontSize:"13px",color:"#64748b",marginTop:"4px"},children:"veya bilgisayarnzdan seim yapn (.xlsx, .xls, .csv)"})]}),e.jsx("div",{style:{display:"inline-flex",alignItems:"center",gap:"6px",padding:"8px 16px",backgroundColor:"#2563eb",color:"white",borderRadius:"999px",fontWeight:600,fontSize:"13px"},children:"Dosya Se"})]})}),e.jsx("input",{id:"personel-excel-input",type:"file",accept:".xlsx,.xls,.csv,application/vnd.openxmlformats-officedocument.spreadsheetml.sheet,application/vnd.ms-excel,text/csv",style:{display:"none"},onChange:m}),i&&e.jsxs("div",{style:{padding:"14px",borderRadius:"10px",border:"1px solid #e2e8f0",display:"flex",justifyContent:"space-between",alignItems:"center",backgroundColor:"#f8fafc"},children:[e.jsxs("div",{children:[e.jsx("div",{style:{fontWeight:600},children:i.name}),e.jsxs("div",{style:{fontSize:"12px",color:"#64748b"},children:[(i.size/1024).toFixed(1)," KB"]})]}),e.jsx("button",{onClick:()=>o(null),style:{background:"none",border:"none",color:"#ef4444",fontWeight:600,cursor:"pointer"},children:"Kaldr"})]}),e.jsxs("div",{style:{padding:"14px",borderRadius:"10px",border:"1px solid #fbbf24",backgroundColor:"#fef9c3",fontSize:"13px",color:"#92400e"},children:[e.jsxs("div",{style:{marginBottom:"8px"},children:[e.jsx("strong",{children:"Zorunlu:"})," Kullanc Ad, Ad"]}),e.jsxs("div",{style:{marginBottom:"8px"},children:[e.jsx("strong",{children:"Opsiyonel:"})," ifre, Soyad, Pozisyon"]}),e.jsxs("div",{style:{marginTop:"8px",paddingTop:"8px",borderTop:"1px solid #fbbf24"},children:[e.jsx("strong",{children:"Export balklar (tam desteklenir):"}),' "Kullanc Ad", "Ad"']})]}),e.jsxs("button",{onClick:()=>C(!h),style:{display:"flex",alignItems:"center",justifyContent:"space-between",background:"#f1f5f9",border:"1px solid #e2e8f0",borderRadius:"10px",padding:"14px 18px",cursor:"pointer",fontWeight:600,fontSize:"14px",color:"#0f172a"},children:["Excel ykleme rehberi",e.jsx("span",{style:{fontSize:"18px"},children:h?"":"+"})]}),h&&e.jsxs("div",{style:{border:"1px solid #e2e8f0",borderRadius:"12px",padding:"16px",backgroundColor:"#fff",fontSize:"13px",color:"#475569",lineHeight:1.6},children:[e.jsxs("div",{style:{marginBottom:"12px"},children:[e.jsx("strong",{style:{color:"#1e293b",display:"block",marginBottom:"8px"},children:"Genel Bilgiler:"}),e.jsxs("ul",{style:{margin:0,paddingLeft:"20px"},children:[e.jsx("li",{children:"Dosyann ilk satrnda stun balklarnn bulunduundan emin olun."}),e.jsx("li",{children:"Ayn kullanc adyla gelen kaytlar otomatik olarak atlanr."}),e.jsx("li",{children:"Excel veya CSV formatnda kaydedilen dosyalar kullanabilirsiniz."})]})]}),e.jsxs("div",{style:{marginBottom:"12px",padding:"12px",backgroundColor:"#fee2e2",borderRadius:"6px",border:"1px solid #fca5a5"},children:[e.jsx("strong",{style:{color:"#991b1b",display:"block",marginBottom:"6px"},children:"Zorunlu Stunlar:"}),e.jsxs("div",{style:{color:"#991b1b",fontSize:"12px"},children:[" ",e.jsx("strong",{children:"Kullanc Ad"}),' (veya "username")',e.jsx("br",{})," ",e.jsx("strong",{children:"Ad"}),' (veya "name")']})]}),e.jsxs("div",{style:{marginBottom:"12px",padding:"12px",backgroundColor:"#d1fae5",borderRadius:"6px",border:"1px solid #86efac"},children:[e.jsx("strong",{style:{color:"#166534",display:"block",marginBottom:"6px"},children:"Opsiyonel Stunlar:"}),e.jsxs("div",{style:{color:"#166534",fontSize:"12px"},children:[" ",e.jsx("strong",{children:"ifre"}),' (veya "password", "sifre") - Belirtilmezse varsaylan ifre kullanlr',e.jsx("br",{})," ",e.jsx("strong",{children:"Soyad"}),' (veya "surname", "soyad")',e.jsx("br",{})," ",e.jsx("strong",{children:"Pozisyon"}),' (veya "position", "pozisyon", "grev", "gorev")']})]}),e.jsxs("div",{style:{padding:"12px",backgroundColor:"#eff6ff",borderRadius:"6px",border:"1px solid #93c5fd"},children:[e.jsx("strong",{style:{color:"#1e40af",display:"block",marginBottom:"6px"},children:"Export Balklar (Tam Desteklenir):"}),e.jsxs("div",{style:{color:"#1e40af",fontSize:"12px"},children:["Export edilen Excel dosyalarndaki balklar dorudan kullanlabilir:",e.jsx("br",{}),' "Kullanc Ad"',e.jsx("br",{}),' "Ad"']})]})]})]}),e.jsxs("div",{style:{display:"flex",justifyContent:"flex-end",gap:"12px",marginTop:"20px"},children:[e.jsx("button",{onClick:()=>{n(),B()},style:{padding:"10px 20px",borderRadius:"8px",border:"1px solid #e2e8f0",background:"#fff",cursor:"pointer",fontWeight:600},children:"Vazge"}),e.jsx("button",{onClick:I,disabled:u,style:{padding:"10px 24px",borderRadius:"8px",border:"none",backgroundColor:u?"#94a3b8":"#10b981",color:"white",cursor:u?"not-allowed":"pointer",fontWeight:700,display:"flex",alignItems:"center",gap:"8px"},children:u?"Ykleniyor...":e.jsxs(e.Fragment,{children:[e.jsx(Nu,{}),"Yklemeyi Balat"]})})]})]})}),document.body)},u0=({message:t,type:n,duration:r=3e3,onClose:i})=>{const[o,l]=a.useState(!0);a.useEffect(()=>{const d=setTimeout(()=>{l(!1),setTimeout(i,300)},r);return()=>clearTimeout(d)},[r,i]);const s=()=>{switch(n){case"success":return"";case"error":return"";case"warning":return"";case"info":return""}},u=()=>{l(!1),setTimeout(i,300)};return e.jsxs("div",{className:`toast toast-${n} ${o?"toast-visible":"toast-hidden"}`,children:[e.jsx("div",{className:"toast-icon",children:s()}),e.jsx("div",{className:"toast-message",children:t}),e.jsx("button",{className:"toast-close",onClick:u,children:""})]})};let p0=0;const x0=()=>{const[t,n]=a.useState([]),r=a.useCallback((o,l="info")=>{const s=p0++;n(u=>[...u,{id:s,message:o,type:l}])},[]),i=a.useCallback(o=>{n(l=>l.filter(s=>s.id!==o))},[]);return{toasts:t,showToast:r,removeToast:i}},f0=()=>e.jsxs("svg",{width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:[e.jsx("path",{d:"M3 9l9-7 9 7v11a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2z"}),e.jsx("polyline",{points:"9 22 9 12 15 12 15 22"})]}),Ru=()=>e.jsxs("svg",{width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:[e.jsx("path",{d:"M4 19.5A2.5 2.5 0 0 1 6.5 17H20"}),e.jsx("path",{d:"M6.5 2H20v20H6.5A2.5 2.5 0 0 1 4 19.5v-15A2.5 2.5 0 0 1 6.5 2z"})]}),So=()=>e.jsxs("svg",{width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:[e.jsx("path",{d:"M17 21v-2a4 4 0 0 0-4-4H5a4 4 0 0 0-4 4v2"}),e.jsx("circle",{cx:"9",cy:"7",r:"4"}),e.jsx("path",{d:"M23 21v-2a4 4 0 0 0-3-3.87"}),e.jsx("path",{d:"M16 3.13a4 4 0 0 1 0 7.75"})]}),Du=()=>e.jsxs("svg",{width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:[e.jsx("path",{d:"M4 19.5A2.5 2.5 0 0 1 6.5 17H20"}),e.jsx("path",{d:"M6.5 2H20v20H6.5A2.5 2.5 0 0 1 4 19.5v-15A2.5 2.5 0 0 1 6.5 2z"}),e.jsx("line",{x1:"8",y1:"8",x2:"16",y2:"8"}),e.jsx("line",{x1:"8",y1:"12",x2:"16",y2:"12"}),e.jsx("line",{x1:"8",y1:"16",x2:"16",y2:"16"})]}),Mu=()=>e.jsxs("svg",{width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:[e.jsx("ellipse",{cx:"12",cy:"5",rx:"9",ry:"3"}),e.jsx("path",{d:"M21 12c0 1.66-4 3-9 3s-9-1.34-9-3"}),e.jsx("path",{d:"M3 5v14c0 1.66 4 3 9 3s9-1.34 9-3V5"})]}),h0=()=>e.jsxs("svg",{width:"20",height:"20",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:[e.jsx("path",{d:"M4 17v2a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2v-2"}),e.jsx("polyline",{points:"7 12 12 17 17 12"}),e.jsx("line",{x1:"12",y1:"17",x2:"12",y2:"3"})]}),Nl=()=>e.jsxs("svg",{width:"18",height:"18",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:[e.jsx("path",{d:"M11 4H4a2 2 0 0 0-2 2v14a2 2 0 0 0 2 2h14a2 2 0 0 0 2-2v-7"}),e.jsx("path",{d:"M18.5 2.5a2.121 2.121 0 0 1 3 3L12 15l-4 1 1-4 9.5-9.5z"})]}),Rl=()=>e.jsxs("svg",{width:"18",height:"18",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:[e.jsx("polyline",{points:"3 6 5 6 21 6"}),e.jsx("path",{d:"M19 6v14a2 2 0 0 1-2 2H7a2 2 0 0 1-2-2V6m3 0V4a2 2 0 0 1 2-2h4a2 2 0 0 1 2 2v2"})]}),lf=t=>t.replace(/\\/g,"/"),Iu=t=>{const n=lf(t),r=n.lastIndexOf("/");return r>=0?n.slice(0,r):n},g0=t=>{const n=lf(t),r=n.lastIndexOf("/");return r>=0?n.slice(r+1):n},Au=()=>typeof window>"u"?"":localStorage.getItem("kutuphane_backup_directory")||"",m0=()=>e.jsxs("svg",{width:"22",height:"22",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:[e.jsx("path",{d:"M21 16v2a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-2"}),e.jsx("polyline",{points:"7 8 12 13 17 8"}),e.jsx("line",{x1:"12",y1:"13",x2:"12",y2:"2"})]}),y0=()=>{const{toasts:t,showToast:n,removeToast:r}=x0(),[i,o]=a.useState("overview"),[l,s]=a.useState(null),[u,d]=a.useState([]),[h,C]=a.useState([]),[k,S]=a.useState([]),[B,m]=a.useState([]),[I,F]=a.useState(!1),[y,f]=a.useState([]),[b,D]=a.useState(null),[q,V]=a.useState(null),[ie,M]=a.useState(null),[re,ce]=a.useState(null),[Oe,Re]=a.useState(!1),[_e,xt]=a.useState(!1),[De,ft]=a.useState(!1),[ze,P]=a.useState(!1),[se,fe]=a.useState(""),[ve,Pe]=a.useState(""),[bt,lt]=a.useState({name:"",surname:"",position:"",password:""}),[be,Me]=a.useState(!1),[et,Qe]=a.useState(!1),[Z,$e]=a.useState(!1),[Xe,Ge]=a.useState(!1),[mt,kt]=a.useState(null),[ot,We]=a.useState(!1),[st,Bt]=a.useState(()=>Au()),[Ee,Et]=a.useState(()=>Au()),[c,N]=a.useState("all"),[oe,Ae]=a.useState(null),[Be,ye]=a.useState(!0),[Ve,jt]=a.useState(30),[zt,nn]=a.useState(90),[Te,wt]=a.useState(null),[_,ne]=a.useState(!1),[ue,He]=a.useState(null),[Se,gt]=a.useState(!1),[de,Ce]=a.useState({name:"",surname:"",class:"",branch:"",studentNumber:""}),[me,Ct]=a.useState({username:"",password:"",name:"",surname:"",position:""}),[tt,Lt]=a.useState({title:"",author:"",category:"",quantity:""});a.useMemo(()=>{if(y.length===0)return[];const p=new Map;return y.forEach(O=>{const L=Iu(O);p.has(L)||p.set(L,[]),p.get(L).push(O)}),Array.from(p.entries()).map(([O,L])=>({directory:O,files:L}))},[y]),a.useMemo(()=>c==="all"?y:y.filter(p=>Iu(p)===c),[y,c]),a.useEffect(()=>{i!=="users"&&We(!1)},[i]),a.useEffect(()=>{const p=()=>{document.visibilityState!=="visible"&&We(!1)},O=()=>{We(!1)};return document.addEventListener("visibilitychange",p),window.addEventListener("beforeunload",O),()=>{document.removeEventListener("visibilitychange",p),window.removeEventListener("beforeunload",O)}},[]);const[Ht,Ft]=a.useState({borrower:"",dueDate:"",personel:""}),[nt,At]=a.useState(null),[T,H]=a.useState(new Set),[A,Ne]=a.useState(new Set),[he,it]=a.useState(new Set),[Ue,Nt]=a.useState(new Set),[rt,yt]=a.useState(!1),[Dt,Zt]=a.useState(null),[Ut,$t]=a.useState(!1),[Tt,Bn]=a.useState(null),[bn,w]=a.useState(!1),[Y,ee]=a.useState(!1),[g,R]=a.useState(null),[J,te]=a.useState(!1),[ge,v]=a.useState(null),[$,le]=a.useState(!1),[Le,Ke]=a.useState(null),[Ze,Mt]=a.useState({}),[en,tn]=a.useState(null),[_n,Ln]=a.useState(!1),Kt=(p,O,L="info",E)=>{R({title:p,message:O,type:L,icon:E}),ee(!0)},cn={display:"block",fontSize:"13px",fontWeight:600,marginBottom:"4px",color:"#475569"},pn={width:"100%",padding:"10px",borderRadius:"8px",border:"1px solid #cbd5f5",fontSize:"14px",backgroundColor:"#fff"},nr={users:"Personel",students:"renci",books:"Kitap",loans:"dn"},Gt=(p,O,L)=>{Mt(E=>({...E,[p]:{...E[p]||{},[O]:L}}))},Zn=()=>{le(!1),Ke(null),Mt({}),tn(null)},Cn=async()=>{var p,O,L,E,je,St,Rt,ar,pi,Li,sl,al,dl,cl;if(Le){tn(null),Ln(!0);try{if(Le.type==="users"){const In=Le.items;for(const Nn of In){if(!Nn.username)continue;const gn=Ze[Nn.username];if(!gn||!((p=gn.name)!=null&&p.trim())||!((O=gn.surname)!=null&&O.trim())){tn("Ad ve soyad alanlar bo braklamaz."),Ln(!1);return}await xe.put(`/admin/personel/${Nn.username}`,{name:gn.name.trim(),surname:gn.surname.trim(),position:((L=gn.position)==null?void 0:L.trim())||null,password:gn.password?gn.password:null})}Kt("Baarl",`${In.length} personel gncellendi.`,"success",""),await pe(),await U(),it(new Set)}else if(Le.type==="students"){const In=Le.items;for(const Nn of In){if(Nn.studentNumber===void 0)continue;const gn=String(Nn.studentNumber),vn=Ze[gn];if(!vn||!((E=vn.name)!=null&&E.trim())||!((je=vn.surname)!=null&&je.trim())){tn("renci ad ve soyad bo braklamaz."),Ln(!1);return}const xi=vn.class?parseInt(vn.class,10):null;if(vn.class&&Number.isNaN(xi)){tn("Snf deeri saysal olmaldr."),Ln(!1);return}await xe.put(`/admin/students/${Nn.studentNumber}`,{name:vn.name.trim(),surname:vn.surname.trim(),class:xi,branch:((St=vn.branch)==null?void 0:St.trim())||null})}Kt("Baarl",`${In.length} renci gncellendi.`,"success",""),await Fe(),await U(),Ne(new Set)}else if(Le.type==="books"){const In=Le.items;for(const Nn of In){const gn=Ze[Nn.id];if(!gn||!((Rt=gn.title)!=null&&Rt.trim())||!((ar=gn.author)!=null&&ar.trim())){tn("Kitap ad ve yazar bilgisi bo olamaz."),Ln(!1);return}const vn=gn.quantity?parseInt(gn.quantity,10):Nn.totalQuantity;if(Number.isNaN(vn)||vn<0){tn("Geerli bir adet deeri girin."),Ln(!1);return}await xe.put(`/books/${Nn.id}`,{title:gn.title.trim(),author:gn.author.trim(),category:((pi=gn.category)==null?void 0:pi.trim())||"Genel",totalQuantity:vn})}Kt("Baarl",`${In.length} kitap gncellendi.`,"success",""),await Je(),await U(),H(new Set)}else if(Le.type==="loans"){const In=Le.items;for(const Nn of In){const gn=String(Nn.id),vn=Ze[gn];if(!vn||!((Li=vn.borrower)!=null&&Li.trim())||!vn.dueDate){tn("renci ad ve teslim tarihi zorunludur."),Ln(!1);return}const xi=new Date(vn.dueDate);if(Number.isNaN(xi.getTime())){tn("Geerli bir teslim tarihi girin."),Ln(!1);return}const xo=Math.ceil((xi.getTime()-Date.now())/(1e3*60*60*24)),Ms=Number.isFinite(xo)&&xo>0?xo:7;await xe.post(`/books/${Nn.bookId}/return`,{borrower:Nn.borrower,personelName:((sl=vn.personel)==null?void 0:sl.trim())||"Admin"}),await xe.post(`/books/${Nn.bookId}/borrow`,{borrower:vn.borrower.trim(),days:Ms,personelName:((al=vn.personel)==null?void 0:al.trim())||"Admin"})}Kt("Baarl",`${In.length} dn kayd gncellendi.`,"success",""),await Vt(),await Je(),await U(),Nt(new Set)}Zn()}catch(In){const Nn=In instanceof Error?In.message:(cl=(dl=In==null?void 0:In.response)==null?void 0:dl.data)==null?void 0:cl.message;tn(Nn||"Toplu dzenleme srasnda bir hata olutu.")}finally{Ln(!1)}}},z=(p,O)=>{var L;if(!Le)return null;if(Le.type==="users"){const E=p,je=E.username||`user-${O}`,St=Ze[je]||{};return e.jsxs("div",{style:{padding:"16px",border:"1px solid #e2e8f0",borderRadius:"12px",backgroundColor:"#f8fafc"},children:[e.jsxs("div",{style:{marginBottom:"12px",fontWeight:600,color:"#0f172a"},children:[E.username,"  ",E.name," ",E.surname]}),e.jsxs("div",{style:{display:"grid",gridTemplateColumns:"repeat(auto-fit, minmax(180px, 1fr))",gap:"12px"},children:[e.jsxs("div",{children:[e.jsx("label",{style:cn,children:"Ad"}),e.jsx("input",{type:"text",value:St.name||"",onChange:Rt=>Gt(je,"name",Rt.target.value),style:pn})]}),e.jsxs("div",{children:[e.jsx("label",{style:cn,children:"Soyad"}),e.jsx("input",{type:"text",value:St.surname||"",onChange:Rt=>Gt(je,"surname",Rt.target.value),style:pn})]}),e.jsxs("div",{children:[e.jsx("label",{style:cn,children:"Pozisyon"}),e.jsx("input",{type:"text",value:St.position||"",onChange:Rt=>Gt(je,"position",Rt.target.value),style:pn})]}),e.jsxs("div",{children:[e.jsx("label",{style:cn,children:"Yeni ifre"}),e.jsx("input",{type:"text",value:St.password||"",onChange:Rt=>Gt(je,"password",Rt.target.value),placeholder:"Bo braklrsa deimez",style:pn})]})]})]},je)}if(Le.type==="students"){const E=p,je=E.studentNumber!==void 0?String(E.studentNumber):`student-${O}`,St=Ze[je]||{};return e.jsxs("div",{style:{padding:"16px",border:"1px solid #e2e8f0",borderRadius:"12px",backgroundColor:"#f8fafc"},children:[e.jsxs("div",{style:{marginBottom:"12px",fontWeight:600,color:"#0f172a"},children:[E.studentNumber?`No: ${E.studentNumber}`:"renci","  ",E.name," ",E.surname]}),e.jsxs("div",{style:{display:"grid",gridTemplateColumns:"repeat(auto-fit, minmax(180px, 1fr))",gap:"12px"},children:[e.jsxs("div",{children:[e.jsx("label",{style:cn,children:"Ad"}),e.jsx("input",{type:"text",value:St.name||"",onChange:Rt=>Gt(je,"name",Rt.target.value),style:pn})]}),e.jsxs("div",{children:[e.jsx("label",{style:cn,children:"Soyad"}),e.jsx("input",{type:"text",value:St.surname||"",onChange:Rt=>Gt(je,"surname",Rt.target.value),style:pn})]}),e.jsxs("div",{children:[e.jsx("label",{style:cn,children:"Snf"}),e.jsx("input",{type:"number",value:St.class||"",onChange:Rt=>Gt(je,"class",Rt.target.value),style:pn})]}),e.jsxs("div",{children:[e.jsx("label",{style:cn,children:"ube"}),e.jsx("input",{type:"text",value:St.branch||"",onChange:Rt=>Gt(je,"branch",Rt.target.value),style:pn})]})]})]},je)}if(Le.type==="books"){const E=p,je=E.id,St=Ze[je]||{};return e.jsxs("div",{style:{padding:"16px",border:"1px solid #e2e8f0",borderRadius:"12px",backgroundColor:"#f8fafc"},children:[e.jsxs("div",{style:{marginBottom:"12px",fontWeight:600,color:"#0f172a"},children:[E.title,"  ",E.author]}),e.jsxs("div",{style:{display:"grid",gridTemplateColumns:"repeat(auto-fit, minmax(180px, 1fr))",gap:"12px"},children:[e.jsxs("div",{children:[e.jsx("label",{style:cn,children:"Balk"}),e.jsx("input",{type:"text",value:St.title||"",onChange:Rt=>Gt(je,"title",Rt.target.value),style:pn})]}),e.jsxs("div",{children:[e.jsx("label",{style:cn,children:"Yazar"}),e.jsx("input",{type:"text",value:St.author||"",onChange:Rt=>Gt(je,"author",Rt.target.value),style:pn})]}),e.jsxs("div",{children:[e.jsx("label",{style:cn,children:"Kategori"}),e.jsx("input",{type:"text",value:St.category||"",onChange:Rt=>Gt(je,"category",Rt.target.value),style:pn})]}),e.jsxs("div",{children:[e.jsx("label",{style:cn,children:"Toplam Adet"}),e.jsx("input",{type:"number",value:St.quantity||"",min:0,onChange:Rt=>Gt(je,"quantity",Rt.target.value),style:pn})]})]})]},je)}if(Le.type==="loans"){const E=p,je=String(E.id),St=Ze[je]||{},Rt=E.bookTitle||((L=E.book)==null?void 0:L.title)||E.bookId;return e.jsxs("div",{style:{padding:"16px",border:"1px solid #e2e8f0",borderRadius:"12px",backgroundColor:"#f8fafc"},children:[e.jsxs("div",{style:{marginBottom:"12px",fontWeight:600,color:"#0f172a"},children:[Rt,"  ",E.borrower]}),e.jsxs("div",{style:{display:"grid",gridTemplateColumns:"repeat(auto-fit, minmax(180px, 1fr))",gap:"12px"},children:[e.jsxs("div",{children:[e.jsx("label",{style:cn,children:"renci"}),e.jsx("input",{type:"text",value:St.borrower||"",onChange:ar=>Gt(je,"borrower",ar.target.value),style:pn})]}),e.jsxs("div",{children:[e.jsx("label",{style:cn,children:"Teslim Tarihi"}),e.jsx("input",{type:"date",value:St.dueDate||"",onChange:ar=>Gt(je,"dueDate",ar.target.value),style:pn})]}),e.jsxs("div",{children:[e.jsx("label",{style:cn,children:"Personel"}),e.jsx("input",{type:"text",value:St.personel||"",onChange:ar=>Gt(je,"personel",ar.target.value),placeholder:"Opsiyonel",style:pn})]})]})]},je)}return null};a.useEffect(()=>{i==="overview"?U():i==="users"?pe():i==="students"?Fe():i==="books"?Je():i==="loans"?Vt():i==="database"&&rn(),At(null),H(new Set),Ne(new Set),it(new Set),Nt(new Set)},[i]);const U=async()=>{try{const p=await xe.get("/admin/database/info");s(p)}catch(p){console.error("Veritaban bilgisi yklenemedi:",p)}},pe=async()=>{F(!0);try{const[p,O]=await Promise.all([xe.get("/admin/personel"),xe.get("/admin/data/users")]),L=p.map(je=>({...je,role:"personel"})),E=O.filter(je=>je.role==="ADMIN"||je.role==="Admin").map(je=>({username:je.username,name:je.name||"",surname:je.surname||"",role:je.role,class:void 0,branch:void 0,studentNumber:void 0,position:void 0}));d([...L,...E])}catch(p){console.error("Kullanclar yklenemedi:",p),console.error("Hata detay:",p)}finally{F(!1)}},Fe=async()=>{F(!0);try{const O=(await xe.get("/admin/students")).map(L=>({...L,role:"Student",username:void 0}));C(O)}catch(p){console.error("renciler yklenemedi:",p)}finally{F(!1)}},Je=async()=>{F(!0);try{const p=await xe.get("/admin/data/books");S(p)}catch(p){console.error("Kitaplar yklenemedi:",p)}finally{F(!1)}},Vt=async()=>{F(!0);try{const p=await xe.get("/admin/data/loans");m(p)}catch(p){console.error("dn kaytlar yklenemedi:",p)}finally{F(!1)}},rn=async()=>{try{const p=await xe.get("/admin/database/backups");f(p);try{const O=await xe.get("/admin/database/auto-backup/status");Ae(O),ye(O.enabled),jt(O.intervalDays)}catch(O){console.error("Otomatik yedekleme durumu yklenemedi:",O)}}catch(p){console.error("Yedekler yklenemedi:",p)}},Xt=async()=>{var p,O;try{const L=await xe.post("/admin/database/backup"),E=L==null?void 0:L.message;n(E||"Yedek baaryla oluturuldu","success"),rn(),U()}catch(L){const E=L instanceof Error?L.message:(O=(p=L==null?void 0:L.response)==null?void 0:p.data)==null?void 0:O.message;n(E||"Yedek oluturulamad","error")}},vt=async p=>{wt({title:"Yedek Geri Ykleme Onay",message:`Bu yedei geri yklemek istediinize emin misiniz?

 Mevcut tm veriler silinecek ve yedee dnlecek!

Bu ilem geri alnamaz.`,icon:"",confirmText:"Geri Ykle",confirmButtonColor:"#ef4444",onConfirm:async()=>{var O,L;wt(null);try{const E=await xe.post("/admin/database/restore",{backupPath:p}),je=E==null?void 0:E.message;n(je||"Yedek baaryla geri yklendi","success"),window.location.reload()}catch(E){const je=E instanceof Error?E.message:(L=(O=E==null?void 0:E.response)==null?void 0:O.data)==null?void 0:L.message;n(je||"Yedek geri yklenemedi","error")}}})},ln=async()=>{wt({title:"Eski Yedekleri Temizle",message:`${zt} gnden eski tm yedekler kalc olarak silinecek.

Bu ilem geri alnamaz. Emin misiniz?`,icon:"",confirmText:"Temizle",confirmButtonColor:"#f59e0b",onConfirm:async()=>{var p,O;wt(null);try{const L=await xe.post("/admin/database/cleanup",{daysToKeep:zt}),E=L==null?void 0:L.message;n(E||"Eski yedekler temizlendi","success"),rn()}catch(L){const E=L instanceof Error?L.message:(O=(p=L==null?void 0:L.response)==null?void 0:p.data)==null?void 0:O.message;n(E||"Yedekler temizlenemedi","error")}}})},Mn=async()=>{var p,O;try{const L=await xe.post("/admin/database/auto-backup/configure",{enabled:Be,intervalDays:Ve}),E=L==null?void 0:L.message;n(E||"Otomatik yedekleme ayarlar gncellendi","success"),rn()}catch(L){const E=L instanceof Error?L.message:(O=(p=L==null?void 0:L.response)==null?void 0:p.data)==null?void 0:O.message;n(E||"Ayarlar gncellenemedi","error")}},qt=async p=>{const O=g0(p);wt({title:"Yedek Dosyasn Sil",message:`"${O}" yedek dosyasn kalc olarak silmek istediinize emin misiniz?

Bu ilem geri alnamaz.`,icon:"",confirmText:"Sil",confirmButtonColor:"#ef4444",onConfirm:async()=>{var L,E;wt(null);try{await xe.delete(`/admin/database/backups/${encodeURIComponent(O)}`),n("Yedek baaryla silindi","success"),rn()}catch(je){const St=je instanceof Error?je.message:(E=(L=je==null?void 0:je.response)==null?void 0:L.data)==null?void 0:E.message;n(St||"Yedek silinemedi","error")}}})},x=()=>{const p=window.open("","","height=400,width=600");p&&(p.document.write(`
        <html>
          <head>
            <title>Ktphane Kurtarma Kodu</title>
            <style>
              body { font-family: Arial, sans-serif; padding: 40px; text-align: center; }
              h1 { color: #2563eb; margin-bottom: 20px; }
              .code { font-size: 32px; font-weight: bold; letter-spacing: 4px; color: #1e293b; margin: 30px 0; }
              .warning { color: #ef4444; font-size: 14px; margin-top: 20px; }
            </style>
          </head>
          <body>
            <h1> Ktphane Ynetim Sistemi</h1>
            <h2>Kurtarma Kodu</h2>
            <div class="code">${ue}</div>
            <p>Bu kodu gvenli bir yerde saklayn.</p>
            <p class="warning"> Bu kod sadece bir kere kullanlabilir ve 30 gn geerlidir.</p>
          </body>
        </html>
      `),p.document.close(),p.print())},K=async()=>{var p,O;if(!(!b||!b.username)){if(!bt.name||!bt.surname){alert("Ad ve soyad zorunludur");return}try{await xe.put(`/admin/personel/${b.username}`,{name:bt.name,surname:bt.surname,position:bt.position||null,password:bt.password||null}),alert("Personel baaryla gncellendi"),Re(!1),D(null),lt({name:"",surname:"",position:"",password:""}),pe()}catch(L){const E=L instanceof Error?L.message:(O=(p=L==null?void 0:L.response)==null?void 0:p.data)==null?void 0:O.message;alert(E||"Personel gncellenemedi")}}},Q=async()=>{var O,L;if(!de.name||!de.surname||!de.studentNumber){Kt("Hata","Ad, soyad ve renci numaras zorunludur","error","");return}const p=parseInt(de.studentNumber);if(isNaN(p)){Kt("Hata","Geerli bir renci numaras giriniz","error","");return}try{await xe.post("/admin/students",{name:de.name,surname:de.surname,class:de.class?parseInt(de.class):null,branch:de.branch||null,studentNumber:p}),Kt("Baarl","renci baaryla eklendi","success",""),Me(!1),Ce({name:"",surname:"",class:"",branch:"",studentNumber:""}),i==="students"&&Fe(),U()}catch(E){const je=E instanceof Error?E.message:(L=(O=E==null?void 0:E.response)==null?void 0:O.data)==null?void 0:L.message;Kt("Hata",je||"renci eklenemedi","error","")}},ke=async()=>{var p,O;if(!me.username||!me.name||!me.surname){Kt("Hata","Kullanc ad, ad ve soyad zorunludur","error","");return}try{await xe.post("/admin/personel",{username:me.username,password:me.password||"1234",name:me.name,surname:me.surname,position:me.position||null}),Kt("Baarl","Personel baaryla eklendi","success",""),Qe(!1),Ct({username:"",password:"",name:"",surname:"",position:""}),pe(),U()}catch(L){const E=L instanceof Error?L.message:(O=(p=L==null?void 0:L.response)==null?void 0:p.data)==null?void 0:O.message;Kt("Hata",E||"Personel eklenemedi","error","")}},Ye=async()=>{var p,O;if(!tt.title||!tt.author||!tt.quantity){alert("Balk, yazar ve miktar zorunludur");return}try{await xe.post("/books",{title:tt.title,author:tt.author,category:tt.category||"Genel",quantity:parseInt(tt.quantity)}),alert("Kitap baaryla eklendi"),$e(!1),Lt({title:"",author:"",category:"",quantity:""}),Je(),U()}catch(L){const E=L instanceof Error?L.message:(O=(p=L==null?void 0:L.response)==null?void 0:p.data)==null?void 0:O.message;alert(E||"Kitap eklenemedi")}},ae=async()=>{var p,O;if(!(!q||!q.studentNumber)){if(!de.name||!de.surname){alert("Ad ve soyad zorunludur");return}try{await xe.put(`/admin/students/${q.studentNumber}`,{name:de.name,surname:de.surname,class:de.class?parseInt(de.class):null,branch:de.branch||null}),alert("renci baaryla gncellendi"),xt(!1),V(null),Ce({name:"",surname:"",class:"",branch:"",studentNumber:""}),Fe(),U()}catch(L){const E=L instanceof Error?L.message:(O=(p=L==null?void 0:L.response)==null?void 0:p.data)==null?void 0:O.message;alert(E||"renci gncellenemedi")}}},ct=async()=>{var p,O;if(ie){if(!tt.title||!tt.author||!tt.quantity){alert("Balk, yazar ve miktar zorunludur");return}try{await xe.put(`/books/${ie.id}`,{title:tt.title,author:tt.author,category:tt.category||"Genel",totalQuantity:parseInt(tt.quantity)}),alert("Kitap baaryla gncellendi"),ft(!1),M(null),Lt({title:"",author:"",category:"",quantity:""}),Je(),U()}catch(L){const E=L instanceof Error?L.message:(O=(p=L==null?void 0:L.response)==null?void 0:p.data)==null?void 0:O.message;alert(E||"Kitap gncellenemedi")}}},Wt=async()=>{var p,O;if(Dt){w(!0);try{await xe.delete(`/books/${Dt.book.id}?personelName=Admin`),Kt("Baarl",Dt.loans.length>0?`${Dt.book.title} ve ${Dt.loans.length} dn kayd silindi`:`${Dt.book.title} kitab silindi`,"success","");const L=Dt.book.id;yt(!1),Zt(null),Je(),U(),window.__bookDeleteOnConfirm&&(window.__bookDeleteOnConfirm(),delete window.__bookDeleteOnConfirm)}catch(L){const E=L instanceof Error?L.message:(O=(p=L==null?void 0:L.response)==null?void 0:p.data)==null?void 0:O.message;Kt("Hata",E||"Kitap silme ilemi baarsz oldu","error","")}finally{w(!1)}}},ht=()=>{yt(!1),Zt(null),window.__bookDeleteOnConfirm&&delete window.__bookDeleteOnConfirm},Jt=p=>p.replace(/\s+/g," ").trim().toLowerCase(),sn=p=>{const O=`${p.name||""} ${p.surname||""}`.trim();return O||(p.studentNumber?`renci No: ${p.studentNumber}`:"Bilinmeyen renci")},dn=async()=>{var p,O;if(Tt){w(!0);try{$t(!1);const L=Tt.students;Bn(null),window.__studentDeleteResolve&&(window.__studentDeleteResolve(!0),delete window.__studentDeleteResolve)}catch(L){const E=L instanceof Error?L.message:(O=(p=L==null?void 0:L.response)==null?void 0:p.data)==null?void 0:O.message;alert(E||"renci silme ilemi baarsz oldu"),window.__studentDeleteResolve&&(window.__studentDeleteResolve(!1),delete window.__studentDeleteResolve)}finally{w(!1)}}},It=()=>{$t(!1),Bn(null),window.__studentDeleteResolve&&(window.__studentDeleteResolve(!1),delete window.__studentDeleteResolve)},hn=async()=>{if(T.size===0)return;const p=k.filter(E=>T.has(E.id)),O=await xe.get("/books/loans"),L=p.map(E=>{const je=O.filter(St=>St.bookId===E.id);return{id:E.id,name:`${E.title} - ${E.author}`,loans:je}}).filter(E=>E.loans.length>0);if(L.length>0){v({type:"books",items:L,selectedItems:new Set(T)}),te(!0);return}await $n(T)},$n=async p=>{var E,je;let O=0;const L=Array.from(p);for(const St of L)try{await xe.delete(`/books/${St}?personelName=Admin`),O++}catch(Rt){const ar=Rt instanceof Error?Rt.message:(je=(E=Rt==null?void 0:Rt.response)==null?void 0:E.data)==null?void 0:je.message;Kt("Hata",`${ar||"Kitap silinemedi"}`,"error","")}O>0&&(Kt("Baarl",`${O} kitap baaryla silindi`,"success",""),At(null),H(new Set),Je(),U())},Wn=async()=>{if(A.size===0)return;const p=h.filter(je=>typeof je.studentNumber=="number"&&A.has(je.studentNumber));if(p.length===0){Kt("Hata","Silinecek renciler bulunamad","error","");return}const O=await xe.get("/books/loans"),L=new Map;O.forEach(je=>{const St=Jt(je.borrower||"");St&&(L.has(St)||L.set(St,[]),L.get(St).push(je))});const E=p.map(je=>{const St=sn(je),pi=Jt(`${je.name||""} ${je.surname||""}`)||Jt(je.name||je.surname||""),Li=pi?L.get(pi)||[]:[];return{id:je.studentNumber,name:St,loans:Li}}).filter(je=>je.loans.length>0);if(E.length>0){v({type:"students",items:E,selectedItems:new Set(A)}),te(!0);return}await jn(A)},jn=async p=>{var O,L;try{for(const E of p){const je=Number(E);Number.isNaN(je)||await xe.delete(`/admin/students/${je}`)}Kt("Baarl",`${p.size} renci baaryla silindi`,"success",""),At(null),Ne(new Set),Fe(),U()}catch(E){const je=E instanceof Error?E.message:(L=(O=E==null?void 0:E.response)==null?void 0:O.data)==null?void 0:L.message;Kt("Hata",je||"renciler silinemedi","error","")}},dt=async()=>{var O,L;if(!(he.size===0||!await new Promise(E=>{R({title:"Toplu Kullanc Silme Onay",message:`${he.size} kullancy silmek istediinize emin misiniz?`,type:"warning",icon:""}),ee(!0),window.__bulkDeleteUsersConfirm=E})))try{for(const E of he){const je=u.find(St=>St.username===E);je&&je.role!=="ADMIN"&&je.role!=="Admin"&&await xe.delete(`/admin/personel/${E}`)}Kt("Baarl",`${he.size} kullanc baaryla silindi`,"success",""),At(null),it(new Set),pe(),U()}catch(E){const je=E instanceof Error?E.message:(L=(O=E==null?void 0:E.response)==null?void 0:O.data)==null?void 0:L.message;Kt("Hata",je||"Kullanclar silinemedi","error","")}},on=async()=>{var O,L;if(!(Ue.size===0||!await new Promise(E=>{R({title:"Toplu ade Onay",message:`${Ue.size} dn kaydn iade etmek istediinize emin misiniz?`,type:"warning",icon:""}),ee(!0),window.__bulkReturnLoansConfirm=E})))try{for(const E of Ue){const je=B.find(St=>St.id===E);je&&await xe.post(`/books/${je.bookId}/return`,{borrower:je.borrower,personelName:"Admin"})}Kt("Baarl",`${Ue.size} dn kayd baaryla iade edildi`,"success",""),At(null),Nt(new Set),Vt(),Je(),U()}catch(E){const je=E instanceof Error?E.message:(L=(O=E==null?void 0:E.response)==null?void 0:O.data)==null?void 0:L.message;Kt("Hata",je||"dn kaytlar iade edilemedi","error","")}},at=async()=>{var p,O;if(re){if(!Ht.borrower||!Ht.dueDate){alert("renci ad ve teslim tarihi zorunludur");return}try{await xe.post(`/books/${re.bookId}/return`,{borrower:re.borrower,personelName:Ht.personel||"Admin"});const L=new Date(Ht.dueDate),E=Math.ceil((L.getTime()-Date.now())/(1e3*60*60*24));await xe.post(`/books/${re.bookId}/borrow`,{borrower:Ht.borrower,days:E>0?E:7,personelName:Ht.personel||"Admin"}),alert("dn kayd baaryla gncellendi"),P(!1),ce(null),Ft({borrower:"",dueDate:"",personel:""}),Vt(),Je(),U()}catch(L){const E=L instanceof Error?L.message:(O=(p=L==null?void 0:L.response)==null?void 0:p.data)==null?void 0:O.message;alert(E||"dn kayd gncellenemedi")}}};return e.jsxs(e.Fragment,{children:[e.jsx("div",{className:"toast-container",children:t.map(p=>e.jsx(u0,{message:p.message,type:p.type,onClose:()=>r(p.id)},p.id))}),e.jsxs("div",{className:"admin-panel",children:[e.jsxs("div",{className:"admin-header",children:[e.jsx("h1",{children:" Admin Paneli"}),e.jsx("p",{children:"Veritaban Ynetim ve Kontrol Paneli"})]}),e.jsxs("div",{className:"admin-tabs",children:[e.jsxs("button",{className:i==="overview"?"active":"",onClick:()=>o("overview"),children:[e.jsx(f0,{}),e.jsx("span",{children:"Genel Bak"})]}),e.jsxs("button",{className:i==="users"?"active":"",onClick:()=>o("users"),children:[e.jsx(So,{}),e.jsx("span",{children:"Kullanclar"})]}),e.jsxs("button",{className:i==="students"?"active":"",onClick:()=>o("students"),children:[e.jsx(So,{}),e.jsx("span",{children:"renciler"})]}),e.jsxs("button",{className:i==="books"?"active":"",onClick:()=>o("books"),children:[e.jsx(Ru,{}),e.jsx("span",{children:"Kitaplar"})]}),e.jsxs("button",{className:i==="loans"?"active":"",onClick:()=>o("loans"),children:[e.jsx(Du,{}),e.jsx("span",{children:"dnler"})]}),e.jsxs("button",{className:i==="database"?"active":"",onClick:()=>o("database"),children:[e.jsx(Mu,{}),e.jsx("span",{children:"Veritaban"})]})]}),e.jsxs("div",{className:"admin-content",children:[i==="overview"&&l&&e.jsxs("div",{className:"overview-grid",children:[e.jsxs("div",{className:"stat-card stat-card-books",onClick:()=>o("books"),children:[e.jsx("div",{className:"stat-icon",children:e.jsx(Ru,{})}),e.jsx("h3",{children:"Kitaplar"}),e.jsx("p",{className:"stat-number",children:l.bookCount})]}),e.jsxs("div",{className:"stat-card stat-card-users",onClick:()=>o("users"),children:[e.jsx("div",{className:"stat-icon",children:e.jsx(So,{})}),e.jsx("h3",{children:"Kullanclar"}),e.jsx("p",{className:"stat-number",children:l.userCount})]}),e.jsxs("div",{className:"stat-card stat-card-loans",onClick:()=>o("loans"),children:[e.jsx("div",{className:"stat-icon",children:e.jsx(Du,{})}),e.jsx("h3",{children:"dnler"}),e.jsx("p",{className:"stat-number",children:l.loanCount})]}),e.jsxs("div",{className:"stat-card stat-card-students",onClick:()=>o("students"),children:[e.jsx("div",{className:"stat-icon",children:e.jsx(So,{})}),e.jsx("h3",{children:"renciler"}),e.jsx("p",{className:"stat-number",children:l.studentCount})]}),e.jsxs("div",{className:"stat-card stat-card-personel",onClick:()=>o("users"),children:[e.jsx("div",{className:"stat-icon",children:e.jsx(So,{})}),e.jsx("h3",{children:"Personeller"}),e.jsx("p",{className:"stat-number",children:l.personelCount})]}),e.jsxs("div",{className:"stat-card stat-card-admins",children:[e.jsx("div",{className:"stat-icon",children:e.jsx(Mu,{})}),e.jsx("h3",{children:"Adminler"}),e.jsx("p",{className:"stat-number",children:l.adminCount})]})]}),i==="users"&&e.jsxs("div",{className:"users-table",children:[e.jsxs("div",{className:"action-buttons",children:[e.jsx("button",{className:`btn-add ${et?"active":""}`,onClick:()=>{Qe(!0)},children:" Yeni Personel Ekle"}),e.jsxs("button",{className:"btn-upload",onClick:()=>{We(!0),Ge(!0)},children:[e.jsx(h0,{}),e.jsx("span",{children:"Excel/CSV ile Ekle"})]}),e.jsx("button",{className:`btn-select ${nt==="users"?"active":""}`,onClick:()=>{nt==="users"?(At(null),it(new Set)):At("users")},children:nt==="users"?" Seimi ptal":" Se"}),nt==="users"&&he.size>0&&e.jsxs(e.Fragment,{children:[e.jsxs("button",{className:"btn-edit-bulk",onClick:()=>{const p=u.filter(O=>O.username&&he.has(O.username));if(p.length===1)D(p[0]),Re(!0),lt({name:p[0].name||"",surname:p[0].surname||"",position:p[0].position||"",password:""});else if(p.length>1){const O=p.reduce((L,E)=>(E.username&&(L[E.username]={name:E.name||"",surname:E.surname||"",position:E.position||"",password:""}),L),{});Ke({type:"users",items:p}),Mt(O),tn(null),le(!0)}},children:[e.jsx("span",{className:"btn-icon",children:e.jsx(Nl,{})}),e.jsxs("span",{children:["Seilenleri Dzenle (",he.size,")"]})]}),e.jsxs("button",{className:"btn-delete-bulk",onClick:dt,children:[e.jsx("span",{className:"btn-icon",children:e.jsx(Rl,{})}),e.jsxs("span",{children:["Seilenleri Sil (",he.size,")"]})]})]})]}),et&&e.jsxs("div",{className:"add-modal",children:[e.jsx("h3",{children:"Yeni Personel Ekle"}),e.jsxs("div",{className:"add-form",children:[e.jsxs("div",{children:[e.jsx("label",{children:"Kullanc Ad *"}),e.jsx("input",{type:"text",value:me.username,onChange:p=>Ct({...me,username:p.target.value}),placeholder:"Kullanc ad"})]}),e.jsxs("div",{children:[e.jsx("label",{children:"ifre"}),e.jsx("input",{type:"password",value:me.password,onChange:p=>Ct({...me,password:p.target.value}),placeholder:"Bo braklrsa: 1234"})]}),e.jsxs("div",{children:[e.jsx("label",{children:"Ad *"}),e.jsx("input",{type:"text",value:me.name,onChange:p=>Ct({...me,name:p.target.value}),placeholder:"Personel ad"})]}),e.jsxs("div",{children:[e.jsx("label",{children:"soyad *"}),e.jsx("input",{type:"text",value:me.surname,onChange:p=>Ct({...me,surname:p.target.value}),placeholder:"Personel soyad"})]}),e.jsxs("div",{children:[e.jsx("label",{children:"Grev"}),e.jsx("input",{type:"text",value:me.position,onChange:p=>Ct({...me,position:p.target.value}),placeholder:"Pozisyon (opsiyonel)"})]}),e.jsxs("div",{className:"form-actions",children:[e.jsx("button",{className:"btn-save",onClick:ke,children:"Kaydet"}),e.jsx("button",{className:"btn-cancel",onClick:()=>{Qe(!1),Ct({username:"",password:"",name:"",surname:"",position:""})},children:"ptal"})]})]})]}),I?e.jsx("p",{children:"Ykleniyor..."}):u.length===0?e.jsx("p",{className:"empty-message",children:"Henz kullanc eklenmemi. Yukardaki butona tklayarak personel ekleyebilirsiniz."}):e.jsxs(e.Fragment,{children:[e.jsxs("table",{children:[e.jsx("thead",{children:e.jsxs("tr",{children:[e.jsx("th",{children:"Kullanc Ad"}),e.jsx("th",{children:"Ad"}),e.jsx("th",{children:"soyad"}),e.jsx("th",{children:"Rol"}),e.jsx("th",{children:"Pozisyon"}),nt!=="users"&&e.jsx("th",{children:"lemler"}),nt==="users"&&e.jsx("th",{style:{width:"60px",textAlign:"center"},children:e.jsx("div",{className:`selection-checkbox ${u.filter(p=>p.role!=="ADMIN"&&p.role!=="Admin"&&p.username).length>0&&u.filter(p=>p.role!=="ADMIN"&&p.role!=="Admin"&&p.username).every(p=>p.username&&he.has(p.username))?"selected":""}`,onClick:()=>{const p=u.filter(E=>E.role!=="ADMIN"&&E.role!=="Admin"&&E.username),O=p.every(E=>E.username&&he.has(E.username)),L=new Set(he);O?p.forEach(E=>{E.username&&L.delete(E.username)}):p.forEach(E=>{E.username&&L.add(E.username)}),it(L)},style:{cursor:"pointer",display:"inline-block"},children:u.filter(p=>p.role!=="ADMIN"&&p.role!=="Admin"&&p.username).length>0&&u.filter(p=>p.role!=="ADMIN"&&p.role!=="Admin"&&p.username).every(p=>p.username&&he.has(p.username))&&e.jsx("span",{children:""})})})]})}),e.jsx("tbody",{children:u.map((p,O)=>e.jsxs("tr",{children:[e.jsx("td",{children:p.username||"-"}),e.jsx("td",{children:p.name||"-"}),e.jsx("td",{children:p.surname||"-"}),e.jsx("td",{children:e.jsx("span",{className:`role-badge role-${p.role.toLowerCase()}`,children:p.role==="ADMIN"||p.role==="Admin"?"Admin":"Personel"})}),e.jsx("td",{children:p.position||"-"}),nt==="users"&&e.jsx("td",{onClick:L=>L.stopPropagation(),style:{textAlign:"center"},children:p.role!=="ADMIN"&&p.role!=="Admin"&&p.username&&e.jsx("div",{className:`selection-checkbox ${he.has(p.username)?"selected":""}`,onClick:()=>{const L=new Set(he);he.has(p.username)?L.delete(p.username):L.add(p.username),it(L)},children:he.has(p.username)&&e.jsx("span",{children:""})})})]},p.username||`user-${O}`))})]}),Oe&&b&&b.username&&e.jsxs("div",{className:"edit-modal",children:[e.jsxs("h3",{children:["Personel Dzenle: ",b.username]}),e.jsxs("div",{className:"edit-form",children:[e.jsxs("div",{children:[e.jsx("label",{children:"Ad *"}),e.jsx("input",{type:"text",value:bt.name,onChange:p=>lt({...bt,name:p.target.value}),placeholder:"Personel ad"})]}),e.jsxs("div",{children:[e.jsx("label",{children:"soyad *"}),e.jsx("input",{type:"text",value:bt.surname,onChange:p=>lt({...bt,surname:p.target.value}),placeholder:"Personel soyad"})]}),e.jsxs("div",{children:[e.jsx("label",{children:"Pozisyon"}),e.jsx("input",{type:"text",value:bt.position,onChange:p=>lt({...bt,position:p.target.value}),placeholder:"Pozisyon (opsiyonel)"})]}),e.jsxs("div",{children:[e.jsx("label",{children:"Yeni ifre"}),e.jsx("input",{type:"password",value:bt.password,onChange:p=>lt({...bt,password:p.target.value}),placeholder:"Bo braklrsa deitirilmez"})]}),e.jsxs("div",{className:"form-actions",children:[e.jsx("button",{className:"btn-save",onClick:K,children:"Gncelle"}),e.jsx("button",{className:"btn-cancel",onClick:()=>{Re(!1),D(null),lt({name:"",surname:"",position:"",password:""})},children:"ptal"})]})]})]})]})]}),i==="students"&&e.jsxs("div",{className:"students-table",children:[e.jsxs("div",{className:"action-buttons",children:[e.jsx("button",{className:`btn-add ${be?"active":""}`,onClick:()=>{Me(!0)},children:" Yeni renci Ekle"}),e.jsx("button",{className:`btn-select ${nt==="students"?"active":""}`,onClick:()=>{nt==="students"?(At(null),Ne(new Set)):At("students")},children:nt==="students"?" Seimi ptal":" Se"}),nt==="students"&&A.size>0&&e.jsxs(e.Fragment,{children:[e.jsxs("button",{className:"btn-edit-bulk",onClick:()=>{var O,L;const p=h.filter(E=>E.studentNumber&&A.has(E.studentNumber));if(p.length===1)V(p[0]),xt(!0),Ce({name:p[0].name||"",surname:p[0].surname||"",class:((O=p[0].class)==null?void 0:O.toString())||"",branch:p[0].branch||"",studentNumber:((L=p[0].studentNumber)==null?void 0:L.toString())||""});else if(p.length>1){const E=p.reduce((je,St)=>{var Rt;return St.studentNumber!==void 0&&(je[String(St.studentNumber)]={name:St.name||"",surname:St.surname||"",class:((Rt=St.class)==null?void 0:Rt.toString())||"",branch:St.branch||""}),je},{});Ke({type:"students",items:p}),Mt(E),tn(null),le(!0)}},children:[e.jsx("span",{className:"btn-icon",children:e.jsx(Nl,{})}),e.jsxs("span",{children:["Seilenleri Dzenle (",A.size,")"]})]}),e.jsxs("button",{className:"btn-delete-bulk",onClick:Wn,children:[e.jsx("span",{className:"btn-icon",children:e.jsx(Rl,{})}),e.jsxs("span",{children:["Seilenleri Sil (",A.size,")"]})]})]})]}),be&&e.jsxs("div",{className:"add-modal",children:[e.jsx("h3",{children:"Yeni renci Ekle"}),e.jsxs("div",{className:"add-form",children:[e.jsxs("div",{children:[e.jsx("label",{children:"Ad *"}),e.jsx("input",{type:"text",value:de.name,onChange:p=>Ce({...de,name:p.target.value}),placeholder:"renci ad"})]}),e.jsxs("div",{children:[e.jsx("label",{children:"soyad *"}),e.jsx("input",{type:"text",value:de.surname,onChange:p=>Ce({...de,surname:p.target.value}),placeholder:"renci soyad"})]}),e.jsxs("div",{children:[e.jsx("label",{children:"renci Numaras *"}),e.jsx("input",{type:"number",value:de.studentNumber,onChange:p=>Ce({...de,studentNumber:p.target.value}),placeholder:"renci numaras"})]}),e.jsxs("div",{children:[e.jsx("label",{children:"Snf"}),e.jsxs("select",{value:de.class,onChange:p=>Ce({...de,class:p.target.value}),children:[e.jsx("option",{value:"",children:"Seiniz (Opsiyonel)"}),e.jsx("option",{value:"9",children:"9"}),e.jsx("option",{value:"10",children:"10"}),e.jsx("option",{value:"11",children:"11"}),e.jsx("option",{value:"12",children:"12"})]})]}),e.jsxs("div",{children:[e.jsx("label",{children:"ube"}),e.jsxs("select",{value:de.branch,onChange:p=>Ce({...de,branch:p.target.value}),children:[e.jsx("option",{value:"",children:"Seiniz (Opsiyonel)"}),e.jsx("option",{value:"A",children:"A"}),e.jsx("option",{value:"B",children:"B"}),e.jsx("option",{value:"C",children:"C"}),e.jsx("option",{value:"D",children:"D"}),e.jsx("option",{value:"E",children:"E"}),e.jsx("option",{value:"F",children:"F"})]})]}),e.jsxs("div",{className:"form-actions",children:[e.jsx("button",{className:"btn-save",onClick:Q,children:"Kaydet"}),e.jsx("button",{className:"btn-cancel",onClick:()=>{Me(!1),Ce({name:"",surname:"",class:"",branch:"",studentNumber:""})},children:"ptal"})]})]})]}),I?e.jsx("p",{children:"Ykleniyor..."}):h.length===0?e.jsx("p",{className:"empty-message",children:"Henz renci eklenmemi. Yukardaki butona tklayarak renci ekleyebilirsiniz."}):e.jsxs("table",{children:[e.jsx("thead",{children:e.jsxs("tr",{children:[e.jsx("th",{children:"renci Numaras"}),e.jsx("th",{children:"Ad"}),e.jsx("th",{children:"soyad"}),e.jsx("th",{children:"Snf"}),e.jsx("th",{children:"ube"}),e.jsx("th",{children:"Ceza Puan"}),nt==="students"&&e.jsx("th",{style:{width:"60px",textAlign:"center"},children:e.jsx("div",{className:`selection-checkbox ${h.filter(p=>p.studentNumber).length>0&&h.filter(p=>p.studentNumber).every(p=>p.studentNumber&&A.has(p.studentNumber))?"selected":""}`,onClick:()=>{const p=h.filter(E=>E.studentNumber),O=p.every(E=>E.studentNumber&&A.has(E.studentNumber)),L=new Set(A);O?p.forEach(E=>{E.studentNumber&&L.delete(E.studentNumber)}):p.forEach(E=>{E.studentNumber&&L.add(E.studentNumber)}),Ne(L)},style:{cursor:"pointer",display:"inline-block"},children:h.filter(p=>p.studentNumber).length>0&&h.filter(p=>p.studentNumber).every(p=>p.studentNumber&&A.has(p.studentNumber))&&e.jsx("span",{children:""})})})]})}),e.jsx("tbody",{children:h.map((p,O)=>e.jsxs("tr",{children:[e.jsx("td",{children:p.studentNumber||"-"}),e.jsx("td",{children:p.name||"-"}),e.jsx("td",{children:p.surname||"-"}),e.jsx("td",{children:p.class||"-"}),e.jsx("td",{children:p.branch||"-"}),e.jsx("td",{children:p.penaltyPoints||0}),nt==="students"&&e.jsx("td",{onClick:L=>L.stopPropagation(),style:{textAlign:"center"},children:p.studentNumber&&e.jsx("div",{className:`selection-checkbox ${A.has(p.studentNumber)?"selected":""}`,onClick:()=>{const L=new Set(A);A.has(p.studentNumber)?L.delete(p.studentNumber):L.add(p.studentNumber),Ne(L)},children:A.has(p.studentNumber)&&e.jsx("span",{children:""})})})]},`student-${O}-${p.studentNumber}`))})]}),_e&&q&&e.jsxs("div",{className:"edit-modal",children:[e.jsxs("h3",{children:["renci Dzenle: ",q.studentNumber]}),e.jsxs("div",{className:"edit-form",children:[e.jsxs("div",{children:[e.jsx("label",{children:"Ad *"}),e.jsx("input",{type:"text",value:de.name,onChange:p=>Ce({...de,name:p.target.value}),placeholder:"renci ad"})]}),e.jsxs("div",{children:[e.jsx("label",{children:"soyad *"}),e.jsx("input",{type:"text",value:de.surname,onChange:p=>Ce({...de,surname:p.target.value}),placeholder:"renci soyad"})]}),e.jsxs("div",{children:[e.jsx("label",{children:"Snf"}),e.jsxs("select",{value:de.class,onChange:p=>Ce({...de,class:p.target.value}),children:[e.jsx("option",{value:"",children:"Seiniz (Opsiyonel)"}),e.jsx("option",{value:"9",children:"9"}),e.jsx("option",{value:"10",children:"10"}),e.jsx("option",{value:"11",children:"11"}),e.jsx("option",{value:"12",children:"12"})]})]}),e.jsxs("div",{children:[e.jsx("label",{children:"ube"}),e.jsxs("select",{value:de.branch,onChange:p=>Ce({...de,branch:p.target.value}),children:[e.jsx("option",{value:"",children:"Seiniz (Opsiyonel)"}),e.jsx("option",{value:"A",children:"A"}),e.jsx("option",{value:"B",children:"B"}),e.jsx("option",{value:"C",children:"C"}),e.jsx("option",{value:"D",children:"D"}),e.jsx("option",{value:"E",children:"E"}),e.jsx("option",{value:"F",children:"F"})]})]}),e.jsxs("div",{className:"form-actions",children:[e.jsx("button",{className:"btn-save",onClick:ae,children:"Gncelle"}),e.jsx("button",{className:"btn-cancel",onClick:()=>{xt(!1),V(null),Ce({name:"",surname:"",class:"",branch:"",studentNumber:""})},children:"ptal"})]})]})]})]}),i==="books"&&e.jsxs("div",{className:"books-table",children:[e.jsxs("div",{className:"action-buttons",children:[e.jsx("button",{className:"btn-add",onClick:()=>$e(!0),children:" Yeni Kitap Ekle"}),e.jsx("button",{className:`btn-select ${nt==="books"?"active":""}`,onClick:()=>{nt==="books"?(At(null),H(new Set)):At("books")},children:nt==="books"?" Seimi ptal":" Se"}),nt==="books"&&T.size>0&&e.jsxs(e.Fragment,{children:[e.jsxs("button",{className:"btn-edit-bulk",onClick:()=>{const p=k.filter(O=>T.has(O.id));if(p.length===1)M(p[0]),ft(!0),Lt({title:p[0].title,author:p[0].author,category:p[0].category,quantity:p[0].totalQuantity.toString()});else if(p.length>1){const O=p.reduce((L,E)=>(L[E.id]={title:E.title,author:E.author,category:E.category,quantity:E.totalQuantity.toString()},L),{});Ke({type:"books",items:p}),Mt(O),tn(null),le(!0)}},children:[e.jsx("span",{className:"btn-icon",children:e.jsx(Nl,{})}),e.jsxs("span",{children:["Seilenleri Dzenle (",T.size,")"]})]}),e.jsxs("button",{className:"btn-delete-bulk",onClick:hn,children:[e.jsx("span",{className:"btn-icon",children:e.jsx(Rl,{})}),e.jsxs("span",{children:["Seilenleri Sil (",T.size,")"]})]})]})]}),Z&&e.jsxs("div",{className:"add-modal",children:[e.jsx("h3",{children:"Yeni Kitap Ekle"}),e.jsxs("div",{className:"add-form",children:[e.jsxs("div",{children:[e.jsx("label",{children:"Balk *"}),e.jsx("input",{type:"text",value:tt.title,onChange:p=>Lt({...tt,title:p.target.value}),placeholder:"Kitap bal"})]}),e.jsxs("div",{children:[e.jsx("label",{children:"Yazar *"}),e.jsx("input",{type:"text",value:tt.author,onChange:p=>Lt({...tt,author:p.target.value}),placeholder:"Yazar ad"})]}),e.jsxs("div",{children:[e.jsx("label",{children:"Kategori"}),e.jsx("input",{type:"text",value:tt.category,onChange:p=>Lt({...tt,category:p.target.value}),placeholder:"Kategori (varsaylan: Genel)"})]}),e.jsxs("div",{children:[e.jsx("label",{children:"Miktar *"}),e.jsx("input",{type:"number",value:tt.quantity,onChange:p=>Lt({...tt,quantity:p.target.value}),placeholder:"Kitap says"})]}),e.jsxs("div",{className:"form-actions",children:[e.jsx("button",{className:"btn-save",onClick:Ye,children:"Kaydet"}),e.jsx("button",{className:"btn-cancel",onClick:()=>{$e(!1),Lt({title:"",author:"",category:"",quantity:""})},children:"ptal"})]})]})]}),I?e.jsx("p",{children:"Ykleniyor..."}):k.length===0?e.jsx("p",{className:"empty-message",children:"Henz kitap eklenmemi. Yukardaki butona tklayarak kitap ekleyebilirsiniz."}):e.jsxs("table",{children:[e.jsx("thead",{children:e.jsxs("tr",{children:[e.jsx("th",{children:"Balk"}),e.jsx("th",{children:"Yazar"}),e.jsx("th",{children:"Kategori"}),e.jsx("th",{children:"Mevcut"}),e.jsx("th",{children:"Toplam"}),e.jsx("th",{children:"Aktif dn"}),nt==="books"&&e.jsx("th",{style:{width:"60px",textAlign:"center"},children:e.jsx("div",{className:`selection-checkbox ${k.length>0&&k.every(p=>T.has(p.id))?"selected":""}`,onClick:()=>{const p=k.every(L=>T.has(L.id)),O=new Set(T);p?k.forEach(L=>O.delete(L.id)):k.forEach(L=>O.add(L.id)),H(O)},style:{cursor:"pointer",display:"inline-block"},children:k.length>0&&k.every(p=>T.has(p.id))&&e.jsx("span",{children:""})})})]})}),e.jsx("tbody",{children:k.map(p=>{var O;return e.jsxs("tr",{children:[e.jsx("td",{children:p.title}),e.jsx("td",{children:p.author}),e.jsx("td",{children:p.category}),e.jsx("td",{children:p.quantity}),e.jsx("td",{children:p.totalQuantity}),e.jsx("td",{children:((O=p.loans)==null?void 0:O.length)||0}),nt==="books"&&e.jsx("td",{onClick:L=>L.stopPropagation(),style:{textAlign:"center"},children:e.jsx("div",{className:`selection-checkbox ${T.has(p.id)?"selected":""}`,onClick:()=>{const L=new Set(T);T.has(p.id)?L.delete(p.id):L.add(p.id),H(L)},children:T.has(p.id)&&e.jsx("span",{children:""})})})]},p.id)})})]}),De&&ie&&e.jsxs("div",{className:"edit-modal",children:[e.jsxs("h3",{children:["Kitap Dzenle: ",ie.title]}),e.jsxs("div",{className:"edit-form",children:[e.jsxs("div",{children:[e.jsx("label",{children:"Balk *"}),e.jsx("input",{type:"text",value:tt.title,onChange:p=>Lt({...tt,title:p.target.value}),placeholder:"Kitap bal"})]}),e.jsxs("div",{children:[e.jsx("label",{children:"Yazar *"}),e.jsx("input",{type:"text",value:tt.author,onChange:p=>Lt({...tt,author:p.target.value}),placeholder:"Yazar ad"})]}),e.jsxs("div",{children:[e.jsx("label",{children:"Kategori"}),e.jsx("input",{type:"text",value:tt.category,onChange:p=>Lt({...tt,category:p.target.value}),placeholder:"Kategori (varsaylan: Genel)"})]}),e.jsxs("div",{children:[e.jsx("label",{children:"Toplam Miktar *"}),e.jsx("input",{type:"number",value:tt.quantity,onChange:p=>Lt({...tt,quantity:p.target.value}),placeholder:"Toplam kitap says"})]}),e.jsxs("div",{className:"form-actions",children:[e.jsx("button",{className:"btn-save",onClick:ct,children:"Gncelle"}),e.jsx("button",{className:"btn-cancel",onClick:()=>{ft(!1),M(null),Lt({title:"",author:"",category:"",quantity:""})},children:"ptal"})]})]})]})]}),i==="loans"&&e.jsx("div",{className:"loans-table",children:I?e.jsx("p",{children:"Ykleniyor..."}):e.jsxs(e.Fragment,{children:[e.jsxs("div",{className:"action-buttons",children:[e.jsx("button",{className:`btn-select ${nt==="loans"?"active":""}`,onClick:()=>{nt==="loans"?(At(null),Nt(new Set)):At("loans")},children:nt==="loans"?" Seimi ptal":" Se"}),nt==="loans"&&Ue.size>0&&e.jsxs(e.Fragment,{children:[e.jsxs("button",{className:"btn-edit-bulk",onClick:()=>{const p=B.filter(O=>Ue.has(O.id));if(p.length===1)ce(p[0]),P(!0),Ft({borrower:p[0].borrower,dueDate:new Date(p[0].dueDate).toISOString().split("T")[0],personel:p[0].personel});else if(p.length>1){const O=p.reduce((L,E)=>(L[String(E.id)]={borrower:E.borrower,dueDate:E.dueDate?new Date(E.dueDate).toISOString().split("T")[0]:"",personel:E.personel||""},L),{});Ke({type:"loans",items:p}),Mt(O),tn(null),le(!0)}},children:[e.jsx("span",{className:"btn-icon",children:e.jsx(Nl,{})}),e.jsxs("span",{children:["Seilenleri Dzenle (",Ue.size,")"]})]}),e.jsxs("button",{className:"btn-delete-bulk",onClick:on,children:[e.jsx("span",{className:"btn-icon",children:e.jsx(Rl,{})}),e.jsxs("span",{children:["Seilenleri ade Et (",Ue.size,")"]})]})]})]}),e.jsxs("table",{children:[e.jsx("thead",{children:e.jsxs("tr",{children:[e.jsx("th",{children:"Kitap"}),e.jsx("th",{children:"renci"}),e.jsx("th",{children:"Teslim Tarihi"}),e.jsx("th",{children:"Personel"}),nt==="loans"&&e.jsx("th",{style:{width:"60px",textAlign:"center"},children:e.jsx("div",{className:`selection-checkbox ${B.length>0&&B.every(p=>Ue.has(p.id))?"selected":""}`,onClick:()=>{const p=B.every(L=>Ue.has(L.id)),O=new Set(Ue);p?B.forEach(L=>O.delete(L.id)):B.forEach(L=>O.add(L.id)),Nt(O)},style:{cursor:"pointer",display:"inline-block"},children:B.length>0&&B.every(p=>Ue.has(p.id))&&e.jsx("span",{children:""})})})]})}),e.jsx("tbody",{children:B.length===0?e.jsx("tr",{children:e.jsx("td",{colSpan:nt==="loans"?5:4,style:{textAlign:"center",padding:"40px",color:"#7f8c8d"},children:"Henz dn kayd bulunmuyor."})}):B.map(p=>{var O;return e.jsxs("tr",{children:[e.jsx("td",{children:p.bookTitle||((O=p.book)==null?void 0:O.title)||"Bilinmiyor"}),e.jsx("td",{children:p.borrower}),e.jsx("td",{children:new Date(p.dueDate).toLocaleDateString("tr-TR")}),e.jsx("td",{children:p.personel}),nt==="loans"&&e.jsx("td",{onClick:L=>L.stopPropagation(),style:{textAlign:"center"},children:e.jsx("div",{className:`selection-checkbox ${Ue.has(p.id)?"selected":""}`,onClick:()=>{const L=new Set(Ue);Ue.has(p.id)?L.delete(p.id):L.add(p.id),Nt(L)},children:Ue.has(p.id)&&e.jsx("span",{children:""})})})]},p.id)})})]}),ze&&re&&e.jsxs("div",{className:"edit-modal",children:[e.jsx("h3",{children:"dn Kayd Dzenle"}),e.jsxs("div",{className:"edit-form",children:[e.jsxs("div",{children:[e.jsx("label",{children:"renci Ad *"}),e.jsx("input",{type:"text",value:Ht.borrower,onChange:p=>Ft({...Ht,borrower:p.target.value}),placeholder:"renci ad"})]}),e.jsxs("div",{children:[e.jsx("label",{children:"Teslim Tarihi *"}),e.jsx("input",{type:"date",value:Ht.dueDate,onChange:p=>Ft({...Ht,dueDate:p.target.value})})]}),e.jsxs("div",{children:[e.jsx("label",{children:"Personel"}),e.jsx("input",{type:"text",value:Ht.personel,onChange:p=>Ft({...Ht,personel:p.target.value}),placeholder:"Personel ad"})]}),e.jsxs("div",{className:"form-actions",children:[e.jsx("button",{className:"btn-save",onClick:at,children:"Gncelle"}),e.jsx("button",{className:"btn-cancel",onClick:()=>{P(!1),ce(null),Ft({borrower:"",dueDate:"",personel:""})},children:"ptal"})]})]})]})]})}),i==="database"&&e.jsxs("div",{className:"database-management",children:[e.jsxs("div",{className:"backup-section",children:[e.jsxs("div",{className:"backup-title",children:[e.jsx("div",{className:"backup-icon",children:e.jsx(m0,{})}),e.jsxs("div",{children:[e.jsx("h3",{children:"Yedekleme Merkezi"}),e.jsx("p",{children:"Veritabannz gvenli bir ekilde da aktarabilir ve gerektiinde geri ykleyebilirsiniz."})]})]}),e.jsx("button",{className:"btn-backup",onClick:Xt,children:"Yeni Yedek Olutur"})]}),e.jsxs("div",{className:"auto-backup-section",style:{backgroundColor:"#f8fafc",padding:"20px",borderRadius:"12px",border:"1px solid #e2e8f0",marginTop:"20px"},children:[e.jsxs("h3",{style:{marginBottom:"16px",display:"flex",alignItems:"center",gap:"10px"},children:[e.jsxs("svg",{width:"20",height:"20",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",children:[e.jsx("circle",{cx:"12",cy:"12",r:"10"}),e.jsx("polyline",{points:"12 6 12 12 16 14"})]}),"Otomatik Yedekleme"]}),oe&&e.jsxs("div",{style:{fontSize:"13px",color:"#64748b",marginBottom:"16px"},children:[e.jsxs("div",{children:["Durum: ",e.jsx("strong",{children:oe.enabled?" Aktif":" Pasif"})]}),e.jsxs("div",{children:["Aralk: ",e.jsxs("strong",{children:[oe.intervalDays," gn"]})]}),oe.lastBackupDate&&e.jsxs("div",{children:["Son Yedek: ",e.jsx("strong",{children:new Date(oe.lastBackupDate).toLocaleString("tr-TR")})]})]}),e.jsxs("div",{style:{display:"flex",gap:"12px",alignItems:"center",flexWrap:"wrap"},children:[e.jsxs("label",{style:{display:"flex",alignItems:"center",gap:"8px"},children:[e.jsx("input",{type:"checkbox",checked:Be,onChange:p=>ye(p.target.checked)}),e.jsx("span",{style:{fontSize:"14px"},children:"Otomatik Yedekleme Aktif"})]}),e.jsxs("label",{style:{display:"flex",alignItems:"center",gap:"8px"},children:[e.jsx("span",{style:{fontSize:"14px"},children:"Aralk (gn):"}),e.jsx("input",{type:"number",min:"1",max:"365",value:Ve,onChange:p=>jt(parseInt(p.target.value)||30),style:{width:"80px",padding:"6px",borderRadius:"6px",border:"1px solid #cbd5e1",fontSize:"14px"}})]}),e.jsx("button",{className:"btn-backup",onClick:Mn,style:{fontSize:"14px",padding:"8px 16px"},children:"Ayarlar Kaydet"})]})]}),e.jsxs("div",{style:{marginTop:"20px"},children:[e.jsx("h4",{style:{fontSize:"14px",fontWeight:600,color:"#1e293b",marginBottom:"12px"},children:"Eski Yedekleri Temizle"}),e.jsxs("div",{style:{display:"flex",gap:"12px",alignItems:"flex-end"},children:[e.jsxs("div",{style:{flex:1,maxWidth:"200px"},children:[e.jsx("label",{style:{fontSize:"13px",color:"#64748b",marginBottom:"6px",display:"block"},children:"Ne kadar eski yedekler silinsin?"}),e.jsxs("select",{value:zt,onChange:p=>nn(parseInt(p.target.value)),style:{width:"100%",padding:"10px 14px",border:"2px solid rgba(226, 232, 240, 0.8)",borderRadius:"8px",fontSize:"14px",color:"#1e293b",backgroundColor:"white"},children:[e.jsx("option",{value:30,children:"30 gn"}),e.jsx("option",{value:60,children:"60 gn"}),e.jsx("option",{value:90,children:"90 gn"}),e.jsx("option",{value:180,children:"180 gn"}),e.jsx("option",{value:365,children:"1 yl"})]})]}),e.jsx("button",{className:"btn-restore",onClick:ln,style:{fontSize:"14px",padding:"10px 20px"},children:"Temizle"})]})]}),e.jsxs("div",{className:"backups-list",children:[e.jsx("h3",{children:"Mevcut Yedekler"}),y.length===0?e.jsx("p",{children:"Henz yedek oluturulmam"}):e.jsx("ul",{children:y.map((p,O)=>e.jsxs("li",{children:[e.jsx("span",{children:p.split(/[/\\]/).pop()}),e.jsxs("div",{style:{display:"flex",gap:"8px"},children:[e.jsx("button",{className:"btn-restore",onClick:()=>vt(p),children:"Geri Ykle"}),e.jsx("button",{className:"btn-delete",onClick:()=>qt(p),style:{background:"linear-gradient(135deg, #ef4444 0%, #dc2626 100%)",color:"white",border:"none",padding:"8px 16px",borderRadius:"6px",cursor:"pointer",fontSize:"14px",fontWeight:"500"},children:"Sil"})]})]},O))})]}),l&&e.jsxs("div",{className:"info-card",style:{marginBottom:"24px"},children:[e.jsxs("h3",{children:[e.jsxs("svg",{width:"18",height:"18",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:[e.jsx("path",{d:"M19 21H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h11l5 5v11a2 2 0 0 1-2 2z"}),e.jsx("polyline",{points:"17 21 17 13 7 13 7 21"}),e.jsx("polyline",{points:"7 3 7 8 15 8"})]}),"Veritaban Yolu"]}),e.jsx("p",{className:"db-path",children:l.databasePath})]})]})]}),e.jsx(ur,{isOpen:rt,title:"Kitap Silme Onay",icon:"",onConfirm:Wt,onCancel:ht,confirmText:"Sil",cancelText:"ptal",confirmButtonColor:"#ef4444",loading:bn,children:Dt&&e.jsx(e.Fragment,{children:Dt.loans.length>0?e.jsxs(e.Fragment,{children:[e.jsxs("div",{style:{fontSize:"14px",color:"#475569",marginBottom:"12px",lineHeight:"1.6"},children:[e.jsx("strong",{children:Dt.book.title})," kitab u rencilerde dn grnyor:"]}),e.jsxs("div",{style:{padding:"12px",backgroundColor:"#fef3c7",borderRadius:"8px",border:"1px solid #fbbf24",marginBottom:"12px"},children:[e.jsxs("div",{style:{fontSize:"14px",color:"#92400e",fontWeight:600,marginBottom:"8px"},children:[" Aktif dnler (",Dt.loans.length,")"]}),e.jsx("ul",{style:{margin:0,paddingLeft:"20px",fontSize:"13px",color:"#78350f"},children:Dt.loans.map((p,O)=>{const L=p.dueDate?new Date(p.dueDate).toLocaleDateString("tr-TR"):"-";return e.jsxs("li",{style:{marginBottom:"4px"},children:[e.jsx("strong",{children:p.borrower})," (Teslim: ",L,")"]},O)})})]}),e.jsxs("div",{style:{fontSize:"13px",color:"#64748b",marginTop:"12px"},children:[e.jsxs("strong",{children:[Dt.loans.length," dn kayd"]})," bu ilemle birlikte silinecek."]})]}):e.jsxs("div",{style:{fontSize:"14px",color:"#475569",lineHeight:"1.6"},children:[e.jsx("strong",{children:Dt.book.title})," kitabn silmek istediinize emin misiniz? Bu ilem geri alnamaz."]})})}),e.jsx(ur,{isOpen:Ut,title:"renci Silme Onay",icon:"",onConfirm:async()=>{var p,O;if(await dn(),Tt){for(const L of Tt.students)if(L.studentNumber)try{await xe.delete(`/admin/students/${L.studentNumber}`)}catch(E){const je=E instanceof Error?E.message:(O=(p=E==null?void 0:E.response)==null?void 0:p.data)==null?void 0:O.message;alert(`${sn(L)} silinirken hata: ${je||"Bilinmeyen hata"}`)}alert("renci(ler) baaryla silindi"),i==="students"?Fe():pe(),U()}},onCancel:It,confirmText:"Sil",cancelText:"ptal",confirmButtonColor:"#ef4444",loading:bn,children:Tt&&(()=>{const p=Tt.students.map(O=>{const L=sn(O),St=Jt(`${O.name||""} ${O.surname||""}`)||Jt(O.name||O.surname||""),Rt=St?Tt.loansByStudent.get(St)||[]:[];return{student:O,displayName:L,loansForStudent:Rt}}).filter(O=>O.loansForStudent.length>0);return p.length===0?e.jsx("div",{style:{fontSize:"14px",color:"#475569",lineHeight:"1.6"},children:Tt.students.length===1?e.jsxs(e.Fragment,{children:[e.jsx("strong",{children:sn(Tt.students[0])})," rencisini silmek istediinize emin misiniz? Bu ilem geri alnamaz."]}):e.jsxs(e.Fragment,{children:[e.jsxs("strong",{children:[Tt.students.length," renci"]})," silmek istediinize emin misiniz? Bu ilem geri alnamaz."]})}):e.jsxs(e.Fragment,{children:[e.jsx("div",{style:{fontSize:"14px",color:"#475569",marginBottom:"12px",lineHeight:"1.6"},children:"Seilen rencilerin bazlarnda teslim edilmemi kitaplar var:"}),p.map((O,L)=>e.jsxs("div",{style:{padding:"12px",backgroundColor:"#fef3c7",borderRadius:"8px",border:"1px solid #fbbf24",marginBottom:"12px"},children:[e.jsxs("div",{style:{fontSize:"14px",color:"#92400e",fontWeight:600,marginBottom:"8px"},children:[" ",O.displayName," - ",O.loansForStudent.length," Kitap"]}),e.jsx("ul",{style:{margin:0,paddingLeft:"20px",fontSize:"13px",color:"#78350f"},children:O.loansForStudent.map((E,je)=>{const St=E.dueDate?new Date(E.dueDate).toLocaleDateString("tr-TR"):"-";return e.jsxs("li",{style:{marginBottom:"4px"},children:[e.jsx("strong",{children:E.title})," (Teslim: ",St,")"]},je)})})]},L)),e.jsxs("div",{style:{fontSize:"13px",color:"#64748b",marginTop:"12px"},children:[e.jsxs("strong",{children:[p.reduce((O,L)=>O+L.loansForStudent.length,0)," dn kayd"]})," bu ilemle birlikte silinecek."]})]})})()}),e.jsx(ur,{isOpen:J,title:(ge==null?void 0:ge.type)==="books"?"Toplu Kitap Silme":"Toplu renci Silme",icon:"",onConfirm:async()=>{if(ge){w(!0);try{ge.type==="books"?await $n(ge.selectedItems):await jn(ge.selectedItems),te(!1),v(null)}finally{w(!1)}}},onCancel:()=>{te(!1),v(null)},confirmText:"Devam Et",cancelText:"ptal",confirmButtonColor:"#ef4444",loading:bn,children:ge&&e.jsxs(e.Fragment,{children:[e.jsx("div",{style:{fontSize:"14px",color:"#475569",marginBottom:"16px",lineHeight:"1.6"},children:e.jsx("strong",{children:"Silinecekler ierisinde dn listesi olanlar var:"})}),e.jsx("div",{style:{maxHeight:"400px",overflowY:"auto",marginBottom:"16px"},children:ge.items.map((p,O)=>e.jsxs("div",{style:{padding:"12px",backgroundColor:"#fef3c7",borderRadius:"8px",border:"1px solid #fbbf24",marginBottom:"12px"},children:[e.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"12px",marginBottom:"8px"},children:[e.jsx("div",{className:`selection-checkbox ${ge.selectedItems.has(p.id)?"selected":""}`,onClick:()=>{const L=new Set(ge.selectedItems);ge.selectedItems.has(p.id)?L.delete(p.id):L.add(p.id),v({...ge,selectedItems:L})},style:{cursor:"pointer",flexShrink:0},children:ge.selectedItems.has(p.id)&&e.jsx("span",{children:""})}),e.jsx("div",{style:{flex:1},children:e.jsxs("div",{style:{fontSize:"14px",color:"#92400e",fontWeight:600},children:[p.name," - ",p.loans.length," dn"]})})]}),e.jsx("ul",{style:{margin:0,paddingLeft:"40px",fontSize:"13px",color:"#78350f"},children:p.loans.map((L,E)=>{const je=L.dueDate?new Date(L.dueDate).toLocaleDateString("tr-TR"):"-";return e.jsx("li",{style:{marginBottom:"4px"},children:ge.type==="books"?e.jsxs(e.Fragment,{children:[e.jsx("strong",{children:L.borrower})," (Teslim: ",je,")"]}):e.jsxs(e.Fragment,{children:[e.jsx("strong",{children:L.title})," (Teslim: ",je,")"]})},E)})})]},O))}),e.jsxs("div",{style:{fontSize:"13px",color:"#64748b",padding:"12px",backgroundColor:"#f1f5f9",borderRadius:"8px"},children:[e.jsxs("strong",{children:[ge.items.reduce((p,O)=>p+O.loans.length,0)," dn kayd"]})," seilen ",ge.type==="books"?"kitap":"renci","lerle birlikte silinecek."]})]})}),$&&Le&&_t.createPortal(e.jsx("div",{style:{position:"fixed",inset:0,backgroundColor:"rgba(15, 23, 42, 0.5)",display:"flex",alignItems:"center",justifyContent:"center",zIndex:1200,padding:"16px"},onClick:Zn,children:e.jsxs("div",{className:"card",style:{width:"100%",maxWidth:"900px",maxHeight:"90vh",overflowY:"auto",borderRadius:"16px",padding:"24px"},onClick:p=>p.stopPropagation(),children:[e.jsxs("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center",marginBottom:"16px"},children:[e.jsxs("div",{children:[e.jsxs("h2",{style:{margin:0},children:["Toplu ",nr[Le.type]," Dzenleme"]}),e.jsxs("p",{style:{margin:"4px 0 0",color:"#475569",fontSize:"14px"},children:[Le.items.length," kayt seildi"]})]}),e.jsx("button",{onClick:Zn,style:{background:"none",border:"none",fontSize:"26px",cursor:"pointer",color:"#94a3b8"},"aria-label":"Toplu dzenlemeyi kapat",children:""})]}),en&&e.jsx("div",{style:{padding:"12px",borderRadius:"10px",backgroundColor:"#fee2e2",color:"#b91c1c",marginBottom:"16px"},children:en}),e.jsx("div",{style:{display:"flex",flexDirection:"column",gap:"16px"},children:Le.items.map((p,O)=>z(p,O))}),e.jsxs("div",{style:{display:"flex",justifyContent:"flex-end",gap:"12px",marginTop:"24px"},children:[e.jsx("button",{onClick:Zn,style:{padding:"10px 20px",borderRadius:"8px",border:"1px solid #e2e8f0",background:"#fff",cursor:"pointer",fontWeight:600},children:"ptal"}),e.jsx("button",{onClick:Cn,disabled:_n,style:{padding:"10px 24px",borderRadius:"8px",border:"none",backgroundColor:_n?"#94a3b8":"#2563eb",color:"white",cursor:_n?"not-allowed":"pointer",fontWeight:700},children:_n?"Gncelleniyor...":"Deiiklikleri Kaydet"})]})]})}),document.body),e.jsx(zi,{isOpen:Y,title:(g==null?void 0:g.title)||"Bilgi",icon:g==null?void 0:g.icon,type:(g==null?void 0:g.type)||"info",onClose:()=>{ee(!1),R(null),window.__userDeleteConfirm&&(window.__userDeleteConfirm(!1),delete window.__userDeleteConfirm),window.__bulkDeleteUsersConfirm&&(window.__bulkDeleteUsersConfirm(!1),delete window.__bulkDeleteUsersConfirm),window.__bulkReturnLoansConfirm&&(window.__bulkReturnLoansConfirm(!1),delete window.__bulkReturnLoansConfirm),window.__returnLoanConfirm&&(window.__returnLoanConfirm(!1),delete window.__returnLoanConfirm)},onConfirm:(g==null?void 0:g.type)==="warning"?()=>{window.__userDeleteConfirm&&(window.__userDeleteConfirm(!0),delete window.__userDeleteConfirm),window.__bulkDeleteUsersConfirm&&(window.__bulkDeleteUsersConfirm(!0),delete window.__bulkDeleteUsersConfirm),window.__bulkReturnLoansConfirm&&(window.__bulkReturnLoansConfirm(!0),delete window.__bulkReturnLoansConfirm),window.__returnLoanConfirm&&(window.__returnLoanConfirm(!0),delete window.__returnLoanConfirm)}:void 0,confirmText:"Onayla",children:e.jsx("div",{style:{fontSize:"14px",color:"#475569",lineHeight:"1.6"},children:g==null?void 0:g.message})}),e.jsx(c0,{isOpen:Xe,onClose:()=>Ge(!1),onSuccess:async p=>{p&&kt(p),await pe(),await U()}}),e.jsx(ur,{isOpen:!!Te,title:(Te==null?void 0:Te.title)||"Onay",icon:(Te==null?void 0:Te.icon)||"",onConfirm:async()=>{Te!=null&&Te.onConfirm&&await Te.onConfirm()},onCancel:()=>wt(null),confirmText:(Te==null?void 0:Te.confirmText)||"Onayla",cancelText:"ptal",confirmButtonColor:(Te==null?void 0:Te.confirmButtonColor)||"#ef4444",children:e.jsx("div",{style:{fontSize:"14px",color:"#475569",lineHeight:"1.6",whiteSpace:"pre-wrap"},children:(Te==null?void 0:Te.message)||""})}),_&&ue&&e.jsx("div",{style:{position:"fixed",top:0,left:0,right:0,bottom:0,backgroundColor:"rgba(0, 0, 0, 0.6)",display:"flex",alignItems:"center",justifyContent:"center",zIndex:1e4},onClick:()=>ne(!1),children:e.jsxs("div",{style:{backgroundColor:"white",borderRadius:"16px",padding:"32px",maxWidth:"500px",width:"90%",boxShadow:"0 20px 60px rgba(0, 0, 0, 0.3)"},onClick:p=>p.stopPropagation(),children:[e.jsx("h2",{style:{fontSize:"24px",fontWeight:"bold",marginBottom:"8px",color:"#1e293b",textAlign:"center"},children:" K urtarma Kodu"}),e.jsx("p",{style:{fontSize:"14px",color:"#64748b",textAlign:"center",marginBottom:"24px"},children:"Bu kodu gvenli bir yerde saklayn"}),e.jsx("div",{style:{backgroundColor:"#f8fafc",border:"2px dashed #cbd5e1",borderRadius:"12px",padding:"24px",textAlign:"center",marginBottom:"24px"},children:e.jsx("div",{style:{fontSize:"32px",fontWeight:"bold",letterSpacing:"4px",color:"#2563eb",fontFamily:"monospace"},children:ue})}),e.jsx("div",{style:{backgroundColor:"#fef2f2",border:"1px solid #fecaca",borderRadius:"8px",padding:"12px",marginBottom:"24px"},children:e.jsxs("p",{style:{fontSize:"13px",color:"#dc2626",margin:0},children:[" Bu kod sadece ",e.jsx("strong",{children:"bir kere"})," kullanlabilir ve ",e.jsx("strong",{children:"30 gn"})," geerlidir."]})}),e.jsxs("div",{style:{display:"flex",gap:"12px"},children:[e.jsx("button",{onClick:()=>{navigator.clipboard.writeText(ue),n("Kurtarma kodu kopyaland","success")},style:{flex:1,padding:"12px 20px",backgroundColor:"#f1f5f9",color:"#475569",border:"none",borderRadius:"8px",fontSize:"14px",fontWeight:"500",cursor:"pointer"},children:" Kopyala"}),e.jsx("button",{onClick:x,style:{flex:1,padding:"12px 20px",background:"linear-gradient(135deg, #2563eb, #1d4ed8)",color:"white",border:"none",borderRadius:"8px",fontSize:"14px",fontWeight:"500",cursor:"pointer"},children:" Yazdr"}),e.jsx("button",{onClick:()=>ne(!1),style:{padding:"12px 20px",backgroundColor:"#f1f5f9",color:"#475569",border:"none",borderRadius:"8px",fontSize:"14px",fontWeight:"500",cursor:"pointer"},children:"Kapat"})]})]})})]})]})},b0=({user:t,onClose:n,onLogout:r})=>{const[i,o]=a.useState(!1),[l,s]=a.useState(""),[u,d]=a.useState(""),[h,C]=a.useState(""),[k,S]=a.useState(!1),[B,m]=a.useState(""),I=t.role==="personel"?"Personel":t.role==="ADMIN"?"Ynetici":t.role==="STUDENT"?"renci":t.role,F=async()=>{var y,f;if(m(""),!u||!h){m("Yeni ifre ve ifre onay gereklidir");return}if(u!==h){m("Yeni ifreler elemiyor");return}if(u.length<4){m("ifre en az 4 karakter olmaldr");return}S(!0);try{await xe.post(`/admin/management/users/${t.username}/password`,{newPassword:u}),alert("ifre baaryla deitirildi"),o(!1),s(""),d(""),C(""),m("")}catch(b){const D=b instanceof Error?b.message:(f=(y=b==null?void 0:b.response)==null?void 0:y.data)==null?void 0:f.message;m(D||"ifre deitirilemedi")}finally{S(!1)}};return e.jsx("div",{className:"modal-overlay",onClick:n,children:e.jsxs("div",{className:"modal-content profile-modal",onClick:y=>y.stopPropagation(),children:[e.jsxs("div",{className:"modal-header",children:[e.jsx("h2",{children:"Profil Bilgileri"}),e.jsx("button",{className:"modal-close",onClick:n,children:e.jsxs("svg",{width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:[e.jsx("line",{x1:"18",y1:"6",x2:"6",y2:"18"}),e.jsx("line",{x1:"6",y1:"6",x2:"18",y2:"18"})]})})]}),e.jsxs("div",{className:"modal-body",children:[r&&e.jsx("button",{type:"button",className:"profile-modal-logout-top",onClick:y=>{y.stopPropagation(),r()},children:"Oturumu Kapat"}),e.jsxs("div",{className:"profile-section",children:[e.jsx("div",{className:"profile-avatar-large",children:e.jsx("span",{children:t.username.charAt(0).toUpperCase()})}),e.jsxs("div",{className:"profile-info",children:[e.jsxs("div",{className:"info-item",children:[e.jsx("label",{children:"Kullanc Ad"}),e.jsx("p",{children:t.username})]}),e.jsxs("div",{className:"info-item",children:[e.jsx("label",{children:"Rol"}),e.jsx("p",{className:"role-badge",children:I})]})]})]}),i?e.jsxs("div",{className:"password-change-section",children:[e.jsx("h3",{children:"ifre Deitir"}),B&&e.jsx("div",{className:"error-message",children:B}),e.jsxs("div",{className:"password-form",children:[e.jsxs("div",{className:"form-group",children:[e.jsx("label",{children:"Yeni ifre *"}),e.jsx("input",{type:"password",value:u,onChange:y=>d(y.target.value),placeholder:"Yeni ifre",disabled:k})]}),e.jsxs("div",{className:"form-group",children:[e.jsx("label",{children:"Yeni ifre (Tekrar) *"}),e.jsx("input",{type:"password",value:h,onChange:y=>C(y.target.value),placeholder:"Yeni ifreyi tekrar girin",disabled:k})]}),e.jsxs("div",{className:"form-actions",children:[e.jsx("button",{className:"action-btn primary",onClick:F,disabled:k,children:k?"Deitiriliyor...":"ifreyi Deitir"}),e.jsx("button",{className:"action-btn secondary",onClick:()=>{o(!1),s(""),d(""),C(""),m("")},disabled:k,children:"ptal"})]})]})]}):e.jsx("div",{className:`profile-actions ${r?"has-logout":""}`,children:e.jsxs("div",{className:"profile-action-group",children:[e.jsx("button",{className:"action-btn secondary",onClick:()=>o(!0),children:" ifre Deitir"}),e.jsx("button",{className:"action-btn primary",onClick:n,children:"Tamam"})]})})]})]})})},j0=({user:t,onClose:n,onAutoRecordSettingsChanged:r,notificationSettings:i,onNotificationSettingsChange:o,onShowInfo:l})=>{const[s,u]=a.useState("general"),[d,h]=a.useState(i.notifications),[C,k]=a.useState(i.notificationTypes),S=a.useRef(!1),B=t.role==="ADMIN"||t.role==="Admin",[m,I]=a.useState(null),[F,y]=a.useState(!1),[f,b]=a.useState(!1),[D,q]=a.useState(null),[V,ie]=a.useState(!1),[M,re]=a.useState(!1),[ce,Oe]=a.useState(!1),[Re,_e]=a.useState(""),[xt,De]=a.useState(""),[ft,ze]=a.useState("generate"),P=(v,$,le="info",Le)=>{if(l){l(v,$,le,Le);return}alert(`${v}

${$}`)},se=v=>{I(v)},fe=()=>e.jsx(ur,{isOpen:!!m,title:(m==null?void 0:m.title)||"Onay",icon:(m==null?void 0:m.icon)||"",onConfirm:async()=>{if(m){y(!0);try{await m.onConfirm()}finally{y(!1),I(null)}}},onCancel:()=>{F||I(null)},confirmText:(m==null?void 0:m.confirmText)||"Onayla",cancelText:"ptal",confirmButtonColor:(m==null?void 0:m.confirmButtonColor)||"#ef4444",loading:F,children:e.jsx("div",{style:{fontSize:"14px",color:"#475569",lineHeight:"1.6",whiteSpace:"pre-wrap"},children:(m==null?void 0:m.message)||""})}),ve=async()=>{ze("generate"),_e(""),De(""),Oe(!0)},Pe=async()=>{ze("reset"),_e(""),De(""),Oe(!0)},bt=async()=>{var v,$;if(!Re){De("ifre gerekli");return}ie(!0),De("");try{if(ft==="reset")await xe.post("/auth/recovery-code/reset",{username:t.username,password:Re}),Oe(!1),_e(""),re(!1),q(null),P("lem Baarl","Kurtarma kodu silindi. Yeni kod retmek iin butona tklayn.","success","");else{const Le=(await xe.post("/auth/recovery-code/generate",{username:t.username,password:Re})).recoveryCode;q(Le),Oe(!1),_e(""),b(!0),re(!0)}}catch(le){const Le=(($=(v=le==null?void 0:le.response)==null?void 0:v.data)==null?void 0:$.message)||(ft==="reset"?"Kurtarma kodu silinemedi":"Kurtarma kodu oluturulamad");De(Le),P("Hata",Le,"error","")}finally{ie(!1)}};a.useEffect(()=>{(async()=>{if(B)try{const $=await xe.get(`/auth/recovery-code/check/${t.username}`);re($.hasRecoveryCode)}catch($){console.error("Kurtarma kodu kontrol baarsz:",$)}})()},[B,t.username]),a.useEffect(()=>{B&&s!=="general"&&u("general")},[B,s]),a.useEffect(()=>{S.current=!0,h(i.notifications),k({...i.notificationTypes})},[i]);const lt=a.useRef(o);a.useEffect(()=>{lt.current=o},[o]),a.useEffect(()=>{if(S.current){S.current=!1;return}lt.current({notifications:d,notificationTypes:C})},[d,C]);const[be,Me]=a.useState(!1),[et,Qe]=a.useState(60),[Z,$e]=a.useState("light"),[Xe,Ge]=a.useState([]),[mt,kt]=a.useState([]),[ot,We]=a.useState(""),[st,Bt]=a.useState(!1),[Ee,Et]=a.useState(5),[c,N]=a.useState(100),[oe,Ae]=a.useState(!0),[Be,ye]=a.useState(!1),Ve=Et,jt=Ee,[zt,nn]=a.useState(!1),[Te,wt]=a.useState(!1),[_,ne]=a.useState(!1),[ue,He]=a.useState([{id:"default",name:"Tm Kaytlar",dataTypes:["ogrenci_bilgileri","personel_bilgileri","kitap_listesi","odunc_bilgileri"],filePath:"Masast/KtphaneApp",isDefault:!0,saveMode:"overwrite"}]),[Se,gt]=a.useState("default"),[de,Ce]=a.useState(!1),[me,Ct]=a.useState(""),[tt,Lt]=a.useState(["kitap_listesi","odunc_bilgileri"]),[Ht,Ft]=a.useState(""),[nt,At]=a.useState(!0),[T,H]=a.useState(null),[A,Ne]=a.useState(!1),[he,it]=a.useState(null),[Ue,Nt]=a.useState([]),rt=a.useRef(null),yt=ue.find(v=>v.id===Se)||ue[0],Dt=()=>{Ce(!0),Ct(""),Lt(["kitap_listesi","odunc_bilgileri"]);const v=new Date,$=String(v.getDate()).padStart(2,"0"),le=String(v.getMonth()+1).padStart(2,"0"),Le=v.getFullYear(),Ke=`${$}-${le}-${Le}`;Ft(`Masast/KtphaneApp/${t.username}/${Ke}`),At(!0)},Zt=async()=>{if(!me.trim()){P("Hata","Ltfen kayt tipi ad girin.","error","");return}if(tt.length===0){P("Hata","Ltfen en az bir veri tipi sein.","error","");return}const v=new Date,$=String(v.getDate()).padStart(2,"0"),le=String(v.getMonth()+1).padStart(2,"0"),Le=v.getFullYear(),Ke=`${$}-${le}-${Le}`,Ze=`Masast/KtphaneApp/${t.username}/${Ke}`,Mt={id:`record_${Date.now()}`,name:me,dataTypes:tt,filePath:Ht||Ze,isDefault:!1,saveMode:"current",saveToCurrentDateFolder:nt};try{await Tt(Mt),He([...ue,Mt]),Ce(!1),Ct(""),Lt(["kitap_listesi","odunc_bilgileri"]),Ft(""),At(!0),P("Baarl","Kayt tipi baaryla eklendi.","success","")}catch(en){console.error("Kayt tipi kaydedilemedi:",en);const tn=(en==null?void 0:en.message)||"Kayt tipi kaydedilirken bir hata olutu. Ltfen tekrar deneyin.";P("Hata",tn,"error","")}},Ut=async v=>{se({title:"Kayt Tipi Silme Onay",icon:"",confirmText:"Sil",confirmButtonColor:"#ef4444",message:"Bu kayt tipini silmek istediinize emin misiniz? Bu ilem geri alnamaz.",onConfirm:async()=>{try{await xe.delete(`/record-types/${t.username}/${v}`),He(ue.filter($=>$.id!==v)),Se===v&&gt("default"),P("Baarl","Kayt tipi silindi.","success","")}catch($){console.error("Kayt tipi silinemedi:",$),P("Hata","Kayt tipi silinirken bir hata olutu.","error","")}}})},$t=async v=>{try{await Tt(v);const $=ue.map(le=>le.id===v.id?v:le);He($),H(null),P("Baarl","Kayt tipi baaryla gncellendi.","success","")}catch($){console.error("Kayt tipi gncellenemedi:",$),P("Hata",`Kayt tipi gncellenirken bir hata olutu: ${$.message||"Bilinmeyen hata"}`,"error","")}},Tt=async v=>{try{const $=await xe.post(`/record-types/${t.username}`,{id:v.id,name:v.name,dataTypes:v.dataTypes||[],filePath:v.filePath||"",saveMode:v.saveMode||"current",saveToCurrentDateFolder:v.saveToCurrentDateFolder??!1});if($&&$.success===!1)throw new Error($.message||"Kayt tipi kaydedilemedi")}catch($){const le=($==null?void 0:$.message)||"Kayt tipi kaydedilirken bir hata olutu";throw console.error("Kayt tipi kaydetme hatas:",$),new Error(le)}};a.useEffect(()=>{const v=async()=>{try{const $=await xe.get(`/record-types/${t.username}`),le={id:"default",name:"Tm Kaytlar",dataTypes:["ogrenci_bilgileri","personel_bilgileri","kitap_listesi","odunc_bilgileri"],filePath:"Masast/KtphaneApp",isDefault:!0,saveMode:"overwrite"};$&&Array.isArray($)&&$.length>0?He([le,...$]):He([le])}catch($){console.error("Kayt tipleri yklenemedi:",$),He([{id:"default",name:"Tm Kaytlar",dataTypes:["ogrenci_bilgileri","personel_bilgileri","kitap_listesi","odunc_bilgileri"],filePath:"Masast/KtphaneApp",isDefault:!0,saveMode:"overwrite"}])}};t!=null&&t.username&&v()},[t==null?void 0:t.username]),a.useEffect(()=>{const v=async()=>{try{const $=await xe.get(`/record-types/${t.username}/auto-record-settings`);Me($.autoRecordEnabled),Qe($.autoRecordIntervalMinutes)}catch($){console.error("Otomatik kayt ayarlar yklenemedi:",$)}};t!=null&&t.username&&v()},[t==null?void 0:t.username]),a.useEffect(()=>{(async()=>{try{const $=await xe.get("/admin/classes");Ge($)}catch($){console.error("Snf listesi yklenemedi:",$),Ge([9,10,11,12])}})()},[]),a.useEffect(()=>{const v=localStorage.getItem("kutuphane_branches");if(v)try{kt(JSON.parse(v))}catch($){console.error("ube listesi yklenemedi:",$),kt(["A","B","C","D","E","F"])}else kt(["A","B","C","D","E","F"])},[]),a.useEffect(()=>{if(typeof window>"u")return;const $=localStorage.getItem("kutuphane_theme")==="dark"?"dark":"light";$e($),bn($)},[]),a.useEffect(()=>{(async()=>{try{const $=await xe.get("/system-settings");Ve($.maxBorrowLimit),N($.maxPenaltyPoints),$.isSingleBookAddEnabled!==void 0&&Ae($.isSingleBookAddEnabled)}catch($){console.error("Sistem ayarlar yklenemedi:",$)}})()},[]),a.useEffect(()=>{const v=setTimeout(()=>{Ee>0&&c>0&&Bn()},1e3);return()=>clearTimeout(v)},[Ee,c,oe]);const Bn=async()=>{if(!(jt<1)&&!(c<1))try{ye(!0),await xe.put("/system-settings",{maxBorrowLimit:jt,maxPenaltyPoints:c,isSingleBookAddEnabled:oe})}catch(v){P("Hata",(v==null?void 0:v.message)||"Sistem ayarlar kaydedilirken bir hata olutu.","error","")}finally{ye(!1)}},bn=v=>{var $;typeof document>"u"||(document.documentElement.setAttribute("data-theme",v),($=document.body)==null||$.setAttribute("data-theme",v))},w=()=>{const v=Z==="light"?"dark":"light";$e(v),typeof window<"u"&&localStorage.setItem("kutuphane_theme",v),bn(v)},Y=async(v,$)=>{try{await xe.post(`/record-types/${t.username}/auto-record-settings`,{autoRecordEnabled:v,autoRecordIntervalMinutes:$}),r&&r({enabled:v,interval:$})}catch(le){console.error("Otomatik kayt ayarlar kaydedilemedi:",le)}},ee=v=>{if(v==="Masast"||v.startsWith("Masast/")||v.startsWith("Masast\\"))return v.replace(/\\/g,"/");if(v.includes("Desktop")){const $=v.match(/(.*?Desktop)(.*)/);if($){const le=$[2].replace(/\\/g,"/").replace(/^\//,"");return!le||le===""?"Masast":`Masast/${le}`}return"Masast"}return v.replace(/\\/g,"/")},g=async(v,$)=>{rt.current=v,Ne(!0),it(null);try{const le=$||(yt==null?void 0:yt.filePath)||"Masast/KtphaneApp",Le=await xe.get("/filesystem/browse",{path:le});it(Le.currentPath),Nt(Le.items.map(Ke=>({name:Ke.name,path:Ke.path,type:Ke.type})))}catch(le){console.error("Klasr listesi alnamad:",le);try{const Le=await xe.get("/filesystem/browse");it(Le.currentPath),Nt(Le.items.map(Ke=>({name:Ke.name,path:Ke.path,type:Ke.type})))}catch{P("Hata","Klasr listesi alnamad: "+(le instanceof Error?le.message:"Bilinmeyen hata"),"error","")}}},R=async v=>{try{const $=v==="Masast"?void 0:v,le=await xe.get("/filesystem/browse",$?{path:$}:void 0);it(le.currentPath),Nt(le.items.map(Le=>({name:Le.name,path:Le.path,type:Le.type})))}catch($){console.error("Klasr listesi alnamad:",$),P("Hata","Klasr listesi alnamad: "+($ instanceof Error?$.message:"Bilinmeyen hata"),"error","")}},J=v=>{if(rt.current){const $=ee(v);rt.current($)}Ne(!1),rt.current=null},te=v=>{if(!v)return[{name:"Masast",path:"Masast"}];const $=[];let le=ee(v);if(v.includes("Desktop")){const Ze=v.match(/(.*?Desktop)(.*)/);if(Ze){const Mt=Ze[2].replace(/\\/g,"/").replace(/^\//,"");le=Mt?`Masast/${Mt}`:"Masast"}else le="Masast"}const Le=le.split(/[/\\]/).filter(Ze=>Ze);let Ke="";return Le.forEach((Ze,Mt)=>{Mt===0&&(Ze==="Masast"||Ze==="Desktop")?(Ke="Masast",$.push({name:"Masast",path:"Masast"})):(Ke=Ke?`${Ke}/${Ze}`:Ze,$.push({name:Ze,path:Ke}))}),$};a.useEffect(()=>{const v=$=>{const le=$.target;zt&&!le.closest('[data-info-popover="info-popover-general"]')&&!le.closest('[data-info-button="info-button-general"]')&&nn(!1),Te&&!le.closest('[data-info-popover="info-popover-records"]')&&!le.closest('[data-info-button="info-button-records"]')&&wt(!1),_&&!le.closest('[data-info-popover="info-popover-other"]')&&!le.closest('[data-info-button="info-button-other"]')&&ne(!1)};return document.addEventListener("mousedown",v),()=>{document.removeEventListener("mousedown",v)}},[zt,Te,_]);const ge=(v,$,le)=>{const Le=`info-button-${v}`,Ke=`info-popover-${v}`,Mt={general:{title:"Genel Ayarlar",headerIcon:e.jsxs("svg",{width:"18",height:"18",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:[e.jsx("circle",{cx:"12",cy:"12",r:"3"}),e.jsx("path",{d:"M19.4 15a1.65 1.65 0 0 0 .33 1.82l.06.06a2 2 0 0 1 0 2.83 2 2 0 0 1-2.83 0l-.06-.06a1.65 1.65 0 0 0-1.82-.33 1.65 1.65 0 0 0-1 1.51V21a2 2 0 0 1-2 2 2 2 0 0 1-2-2v-.09A1.65 1.65 0 0 0 9 19.4a1.65 1.65 0 0 0-1.82.33l-.06.06a2 2 0 0 1-2.83 0 2 2 0 0 1 0-2.83l.06-.06a1.65 1.65 0 0 0 .33-1.82 1.65 1.65 0 0 0-1.51-1H3a2 2 0 0 1-2-2 2 2 0 0 1 2-2h.09A1.65 1.65 0 0 0 4.6 9a1.65 1.65 0 0 0-.33-1.82l-.06-.06a2 2 0 0 1 0-2.83 2 2 0 0 1 2.83 0l.06.06a1.65 1.65 0 0 0 1.82.33H9a1.65 1.65 0 0 0 1-1.51V3a2 2 0 0 1 2-2 2 2 0 0 1 2 2v.09a1.65 1.65 0 0 0 1.51 1H21a2 2 0 0 1 2 2 2 2 0 0 1-2 2h-.09a1.65 1.65 0 0 0-1.51 1z"})]}),items:[{icon:e.jsx("svg",{width:"20",height:"20",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",style:{color:"#2563eb"},children:e.jsx("path",{d:"M21 12.79A9 9 0 1 1 11.21 3 7 7 0 0 0 21 12.79z"})}),title:"Tema Seimi",desc:"Ktphane arayzn gnn saatine veya kiisel tercihinize gre Aydnlk, Karanlk veya Sistem temasnda kullanabilirsiniz."},{icon:e.jsxs("svg",{width:"20",height:"20",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",style:{color:"#d97706"},children:[e.jsx("path",{d:"M18 8A6 6 0 0 0 6 8c0 7-3 9-3 9h18s-3-2-3-9"}),e.jsx("path",{d:"M13.73 21a2 2 0 0 1-3.46 0"})]}),title:"Bildirim Ayarlar",desc:"Kitap iadesi, stok uyars veya sistem mesajlar gibi hangi durumlarda bildirim almak istediinizi zelletirebilirsiniz."}]},records:{title:"Kayt ve Otomatik lemler",headerIcon:e.jsxs("svg",{width:"18",height:"18",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:[e.jsx("path",{d:"M19 21H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h11l5 5v11a2 2 0 0 1-2 2z"}),e.jsx("polyline",{points:"17 21 17 13 7 13 7 21"}),e.jsx("polyline",{points:"7 3 7 8 15 8"})]}),items:[{icon:e.jsx("svg",{width:"20",height:"20",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",style:{color:"#16a34a"},children:e.jsx("polyline",{points:"20 6 9 17 4 12"})}),title:"Otomatik Kayt",desc:"Verilerinizin gvenlii iin belirlediiniz aralklarla (rn. her 30 dakikada bir) sistemin otomatik yedek almasn salayabilirsiniz."},{icon:e.jsxs("svg",{width:"20",height:"20",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",style:{color:"#7c3aed"},children:[e.jsx("path",{d:"M14 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V8z"}),e.jsx("polyline",{points:"14 2 14 8 20 8"}),e.jsx("line",{x1:"16",y1:"13",x2:"8",y2:"13"}),e.jsx("line",{x1:"16",y1:"17",x2:"8",y2:"17"}),e.jsx("polyline",{points:"10 9 9 9 8 9"})]}),title:"zel Raporlar",desc:"Farkl ihtiyalar iin zel Excel rapor ablonlar oluturabilir, her ablon iin hangi verilerin kaydedileceini seebilirsiniz."}]},other:{title:"Sistem ve Veritaban",headerIcon:e.jsxs("svg",{width:"18",height:"18",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:[e.jsx("rect",{x:"2",y:"3",width:"20",height:"14",rx:"2",ry:"2"}),e.jsx("line",{x1:"8",y1:"21",x2:"16",y2:"21"}),e.jsx("line",{x1:"12",y1:"17",x2:"12",y2:"21"})]}),items:[{icon:e.jsxs("svg",{width:"20",height:"20",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",style:{color:"#ef4444"},children:[e.jsx("circle",{cx:"12",cy:"12",r:"10"}),e.jsx("line",{x1:"12",y1:"8",x2:"12",y2:"12"}),e.jsx("line",{x1:"12",y1:"16",x2:"12.01",y2:"16"})]}),title:"Sistem Kstlamalar",desc:"dn kitap says snr ve ceza puan limiti gibi kurallar belirleyerek ktphane ileyiini kontrol altnda tutabilirsiniz."},{icon:e.jsxs("svg",{width:"20",height:"20",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",style:{color:"#2563eb"},children:[e.jsx("path",{d:"M21 12c0 1.66-4 3-9 3s-9-1.34-9-3"}),e.jsx("path",{d:"M3 5v14c0 1.66 4 3 9 3s 9-1.34 9-3V5"})]}),title:"Veritaban Merkezi",desc:"Gelimi veritaban ilemlerine (yedekleme, geri ykleme, Excel ile toplu ilem) hzlca eriebilirsiniz."}]}}[v];return e.jsxs("div",{style:{position:"relative",zIndex:1e4},children:[e.jsx("button",{"data-info-button":Le,onClick:()=>le(!$),style:{width:"32px",height:"32px",borderRadius:"50%",border:"2px solid",borderColor:$?"#3b82f6":"#fbbf24",background:$?"#eff6ff":"#fef9e7",cursor:"pointer",display:"flex",alignItems:"center",justifyContent:"center",fontSize:"20px",color:$?"#1d4ed8":"#d97706",transition:"all 0.2s",fontWeight:700,boxShadow:"0 2px 4px rgba(0, 0, 0, 0.1)",padding:0},title:"Bilgi",onMouseEnter:en=>{$||(en.currentTarget.style.backgroundColor="#fef3c7",en.currentTarget.style.borderColor="#f59e0b")},onMouseLeave:en=>{$||(en.currentTarget.style.backgroundColor="#fef9e7",en.currentTarget.style.borderColor="#fbbf24")},children:e.jsxs("svg",{width:"18",height:"18",viewBox:"0 0 24 24",fill:"none",stroke:$?"#1d4ed8":"#d97706",strokeWidth:"2.5",strokeLinecap:"round",strokeLinejoin:"round",style:{display:"block"},children:[e.jsx("path",{d:"M21 15a2 2 0 0 1-2 2H7l-4 4V5a2 2 0 0 1 2-2h14a2 2 0 0 1 2 2z"}),e.jsx("line",{x1:"9",y1:"10",x2:"15",y2:"10"}),e.jsx("line",{x1:"9",y1:"14",x2:"15",y2:"14"})]})}),$&&e.jsxs("div",{"data-info-popover":Ke,style:{position:"absolute",top:"40px",right:"0",width:"400px",maxWidth:"90vw",backgroundColor:"#fef9e7",borderRadius:"12px",border:"1px solid #fbbf24",boxShadow:"0 10px 25px rgba(0, 0, 0, 0.15)",padding:"20px",zIndex:1001,fontSize:"14px",animation:"fadeIn 0.2s ease-out"},onClick:en=>en.stopPropagation(),children:[e.jsx("div",{style:{position:"absolute",top:"-8px",right:"12px",width:"16px",height:"16px",backgroundColor:"#fef9e7",borderLeft:"1px solid #fbbf24",borderTop:"1px solid #fbbf24",transform:"rotate(45deg)"}}),e.jsx("div",{style:{display:"flex",flexDirection:"column",gap:"16px"},children:e.jsxs("div",{children:[e.jsxs("h3",{style:{marginTop:0,marginBottom:"10px",fontSize:"16px",fontWeight:600,color:"#1e293b",display:"flex",alignItems:"center",gap:"6px"},children:[Mt.headerIcon,Mt.title]}),e.jsx("div",{style:{display:"flex",flexDirection:"column",gap:"8px",fontSize:"13px",color:"#475569",lineHeight:"1.5"},children:Mt.items.map((en,tn)=>e.jsxs("p",{style:{margin:0},children:[e.jsxs("strong",{style:{color:"#1e293b"},children:[en.title,":"]})," ",en.desc]},tn))})]})})]})]})};return e.jsxs("div",{className:"modal-overlay",onClick:n,children:[e.jsxs("div",{className:"modal-content settings-modal",onClick:v=>v.stopPropagation(),style:{position:"relative"},children:[fe(),e.jsxs("div",{className:"modal-header",children:[e.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"12px"},children:[e.jsxs("svg",{width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",style:{color:"#667eea"},children:[e.jsx("path",{d:"M12.22 2h-.44a2 2 0 0 0-2 2v.18a2 2 0 0 1-1 1.73l-.43.25a2 2 0 0 1-2 0l-.15-.08a2 2 0 0 0-2.73.73l-.22.38a2 2 0 0 0 .73 2.73l.15.1a2 2 0 0 1 1 1.72v.51a2 2 0 0 1-1 1.74l-.15.09a2 2 0 0 0-.73 2.73l.22.38a2 2 0 0 0 2.73.73l.15-.08a2 2 0 0 1 2 0l.43.25a2 2 0 0 1 1 1.73V20a2 2 0 0 0 2 2h.44a2 2 0 0 0 2-2v-.18a2 2 0 0 1 1-1.73l.43-.25a2 2 0 0 1 2 0l.15.08a2 2 0 0 0 2.73-.73l.22-.39a2 2 0 0 0-.73-2.73l-.15-.08a2 2 0 0 1-1-1.74v-.5a2 2 0 0 1 1-1.74l.15-.09a2 2 0 0 0 .73-2.73l-.22-.38a2 2 0 0 0-2.73-.73l-.15.08a2 2 0 0 1-2 0l-.43-.25a2 2 0 0 1-1-1.73V4a2 2 0 0 0-2-2z"}),e.jsx("circle",{cx:"12",cy:"12",r:"3"})]}),e.jsx("h2",{children:"Ayarlar"})]}),e.jsx("button",{className:"modal-close",onClick:n,children:e.jsxs("svg",{width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:[e.jsx("line",{x1:"18",y1:"6",x2:"6",y2:"18"}),e.jsx("line",{x1:"6",y1:"6",x2:"18",y2:"18"})]})})]}),e.jsxs("div",{className:"settings-tabs",style:{position:"relative",display:"flex",justifyContent:"space-between",alignItems:"center"},children:[e.jsxs("div",{style:{display:"flex",gap:"8px"},children:[e.jsxs("button",{className:`tab-button ${s==="general"?"active":""}`,onClick:()=>u("general"),children:[e.jsxs("svg",{width:"16",height:"16",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:[e.jsx("rect",{x:"3",y:"3",width:"18",height:"18",rx:"2",ry:"2"}),e.jsx("line",{x1:"9",y1:"3",x2:"9",y2:"21"})]}),e.jsx("span",{children:"Genel Ayarlar"})]}),!B&&e.jsxs(e.Fragment,{children:[e.jsxs("button",{className:`tab-button ${s==="records"?"active":""}`,onClick:()=>u("records"),children:[e.jsxs("svg",{width:"16",height:"16",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:[e.jsx("path",{d:"M14 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V8z"}),e.jsx("polyline",{points:"14 2 14 8 20 8"}),e.jsx("line",{x1:"16",y1:"13",x2:"8",y2:"13"}),e.jsx("line",{x1:"16",y1:"17",x2:"8",y2:"17"})]}),e.jsx("span",{children:"Kayt Ayarlar"})]}),e.jsxs("button",{className:`tab-button ${s==="other"?"active":""}`,onClick:()=>u("other"),children:[e.jsxs("svg",{width:"16",height:"16",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:[e.jsx("circle",{cx:"12",cy:"12",r:"10"}),e.jsx("line",{x1:"12",y1:"16",x2:"12",y2:"12"}),e.jsx("line",{x1:"12",y1:"8",x2:"12.01",y2:"8"})]}),e.jsx("span",{children:"Dier"})]})]})]}),e.jsxs("div",{style:{position:"relative"},children:[s==="general"&&ge("general",zt,nn),!B&&s==="records"&&ge("records",Te,wt),s==="other"&&ge("other",_,ne)]})]}),e.jsxs("div",{className:"modal-body",children:[s==="general"&&e.jsxs(e.Fragment,{children:[e.jsx("h3",{style:{fontSize:"14px",fontWeight:700,color:"#64748b",textTransform:"uppercase",letterSpacing:"0.05em",marginBottom:"12px",marginTop:"4px"},children:"Tema Ayarlar"}),e.jsx("div",{className:"settings-section",style:{border:"1px solid rgba(226, 232, 240, 0.8)",borderRadius:"10px",padding:"18px",backgroundColor:"#ffffff",marginBottom:"24px",boxShadow:"0 2px 8px rgba(15, 23, 42, 0.05)"},children:e.jsxs("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center",gap:"16px",flexWrap:"wrap"},children:[e.jsxs("div",{style:{flex:"1 1 auto"},children:[e.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"8px",marginBottom:"6px"},children:[Z==="dark"?e.jsx("svg",{width:"20",height:"20",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",style:{color:"#818cf8"},children:e.jsx("path",{d:"M21 12.79A9 9 0 1 1 11.21 3 7 7 0 0 0 21 12.79z"})}):e.jsxs("svg",{width:"20",height:"20",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",style:{color:"#f59e0b"},children:[e.jsx("circle",{cx:"12",cy:"12",r:"5"}),e.jsx("line",{x1:"12",y1:"1",x2:"12",y2:"3"}),e.jsx("line",{x1:"12",y1:"21",x2:"12",y2:"23"}),e.jsx("line",{x1:"4.22",y1:"4.22",x2:"5.64",y2:"5.64"}),e.jsx("line",{x1:"18.36",y1:"18.36",x2:"19.78",y2:"19.78"}),e.jsx("line",{x1:"1",y1:"12",x2:"3",y2:"12"}),e.jsx("line",{x1:"21",y1:"12",x2:"23",y2:"12"})]}),e.jsx("span",{style:{color:"#1e293b",fontWeight:600,fontSize:"15px"},children:Z==="dark"?"Koyu Tema":"Ak Tema"})]}),e.jsxs("p",{style:{margin:0,fontSize:"13px",color:"#64748b"},children:["Uygulamann grnmn ",Z==="dark"?"koyu":"ak"," moda geirin."]})]}),e.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"12px"},children:[e.jsx("span",{style:{fontSize:"13px",fontWeight:600,color:Z==="light"?"#1e293b":"#94a3b8",transition:"color 0.3s"},children:"Ak"}),e.jsx("button",{type:"button",onClick:()=>{w()},role:"switch","aria-checked":Z==="dark",style:{width:"64px",height:"32px",borderRadius:"999px",border:"none",padding:"4px",background:Z==="dark"?"#312e81":"#e2e8f0",display:"flex",alignItems:"center",justifyContent:Z==="dark"?"flex-end":"flex-start",cursor:"pointer",boxShadow:Z==="dark"?"inset 0 2px 4px rgba(0,0,0,0.3)":"inset 0 1px 4px rgba(15, 23, 42, 0.1)",transition:"all 0.4s cubic-bezier(0.4, 0, 0.2, 1)",position:"relative"},children:e.jsx("span",{style:{width:"24px",height:"24px",borderRadius:"50%",backgroundColor:"#ffffff",boxShadow:"0 2px 4px rgba(0, 0, 0, 0.2)",display:"flex",alignItems:"center",justifyContent:"center",transition:"all 0.4s cubic-bezier(0.4, 0, 0.2, 1)",color:Z==="dark"?"#312e81":"#f59e0b"},children:Z==="dark"?e.jsx("svg",{width:"14",height:"14",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2.5",strokeLinecap:"round",strokeLinejoin:"round",children:e.jsx("path",{d:"M21 12.79A9 9 0 1 1 11.21 3 7 7 0 0 0 21 12.79z"})}):e.jsxs("svg",{width:"14",height:"14",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2.5",strokeLinecap:"round",strokeLinejoin:"round",children:[e.jsx("circle",{cx:"12",cy:"12",r:"5"}),e.jsx("line",{x1:"12",y1:"1",x2:"12",y2:"3"}),e.jsx("line",{x1:"12",y1:"21",x2:"12",y2:"23"}),e.jsx("line",{x1:"4.22",y1:"4.22",x2:"5.64",y2:"5.64"}),e.jsx("line",{x1:"18.36",y1:"18.36",x2:"19.78",y2:"19.78"}),e.jsx("line",{x1:"1",y1:"12",x2:"3",y2:"12"}),e.jsx("line",{x1:"21",y1:"12",x2:"23",y2:"12"})]})})}),e.jsx("span",{style:{fontSize:"13px",fontWeight:600,color:Z==="dark"?"#1e293b":"#94a3b8",transition:"color 0.3s"},children:"Koyu"})]})]})}),B&&e.jsxs(e.Fragment,{children:[e.jsx("h3",{style:{fontSize:"14px",fontWeight:700,color:"#64748b",textTransform:"uppercase",letterSpacing:"0.05em",marginBottom:"12px",marginTop:"24px"},children:"Gvenlik"}),e.jsxs("div",{className:"settings-section",children:[e.jsxs("div",{className:"setting-item",style:{display:"flex",alignItems:"center",justifyContent:"space-between",padding:"16px 20px",backgroundColor:"#f8fafc",borderRadius:"12px",border:"1px solid #e2e8f0"},children:[e.jsxs("div",{style:{flex:1},children:[e.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"10px"},children:[e.jsxs("svg",{width:"20",height:"20",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",style:{color:"#3b82f6"},children:[e.jsx("rect",{x:"3",y:"11",width:"18",height:"11",rx:"2",ry:"2"}),e.jsx("path",{d:"M7 11V7a5 5 0 0 1 10 0v4"})]}),e.jsx("span",{style:{color:"#1e293b",fontWeight:600,fontSize:"15px"},children:"Kurtarma Kodu"})]}),e.jsx("p",{style:{margin:"8px 0 0 30px",fontSize:"13px",color:"#64748b",lineHeight:"1.5"},children:"Admin ifrenizi unutursanz, kurtarma kodu ile ifrenizi sfrlayabilirsiniz."})]}),e.jsx("button",{onClick:ve,disabled:V||M,style:{padding:"10px 20px",background:V||M?"#94a3b8":"linear-gradient(135deg, #10b981 0%, #059669 100%)",color:"white",border:"none",borderRadius:"8px",fontSize:"14px",fontWeight:"600",cursor:V||M?"not-allowed":"pointer",boxShadow:"0 2px 8px rgba(16, 185, 129, 0.2)",transition:"all 0.2s",whiteSpace:"nowrap",opacity:M?.6:1},title:M?"Aktif kurtarma kodunuz zaten var":"",children:V?"Oluturuluyor...":M?" Aktif Kod Mevcut":" Kurtarma Kodu ret"})]}),e.jsx("div",{style:{marginTop:"16px",backgroundColor:"#eff6ff",border:"1px solid #bfdbfe",borderRadius:"12px",padding:"16px 20px"},children:e.jsxs("div",{style:{display:"flex",alignItems:"flex-start",gap:"12px"},children:[e.jsxs("svg",{width:"20",height:"20",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",style:{color:"#3b82f6",flexShrink:0,marginTop:"2px"},children:[e.jsx("circle",{cx:"12",cy:"12",r:"10"}),e.jsx("line",{x1:"12",y1:"16",x2:"12",y2:"12"}),e.jsx("line",{x1:"12",y1:"8",x2:"12.01",y2:"8"})]}),e.jsxs("div",{style:{flex:1},children:[e.jsx("h4",{style:{margin:0,fontSize:"14px",fontWeight:600,color:"#1e40af",marginBottom:"8px"},children:" Kurtarma Kodu Nasl Kullanlr?"}),e.jsxs("ol",{style:{margin:"8px 0 0 0",padding:"0 0 0 20px",fontSize:"13px",color:"#1e40af",lineHeight:"1.8"},children:[e.jsxs("li",{children:[e.jsx("strong",{children:"Kod retimi:"}),' "Kurtarma Kodu ret" butonuna tklayn. Kod otomatik olarak kopyalanr ve yazdrma penceresi alr.']}),e.jsxs("li",{children:[e.jsx("strong",{children:"Gvenli Saklama:"})," Kodu fiziksel olarak gvenli bir yerde saklayn (yazdrn veya not edin)."]}),e.jsxs("li",{children:[e.jsx("strong",{children:"Kullanm:"})," ifrenizi unutursanz, login ekrannda ifre yerine kurtarma kodunu girin."]}),e.jsxs("li",{children:[e.jsx("strong",{children:"Tek Kullanmlk:"})," Kod kullanldktan sonra geersiz olur. Yeni kod retmeniz gerekir."]}),e.jsxs("li",{children:[e.jsx("strong",{children:"Sresiz Geerlilik:"})," Kod kullanlana kadar sresiz geerlidir."]})]}),M&&!V&&e.jsx("div",{style:{marginTop:"16px",paddingTop:"16px",borderTop:"1px solid #bfdbfe"},children:e.jsxs("div",{style:{display:"flex",alignItems:"center",justifyContent:"space-between",gap:"12px"},children:[e.jsxs("div",{style:{flex:1},children:[e.jsx("p",{style:{margin:0,fontSize:"13px",color:"#1e40af",fontWeight:500},children:" Kurtarma kodunuzu kaybettiniz mi?"}),e.jsx("p",{style:{margin:"4px 0 0 0",fontSize:"12px",color:"#60a5fa",lineHeight:"1.4"},children:"Admin ifrenizle sfrlayabilir ve yeni kod retebilirsiniz"})]}),e.jsx("button",{onClick:Pe,style:{background:"linear-gradient(135deg, #ef4444, #dc2626)",border:"none",color:"white",fontSize:"13px",fontWeight:"600",cursor:"pointer",padding:"8px 16px",borderRadius:"8px",whiteSpace:"nowrap",boxShadow:"0 2px 6px rgba(239, 68, 68, 0.3)",transition:"all 0.2s"},onMouseOver:v=>v.currentTarget.style.transform="translateY(-1px)",onMouseOut:v=>v.currentTarget.style.transform="translateY(0)",children:" Kodu Sfrla"})]})}),e.jsx("div",{style:{marginTop:"12px",padding:"10px 12px",backgroundColor:"#fee2e2",border:"1px solid #fecaca",borderRadius:"8px"},children:e.jsxs("p",{style:{margin:0,fontSize:"12px",color:"#991b1b",fontWeight:500},children:[" ",e.jsx("strong",{children:"nemli:"})," Kurtarma kodunu kimseyle paylamayn"]})})]})]})})]})]}),!B&&e.jsxs(e.Fragment,{children:[e.jsx("h3",{style:{fontSize:"14px",fontWeight:700,color:"#64748b",textTransform:"uppercase",letterSpacing:"0.05em",marginBottom:"12px",marginTop:"24px"},children:"Bildirim Tercihleri"}),e.jsxs("div",{className:"settings-section",children:[e.jsxs("h3",{style:{display:"none"},children:[e.jsxs("svg",{width:"18",height:"18",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",style:{display:"inline-block",verticalAlign:"middle",marginRight:"8px"},children:[e.jsx("path",{d:"M18 8A6 6 0 0 0 6 8c0 7-3 9-3 9h18s-3-2-3-9"}),e.jsx("path",{d:"M13.73 21a2 2 0 0 1-3.46 0"})]}),"Bildirimler"]}),e.jsxs("div",{className:"setting-item",children:[e.jsxs("label",{style:{color:"#1e293b",fontWeight:600,display:"flex",alignItems:"center",gap:"10px",cursor:"pointer"},children:[e.jsxs("div",{style:{position:"relative",width:"40px",height:"22px"},children:[e.jsx("input",{type:"checkbox",checked:d,onChange:v=>h(v.target.checked),style:{opacity:0,width:0,height:0}}),e.jsx("span",{style:{position:"absolute",cursor:"pointer",top:0,left:0,right:0,bottom:0,backgroundColor:d?"#2563eb":"#ccc",transition:"0.3s",borderRadius:"22px"}}),e.jsx("span",{style:{position:"absolute",content:'""',height:"16px",width:"16px",left:d?"20px":"4px",bottom:"3px",backgroundColor:"white",transition:"0.3s",borderRadius:"50%"}})]}),e.jsx("span",{style:{color:"#1e293b"},children:"Sistem bildirimlerini etkinletir"})]}),d&&e.jsx("div",{className:"setting-item",style:{marginTop:"20px",marginLeft:"4px"},children:e.jsxs("div",{style:{display:"grid",gridTemplateColumns:"repeat(auto-fill, minmax(280px, 1fr))",gap:"24px"},children:[e.jsxs("div",{children:[e.jsx("div",{style:{fontSize:"13px",fontWeight:700,color:"#64748b",marginBottom:"12px",textTransform:"uppercase",letterSpacing:"0.05em"},children:"Veri lemleri"}),e.jsxs("div",{style:{display:"flex",flexDirection:"column",gap:"10px"},children:[e.jsxs("label",{style:{display:"flex",alignItems:"center",gap:"10px",cursor:"pointer",color:"#1e293b",fontWeight:500,fontSize:"14px"},children:[e.jsx("input",{type:"checkbox",checked:C.studentAdd,onChange:v=>k({...C,studentAdd:v.target.checked}),disabled:!d,style:{accentColor:"#2563eb"}}),e.jsx("span",{children:"renci Ekleme/Silme"})]}),e.jsxs("label",{style:{display:"flex",alignItems:"center",gap:"10px",cursor:"pointer",color:"#1e293b",fontWeight:500,fontSize:"14px"},children:[e.jsx("input",{type:"checkbox",checked:C.bookAdd,onChange:v=>k({...C,bookAdd:v.target.checked}),disabled:!d,style:{accentColor:"#2563eb"}}),e.jsx("span",{children:"Kitap Ekleme/Silme"})]}),e.jsxs("label",{style:{display:"flex",alignItems:"center",gap:"10px",cursor:"pointer",color:"#1e293b",fontWeight:500,fontSize:"14px"},children:[e.jsx("input",{type:"checkbox",checked:C.bookBulkDelete,onChange:v=>k({...C,bookBulkDelete:v.target.checked}),disabled:!d,style:{accentColor:"#2563eb"}}),e.jsx("span",{children:"Toplu lemler"})]})]})]}),e.jsxs("div",{children:[e.jsx("div",{style:{fontSize:"13px",fontWeight:700,color:"#64748b",marginBottom:"12px",textTransform:"uppercase",letterSpacing:"0.05em"},children:"dn Durumu"}),e.jsxs("div",{style:{display:"flex",flexDirection:"column",gap:"10px"},children:[e.jsxs("label",{style:{display:"flex",alignItems:"center",gap:"10px",cursor:"pointer",color:"#1e293b",fontWeight:500,fontSize:"14px"},children:[e.jsx("input",{type:"checkbox",checked:C.loanBorrow,onChange:v=>k({...C,loanBorrow:v.target.checked}),disabled:!d,style:{accentColor:"#2563eb"}}),e.jsx("span",{children:"dn Verme/Alma"})]}),e.jsxs("label",{style:{display:"flex",alignItems:"center",gap:"10px",cursor:"pointer",color:"#1e293b",fontWeight:500,fontSize:"14px"},children:[e.jsx("input",{type:"checkbox",checked:C.dueSoon,onChange:v=>k({...C,dueSoon:v.target.checked}),disabled:!d,style:{accentColor:"#2563eb"}}),e.jsx("span",{children:"Teslim Yaklaanlar"})]}),e.jsxs("label",{style:{display:"flex",alignItems:"center",gap:"10px",cursor:"pointer",color:"#1e293b",fontWeight:500,fontSize:"14px"},children:[e.jsx("input",{type:"checkbox",checked:C.overdue,onChange:v=>k({...C,overdue:v.target.checked}),disabled:!d,style:{accentColor:"#2563eb"}}),e.jsx("span",{children:"Geciken Kitaplar"})]})]})]})]})})]})]})]}),e.jsx("h3",{style:{fontSize:"14px",fontWeight:700,color:"#64748b",textTransform:"uppercase",letterSpacing:"0.05em",marginBottom:"12px",marginTop:"24px"},children:"Hesap Bilgileri"}),e.jsxs("div",{className:"settings-section",children:[e.jsxs("h3",{style:{display:"none"},children:[e.jsxs("svg",{width:"18",height:"18",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",style:{display:"inline-block",verticalAlign:"middle",marginRight:"8px"},children:[e.jsx("path",{d:"M19 21v-2a4 4 0 0 0-4-4H9a4 4 0 0 0-4 4v2"}),e.jsx("circle",{cx:"12",cy:"7",r:"4"})]}),"Hesap Bilgileri"]}),e.jsxs("div",{className:"setting-item",children:[e.jsxs("label",{children:[e.jsxs("svg",{width:"16",height:"16",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",style:{display:"inline-block",verticalAlign:"middle",marginRight:"8px",color:"#64748b"},children:[e.jsx("path",{d:"M20 21v-2a4 4 0 0 0-4-4H8a4 4 0 0 0-4 4v2"}),e.jsx("circle",{cx:"12",cy:"7",r:"4"})]}),"Kullanc Ad"]}),e.jsx("p",{className:"readonly-value",children:t.username})]}),e.jsxs("div",{className:"setting-item",children:[e.jsxs("label",{children:[e.jsxs("svg",{width:"16",height:"16",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",style:{display:"inline-block",verticalAlign:"middle",marginRight:"8px",color:"#64748b"},children:[e.jsx("path",{d:"M17 21v-2a4 4 0 0 0-4-4H5a4 4 0 0 0-4 4v2"}),e.jsx("circle",{cx:"9",cy:"7",r:"4"}),e.jsx("path",{d:"M23 21v-2a4 4 0 0 0-3-3.87"}),e.jsx("path",{d:"M16 3.13a4 4 0 0 1 0 7.75"})]}),"Rol"]}),e.jsx("p",{className:"readonly-value",children:t.role==="personel"?"Personel":t.role==="ADMIN"?"Ynetici":t.role==="STUDENT"?"renci":t.role})]})]})]}),!B&&s==="records"&&e.jsxs("div",{className:"records-tab",style:{display:"flex",flexDirection:"column",gap:"16px"},children:[e.jsx("h3",{style:{fontSize:"14px",fontWeight:700,color:"#64748b",textTransform:"uppercase",letterSpacing:"0.05em",marginBottom:"0px",marginTop:"4px"},children:"Otomatik Kayt Yaplandrmas"}),e.jsxs("div",{className:"settings-section",style:{border:"1px solid rgba(226, 232, 240, 0.8)",borderRadius:"10px",padding:"18px",backgroundColor:"#f8fafc",boxShadow:"0 2px 8px rgba(15, 23, 42, 0.05)"},children:[e.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"12px",marginBottom:"12px"},children:[e.jsxs("svg",{width:"18",height:"18",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",style:{color:"#2563eb"},children:[e.jsx("path",{d:"M14 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V8z"}),e.jsx("polyline",{points:"14 2 14 8 20 8"}),e.jsx("line",{x1:"16",y1:"13",x2:"8",y2:"13"}),e.jsx("line",{x1:"16",y1:"17",x2:"8",y2:"17"}),e.jsx("polyline",{points:"10 9 9 9 8 9"})]}),e.jsxs("div",{children:[e.jsx("span",{style:{color:"#1e293b",fontWeight:600,fontSize:"14px"},children:"Otomatik Kayt"}),e.jsx("p",{style:{margin:0,fontSize:"12px",color:"#64748b"},children:"Belirlediin aralklarla kayt dosyalar otomatik olarak gncellensin."})]})]}),e.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"12px",flexWrap:"wrap"},children:[e.jsxs("label",{style:{display:"flex",alignItems:"center",gap:"8px",cursor:"pointer"},children:[e.jsxs("div",{style:{position:"relative",width:"36px",height:"20px"},children:[e.jsx("input",{type:"checkbox",checked:be,onChange:async v=>{const $=v.target.checked;Me($),await Y($,et)},style:{opacity:0,width:0,height:0}}),e.jsx("span",{style:{position:"absolute",cursor:"pointer",top:0,left:0,right:0,bottom:0,backgroundColor:be?"#2563eb":"#ccc",transition:"0.3s",borderRadius:"20px"}}),e.jsx("span",{style:{position:"absolute",content:'""',height:"14px",width:"14px",left:be?"18px":"4px",bottom:"3px",backgroundColor:"white",transition:"0.3s",borderRadius:"50%"}})]}),e.jsx("span",{style:{color:"#1e293b",fontSize:"13px",fontWeight:600},children:"Etkinletir"})]}),be&&e.jsxs(e.Fragment,{children:[e.jsx("span",{style:{color:"#64748b",fontSize:"13px"},children:""}),e.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"8px"},children:[e.jsx("span",{style:{color:"#64748b",fontSize:"13px"},children:"Aralk:"}),e.jsx("input",{type:"number",min:"1",value:et,onChange:async v=>{const $=parseInt(v.target.value,10);!isNaN($)&&$>=1&&(Qe($),await Y(be,$))},style:{width:"70px",padding:"6px 10px",border:"1px solid rgba(226, 232, 240, 0.8)",borderRadius:"6px",fontSize:"13px",color:"#000000",backgroundColor:"rgba(255, 255, 255, 0.5)"},className:"visible-spin-input",placeholder:"60"}),e.jsx("span",{style:{color:"#64748b",fontSize:"13px"},children:"dakika"})]})]})]})]}),e.jsx("h3",{style:{fontSize:"14px",fontWeight:700,color:"#64748b",textTransform:"uppercase",letterSpacing:"0.05em",marginBottom:"0px",marginTop:"12px"},children:"Kayt Tipleri"}),ue.map(v=>{const $=T===v.id,le={ogrenci_bilgileri:"renci Bilgileri",personel_bilgileri:"Personel Bilgileri",kitap_listesi:"Kitap Listesi",odunc_bilgileri:"dn Bilgileri"};return e.jsxs("div",{className:"settings-section",style:{border:"2px solid rgba(59, 130, 246, 0.3)",borderRadius:"12px",padding:"20px",backgroundColor:"#ffffff",backdropFilter:"blur(10px)",boxShadow:"0 4px 12px rgba(30, 64, 175, 0.15)"},children:[e.jsxs("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center",marginBottom:"20px"},children:[e.jsxs("div",{children:[e.jsxs("h3",{style:{margin:0,display:"flex",alignItems:"center",gap:"8px",color:"#1e293b",fontWeight:700},children:[e.jsxs("svg",{width:"18",height:"18",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",style:{color:"#1e293b"},children:[e.jsx("path",{d:"M14 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V8z"}),e.jsx("polyline",{points:"14 2 14 8 20 8"}),e.jsx("line",{x1:"16",y1:"13",x2:"8",y2:"13"}),e.jsx("line",{x1:"16",y1:"17",x2:"8",y2:"17"})]}),$?e.jsx("input",{type:"text",value:v.name,onChange:Le=>{const Ke=ue.map(Ze=>Ze.id===v.id?{...Ze,name:Le.target.value}:Ze);He(Ke)},style:{padding:"6px 12px",border:"2px solid rgba(226, 232, 240, 0.8)",borderRadius:"6px",fontSize:"16px",fontWeight:600,background:"rgba(255, 255, 255, 0.8)",color:"#0f172a"}}):e.jsx("span",{children:v.name})]}),e.jsx("div",{style:{fontSize:"13px",color:"#64748b",marginTop:"6px",fontWeight:500},children:v.isDefault?"Tm kullanclar iin ortak":"Kullancya zel"})]}),!v.isDefault&&e.jsx("div",{style:{display:"flex",gap:"8px"},children:$?e.jsxs(e.Fragment,{children:[e.jsx("button",{type:"button",onClick:()=>$t(v),style:{padding:"8px 16px",borderRadius:"8px",border:"2px solid #3b82f6",backgroundColor:"#3b82f6",color:"white",cursor:"pointer",fontSize:"14px",fontWeight:600},children:"Kaydet"}),e.jsx("button",{type:"button",onClick:()=>H(null),style:{padding:"8px 16px",borderRadius:"8px",border:"2px solid rgba(226, 232, 240, 0.8)",backgroundColor:"rgba(241, 245, 249, 0.8)",color:"#1e293b",cursor:"pointer",fontSize:"14px",fontWeight:600},children:"ptal"})]}):e.jsxs(e.Fragment,{children:[e.jsx("button",{type:"button",onClick:()=>H(v.id),style:{padding:"8px 12px",borderRadius:"8px",border:"2px solid rgba(226, 232, 240, 0.8)",backgroundColor:"rgba(241, 245, 249, 0.8)",cursor:"pointer",fontSize:"14px",color:"#0f172a"},title:"Dzenle",children:e.jsxs("svg",{width:"16",height:"16",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",children:[e.jsx("path",{d:"M11 4H4a2 2 0 0 0-2 2v14a2 2 0 0 0 2 2h14a2 2 0 0 0 2-2v-7"}),e.jsx("path",{d:"M18.5 2.5a2.121 2.121 0 0 1 3 3L12 15l-4 1 1-4 9.5-9.5z"})]})}),e.jsx("button",{type:"button",onClick:()=>Ut(v.id),style:{padding:"8px 12px",borderRadius:"8px",border:"2px solid rgba(239, 68, 68, 0.3)",backgroundColor:"rgba(254, 242, 242, 0.8)",cursor:"pointer",fontSize:"14px",color:"#dc2626"},title:"Sil",children:e.jsxs("svg",{width:"16",height:"16",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",children:[e.jsx("polyline",{points:"3 6 5 6 21 6"}),e.jsx("path",{d:"M19 6v14a2 2 0 0 1-2 2H7a2 2 0 0 1-2-2V6m3 0V4a2 2 0 0 1 2-2h4a2 2 0 0 1 2 2v2"})]})})]})})]}),e.jsxs("div",{className:"setting-item",style:{marginBottom:"16px"},children:[e.jsxs("label",{children:[e.jsxs("svg",{width:"16",height:"16",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",style:{display:"inline-block",verticalAlign:"middle",marginRight:"8px",color:"#1e293b"},children:[e.jsx("path",{d:"M21 10c0 7-9 13-9 13s-9-6-9-13a9 9 0 0 1 18 0z"}),e.jsx("circle",{cx:"12",cy:"10",r:"3"})]}),"Kayt Yolu"]}),e.jsxs("div",{style:{display:"flex",gap:"8px",alignItems:"center"},children:[e.jsx("input",{type:"text",value:v.filePath,onChange:Le=>{const Ke=ue.map(Ze=>Ze.id===v.id?{...Ze,filePath:Le.target.value}:Ze);He(Ke)},disabled:v.isDefault||!$,style:{flex:1,padding:"10px 14px",border:"2px solid rgba(226, 232, 240, 0.8)",borderRadius:"8px",fontSize:"14px",background:v.isDefault||!$?"rgba(241, 245, 249, 0.6)":"#ffffff",color:"#1e293b",fontWeight:500},placeholder:"Dosya yolu sein veya yazn"}),e.jsx("button",{type:"button",onClick:()=>{v.isDefault||g(Le=>{const Ke=ue.map(Ze=>Ze.id===v.id?{...Ze,filePath:Le}:Ze);He(Ke)},v.filePath)},disabled:v.isDefault||!$,style:{padding:"10px 14px",border:"2px solid rgba(226, 232, 240, 0.8)",borderRadius:"8px",background:v.isDefault||!$?"rgba(241, 245, 249, 0.6)":"rgba(59, 130, 246, 0.1)",cursor:v.isDefault||!$?"not-allowed":"pointer",color:"#1e293b",fontSize:"14px",fontWeight:600},title:"Klasr se",children:"..."})]})]}),e.jsxs("div",{className:"setting-item",children:[e.jsxs("label",{children:[e.jsxs("svg",{width:"16",height:"16",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",style:{display:"inline-block",verticalAlign:"middle",marginRight:"8px",color:"#1e293b"},children:[e.jsx("path",{d:"M14 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V8z"}),e.jsx("polyline",{points:"14 2 14 8 20 8"}),e.jsx("line",{x1:"16",y1:"13",x2:"8",y2:"13"}),e.jsx("line",{x1:"16",y1:"17",x2:"8",y2:"17"})]}),"Kaydedilecek Veriler"]}),e.jsx("div",{className:"data-types-checkboxes",style:{marginTop:"12px"},children:["ogrenci_bilgileri","personel_bilgileri","kitap_listesi","odunc_bilgileri"].map(Le=>e.jsxs("label",{className:"checkbox-label",style:{display:"flex",alignItems:"center",gap:"10px",marginBottom:"12px",cursor:v.isDefault||!$?"not-allowed":"pointer",color:"#1e293b",fontWeight:600},children:[e.jsx("input",{type:"checkbox",checked:v.dataTypes.includes(Le),onChange:Ke=>{if(!v.isDefault&&$){const Ze=ue.map(Mt=>Mt.id===v.id?Ke.target.checked?{...Mt,dataTypes:[...Mt.dataTypes,Le]}:{...Mt,dataTypes:Mt.dataTypes.filter(en=>en!==Le)}:Mt);He(Ze)}},disabled:v.isDefault||!$,style:{width:"20px",height:"20px",cursor:v.isDefault||!$?"not-allowed":"pointer",accentColor:"#2563eb"}}),e.jsx("span",{style:{color:"#1e293b"},children:le[Le]})]},Le))}),e.jsx("small",{style:{color:"#475569",fontSize:"13px",marginTop:"12px",display:"block",fontWeight:500},children:v.saveMode==="overwrite"?"Seilen veriler tek Excel dosyasnda farkl sayfalara kaydedilecektir.":"Seilen her veri tipi iin ayr Excel dosyas oluturulacaktr."})]})]},v.id)}),de&&e.jsxs("div",{className:"settings-section",style:{border:"2px solid #667eea",borderRadius:"12px",padding:"20px",backgroundColor:"white",boxShadow:"0 1px 3px rgba(0,0,0,0.1)"},children:[e.jsxs("h3",{style:{marginBottom:"20px",display:"flex",alignItems:"center",gap:"8px"},children:[e.jsxs("svg",{width:"18",height:"18",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:[e.jsx("path",{d:"M14 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V8z"}),e.jsx("polyline",{points:"14 2 14 8 20 8"}),e.jsx("line",{x1:"12",y1:"18",x2:"12",y2:"12"}),e.jsx("line",{x1:"9",y1:"15",x2:"15",y2:"15"})]}),"Yeni Kayt Tr Ekle"]}),e.jsxs("div",{className:"setting-item",style:{marginBottom:"16px"},children:[e.jsx("label",{children:"Kayt Tr Ad"}),e.jsx("input",{type:"text",value:me,onChange:v=>Ct(v.target.value),style:{width:"100%",padding:"8px 12px",border:"1px solid #d1d5db",borderRadius:"6px",fontSize:"14px"},placeholder:"rn: Gnlk Rapor"})]}),e.jsxs("div",{className:"setting-item",style:{marginBottom:"16px"},children:[e.jsxs("label",{children:[e.jsxs("svg",{width:"16",height:"16",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",style:{display:"inline-block",verticalAlign:"middle",marginRight:"8px",color:"#64748b"},children:[e.jsx("path",{d:"M21 10c0 7-9 13-9 13s-9-6-9-13a9 9 0 0 1 18 0z"}),e.jsx("circle",{cx:"12",cy:"10",r:"3"})]}),"Kayt Yolu"]}),e.jsxs("div",{style:{display:"flex",gap:"8px",alignItems:"center"},children:[e.jsx("input",{type:"text",value:Ht,onChange:v=>Ft(v.target.value),style:{flex:1,padding:"8px 12px",border:"1px solid #d1d5db",borderRadius:"6px",fontSize:"14px"},placeholder:"Dosya yolu sein veya yazn"}),e.jsx("button",{type:"button",onClick:()=>{g(v=>{Ft(v)},Ht)},style:{padding:"8px 12px",border:"1px solid #d1d5db",borderRadius:"6px",background:"white",cursor:"pointer",color:"#374151",fontSize:"14px",fontWeight:500},title:"Klasr se",children:"..."})]})]}),e.jsxs("div",{className:"setting-item",style:{marginBottom:"16px"},children:[e.jsxs("label",{style:{display:"flex",alignItems:"center",gap:"10px",cursor:"pointer",color:"#1e293b",fontWeight:600},children:[e.jsx("input",{type:"checkbox",checked:nt,onChange:v=>At(v.target.checked),style:{width:"20px",height:"20px",cursor:"pointer",accentColor:"#2563eb"}}),e.jsx("span",{style:{color:"#1e293b"},children:"Gncel tarih klasrne kaydet"})]}),e.jsx("small",{style:{color:"#64748b",fontSize:"12px",marginTop:"4px",display:"block",marginLeft:"30px"},children:"aretlendiinde, her almada o gnn tarihi iin klasr alr ve kaytlar o klasre kaydedilir (Tarih format: gg-aa-yyyy)"})]}),e.jsxs("div",{className:"setting-item",children:[e.jsxs("label",{children:[e.jsxs("svg",{width:"16",height:"16",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",style:{display:"inline-block",verticalAlign:"middle",marginRight:"8px",color:"#64748b"},children:[e.jsx("path",{d:"M14 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V8z"}),e.jsx("polyline",{points:"14 2 14 8 20 8"}),e.jsx("line",{x1:"16",y1:"13",x2:"8",y2:"13"}),e.jsx("line",{x1:"16",y1:"17",x2:"8",y2:"17"})]}),"Kaydedilecek Veriler"]}),e.jsx("div",{className:"data-types-checkboxes",style:{marginTop:"12px"},children:["ogrenci_bilgileri","personel_bilgileri","kitap_listesi","odunc_bilgileri"].map(v=>{const $={ogrenci_bilgileri:"renci Bilgileri",personel_bilgileri:"Personel Bilgileri",kitap_listesi:"Kitap Listesi",odunc_bilgileri:"dn Bilgileri"};return e.jsxs("label",{className:"checkbox-label",style:{display:"flex",alignItems:"center",gap:"10px",marginBottom:"12px",cursor:"pointer",color:"#1e293b",fontWeight:600},children:[e.jsx("input",{type:"checkbox",checked:tt.includes(v),onChange:le=>{le.target.checked?Lt([...tt,v]):Lt(tt.filter(Le=>Le!==v))},style:{width:"20px",height:"20px",cursor:"pointer",accentColor:"#2563eb"}}),e.jsx("span",{style:{color:"#1e293b"},children:$[v]})]},v)})}),e.jsx("small",{style:{color:"#64748b",fontSize:"12px",marginTop:"8px",display:"block"},children:"Seilen her veri tipi iin ayr Excel dosyas oluturulacaktr."})]}),e.jsxs("div",{style:{display:"flex",gap:"8px",marginTop:"20px"},children:[e.jsx("button",{type:"button",className:"action-btn secondary",onClick:()=>{Ce(!1),Ct(""),Lt(["kitap_listesi","odunc_bilgileri"]),Ft(""),At(!0)},style:{flex:1},children:"ptal"}),e.jsx("button",{type:"button",className:"action-btn primary",onClick:Zt,style:{flex:1},children:"Kaydet"})]})]}),!de&&ue.filter(v=>!v.isDefault).length<2&&e.jsx("div",{style:{marginTop:"24px",paddingTop:"24px",borderTop:"1px solid #e5e7eb"},children:e.jsxs("button",{type:"button",className:"action-btn secondary",onClick:Dt,style:{width:"100%"},children:[e.jsxs("svg",{width:"16",height:"16",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",style:{marginRight:"8px"},children:[e.jsx("line",{x1:"12",y1:"5",x2:"12",y2:"19"}),e.jsx("line",{x1:"5",y1:"12",x2:"19",y2:"12"})]}),"Yeni Kayt Tr Ekle"]})})]}),s==="other"&&e.jsxs("div",{className:"other-tab",children:[e.jsx("h3",{style:{fontSize:"14px",fontWeight:700,color:"#64748b",textTransform:"uppercase",letterSpacing:"0.05em",marginBottom:"12px",marginTop:"4px"},children:"Sistem Yaplandrmas"}),e.jsxs("div",{className:"settings-section",children:[e.jsxs("h3",{style:{display:"none"},children:[e.jsxs("svg",{width:"18",height:"18",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",style:{display:"inline-block",verticalAlign:"middle",marginRight:"8px"},children:[e.jsx("circle",{cx:"12",cy:"12",r:"10"}),e.jsx("line",{x1:"12",y1:"16",x2:"12",y2:"12"}),e.jsx("line",{x1:"12",y1:"8",x2:"12.01",y2:"8"})]}),"Sistem Ayarlar"]}),e.jsxs("div",{className:"setting-item",children:[e.jsxs("label",{style:{color:"#1e293b",fontWeight:600,marginBottom:"8px",display:"block"},children:[e.jsxs("svg",{width:"16",height:"16",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",style:{display:"inline-block",verticalAlign:"middle",marginRight:"8px",color:"#64748b"},children:[e.jsx("path",{d:"M4 19.5A2.5 2.5 0 0 1 6.5 17H20"}),e.jsx("path",{d:"M6.5 2H20v20H6.5A2.5 2.5 0 0 1 4 19.5v-15A2.5 2.5 0 0 1 6.5 2z"})]}),"Kitap Alma Snr"]}),e.jsx("input",{type:"number",min:"1",value:Ee,onChange:v=>Et(parseInt(v.target.value)||5),style:{padding:"10px 14px",border:"2px solid rgba(226, 232, 240, 0.8)",borderRadius:"8px",fontSize:"14px",width:"100%",maxWidth:"200px",color:"#1e293b"},placeholder:"5"}),e.jsx("p",{style:{color:"#64748b",fontSize:"12px",marginTop:"8px"},children:"rencilerin ayn anda alabilecei maksimum kitap says."})]}),e.jsxs("div",{className:"setting-item",style:{marginTop:"16px"},children:[e.jsxs("label",{style:{color:"#1e293b",fontWeight:600,marginBottom:"8px",display:"block"},children:[e.jsxs("svg",{width:"16",height:"16",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",style:{display:"inline-block",verticalAlign:"middle",marginRight:"8px",color:"#64748b"},children:[e.jsx("circle",{cx:"12",cy:"12",r:"10"}),e.jsx("line",{x1:"12",y1:"8",x2:"12",y2:"12"}),e.jsx("line",{x1:"12",y1:"16",x2:"12.01",y2:"16"})]}),"Ceza Puan Snr"]}),e.jsx("input",{type:"number",min:"1",value:c,onChange:v=>N(parseInt(v.target.value)||100),style:{padding:"10px 14px",border:"2px solid rgba(226, 232, 240, 0.8)",borderRadius:"8px",fontSize:"14px",width:"100%",maxWidth:"200px",color:"#1e293b"},placeholder:"100"}),e.jsx("p",{style:{color:"#64748b",fontSize:"12px",marginTop:"8px"},children:"Ceza puan bu snra ulaan rencilere ilem kstlamas uygulanr."})]}),e.jsxs("div",{className:"setting-item",style:{marginTop:"16px"},children:[e.jsxs("label",{style:{color:"#1e293b",fontWeight:600,marginBottom:"8px",display:"block"},children:[e.jsxs("svg",{width:"16",height:"16",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",style:{display:"inline-block",verticalAlign:"middle",marginRight:"8px",color:"#64748b"},children:[e.jsx("path",{d:"M14 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V8z"}),e.jsx("polyline",{points:"14 2 14 8 20 8"}),e.jsx("line",{x1:"16",y1:"13",x2:"8",y2:"13"}),e.jsx("line",{x1:"16",y1:"17",x2:"8",y2:"17"}),e.jsx("polyline",{points:"10 9 9 9 8 9"})]}),"Tekil Kitap Eklenebilir"]}),e.jsxs("div",{style:{position:"relative",width:"36px",height:"20px",display:"inline-block",verticalAlign:"middle"},children:[e.jsx("input",{type:"checkbox",checked:oe,onChange:v=>Ae(v.target.checked),style:{opacity:0,width:0,height:0}}),e.jsx("span",{style:{position:"absolute",cursor:"pointer",top:0,left:0,right:0,bottom:0,backgroundColor:oe?"#2563eb":"#ccc",transition:"0.3s",borderRadius:"20px"},onClick:()=>Ae(!oe)}),e.jsx("span",{style:{position:"absolute",content:'""',height:"14px",width:"14px",left:oe?"18px":"4px",bottom:"3px",backgroundColor:"white",transition:"0.3s",borderRadius:"50%"},onClick:()=>Ae(!oe)})]}),e.jsx("span",{style:{marginLeft:"10px",fontSize:"14px",color:"#1e293b",fontWeight:500},children:"Etkin"}),e.jsx("p",{style:{color:"#64748b",fontSize:"12px",marginTop:"8px"},children:"ISBN sorgulama ile tek tek kitap ekleme zelliini ap kapatr."})]})]}),B&&e.jsx("div",{className:"settings-section",style:{marginTop:"20px",border:"2px solid rgba(226, 232, 240, 0.8)",cursor:"pointer",transition:"all 0.2s ease"},children:e.jsxs("div",{onClick:()=>window.open("/admin","_blank"),style:{display:"flex",alignItems:"center",justifyContent:"space-between"},children:[e.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"10px"},children:[e.jsx("div",{style:{width:"36px",height:"36px",borderRadius:"8px",background:"rgba(37, 99, 235, 0.1)",display:"flex",alignItems:"center",justifyContent:"center"},children:e.jsxs("svg",{width:"20",height:"20",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",style:{color:"#2563eb"},children:[e.jsx("ellipse",{cx:"12",cy:"5",rx:"9",ry:"3"}),e.jsx("path",{d:"M21 12c0 1.66-4 3-9 3s-9-1.34-9-3"}),e.jsx("path",{d:"M3 5v14c0 1.66 4 3 9 3s 9-1.34 9-3V5"})]})}),e.jsxs("div",{children:[e.jsx("h4",{style:{margin:0,color:"#1e293b",fontSize:"15px"},children:"Veritaban Ynetimi"}),e.jsx("p",{style:{margin:0,color:"#64748b",fontSize:"13px"},children:"Yedekleme, geri ykleme ve Excel ilemleri"})]})]}),e.jsxs("svg",{width:"20",height:"20",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",style:{color:"#94a3b8"},children:[e.jsx("line",{x1:"5",y1:"12",x2:"19",y2:"12"}),e.jsx("polyline",{points:"12 5 19 12 12 19"})]})]})})]}),e.jsx("div",{className:"settings-actions",children:e.jsx("button",{className:"action-btn secondary",onClick:n,children:"Kapat"})})]})]}),A&&e.jsx("div",{className:"modal-overlay",style:{zIndex:2e3},onClick:()=>{Ne(!1),rt.current=null},children:e.jsxs("div",{className:"modal-content",style:{maxWidth:"800px",maxHeight:"80vh"},onClick:v=>v.stopPropagation(),children:[e.jsxs("div",{className:"modal-header",children:[e.jsx("h2",{children:"Klasr Se"}),e.jsx("button",{className:"modal-close",onClick:()=>{Ne(!1),rt.current=null},children:e.jsxs("svg",{width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:[e.jsx("line",{x1:"18",y1:"6",x2:"6",y2:"18"}),e.jsx("line",{x1:"6",y1:"6",x2:"18",y2:"18"})]})})]}),e.jsxs("div",{className:"modal-body",style:{padding:"20px"},children:[e.jsxs("div",{style:{marginBottom:"16px"},children:[he&&e.jsx("div",{style:{marginBottom:"12px",padding:"10px",backgroundColor:"#f9fafb",borderRadius:"6px",border:"1px solid #e5e7eb"},children:e.jsxs("div",{style:{display:"flex",alignItems:"center",flexWrap:"wrap",gap:"4px"},children:[e.jsx("span",{style:{fontSize:"12px",color:"#64748b",fontWeight:500},children:"Konum:"}),te(he).map((v,$,le)=>e.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"4px"},children:[e.jsx("button",{type:"button",onClick:()=>{const Le=v.path==="Masast"?"Masast":v.path;R(Le)},style:{padding:"4px 8px",borderRadius:"4px",border:"none",backgroundColor:$===le.length-1?"#e0e7ff":"transparent",color:$===le.length-1?"#4338ca":"#2563eb",cursor:"pointer",fontSize:"13px",fontWeight:$===le.length-1?600:400,transition:"all 0.2s"},onMouseEnter:Le=>{$!==le.length-1&&(Le.currentTarget.style.backgroundColor="#e0e7ff")},onMouseLeave:Le=>{$!==le.length-1&&(Le.currentTarget.style.backgroundColor="transparent")},title:v.path,children:v.name}),$<le.length-1&&e.jsx("span",{style:{color:"#94a3b8",fontSize:"12px"},children:"/"})]},$))]})}),e.jsxs("div",{style:{display:"flex",gap:"8px",alignItems:"center",marginBottom:"12px"},children:[e.jsx("input",{type:"text",value:he?ee(he):"",readOnly:!0,style:{flex:1,padding:"8px",borderRadius:"6px",border:"1px solid #d1d5db",backgroundColor:"#f9fafb",fontFamily:"monospace",fontSize:"13px"},placeholder:"Mevcut klasr yolu"}),e.jsx("button",{type:"button",onClick:()=>{if(he){const v=he.split(/[/\\]/);v.pop();const $=v.length>0?v.join("/"):null;R($||"Masast")}},disabled:!he||te(he).length<=1,style:{padding:"8px 16px",borderRadius:"6px",border:"1px solid #d1d5db",backgroundColor:"white",cursor:!he||te(he).length<=1?"not-allowed":"pointer",whiteSpace:"nowrap",opacity:!he||te(he).length<=1?.5:1},title:"st klasre git",children:" st"}),e.jsx("button",{type:"button",onClick:()=>{R("Masast")},style:{padding:"8px 16px",borderRadius:"6px",border:"1px solid #d1d5db",backgroundColor:"white",cursor:"pointer",whiteSpace:"nowrap"},title:"Masastne git",children:" Masast"})]})]}),e.jsx("div",{style:{border:"1px solid #e5e7eb",borderRadius:"6px",maxHeight:"400px",overflowY:"auto",backgroundColor:"white"},children:Ue.length===0?e.jsx("div",{style:{padding:"40px",textAlign:"center",color:"#6b7280"},children:"Klasr bo"}):e.jsx("div",{style:{padding:"8px"},children:Ue.map((v,$)=>e.jsxs("div",{onClick:()=>{v.type==="directory"&&R(v.path)},style:{padding:"12px",borderRadius:"6px",cursor:v.type==="directory"?"pointer":"default",display:"flex",alignItems:"center",gap:"12px",marginBottom:"4px",backgroundColor:v.type==="directory"?"transparent":"#f9fafb",transition:"background-color 0.2s"},onMouseEnter:le=>{v.type==="directory"&&(le.currentTarget.style.backgroundColor="#f3f4f6")},onMouseLeave:le=>{v.type==="directory"&&(le.currentTarget.style.backgroundColor="transparent")},children:[e.jsx("div",{style:{fontSize:"20px",width:"24px",textAlign:"center"},children:v.type==="directory"?"":""}),e.jsxs("div",{style:{flex:1},children:[e.jsx("div",{style:{fontWeight:600,marginBottom:"4px",color:v.type==="directory"?"#1e293b":"#64748b"},children:v.name}),v.type==="file"&&e.jsx("div",{style:{fontSize:"12px",color:"#6b7280"},children:"Dosya"})]}),v.type==="directory"&&e.jsx("div",{style:{color:"#94a3b8",fontSize:"12px"},children:""})]},$))})}),e.jsxs("div",{style:{marginTop:"16px",display:"flex",gap:"8px",justifyContent:"flex-end"},children:[e.jsx("button",{type:"button",onClick:()=>{Ne(!1),rt.current=null},style:{padding:"10px 20px",borderRadius:"6px",border:"1px solid #d1d5db",backgroundColor:"white",cursor:"pointer"},children:"ptal"}),e.jsx("button",{type:"button",onClick:()=>{if(!he){P("Hata","Ltfen bir klasr sein","error","");return}J(he)},style:{padding:"10px 20px",borderRadius:"6px",border:"none",backgroundColor:"#2563eb",color:"white",cursor:"pointer",fontWeight:600},children:"Bu Klasr Se"})]})]})]})}),f&&D&&_t.createPortal(e.jsx("div",{style:{position:"fixed",top:0,left:0,right:0,bottom:0,backgroundColor:"rgba(0, 0, 0, 0.6)",display:"flex",alignItems:"center",justifyContent:"center",zIndex:10003},onClick:()=>b(!1),children:e.jsxs("div",{style:{backgroundColor:"white",borderRadius:"16px",padding:"40px",maxWidth:"500px",width:"90%",boxShadow:"0 20px 60px rgba(0, 0, 0, 0.3)"},onClick:v=>v.stopPropagation(),children:[e.jsx("h2",{style:{fontSize:"24px",fontWeight:"bold",marginBottom:"8px",color:"#1e293b",textAlign:"center"},children:" Kurtarma Kodu"}),e.jsx("p",{style:{fontSize:"14px",color:"#64748b",textAlign:"center",marginBottom:"32px"},children:"Bu kodu gvenli bir yerde saklayn"}),e.jsx("div",{style:{backgroundColor:"#f8fafc",border:"2px dashed #cbd5e1",borderRadius:"12px",padding:"32px",textAlign:"center",marginBottom:"24px"},children:e.jsx("div",{style:{fontSize:"36px",fontWeight:"bold",letterSpacing:"6px",color:"#2563eb",fontFamily:"monospace",userSelect:"all"},children:D})}),e.jsx("div",{style:{backgroundColor:"#fef2f2",border:"1px solid #fecaca",borderRadius:"8px",padding:"12px 16px",marginBottom:"24px"},children:e.jsxs("p",{style:{fontSize:"13px",color:"#dc2626",margin:0,lineHeight:"1.6"},children:[" Bu kod ",e.jsx("strong",{children:"sadece bir kere"})," kullanlabilir ve ",e.jsx("strong",{children:"sresizdir"}),". Kullanldktan sonra yeni kod retmeniz gerekir."]})}),e.jsxs("div",{style:{display:"flex",gap:"12px"},children:[e.jsxs("button",{onClick:()=>{navigator.clipboard.writeText(D),P("Baarl","Kurtarma kodu kopyaland","success","")},style:{flex:1,padding:"14px 24px",background:"linear-gradient(135deg, #10b981, #059669)",color:"white",border:"none",borderRadius:"8px",fontSize:"15px",fontWeight:"600",cursor:"pointer",display:"flex",alignItems:"center",justifyContent:"center",gap:"8px",boxShadow:"0 2px 8px rgba(16, 185, 129, 0.3)"},children:[e.jsxs("svg",{width:"18",height:"18",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2.5",children:[e.jsx("rect",{x:"9",y:"9",width:"13",height:"13",rx:"2",ry:"2"}),e.jsx("path",{d:"M5 15H4a2 2 0 0 1-2-2V4a2 2 0 0 1 2-2h9a2 2 0 0 1 2 2v1"})]}),"Kopyala"]}),e.jsx("button",{onClick:()=>b(!1),style:{flex:1,padding:"14px 24px",backgroundColor:"#f1f5f9",color:"#475569",border:"none",borderRadius:"8px",fontSize:"15px",fontWeight:"600",cursor:"pointer"},children:"Kapat"})]})]})}),document.body),ce&&_t.createPortal(e.jsx("div",{style:{position:"fixed",top:0,left:0,right:0,bottom:0,backgroundColor:"rgba(0, 0, 0, 0.6)",display:"flex",alignItems:"center",justifyContent:"center",zIndex:10002},onClick:()=>{V||(Oe(!1),_e(""),De(""))},children:e.jsxs("div",{style:{backgroundColor:"white",borderRadius:"16px",padding:"32px",maxWidth:"450px",width:"90%",boxShadow:"0 20px 60px rgba(0, 0, 0, 0.3)"},onClick:v=>v.stopPropagation(),children:[e.jsx("h2",{style:{fontSize:"20px",fontWeight:"bold",marginBottom:"8px",color:"#1e293b",textAlign:"center"},children:" ifre Dorulama"}),e.jsx("p",{style:{fontSize:"14px",color:"#64748b",textAlign:"center",marginBottom:"24px"},children:ft==="reset"?"Mevcut kurtarma kodunu silmek iin admin ifrenizi girin (yeni kod retilmez)":"Kurtarma kodu retmek iin admin ifrenizi girin"}),e.jsxs("div",{style:{marginBottom:"16px"},children:[e.jsx("label",{style:{display:"block",fontSize:"14px",fontWeight:500,color:"#475569",marginBottom:"8px"},children:"Admin ifresi"}),e.jsx("input",{type:"password",value:Re,onChange:v=>{_e(v.target.value),De("")},onKeyDown:v=>{v.key==="Enter"&&!V&&bt()},placeholder:"ifrenizi girin",disabled:V,autoFocus:!0,style:{width:"100%",padding:"12px 16px",border:xt?"2px solid #ef4444":"1px solid #cbd5e1",borderRadius:"8px",fontSize:"14px",outline:"none",transition:"border-color 0.2s"}}),xt&&e.jsx("p",{style:{fontSize:"13px",color:"#ef4444",marginTop:"6px",marginBottom:0},children:xt})]}),e.jsxs("div",{style:{display:"flex",gap:"12px",marginTop:"24px"},children:[e.jsx("button",{onClick:()=>{V||(Oe(!1),_e(""),De(""))},disabled:V,style:{flex:1,padding:"12px 20px",backgroundColor:"#f1f5f9",color:"#475569",border:"none",borderRadius:"8px",fontSize:"14px",fontWeight:"500",cursor:V?"not-allowed":"pointer",opacity:V?.5:1},children:"ptal"}),e.jsx("button",{onClick:bt,disabled:V||!Re,style:{flex:1,padding:"12px 20px",background:V||!Re?"#94a3b8":"linear-gradient(135deg, #10b981, #059669)",color:"white",border:"none",borderRadius:"8px",fontSize:"14px",fontWeight:"500",cursor:V||!Re?"not-allowed":"pointer",display:"flex",alignItems:"center",justifyContent:"center",gap:"8px"},children:V?e.jsxs(e.Fragment,{children:[e.jsx("span",{className:"login-spinner",children:e.jsxs("svg",{width:"16",height:"16",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2.5",children:[e.jsx("circle",{cx:"12",cy:"12",r:"10",strokeDasharray:"47",strokeDashoffset:"47",opacity:"0.2"}),e.jsx("circle",{cx:"12",cy:"12",r:"10",strokeDasharray:"47",strokeDashoffset:"11.75"})]})}),"Dorulanyor..."]}):" Onayla"})]})]})}),document.body)]})},v0=({notifications:t,onClose:n,onMarkAsRead:r,onMarkAllAsRead:i,onClearAll:o,notificationSettings:l})=>{const s=a.useRef(null),u=B=>(B||"").toString().trim().toLowerCase().normalize("NFD").replace(/[\u0300-\u036f]/g,"").replace(/[\s_\-\/]+/g," "),d=B=>{const m=u(B);return m.includes("toplu ogrenci silme")||m.includes("toplu ogrenci")?"studentBulkDelete":m.includes("ogrenci silindi")?"studentDelete":m.includes("ogrenci eklendi")||m.includes("toplu ogrenci ekleme")?"studentAdd":m.includes("ogrenci guncellendi")?"studentUpdate":m.includes("toplu kitap silme")||m.includes("toplu kitap")?"bookBulkDelete":m.includes("kitap silindi")?"bookDelete":m.includes("kitap eklendi")||m.includes("toplu kitap ekleme")?"bookAdd":m.includes("kitap guncellendi")?"bookUpdate":m.includes("kitap odunc verildi")||m.includes("toplu kitap odunc")||m.includes("odunc")&&m.includes("verildi")?"loanBorrow":m.includes("kitap teslim alindi")||m.includes("teslim alindi")||m.includes("odunc kaydi silindi")||m.includes("toplu odunc")||m.includes("odunc kaldirildi")?"loanReturn":m.includes("teslim tarihi uzatildi")||m.includes("uzatildi")||m.includes("uzatma")?"loanExtend":m.includes("teslim tarihi yaklasiyor")?"dueSoon":m.includes("geciken odunc")?"overdue":"misc"},h=a.useMemo(()=>{const B=l;return B.notifications?t.filter(m=>{var F;const I=m.kind??d(m.title);return!(!I||I==="misc"||((F=B.notificationTypes)==null?void 0:F[I])===!1)}):[]},[t,l]),C=h.filter(B=>!B.read).length,k=B=>{const I=new Date().getTime()-B.getTime(),F=Math.floor(I/6e4),y=Math.floor(F/60),f=Math.floor(y/24);return F<1?"Az nce":F<60?`${F} dakika nce`:y<24?`${y} saat nce`:f<7?`${f} gn nce`:B.toLocaleDateString("tr-TR",{day:"numeric",month:"short",hour:"2-digit",minute:"2-digit"})},S=B=>{switch(B){case"success":return e.jsx("svg",{width:"20",height:"20",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",children:e.jsx("polyline",{points:"20 6 9 17 4 12"})});case"warning":return e.jsxs("svg",{width:"20",height:"20",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",children:[e.jsx("path",{d:"M10.29 3.86L1.82 18a2 2 0 0 0 1.71 3h16.94a2 2 0 0 0 1.71-3L13.71 3.86a2 2 0 0 0-3.42 0z"}),e.jsx("line",{x1:"12",y1:"9",x2:"12",y2:"13"}),e.jsx("line",{x1:"12",y1:"17",x2:"12.01",y2:"17"})]});case"error":return e.jsxs("svg",{width:"20",height:"20",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",children:[e.jsx("circle",{cx:"12",cy:"12",r:"10"}),e.jsx("line",{x1:"12",y1:"8",x2:"12",y2:"12"}),e.jsx("line",{x1:"12",y1:"16",x2:"12.01",y2:"16"})]});default:return e.jsxs("svg",{width:"20",height:"20",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",children:[e.jsx("circle",{cx:"12",cy:"12",r:"10"}),e.jsx("line",{x1:"12",y1:"16",x2:"12",y2:"12"}),e.jsx("line",{x1:"12",y1:"8",x2:"12.01",y2:"8"})]})}};return e.jsx("div",{className:"notification-panel-overlay",onClick:n,children:e.jsxs("div",{className:"notification-panel",ref:s,onClick:B=>B.stopPropagation(),children:[e.jsxs("div",{className:"notification-panel-header",children:[e.jsxs("div",{className:"notification-header-info",children:[e.jsxs("svg",{width:"20",height:"20",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",children:[e.jsx("path",{d:"M18 8A6 6 0 0 0 6 8c0 7-3 9-3 9h18s-3-2-3-9"}),e.jsx("path",{d:"M13.73 21a2 2 0 0 1-3.46 0"})]}),e.jsx("h2",{style:{margin:0,fontSize:"20px",fontWeight:700,color:"#0f172a"},children:"Bildirimler"}),C>0&&e.jsx("span",{className:"notification-badge",children:C})]}),e.jsxs("div",{className:"notification-header-actions",children:[C>0&&e.jsx("button",{className:"notification-action-btn",onClick:i,title:"Tmn okundu iaretle",children:"Tmn Okundu aretle"}),h.length>0&&e.jsx("button",{className:"notification-action-btn",onClick:o,title:"Tmn temizle",style:{color:"#ef4444"},children:"Tmn Temizle"}),e.jsx("button",{className:"notification-close-btn",onClick:n,children:e.jsxs("svg",{width:"20",height:"20",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",children:[e.jsx("line",{x1:"18",y1:"6",x2:"6",y2:"18"}),e.jsx("line",{x1:"6",y1:"6",x2:"18",y2:"18"})]})})]})]}),e.jsx("div",{className:"notification-panel-body",children:h.length===0?e.jsxs("div",{className:"notification-empty",children:[e.jsxs("svg",{width:"64",height:"64",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",style:{opacity:.3},children:[e.jsx("path",{d:"M18 8A6 6 0 0 0 6 8c0 7-3 9-3 9h18s-3-2-3-9"}),e.jsx("path",{d:"M13.73 21a2 2 0 0 1-3.46 0"})]}),e.jsx("p",{style:{margin:"16px 0 0 0",color:"#64748b",fontSize:"14px"},children:t.length===0?"Henz bildirim yok":"Seili bildirim trleri iin bildirim yok"})]}):e.jsx("div",{className:"notification-list",children:h.map(B=>e.jsxs("div",{className:`notification-item ${B.read?"read":"unread"}`,onClick:()=>!B.read&&r(B.id),children:[e.jsx("div",{className:`notification-icon notification-icon-${B.type}`,children:S(B.type)}),e.jsxs("div",{className:"notification-content",children:[e.jsxs("div",{className:"notification-title-row",children:[e.jsx("h3",{className:"notification-title",children:B.title}),!B.read&&e.jsx("span",{className:"notification-unread-dot"})]}),e.jsx("p",{className:"notification-message",children:B.message}),e.jsx("span",{className:"notification-time",children:k(B.timestamp)})]})]},B.id))})})]})})},dd=()=>({notifications:!0,notificationTypes:{studentAdd:!0,studentDelete:!0,studentBulkDelete:!0,studentUpdate:!0,bookAdd:!0,bookDelete:!0,bookBulkDelete:!0,bookUpdate:!0,loanExtend:!0,loanReturn:!0,loanBorrow:!0,dueSoon:!0,overdue:!0}}),ua=t=>{const n=new Date(t);n.setHours(0,0,0,0);const r=new Date;return r.setHours(0,0,0,0),Math.ceil((n.getTime()-r.getTime())/(1e3*60*60*24))},Eu=t=>{if(typeof t.totalQuantity=="number"&&!Number.isNaN(t.totalQuantity)&&t.totalQuantity>0)return t.totalQuantity;const n=typeof t.quantity=="number"&&!Number.isNaN(t.quantity)?t.quantity:0,r=Array.isArray(t.loans)?t.loans.length:0,i=n+r;return i>0?i:Math.max(n,r,0)},Ri=(t,n=5)=>t.length===0?"":t.length<=n?t.join(", "):`${t.slice(0,n).join(", ")} ve ${t.length-n} dier`,Dl=t=>`${t.name} ${t.surname||""}`.trim(),Yi=t=>t.replace(/\s+/g," ").trim().toLowerCase(),pa=t=>{if(t.id)return t.id;const n=(t.title||"").toLowerCase().trim(),r=(t.author||"").toLowerCase().trim();return`book:${n}__${r}`},xa=t=>{if(t.studentNumber)return`student:${t.studentNumber}`;const n=Yi(`${t.name||""} ${t.surname||""}`.trim());return n?`student-name:${n}`:""},fa=t=>{const n=Yi(t.borrower||""),r=t.bookId||t.title||"";return!r&&!n?"":`loan:${r}__${n}`},sf=t=>`kutuphane_notification_settings_${t||"default"}`,$u=t=>`kutuphane_notifications_${t||"default"}`,Pu=t=>`kutuphane_notifications_cleared_at_${t||"default"}`,ha=t=>`kutuphane_notifications_snapshot_${t||"default"}`,Ku=t=>`kutuphane_notifications_baseline_${t||"default"}`,k0=t=>{const n=dd();if(typeof window>"u")return n;try{const r=localStorage.getItem(sf(t));if(r){const i=JSON.parse(r);return{notifications:i.notifications??n.notifications,notificationTypes:{...n.notificationTypes,...i.notificationTypes||{}}}}}catch(r){console.error("Bildirim ayarlar yklenemedi:",r)}return n},w0=t=>(t||"").toString().trim().toLowerCase().normalize("NFD").replace(/[\u0300-\u036f]/g,"").replace(/[\s_\-\/]+/g," "),S0=t=>{const n=w0(t);return console.log(" inferNotificationKind arld:",t," normalized:",n),n.includes("toplu ogrenci silme")||n.includes("toplu ogrenci")?"studentBulkDelete":n.includes("ogrenci silindi")?"studentDelete":n.includes("ogrenci eklendi")||n.includes("toplu ogrenci ekleme")?"studentAdd":n.includes("ogrenci guncellendi")?"studentUpdate":n.includes("toplu kitap silme")||n.includes("toplu kitap")?"bookBulkDelete":n.includes("kitap silindi")?"bookDelete":n.includes("kitap eklendi")||n.includes("toplu kitap ekleme")?"bookAdd":n.includes("kitap guncellendi")?"bookUpdate":n.includes("odunc verildi")||n.includes("kitap odunc")||n.includes("toplu odunc verildi")?(console.log(" dn verme bildirimi algland!"),"loanBorrow"):n.includes("teslim al")||n.includes("odunc silme")||n.includes("odunc kaldirildi")?(console.log(" Teslim al bildirimi algland!"),"loanReturn"):n.includes("teslim tarihi uzatildi")||n.includes("uzatildi")||n.includes("uzatma")?"loanExtend":n.includes("teslim tarihi yaklasiyor")?"dueSoon":n.includes("geciken odunc")?"overdue":(console.log(" Bilinmeyen balk, misc dndrlyor"),"misc")},_u=t=>{const n=new Map;return t.forEach(r=>{n.has(r.borrower)||n.set(r.borrower,[]),n.get(r.borrower).push(r.title)}),n},Hu=t=>Array.from(t.entries()).map(([n,r])=>{const i=Ri(r,3);return`${n} (${r.length} kitap: ${i})`}).join(" | "),C0=()=>{const[t,n]=a.useState(null),[r,i]=a.useState([]),[o,l]=a.useState([]),[s,u]=a.useState([]),[d,h]=a.useState([]),[C,k]=a.useState(!1),[S,B]=a.useState(null),m=a.useRef(null),[I,F]=a.useState(""),[y,f]=a.useState(!1),[b,D]=a.useState(!1),[q,V]=a.useState(!1),[ie,M]=a.useState(!1),[re,ce]=a.useState(!1),[Oe,Re]=a.useState(""),[_e,xt]=a.useState({books:[],students:[],loans:[]}),De=a.useRef(null),[ft,ze]=a.useState(null),[P,se]=a.useState(null),[fe,ve]=a.useState("all"),[Pe,bt]=a.useState(!1),[lt,be]=a.useState(null),[Me,et]=a.useState(null),[Qe,Z]=a.useState(7),[$e,Xe]=a.useState(null),[Ge,mt]=a.useState(!1),kt=a.useRef(null),[ot,We]=a.useState(100),[st,Bt]=a.useState(!1),[Ee,Et]=a.useState([]),[c,N]=a.useState(()=>dd()),oe=a.useRef([]),Ae=a.useRef([]),Be=a.useRef([]),ye=a.useRef(!1),Ve=a.useRef(!1),jt=a.useRef(!1),zt=a.useRef(new Set),nn=a.useRef(null),Te=a.useRef(null),wt=a.useRef(null),_=a.useRef({books:[],loans:[]}),ne=a.useRef(null),ue=a.useRef({students:[],loans:[]}),He=a.useRef(null),Se=a.useRef({username:null,done:!1}),[gt,de]=a.useState(!1),[Ce,me]=a.useState(null),[Ct,tt]=a.useState(!1),[Lt,Ht]=a.useState(null),[Ft,nt]=a.useState(!1);a.useEffect(()=>{if(!lt){Ht(null),nt(!1);return}const z=`${lt.name} ${lt.surname}`.trim()||lt.name,U={studentNumber:lt.studentNumber,borrower:z||void 0};let pe=!1;return nt(!0),xe.get("/statistics/student-history",U).then(Fe=>{pe||Ht(Fe)}).catch(Fe=>{pe||(console.error("Gemi istatistikler yklenemedi:",Fe),Ht(null))}).finally(()=>{pe||nt(!1)}),()=>{pe=!0}},[lt]);const[At,T]=a.useState(!1),[H,A]=a.useState(null),Ne=(z,U,pe="info",Fe)=>{A({title:z,message:U,type:pe,icon:Fe}),T(!0)},he=()=>{ne.current&&(clearTimeout(ne.current),ne.current=null)},it=()=>{He.current&&(clearTimeout(He.current),He.current=null)},Ue=(z,U,pe)=>{if(U.length===0)return;const Fe=Hu(_u(U));R("info",`${z} - dn Kaldrld`,`${U.length} dn kayd otomatik silindi: ${Fe}`,void 0,!0)},Nt=z=>{var rn,Xt;const U=_.current,pe=U.books,Fe=U.loans;if(pe.length===0&&Fe.length===0)return;_.current={books:[],loans:[]},he();const Je=((rn=z.notificationTypes)==null?void 0:rn.bookDelete)!==!1,Vt=((Xt=z.notificationTypes)==null?void 0:Xt.bookBulkDelete)!==!1;if(pe.length>0&&(Je||Vt)){const vt=pe.map(x=>`${x.title} kitabndan ${Eu(x)} adet`),ln=pe.reduce((x,K)=>x+Eu(K),0),Mn=pe.length===1?"Kitap Silindi":"Toplu Kitap Silme",qt=`${pe.length} kitap silindi (Toplam ${ln} adet). ${Ri(vt,5)}`;R("warning",Mn,qt)}Fe.length>0&&Ue("Kitap Silme",Fe)},rt=(z,U,pe)=>{const Fe=_.current;Fe.books=Fe.books.concat(z),Fe.loans=Fe.loans.concat(U),ne.current&&clearTimeout(ne.current),ne.current=setTimeout(()=>Nt(pe),400)},yt=z=>{var rn,Xt;const U=ue.current,pe=U.students,Fe=U.loans;if(pe.length===0&&Fe.length===0)return;ue.current={students:[],loans:[]},it();const Je=((rn=z.notificationTypes)==null?void 0:rn.studentDelete)!==!1,Vt=((Xt=z.notificationTypes)==null?void 0:Xt.studentBulkDelete)!==!1;if(pe.length>0&&(Je||Vt)){const vt=pe.map(qt=>Dl(qt)),ln=pe.length===1?"renci Silindi":"Toplu renci Silme",Mn=`${pe.length} renci silindi. ${Ri(vt,5)}`;R("warning",ln,Mn)}Fe.length>0&&Ue("renci Silme",Fe)},Dt=(z,U,pe)=>{const Fe=ue.current;Fe.students=Fe.students.concat(z),Fe.loans=Fe.loans.concat(U),He.current&&clearTimeout(He.current),He.current=setTimeout(()=>yt(pe),400)};a.useEffect(()=>{t&&b&&(t.role==="STUDENT"?$t():Ut())},[t,b]),a.useEffect(()=>{const z=U=>{const pe=U.target,Fe=pe.closest('[style*="z-index: 10005"]')||pe.closest('[style*="z-index: 10000"]')||pe.closest(".card")||ft!==null||P!==null;re&&!pe.closest(".search-container")&&!pe.closest(".search-preview")&&!Fe&&(ce(!1),Re(""),xt({books:[],students:[],loans:[]}))};return document.addEventListener("mousedown",z),()=>{document.removeEventListener("mousedown",z)}},[re,ft,P]),a.useEffect(()=>()=>{he(),it()},[]),a.useEffect(()=>{re&&De.current&&De.current.focus()},[re]);const Zt=(z,U=3e3)=>{m.current&&clearTimeout(m.current),B(z),z&&(m.current=setTimeout(()=>{B(null)},U))},Ut=async()=>{if((t==null?void 0:t.role)==="STUDENT"){k(!0);try{await $t()}catch(z){Zt(z.message,5e3)}finally{k(!1)}return}k(!0);try{await Promise.all([$t(),bn(),w()])}catch(z){Zt(z.message,5e3)}finally{k(!1)}},$t=async z=>{const U=await xe.get("/books");if(z&&z.trim()){const{searchIncludes:pe}=await vu(async()=>{const{searchIncludes:Je}=await Promise.resolve().then(()=>Su);return{searchIncludes:Je}},void 0),Fe=U.filter(Je=>pe(Je.title,z)||pe(Je.author,z)||pe(Je.category,z)||pe(Je.shelf,z)||pe(Je.publisher,z)||pe(Je.summary,z)||pe(Je.bookNumber,z)||pe(Je.year,z)||pe(Je.pageCount,z));i(Fe)}else i(U)},Tt=async z=>{F(z),await $t(z)},Bn=async z=>{if(!z.trim()){xt({books:[],students:[],loans:[]});return}k(!0);try{const{searchIncludes:U}=await vu(async()=>{const{searchIncludes:vt}=await Promise.resolve().then(()=>Su);return{searchIncludes:vt}},void 0),[pe,Fe,Je]=await Promise.all([xe.get("/books"),xe.get("/statistics/all-students"),xe.get("/books/loans")]),Vt=pe.filter(vt=>U(vt.title,z)||U(vt.author,z)||U(vt.category,z)||U(vt.shelf,z)||U(vt.publisher,z)||U(vt.summary,z)||U(vt.bookNumber,z)||U(vt.year,z)||U(vt.pageCount,z)||U(vt.quantity,z)||U(vt.totalQuantity,z)),rn=Fe.filter(vt=>U(vt.name,z)||U(vt.studentNumber,z)||U(vt.class,z)||U(vt.branch,z)||vt.class&&vt.branch&&U(`${vt.class}-${vt.branch}`,z)||vt.class&&vt.branch&&U(`${vt.class}${vt.branch}`,z)||U(vt.borrowed,z)||U(vt.returned,z)||U(vt.late,z)),Xt=Je.filter(vt=>{if(U(vt.title,z)||U(vt.author,z)||U(vt.borrower,z)||U(vt.category,z)||U(vt.personel,z))return!0;const ln=pe.find(Mn=>Mn.id===vt.bookId);return!!(ln&&(U(ln.shelf,z)||U(ln.publisher,z)||U(ln.summary,z)||U(ln.bookNumber,z)||U(ln.year,z)||U(ln.pageCount,z)||U(ln.category,z)))});xt({books:Vt,students:rn,loans:Xt})}catch(U){Zt(U.message,5e3)}finally{k(!1)}},bn=async()=>{if((t==null?void 0:t.role)==="STUDENT")return;const z=await xe.get("/books/loans");l(z)},w=async()=>{if((t==null?void 0:t.role)==="STUDENT")return;const[z,U]=await Promise.all([xe.get("/statistics/top-books"),xe.get("/statistics/all-students")]);u(z),h(U)},Y=async(z,U)=>{kt.current&&(clearInterval(kt.current),kt.current=null);try{let pe;if(U?pe={autoRecordEnabled:U.enabled,autoRecordIntervalMinutes:U.interval}:pe=await xe.get(`/record-types/${z}/auto-record-settings`),pe.autoRecordEnabled&&pe.autoRecordIntervalMinutes>0){const Fe=pe.autoRecordIntervalMinutes*60*1e3;try{const Je=await xe.post("/record-types/sync",{username:z});Je.success===!1||Je.errors&&Je.errors.length>0?console.error("Otomatik kayt (ilk) srasnda hatalar olutu:",Je.errors||Je.message):(console.log(`Otomatik kayt (manuel/ilk) yapld: ${new Date().toLocaleString()}`),Je.files&&Je.files.length>0&&console.log("Oluturulan dosyalar:",Je.files))}catch(Je){console.error("lk otomatik kayt hatas:",Je)}kt.current=setInterval(async()=>{try{const Je=await xe.post("/record-types/sync",{username:z});Je.success===!1||Je.errors&&Je.errors.length>0?console.error("Otomatik kayt srasnda hatalar olutu:",Je.errors||Je.message):console.log(`Otomatik kayt yapld: ${new Date().toLocaleString()}`)}catch(Je){console.error("Otomatik kayt hatas:",Je)}},Fe),console.log(`Otomatik kayt timer balatld: ${pe.autoRecordIntervalMinutes} dakika aralklarla`)}else console.log("Otomatik kayt kapal veya geersiz aralk")}catch(pe){console.error("Otomatik kayt ayarlar yklenemedi:",pe)}},ee=()=>{kt.current&&(clearInterval(kt.current),kt.current=null,console.log("Otomatik kayt timer durduruldu"))};a.useEffect(()=>{(async()=>{try{const U=await xe.get("/system-settings");We(U.maxPenaltyPoints)}catch(U){console.error("Sistem ayarlar yklenemedi:",U)}})()},[]),a.useEffect(()=>{N(t?k0(t.username):dd())},[t]),a.useEffect(()=>{c.notifications||Bt(!1)},[c.notifications]),a.useEffect(()=>{const z=t==null?void 0:t.username,U=$u(z),pe=Pu(z),Fe=ha(z);Et([]),nn.current=null,Te.current=null,wt.current=null,Se.current={username:z??null,done:!1};const Je="kutuphane_notifications",Vt="kutuphane_notifications_cleared_at",rn="kutuphane_notifications_snapshot";if(!localStorage.getItem(U)&&localStorage.getItem(Je))try{localStorage.setItem(U,localStorage.getItem(Je)||"[]"),localStorage.removeItem(Je)}catch{}if(!localStorage.getItem(pe)&&localStorage.getItem(Vt))try{localStorage.setItem(pe,localStorage.getItem(Vt)||""),localStorage.removeItem(Vt)}catch{}if(!localStorage.getItem(Fe)&&localStorage.getItem(rn))try{localStorage.setItem(Fe,localStorage.getItem(rn)||""),localStorage.removeItem(rn)}catch{}const Xt=localStorage.getItem(U);if(Xt)try{const x=JSON.parse(Xt).map(K=>({...K,timestamp:new Date(K.timestamp)}));Et(x)}catch(qt){console.error("Bildirimler yklenemedi:",qt)}const vt=localStorage.getItem(pe);if(vt){const qt=Number(vt);nn.current=Number.isFinite(qt)?qt:null}const ln=localStorage.getItem(Fe);if(ln)try{const qt=JSON.parse(ln);Te.current={books:new Set(Array.isArray(qt.books)?qt.books:[]),students:new Set(Array.isArray(qt.students)?qt.students:[]),loans:new Set(Array.isArray(qt.loans)?qt.loans:[]),applied:!1}}catch(qt){console.error("Bildirim anlk grnts yklenemedi:",qt),Te.current=null}const Mn=localStorage.getItem(Ku(z));if(Mn)try{const qt=JSON.parse(Mn),x=Array.isArray(qt.overdueLoanKeys)?qt.overdueLoanKeys:[];wt.current={overdueLoanKeys:new Set(x),applied:!1}}catch(qt){console.error("Bildirim baseline yklenemedi:",qt),wt.current=null}else wt.current=null},[t==null?void 0:t.username]),a.useEffect(()=>{var qt,x,K,Q,ke,Ye,ae,ct,Wt,ht,Jt,sn;if(!t||t.role==="STUDENT"){oe.current=r,Ae.current=o,Be.current=d;return}const z=c,U=Se.current;if(!U.done||U.username!==t.username){if(!Te.current){const It=r.map(pa).filter(Boolean),hn=d.map(xa).filter(Boolean),$n=o.map(fa).filter(Boolean);Te.current={books:new Set(It),students:new Set(hn),loans:new Set($n),applied:!0},localStorage.setItem(ha(t==null?void 0:t.username),JSON.stringify({books:It,students:hn,loans:$n}))}oe.current=r,Ae.current=o,Be.current=d,ye.current=!0,jt.current=!0,Ve.current=!0,U.username=t.username,U.done=!0;return}const pe=wt.current;if(pe&&!pe.applied){const dn=new Set(o.map(It=>`${It.bookId}_${It.borrower}`));zt.current=new Set(Array.from(pe.overdueLoanKeys).filter(It=>dn.has(It))),oe.current=r,Ae.current=o,Be.current=d,ye.current=!0,jt.current=!0,Ve.current=!0,pe.applied=!0;return}const Fe=Te.current;if(Fe&&!Fe.applied){oe.current=r,Ae.current=o,Be.current=d,ye.current=!0,jt.current=!0,Ve.current=!0,Fe.applied=!0;return}const Je=ye.current,Vt=Ve.current,rn=jt.current,Xt=!jt.current,vt=Xt&&nn.current!==null,ln=new Set,Mn=new Set(o.map(dn=>`${dn.bookId}_${dn.borrower}`));if(Je){const dn=new Set(oe.current.map(dt=>dt.id)),It=new Set(r.map(dt=>dt.id)),hn=Te.current,$n=hn!=null&&hn.applied?hn.books:new Set,Wn=r.filter(dt=>{if(dn.has(dt.id))return!1;const on=pa(dt);return!$n.has(on)});if(Wn.length>0&&((qt=z.notificationTypes)!=null&&qt.bookAdd))if(Wn.length===1){const dt=Wn[0];R("success","Kitap Eklendi",`${dt.title} kitab eklendi.`)}else{const dt=Wn.map(at=>{const p=at.totalQuantity??at.quantity??1;return`${at.title} (${p} adet)`}).join(", "),on=Wn.reduce((at,p)=>{const O=p.totalQuantity??p.quantity??1;return at+O},0);R("success","Toplu Kitap Ekleme",`${Wn.length} eit kitap eklendi (Toplam ${on} adet): ${dt}`)}const jn=oe.current.filter(dt=>!It.has(dt.id));if(jn.length>0){const dt=new Set(jn.map(L=>L.id)),on=Ae.current.filter(L=>dt.has(L.bookId)&&!Mn.has(`${L.bookId}_${L.borrower}`));on.forEach(L=>ln.add(`${L.bookId}_${L.borrower}`));const at=((x=z.notificationTypes)==null?void 0:x.bookDelete)!==!1,p=((K=z.notificationTypes)==null?void 0:K.bookBulkDelete)!==!1,O=((Q=z.notificationTypes)==null?void 0:Q.loanReturn)!==!1;(at||p||O)&&jn.length>0&&rt(jn,on,z)}r.forEach(dt=>{var at;const on=oe.current.find(p=>p.id===dt.id);on&&(on.title!==dt.title||on.author!==dt.author||on.category!==dt.category)&&(at=z.notificationTypes)!=null&&at.bookUpdate&&R("info","Kitap Gncellendi",`${dt.title} kitab gncellendi.`)})}if(Vt){const dn=new Set(Be.current.map(dt=>`${dt.name}_${dt.studentNumber||""}`)),It=new Set(d.map(dt=>`${dt.name}_${dt.studentNumber||""}`)),hn=Te.current,$n=hn!=null&&hn.applied?hn.students:new Set,Wn=d.filter(dt=>{const on=`${dt.name}_${dt.studentNumber||""}`;if(dn.has(on))return!1;const at=xa(dt);return!$n.has(at)});if(Wn.length>0&&((ke=z.notificationTypes)!=null&&ke.studentAdd))if(Wn.length===1){const dt=Wn[0];R("success","renci Eklendi",`${dt.name} ${dt.surname||""}`.trim()+" rencisi eklendi.")}else{const dt=Wn.map(on=>Dl(on));R("success","Toplu renci Ekleme",`${Wn.length} renci eklendi: ${Ri(dt,6)}`)}const jn=Be.current.filter(dt=>!It.has(`${dt.name}_${dt.studentNumber||""}`));if(jn.length>0){jn.map(L=>Dl(L));const dt=new Set;jn.forEach(L=>{const E=Dl(L);E&&dt.add(Yi(E)),L.name&&dt.add(Yi(L.name)),L.surname&&dt.add(Yi(`${L.name} ${L.surname}`.trim()))});const on=Ae.current.filter(L=>{if(!L.borrower)return!1;const E=Yi(L.borrower);return dt.has(E)});on.forEach(L=>ln.add(`${L.bookId}_${L.borrower}`));const at=((Ye=z.notificationTypes)==null?void 0:Ye.studentDelete)!==!1,p=((ae=z.notificationTypes)==null?void 0:ae.studentBulkDelete)!==!1,O=((ct=z.notificationTypes)==null?void 0:ct.loanReturn)!==!1;(at||p||O)&&jn.length>0&&Dt(jn,on,z)}d.forEach(dt=>{var at;const on=Be.current.find(p=>p.name===dt.name&&p.studentNumber===dt.studentNumber);on&&(on.name!==dt.name||on.surname!==dt.surname||on.class!==dt.class||on.branch!==dt.branch)&&(at=z.notificationTypes)!=null&&at.studentUpdate&&R("info","renci Gncellendi",`${dt.name} ${dt.surname||""}`.trim()+" rencisi gncellendi.")})}if(rn){const dn=new Set(Ae.current.map(at=>`${at.bookId}_${at.borrower}`)),It=Te.current,hn=It!=null&&It.applied?It.loans:new Set,$n=o.filter(at=>{const p=`${at.bookId}_${at.borrower}`;if(dn.has(p))return!1;const O=fa(at);return!hn.has(O)});if($n.length>0&&((Wt=z.notificationTypes)!=null&&Wt.loanBorrow)){const at=new Map;if($n.forEach(p=>{const O=new Date(p.dueDate),L=new Date;L.setHours(0,0,0,0),O.setHours(0,0,0,0);const E=Math.ceil((O.getTime()-L.getTime())/(1e3*60*60*24));at.has(p.borrower)||at.set(p.borrower,[]),at.get(p.borrower).push({bookTitle:p.title,days:E})}),$n.length===1){const p=$n[0],O=((Jt=(ht=at.get(p.borrower))==null?void 0:ht[0])==null?void 0:Jt.days)??null;R("success","Kitap dn Verildi",`${p.title} kitab ${p.borrower} rencisine${O!==null?` ${O} gn`:""} sreyle dn verildi.`)}else{const p=Array.from(at.entries()).map(([O,L])=>{const E=L.map(je=>je.bookTitle);return`${O} (${L.length} kitap: ${Ri(E,4)})`}).join(" | ");R("success","Toplu dn lemi",`Toplam ${$n.length} dn kayd (${at.size} renci) oluturuldu: ${p}`)}}const Wn=Ae.current.filter(at=>!Mn.has(`${at.bookId}_${at.borrower}`)),jn=[],dt=[];if(Wn.forEach(at=>{const p=`${at.bookId}_${at.borrower}`;if(ln.has(p))return;const O=o.find(L=>L.bookId===at.bookId&&L.borrower===at.borrower);O?jn.push({deleted:at,new:O}):dt.push(at)}),jn.length>0&&((sn=z.notificationTypes)!=null&&sn.loanExtend))if(jn.length===1){const{deleted:at,new:p}=jn[0],O=new Date(at.dueDate),L=new Date(p.dueDate),E=Math.ceil((L.getTime()-O.getTime())/(1e3*60*60*24));R("info","Teslim Tarihi Uzatld",`${p.title} kitab iin ${p.borrower} rencisinin teslim tarihi ${E} gn uzatld.`)}else{const at=jn.map(({deleted:p,new:O})=>{const L=new Date(p.dueDate),E=new Date(O.dueDate),je=Math.ceil((E.getTime()-L.getTime())/(1e3*60*60*24));return`${O.title}  ${O.borrower} (+${je} gn)`});R("info","Toplu Teslim Tarihi Uzatma",`Toplam ${jn.length} dn kaydnn teslim tarihi uzatld: ${Ri(at,5)}`)}if(console.log(" Teslim al kontrol - actualDeletedLoans:",dt.length),dt.length>0){console.log(" Teslim al bildirimi oluturuluyor, loans:",dt);const at=_u(dt);if(dt.length===1){const p=dt[0];console.log(" TEK teslim al bildirimi:",p.title),R("success","Kitap Teslim Alnd",`${p.title} kitab ${p.borrower} rencisinden teslim alnd.`,void 0,!0)}else console.log(" TOPLU teslim al bildirimi:",dt.length,"adet"),R("success","Toplu dn Silme",`Toplam ${dt.length} dn kayd (${at.size} renci) listeden kaldrld: ${Hu(at)}`,void 0,!0)}else console.log(" Teslim al bildirimi oluturulmad - actualDeletedLoans bo");o.forEach(at=>{var je,St;const p=ua(at.dueDate),O=`${at.bookId}_${at.borrower}`,L=Ae.current.find(Rt=>Rt.bookId===at.bookId&&Rt.borrower===at.borrower),E=L?ua(L.dueDate):null;p<0?(Xt&&vt)===!1&&(Xt||E===null||E>=0)&&!zt.current.has(O)&&(je=z.notificationTypes)!=null&&je.overdue&&(R("error","Geciken dn",`${at.title} kitab ${at.borrower} tarafndan gecikti.`),zt.current.add(O)):zt.current.delete(O),p>=0&&p<=3&&(Xt&&vt)===!1&&(E===null||E>3)&&(St=z.notificationTypes)!=null&&St.dueSoon&&R("warning","Teslim Tarihi Yaklayor",`${at.title} kitab ${at.borrower} tarafndan ${p===0?"bugn":p===1?"yarn":`${p} gn iinde`} teslim edilmeli.`)});const on=new Set(o.map(at=>`${at.bookId}_${at.borrower}`));zt.current.forEach(at=>{on.has(at)||zt.current.delete(at)})}oe.current=r,Ae.current=o,Be.current=d,ye.current=!0,Ve.current=!0,jt.current=!0},[r,o,d,t,c]);const g=z=>{Et(U=>{const pe=typeof z=="function"?z(U):z;try{const Fe=$u(t==null?void 0:t.username);localStorage.setItem(Fe,JSON.stringify(pe))}catch{}return pe})},R=(z,U,pe,Fe,Je)=>{var Xt;if(console.log(" addNotification arld:",{title:U,type:z,kind:Fe,bypassSettings:Je,notifications:c.notifications}),!Je&&!c.notifications){console.log(" Ana anahtar kapal, bildirim oluturulmad");return}const Vt=Fe??S0(U);if(console.log(" Resolved kind:",Vt),Vt==="misc"){console.log(" misc kind, bildirim oluturulmad");return}if(!Je&&((Xt=c.notificationTypes)==null?void 0:Xt[Vt])===!1){console.log(" Bildirim tr kapal:",Vt);return}console.log(" Bildirim oluturuluyor:",U);const rn={id:`notif_${Date.now()}_${Math.random()}`,type:z,title:U,message:pe,timestamp:new Date,read:!1,kind:Vt};g(vt=>[rn,...vt].slice(0,100))},J=z=>{g(U=>U.map(pe=>pe.id===z?{...pe,read:!0}:pe))},te=()=>{g(z=>z.map(U=>({...U,read:!0})))},ge=()=>{g([]);const z=Date.now();nn.current=z,localStorage.setItem(Pu(t==null?void 0:t.username),String(z));const U=r.map(pa).filter(Boolean),pe=d.map(xa).filter(Boolean),Fe=o.map(fa).filter(Boolean);localStorage.setItem(ha(t==null?void 0:t.username),JSON.stringify({books:U,students:pe,loans:Fe}));const Je=o.filter(Vt=>ua(Vt.dueDate)<0).map(Vt=>`${Vt.bookId}_${Vt.borrower}`).filter(Boolean);localStorage.setItem(Ku(t==null?void 0:t.username),JSON.stringify({overdueLoanKeys:Je,savedAt:z})),wt.current={overdueLoanKeys:new Set(Je),applied:!0},Te.current={books:new Set(U),students:new Set(pe),loans:new Set(Fe),applied:!0},oe.current=r,Ae.current=o,Be.current=d,ye.current=!0,jt.current=!0,Ve.current=!0,zt.current.clear(),Je.forEach(Vt=>zt.current.add(Vt))},v=a.useCallback(z=>{N(z),t&&localStorage.setItem(sf(t.username),JSON.stringify(z))},[t]);a.useEffect(()=>{const z=localStorage.getItem("kutuphane_user");if(z)try{const U=JSON.parse(z);xe.get("/auth/verify").then(async pe=>{n(pe),D(!0),localStorage.setItem("kutuphane_user",JSON.stringify(pe)),await Y(pe.username)}).catch(()=>{localStorage.removeItem("kutuphane_user"),n(null),ee()})}catch(U){console.error("Kullanc bilgisi yklenemedi:",U),localStorage.removeItem("kutuphane_user"),ee()}return()=>{ee()}},[]);const $=async(z,U)=>{k(!0);try{const Fe=await xe.post("/auth/login",{username:z,password:U});localStorage.setItem("kutuphane_user",JSON.stringify(Fe));try{await xe.post("/filesystem/cleanup-old-folders",{username:Fe.username})}catch{}try{await xe.post("/record-types/sync",{username:Fe.username})}catch(Je){console.error("Kayt tipleri gncellenemedi:",Je)}document.cookie=`kutuphane_session=${z}; path=/; max-age=${30*24*60*60}; SameSite=Lax`,f(!0),setTimeout(()=>{n(Fe),Zt(`${Fe.username} olarak giri yapld`,3e3),Fe.usedRecoveryCode&&setTimeout(()=>{V(!0),Ne("Kurtarma Kodu ile Giri Yapld","Gvenliiniz iin ifrenizi profil ayarlarndan deitirebilirsiniz","warning","")},1200),setTimeout(async()=>{f(!1),D(!0),await Ut(),await Y(Fe.username)},500)},800)}catch(pe){throw k(!1),f(!1),pe}},le=async()=>{f(!0),D(!1),ee();try{await xe.post("/auth/logout")}catch(z){console.error("Logout hatas:",z)}localStorage.removeItem("kutuphane_user"),setTimeout(()=>{n(null),i([]),l([]),u([]),h([]),Zt("k yapld",2e3),f(!1)},500)},Le=async()=>{if((t==null?void 0:t.role)==="STUDENT")throw new Error("renciler senkronizasyon yapamaz");const z=await xe.post("/admin/sync/students");return await Ut(),z.updatedCount},Ke=async()=>{if((t==null?void 0:t.role)==="STUDENT")throw new Error("renciler senkronizasyon yapamaz");return(await xe.post("/admin/sync/personel")).updatedCount},Ze=async()=>{if((t==null?void 0:t.role)==="STUDENT")throw new Error("renciler senkronizasyon yapamaz");const z=await xe.post("/admin/sync/books");return await Ut(),z.updatedCount},Mt=async z=>{var U,pe;if((t==null?void 0:t.role)==="STUDENT"){Zt("renciler kitap ekleyemez veya dzenleyemez",3e3);return}z.id?(await xe.put(`/books/${z.id}`,{title:z.title,author:z.author,category:z.category,totalQuantity:z.quantity,healthyCount:z.healthyCount,damagedCount:z.damagedCount,lostCount:z.lostCount,personelName:(t==null?void 0:t.username)||""}),Zt("Kitap baaryla gncellendi",3e3),((U=c.notificationTypes)==null?void 0:U.bookUpdate)!==!1&&R("success","Kitap Gncellendi",`${z.title} kitab baaryla gncellendi.`)):(await xe.post("/books",{title:z.title,author:z.author,category:z.category,quantity:z.quantity,healthyCount:z.healthyCount,damagedCount:z.damagedCount,lostCount:z.lostCount,personelName:(t==null?void 0:t.username)||""}),Zt("Kitap baaryla eklendi",3e3),((pe=c.notificationTypes)==null?void 0:pe.bookAdd)!==!1&&R("success","Kitap Eklendi",`${z.title} kitab baaryla eklendi.`)),await Ut()},en=(z,U)=>{if(z===0)return;const pe=U>0?`${z} kitap ve ${U} dn kayd silindi`:`${z} kitap silindi`;Ne("Baarl",pe,"success","")},tn=async(z,U)=>{if((t==null?void 0:t.role)==="STUDENT"){Ne("Hata","renciler kitap silemez","error","");return}let pe=null;try{pe=await xe.get(`/books/${z}`)}catch(Je){const Vt=Je instanceof Error?Je.message:"Kitap bilgileri alnamad.";Ne("Hata",Vt,"error","");return}const Fe=Array.isArray(pe.loans)?pe.loans:[];if(!(U!=null&&U.skipConfirm)&&Fe.length>0){me({book:pe,bookId:z,loans:Fe,silent:U==null?void 0:U.silent}),de(!0);return}await _n(z,pe,U)},_n=async(z,U,pe)=>{tt(!0);try{await xe.delete(`/books/${z}?personelName=${encodeURIComponent((t==null?void 0:t.username)||"")}`);const Fe=U.loans&&U.loans.length>0?`${U.title} kitab ve ${U.loans.length} dn kayd silindi`:`${U.title} kitab silindi`;pe!=null&&pe.silent||Ne("Baarl",Fe,"success",""),pe!=null&&pe.deferRefresh||await Ut()}catch(Fe){const Je=Fe instanceof Error?Fe.message:"Kitap silinirken bir hata olutu.";if(pe!=null&&pe.suppressErrorInfo)throw new Error(Je);Ne("Hata",Je,"error","")}finally{tt(!1)}};if(!t)return e.jsxs("div",{className:`app-shell ${y?"transitioning":""}`,children:[e.jsx("header",{className:"login-page-header",children:e.jsxs("div",{children:[e.jsx("h1",{children:"Ktphane Ynetim Sistemi"}),e.jsx("p",{children:"Ltfen giri yapn"})]})}),e.jsx(ku,{onLogin:$,busy:C}),S&&e.jsx("p",{className:"status-bar",children:S}),y&&e.jsx("div",{className:"transition-overlay",children:e.jsxs("div",{className:"transition-content",children:[e.jsx("div",{className:"transition-spinner","aria-hidden":"true"}),e.jsx("div",{className:"transition-progress","aria-hidden":"true",children:e.jsx("div",{className:"transition-progress-bar"})}),e.jsx("p",{children:"Giri yaplyor..."})]})})]});if(t.role==="STUDENT")return le(),e.jsxs("div",{className:`app-shell ${y?"transitioning":""}`,children:[e.jsx("header",{style:{display:"flex",justifyContent:"space-between",alignItems:"center",marginBottom:"32px"},children:e.jsxs("div",{children:[e.jsx("h1",{children:"Ktphane Ynetim Sistemi"}),e.jsx("p",{style:{color:"#dc2626",fontSize:"14px"},children:"renciler login olamaz. Sadece personel ve yneticiler login olabilir."})]})}),e.jsx(ku,{onLogin:$,busy:C}),S&&e.jsx("p",{className:"status-bar",children:S})]});const Ln=t.role==="personel"?"Personel":t.role==="ADMIN"?"Ynetici":t.role,Kt=t.role==="ADMIN"||t.role==="Admin",cn=c.notifications&&!Kt,pn=r.length,nr=r.reduce((z,U)=>z+(U.quantity||0),0)+o.filter(z=>z.remainingDays>0).length,Gt=d.length,Zn=o.filter(z=>z.remainingDays>0).length,Cn=r.filter(z=>z.quantity>0).length;return e.jsxs("div",{className:`app-shell ${b?"show-content":""} ${y?"transitioning":""}`,children:[e.jsxs("header",{className:"main-header",children:[e.jsxs("div",{className:"header-top",children:[e.jsxs("div",{className:"header-left",children:[e.jsx("h1",{children:"Ktphane Ynetim Paneli"}),e.jsxs("div",{className:"user-info",children:[e.jsx("button",{type:"button",className:`user-avatar ${q?"active":""}`,onClick:()=>V(z=>!z),title:"Profil kartn a",children:e.jsx("span",{children:t.username.charAt(0).toUpperCase()})}),e.jsxs("div",{className:"user-details",children:[e.jsx("p",{className:"user-name",children:e.jsx("strong",{children:t.username})}),e.jsx("p",{className:"user-role",children:Ln})]})]})]}),e.jsx("div",{className:"header-right",children:e.jsxs("div",{className:"header-actions",children:[e.jsx("div",{className:`search-container ${re?"expanded":""}`,children:re?e.jsx("input",{ref:De,type:"text",className:"search-input-expanded",placeholder:"Kitaplar, renciler, dnlerde ara...",value:Oe,onChange:z=>{Re(z.target.value),Bn(z.target.value)},onKeyDown:z=>{z.key==="Escape"&&(ce(!1),Re(""),xt({books:[],students:[],loans:[]}))}}):e.jsx("button",{className:"icon-button search-button",onClick:()=>{ce(!0),ve("all")},title:"Ara",children:e.jsxs("svg",{width:"20",height:"20",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:[e.jsx("circle",{cx:"11",cy:"11",r:"8"}),e.jsx("path",{d:"m21 21-4.35-4.35"})]})})}),cn&&e.jsxs("button",{className:"icon-button",onClick:()=>Bt(!0),title:"Bildirimler",style:{position:"relative"},children:[e.jsxs("svg",{width:"20",height:"20",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:[e.jsx("path",{d:"M18 8A6 6 0 0 0 6 8c0 7-3 9-3 9h18s-3-2-3-9"}),e.jsx("path",{d:"M13.73 21a2 2 0 0 1-3.46 0"})]}),Ee.filter(z=>!z.read).length>0&&e.jsx("span",{style:{position:"absolute",top:"-4px",right:"-4px",background:"#ef4444",color:"white",borderRadius:"10px",padding:"2px 6px",fontSize:"10px",fontWeight:700,minWidth:"18px",textAlign:"center",lineHeight:"14px"},children:Ee.filter(z=>!z.read).length})]}),e.jsx("button",{className:"icon-button",onClick:()=>M(!0),title:"Ayarlar",children:e.jsxs("svg",{width:"20",height:"20",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:[e.jsx("circle",{cx:"12",cy:"12",r:"3"}),e.jsx("path",{d:"M12.22 2h-.44a2 2 0 0 0-2 2v.18a2 2 0 0 1-1 1.73l-.43.25a2 2 0 0 1-2 0l-.15-.08a2 2 0 0 0-2.73.73l-.22.38a2 2 0 0 0 .73 2.73l.15.1a2 2 0 0 1 1 1.72v.51a2 2 0 0 1-1 1.74l-.15.09a2 2 0 0 0-.73 2.73l.22.38a2 2 0 0 0 2.73.73l.15-.08a2 2 0 0 1 2 0l.43.25a2 2 0 0 1 1 1.73V20a2 2 0 0 0 2 2h.44a2 2 0 0 0 2-2v-.18a2 2 0 0 1 1-1.73l.43-.25a2 2 0 0 1 2 0l.15.08a2 2 0 0 0 2.73-.73l.22-.39a2 2 0 0 0-.73-2.73l-.15-.08a2 2 0 0 1-1-1.74v-.5a2 2 0 0 1 1-1.74l.15-.09a2 2 0 0 0 .73-2.73l-.22-.38a2 2 0 0 0-2.73-.73l-.15.08a2 2 0 0 1-2 0l-.43-.25a2 2 0 0 1-1-1.73V4a2 2 0 0 0-2-2z"})]})})]})})]}),e.jsxs("div",{className:"header-stats",children:[e.jsxs("div",{className:"stat-card stat-card-books",children:[e.jsx("div",{className:"stat-icon",style:{background:"rgba(255, 255, 255, 0.2)"},children:e.jsxs("svg",{width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:[e.jsx("path",{d:"M4 19.5A2.5 2.5 0 0 1 6.5 17H20"}),e.jsx("path",{d:"M6.5 2H20v20H6.5A2.5 2.5 0 0 1 4 19.5v-15A2.5 2.5 0 0 1 6.5 2z"})]})}),e.jsxs("div",{className:"stat-content",children:[e.jsx("div",{className:"stat-value",children:pn}),e.jsx("div",{className:"stat-label",children:"Kitap eidi"})]})]}),e.jsxs("div",{className:"stat-card stat-card-quantity",children:[e.jsx("div",{className:"stat-icon",style:{background:"rgba(255, 255, 255, 0.2)"},children:e.jsxs("svg",{width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:[e.jsx("path",{d:"M4 19.5A2.5 2.5 0 0 1 6.5 17H20"}),e.jsx("path",{d:"M6.5 2H20v20H6.5A2.5 2.5 0 0 1 4 19.5v-15A2.5 2.5 0 0 1 6.5 2z"}),e.jsx("path",{d:"M9 9h6"}),e.jsx("path",{d:"M9 13h6"})]})}),e.jsxs("div",{className:"stat-content",children:[e.jsx("div",{className:"stat-value",children:nr}),e.jsx("div",{className:"stat-label",children:"Toplam Kitap Adeti"})]})]}),e.jsxs("div",{className:"stat-card stat-card-students",children:[e.jsx("div",{className:"stat-icon",style:{background:"rgba(255, 255, 255, 0.2)"},children:e.jsxs("svg",{width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:[e.jsx("path",{d:"M17 21v-2a4 4 0 0 0-4-4H5a4 4 0 0 0-4 4v2"}),e.jsx("circle",{cx:"9",cy:"7",r:"4"}),e.jsx("path",{d:"M23 21v-2a4 4 0 0 0-3-3.87"}),e.jsx("path",{d:"M16 3.13a4 4 0 0 1 0 7.75"})]})}),e.jsxs("div",{className:"stat-content",children:[e.jsx("div",{className:"stat-value",children:Gt}),e.jsx("div",{className:"stat-label",children:"Toplam renci"})]})]}),e.jsxs("div",{className:"stat-card stat-card-loans",children:[e.jsx("div",{className:"stat-icon",style:{background:"rgba(255, 255, 255, 0.2)"},children:e.jsxs("svg",{width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:[e.jsx("path",{d:"M2 3h6a4 4 0 0 1 4 4v14a3 3 0 0 0-3-3H2z"}),e.jsx("path",{d:"M22 3h-6a4 4 0 0 0-4 4v14a3 3 0 0 1 3-3h7z"})]})}),e.jsxs("div",{className:"stat-content",children:[e.jsx("div",{className:"stat-value",children:Zn}),e.jsx("div",{className:"stat-label",children:"Aktif dn"})]})]}),e.jsxs("div",{className:"stat-card stat-card-available",children:[e.jsx("div",{className:"stat-icon",style:{background:"rgba(255, 255, 255, 0.2)"},children:e.jsxs("svg",{width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:[e.jsx("path",{d:"M9 11l3 3L22 4"}),e.jsx("path",{d:"M21 12v7a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h11"})]})}),e.jsxs("div",{className:"stat-content",children:[e.jsx("div",{className:"stat-value",children:Cn}),e.jsx("div",{className:"stat-label",children:"Msait Kitap"})]})]})]})]}),q&&e.jsx(b0,{user:t,onClose:()=>V(!1),onLogout:()=>{V(!1),le()}}),ie&&e.jsx(j0,{user:t,onClose:()=>M(!1),onAutoRecordSettingsChanged:z=>{((t==null?void 0:t.role)==="ADMIN"||(t==null?void 0:t.role)==="PERSONEL")&&Y(t.username,z)},notificationSettings:c,onNotificationSettingsChange:v,onShowInfo:Ne}),st&&cn&&e.jsx(v0,{notifications:Ee,onClose:()=>Bt(!1),onMarkAsRead:J,onMarkAllAsRead:te,onClearAll:ge,notificationSettings:c}),ft&&e.jsx(ao,{book:ft,students:d,loans:o,books:r,personelName:t.username,onClose:()=>ze(null),onRefresh:Ut,onAddNotification:R}),e.jsx(lc,{isOpen:!!lt,onClose:()=>{bt(!1),be(null)},student:lt,loans:o,books:r,personelName:(t==null?void 0:t.username)||"",onRefresh:Ut,onBookClick:Xe,maxPenaltyPoints:ot,loading:Ge||Ft,studentHistory:Lt,historyEntries:(Lt==null?void 0:Lt.entries)??[]}),$e&&e.jsx(ao,{book:$e,students:d,loans:o,books:r,personelName:(t==null?void 0:t.username)||"",onClose:()=>Xe(null),onRefresh:Ut,onAddNotification:R}),re&&Oe.trim()&&e.jsxs("div",{className:"search-preview",children:[e.jsxs("div",{className:"search-preview-header",children:[e.jsxs("h3",{children:['Arama Sonular: "',Oe,'"']}),e.jsx("div",{className:"search-preview-header-right",children:e.jsxs("div",{className:"search-preview-filter-buttons",children:[e.jsxs("button",{className:`search-filter-btn ${fe==="all"?"active":""}`,onClick:()=>ve("all"),children:[e.jsxs("svg",{width:"16",height:"16",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",children:[e.jsx("circle",{cx:"11",cy:"11",r:"8"}),e.jsx("path",{d:"m21 21-4.35-4.35"})]}),"Tm"]}),e.jsxs("button",{className:`search-filter-btn ${fe==="books"?"active":""}`,onClick:()=>ve("books"),children:[e.jsxs("svg",{width:"16",height:"16",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",children:[e.jsx("path",{d:"M4 19.5A2.5 2.5 0 0 1 6.5 17H20"}),e.jsx("path",{d:"M6.5 2H20v20H6.5A2.5 2.5 0 0 1 4 19.5v-15A2.5 2.5 0 0 1 6.5 2z"})]}),"Kitaplar (",_e.books.length,")"]}),e.jsxs("button",{className:`search-filter-btn ${fe==="students"?"active":""}`,onClick:()=>ve("students"),children:[e.jsxs("svg",{width:"16",height:"16",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",children:[e.jsx("path",{d:"M20 21v-2a4 4 0 0 0-4-4H8a4 4 0 0 0-4 4v2"}),e.jsx("circle",{cx:"12",cy:"7",r:"4"})]}),"renciler (",_e.students.length,")"]}),e.jsxs("button",{className:`search-filter-btn ${fe==="loans"?"active":""}`,onClick:()=>ve("loans"),children:[e.jsxs("svg",{width:"16",height:"16",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",children:[e.jsx("path",{d:"M4 19.5A2.5 2.5 0 0 1 6.5 17H20"}),e.jsx("path",{d:"M6.5 2H20v20H6.5A2.5 2.5 0 0 1 4 19.5v-15A2.5 2.5 0 0 1 6.5 2z"}),e.jsx("path",{d:"M9 9l3 3 3-3"})]}),"dnler (",_e.loans.length,")"]})]})})]}),e.jsx("div",{className:"search-preview-content",children:_e.books.length===0&&_e.students.length===0&&_e.loans.length===0?e.jsx("div",{className:"search-preview-empty",children:e.jsx("p",{children:"Arama sonucu bulunamad."})}):e.jsxs(e.Fragment,{children:[_e.books.length>0&&(fe==="all"||fe==="books")&&e.jsxs("div",{className:"search-preview-section",children:[e.jsxs("h4",{children:["Kitaplar (",_e.books.length,")"]}),e.jsxs("div",{className:"search-preview-list",children:[_e.books.slice(0,10).map(z=>e.jsxs("div",{className:"search-preview-card",children:[e.jsxs("button",{className:"search-preview-detail-button",onClick:U=>{U.stopPropagation(),ze(z)},title:"Kitap knyesine git",children:[e.jsxs("svg",{width:"16",height:"16",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",children:[e.jsx("path",{d:"M1 12s4-8 11-8 11 8 11 8-4 8-11 8-11-8-11-8z"}),e.jsx("circle",{cx:"12",cy:"12",r:"3"})]}),"Detayl Grntle"]}),e.jsxs("div",{className:"search-preview-card-content",children:[e.jsxs("div",{className:"search-preview-card-header",children:[e.jsx("div",{className:"search-preview-card-icon",style:{background:"rgba(59, 130, 246, 0.1)"},children:e.jsxs("svg",{width:"32",height:"32",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",children:[e.jsx("path",{d:"M4 19.5A2.5 2.5 0 0 1 6.5 17H20"}),e.jsx("path",{d:"M6.5 2H20v20H6.5A2.5 2.5 0 0 1 4 19.5v-15A2.5 2.5 0 0 1 6.5 2z"})]})}),e.jsxs("div",{className:"search-preview-card-title-section",children:[e.jsx("h3",{className:"search-preview-card-title",children:z.title}),e.jsx("p",{className:"search-preview-card-subtitle",children:z.author})]})]}),e.jsxs("div",{className:"search-preview-card-info",children:[e.jsxs("div",{className:"search-preview-card-info-item",children:[e.jsxs("svg",{width:"18",height:"18",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",children:[e.jsx("path",{d:"M4 19.5A2.5 2.5 0 0 1 6.5 17H20"}),e.jsx("path",{d:"M6.5 2H20v20H6.5A2.5 2.5 0 0 1 4 19.5v-15A2.5 2.5 0 0 1 6.5 2z"})]}),e.jsx("span",{children:z.category})]}),e.jsxs("div",{className:"search-preview-card-info-item",style:{backgroundColor:z.quantity>0?"rgba(59, 130, 246, 0.1)":"rgba(239, 68, 68, 0.1)",color:z.quantity>0?"#1e40af":"#dc2626",padding:"4px 8px",borderRadius:"6px",display:"flex",alignItems:"center",gap:"6px",fontWeight:600},children:[e.jsxs("svg",{width:"16",height:"16",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",children:[e.jsx("path",{d:"M2 3h6a4 4 0 0 1 4 4v14a3 3 0 0 0-3-3H2z"}),e.jsx("path",{d:"M22 3h-6a4 4 0 0 0-4 4v14a3 3 0 0 1 3-3h7z"})]}),e.jsxs("span",{children:["Mevcut: ",e.jsx("strong",{children:z.quantity})]})]}),e.jsxs("div",{className:"search-preview-card-info-item",style:{backgroundColor:(z.healthyCount??0)>0?"rgba(16, 185, 129, 0.1)":"rgba(239, 68, 68, 0.1)",color:(z.healthyCount??0)>0?"#065f46":"#dc2626",padding:"4px 8px",borderRadius:"6px",display:"flex",alignItems:"center",gap:"6px",fontWeight:600},children:[e.jsxs("svg",{width:"16",height:"16",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",children:[e.jsx("path",{d:"M9 11l3 3L22 4"}),e.jsx("path",{d:"M21 12v7a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h11"})]}),e.jsxs("span",{children:["Salam: ",e.jsx("strong",{children:z.healthyCount??0})]})]})]})]})]},z.id)),_e.books.length>10&&e.jsxs("div",{className:"search-preview-more",children:["+",_e.books.length-10," daha fazla"]})]})]}),_e.students.length>0&&(fe==="all"||fe==="students")&&e.jsxs("div",{className:"search-preview-section",children:[e.jsxs("h4",{children:["renciler (",_e.students.length,")"]}),e.jsxs("div",{className:"search-preview-list",children:[_e.students.slice(0,10).map((z,U)=>e.jsxs("div",{className:"search-preview-card",children:[e.jsxs("button",{className:"search-preview-detail-button",onClick:pe=>{pe.stopPropagation(),be(z),bt(!0)},title:"renci knyesine git",children:[e.jsxs("svg",{width:"16",height:"16",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",children:[e.jsx("path",{d:"M1 12s4-8 11-8 11 8 11 8-4 8-11 8-11-8-11-8z"}),e.jsx("circle",{cx:"12",cy:"12",r:"3"})]}),"Detayl Grntle"]}),e.jsxs("div",{className:"search-preview-card-content",children:[e.jsxs("div",{className:"search-preview-card-header",children:[e.jsx("div",{className:"search-preview-card-icon",style:{background:"rgba(16, 185, 129, 0.1)"},children:e.jsxs("svg",{width:"32",height:"32",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",children:[e.jsx("path",{d:"M20 21v-2a4 4 0 0 0-4-4H8a4 4 0 0 0-4 4v2"}),e.jsx("circle",{cx:"12",cy:"7",r:"4"})]})}),e.jsxs("div",{className:"search-preview-card-title-section",children:[e.jsx("h3",{className:"search-preview-card-title",children:`${z.name} ${z.surname}`.trim()}),e.jsxs("p",{className:"search-preview-card-subtitle",children:[z.class&&`Snf ${z.class}`,z.class&&z.branch&&"  ",z.branch&&z.branch]})]})]}),e.jsxs("div",{className:"search-preview-card-info",children:[e.jsxs("div",{className:"search-preview-card-info-item",children:[e.jsxs("svg",{width:"18",height:"18",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",children:[e.jsx("path",{d:"M4 19.5A2.5 2.5 0 0 1 6.5 17H20"}),e.jsx("path",{d:"M6.5 2H20v20H6.5A2.5 2.5 0 0 1 4 19.5v-15A2.5 2.5 0 0 1 6.5 2z"}),e.jsx("path",{d:"M9 9l3 3 3-3"})]}),e.jsxs("span",{children:["dn: ",e.jsx("strong",{className:"search-preview-card-info-value",children:z.borrowed||0})]})]}),e.jsxs("div",{className:"search-preview-card-info-item",children:[e.jsxs("svg",{width:"18",height:"18",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",children:[e.jsx("path",{d:"M10.29 3.86L1.82 18a2 2 0 0 0 1.71 3h16.94a2 2 0 0 0 1.71-3L13.71 3.86a2 2 0 0 0-3.42 0z"}),e.jsx("line",{x1:"12",y1:"9",x2:"12",y2:"13"}),e.jsx("line",{x1:"12",y1:"17",x2:"12.01",y2:"17"})]}),e.jsxs("span",{children:["Geciken: ",e.jsx("strong",{className:`search-preview-card-info-value ${(z.late||0)>0?"search-preview-card-info-value-late":"search-preview-card-info-value-normal"}`,children:z.late||0})]})]})]})]})]},U)),_e.students.length>10&&e.jsxs("div",{className:"search-preview-more",children:["+",_e.students.length-10," daha fazla"]})]})]}),_e.loans.length>0&&(fe==="all"||fe==="loans")&&e.jsxs("div",{className:"search-preview-section",children:[e.jsxs("h4",{children:["dnler (",_e.loans.length,")"]}),e.jsxs("div",{className:"search-preview-list",children:[_e.loans.slice(0,10).map((z,U)=>{const pe=r.find(Fe=>Fe.title===z.title&&Fe.author===z.author);return e.jsxs("div",{className:"search-preview-card",children:[e.jsxs("button",{className:"search-preview-detail-button",onClick:Fe=>{Fe.stopPropagation(),pe&&ze(pe)},title:"Kitap knyesine git",disabled:!pe,children:[e.jsxs("svg",{width:"16",height:"16",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",children:[e.jsx("path",{d:"M1 12s4-8 11-8 11 8 11 8-4 8-11 8-11-8-11-8z"}),e.jsx("circle",{cx:"12",cy:"12",r:"3"})]}),"Detayl Grntle"]}),e.jsxs("div",{className:"search-preview-card-content",children:[e.jsxs("div",{className:"search-preview-card-header",children:[e.jsx("div",{className:"search-preview-card-icon",style:{background:"rgba(245, 158, 11, 0.1)"},children:e.jsxs("svg",{width:"32",height:"32",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",children:[e.jsx("path",{d:"M4 19.5A2.5 2.5 0 0 1 6.5 17H20"}),e.jsx("path",{d:"M6.5 2H20v20H6.5A2.5 2.5 0 0 1 4 19.5v-15A2.5 2.5 0 0 1 6.5 2z"}),e.jsx("path",{d:"M9 9l3 3 3-3"})]})}),e.jsxs("div",{className:"search-preview-card-title-section",children:[e.jsx("h3",{className:"search-preview-card-title",children:z.title}),e.jsx("p",{className:"search-preview-card-subtitle",children:z.author})]})]}),e.jsxs("div",{className:"search-preview-card-info",children:[e.jsxs("div",{className:"search-preview-card-info-item",children:[e.jsxs("svg",{width:"18",height:"18",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",children:[e.jsx("path",{d:"M20 21v-2a4 4 0 0 0-4-4H8a4 4 0 0 0-4 4v2"}),e.jsx("circle",{cx:"12",cy:"7",r:"4"})]}),e.jsx("span",{children:z.borrower})]}),z.remainingDays!==null&&e.jsxs("div",{className:"search-preview-card-info-item",style:{color:z.remainingDays<0?"#dc2626":z.remainingDays<=3?"#f59e0b":"#10b981"},children:[e.jsxs("svg",{width:"18",height:"18",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",children:[e.jsx("circle",{cx:"12",cy:"12",r:"10"}),e.jsx("polyline",{points:"12 6 12 12 16 14"})]}),e.jsx("span",{children:z.remainingDays>0?`${z.remainingDays} gn kald`:`${Math.abs(z.remainingDays)} gn gecikmi`})]})]})]})]},U)}),_e.loans.length>10&&e.jsxs("div",{className:"search-preview-more",children:["+",_e.loans.length-10," daha fazla"]})]})]})]})})]}),e.jsx("div",{className:`main-content ${b?"fade-in":""}`,children:t.role==="ADMIN"||t.role==="Admin"?e.jsx(y0,{}):e.jsx(l0,{books:r,loans:o,bookStats:s,studentStats:d,onRefresh:Ut,onSearch:Tt,onSyncStudents:Le,onSyncpersonel:Ke,onSyncBooks:Ze,onAddBook:Mt,onDeleteBook:tn,onBulkDeleteBooksSuccess:en,userRole:t.role,userName:t.username,onAddNotification:R,onShowInfo:Ne})}),S&&e.jsx("p",{className:"status-bar",children:S}),y&&e.jsx("div",{className:"transition-overlay",children:e.jsxs("div",{className:"transition-content",children:[e.jsx("div",{className:"transition-spinner","aria-hidden":"true"}),e.jsx("div",{className:"transition-progress","aria-hidden":"true",children:e.jsx("div",{className:"transition-progress-bar"})}),e.jsx("p",{children:"Ynlendiriliyor..."})]})}),e.jsx(ur,{isOpen:gt,title:"Kitap Silme Onay",icon:"",onConfirm:async()=>{if(!Ce)return;const z=Ce.book,U=Ce.bookId||z.id,pe=Ce.silent;de(!1),me(null),await _n(U,z,{silent:pe})},onCancel:()=>{de(!1),me(null)},confirmText:"Sil",cancelText:"ptal",confirmButtonColor:"#ef4444",loading:Ct,children:Ce&&e.jsx(e.Fragment,{children:Ce.loans.length>0?e.jsxs(e.Fragment,{children:[e.jsxs("div",{style:{fontSize:"14px",color:"#475569",marginBottom:"16px",lineHeight:"1.6"},children:[e.jsx("strong",{children:Ce.book.title})," kitab u rencilerde dn grnyor:"]}),e.jsx("div",{style:{maxHeight:"360px",overflowY:"auto",marginBottom:"16px"},children:e.jsxs("div",{style:{padding:"12px",backgroundColor:"#fef3c7",borderRadius:"8px",border:"1px solid #fbbf24",marginBottom:"12px"},children:[e.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"12px",marginBottom:"8px"},children:[e.jsx("div",{className:"selection-checkbox selected",style:{pointerEvents:"none"},children:e.jsx("span",{children:""})}),e.jsxs("div",{style:{flex:1},children:[e.jsxs("div",{style:{fontSize:"14px",color:"#92400e",fontWeight:600},children:[Ce.book.title," - ",Ce.loans.length," dn"]}),Ce.book.author&&e.jsx("div",{style:{fontSize:"12px",color:"#475569"},children:Ce.book.author})]})]}),e.jsx("ul",{style:{margin:0,paddingLeft:"20px",fontSize:"13px",color:"#78350f"},children:Ce.loans.map((z,U)=>{const pe=z.dueDate?new Date(z.dueDate).toLocaleDateString("tr-TR"):"-";return e.jsxs("li",{style:{marginBottom:"6px"},children:[e.jsx("strong",{children:z.borrower})," (Teslim: ",pe,")"]},`loan-${U}`)})})]})}),e.jsxs("div",{style:{fontSize:"13px",color:"#64748b",padding:"12px",backgroundColor:"#f1f5f9",borderRadius:"8px"},children:[e.jsxs("strong",{children:[Ce.loans.length," dn kayd"]})," bu ilemle birlikte silinecek."]})]}):e.jsxs("div",{style:{fontSize:"14px",color:"#475569",lineHeight:"1.6"},children:[e.jsx("strong",{children:Ce.book.title})," kitabn silmek istediinize emin misiniz? Bu ilem geri alnamaz."]})})}),e.jsx(zi,{isOpen:At,title:(H==null?void 0:H.title)||"Bilgi",icon:H==null?void 0:H.icon,type:(H==null?void 0:H.type)||"info",onClose:()=>{T(!1),A(null)},children:e.jsx("div",{style:{fontSize:"14px",color:"#475569",lineHeight:"1.6"},children:H==null?void 0:H.message})})]})};ga.createRoot(document.getElementById("root")).render(e.jsx(Bf.StrictMode,{children:e.jsx(C0,{})}));
